(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var R3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v2(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var xm={exports:{}},Fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx;function hb(){if(wx)return Fu;wx=1;var A=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(r,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:A,type:r,key:u,ref:l!==void 0?l:null,props:o}}return Fu.Fragment=s,Fu.jsx=n,Fu.jsxs=n,Fu}var Bx;function fb(){return Bx||(Bx=1,xm.exports=hb()),xm.exports}var e=fb(),vm={exports:{}},rA={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function mb(){if(yx)return rA;yx=1;var A=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),B=Symbol.iterator;function x(J){return J===null||typeof J!="object"?null:(J=B&&J[B]||J["@@iterator"],typeof J=="function"?J:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,L={};function F(J,U,X){this.props=J,this.context=U,this.refs=L,this.updater=X||C}F.prototype.isReactComponent={},F.prototype.setState=function(J,U){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,U,"setState")},F.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function Q(){}Q.prototype=F.prototype;function _(J,U,X){this.props=J,this.context=U,this.refs=L,this.updater=X||C}var te=_.prototype=new Q;te.constructor=_,N(te,F.prototype),te.isPureReactComponent=!0;var O=Array.isArray;function k(){}var P={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function D(J,U,X){var ee=X.ref;return{$$typeof:A,type:J,key:U,ref:ee!==void 0?ee:null,props:X}}function G(J,U){return D(J.type,U,J.props)}function T(J){return typeof J=="object"&&J!==null&&J.$$typeof===A}function R(J){var U={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(X){return U[X]})}var V=/\/+/g;function Z(J,U){return typeof J=="object"&&J!==null&&J.key!=null?R(""+J.key):U.toString(36)}function ue(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(k,k):(J.status="pending",J.then(function(U){J.status==="pending"&&(J.status="fulfilled",J.value=U)},function(U){J.status==="pending"&&(J.status="rejected",J.reason=U)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function S(J,U,X,ee,re){var fe=typeof J;(fe==="undefined"||fe==="boolean")&&(J=null);var ve=!1;if(J===null)ve=!0;else switch(fe){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(J.$$typeof){case A:case s:ve=!0;break;case w:return ve=J._init,S(ve(J._payload),U,X,ee,re)}}if(ve)return re=re(J),ve=ee===""?"."+Z(J,0):ee,O(re)?(X="",ve!=null&&(X=ve.replace(V,"$&/")+"/"),S(re,U,X,"",function(st){return st})):re!=null&&(T(re)&&(re=G(re,X+(re.key==null||J&&J.key===re.key?"":(""+re.key).replace(V,"$&/")+"/")+ve)),U.push(re)),1;ve=0;var xe=ee===""?".":ee+":";if(O(J))for(var Ce=0;Ce<J.length;Ce++)ee=J[Ce],fe=xe+Z(ee,Ce),ve+=S(ee,U,X,fe,re);else if(Ce=x(J),typeof Ce=="function")for(J=Ce.call(J),Ce=0;!(ee=J.next()).done;)ee=ee.value,fe=xe+Z(ee,Ce++),ve+=S(ee,U,X,fe,re);else if(fe==="object"){if(typeof J.then=="function")return S(ue(J),U,X,ee,re);throw U=String(J),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ve}function M(J,U,X){if(J==null)return J;var ee=[],re=0;return S(J,ee,"","",function(fe){return U.call(X,fe,re++)}),ee}function Y(J){if(J._status===-1){var U=J._result;U=U(),U.then(function(X){(J._status===0||J._status===-1)&&(J._status=1,J._result=X)},function(X){(J._status===0||J._status===-1)&&(J._status=2,J._result=X)}),J._status===-1&&(J._status=0,J._result=U)}if(J._status===1)return J._result.default;throw J._result}var le=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},de={map:M,forEach:function(J,U,X){M(J,function(){U.apply(this,arguments)},X)},count:function(J){var U=0;return M(J,function(){U++}),U},toArray:function(J){return M(J,function(U){return U})||[]},only:function(J){if(!T(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return rA.Activity=v,rA.Children=de,rA.Component=F,rA.Fragment=n,rA.Profiler=l,rA.PureComponent=_,rA.StrictMode=r,rA.Suspense=h,rA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,rA.__COMPILER_RUNTIME={__proto__:null,c:function(J){return P.H.useMemoCache(J)}},rA.cache=function(J){return function(){return J.apply(null,arguments)}},rA.cacheSignal=function(){return null},rA.cloneElement=function(J,U,X){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var ee=N({},J.props),re=J.key;if(U!=null)for(fe in U.key!==void 0&&(re=""+U.key),U)!E.call(U,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&U.ref===void 0||(ee[fe]=U[fe]);var fe=arguments.length-2;if(fe===1)ee.children=X;else if(1<fe){for(var ve=Array(fe),xe=0;xe<fe;xe++)ve[xe]=arguments[xe+2];ee.children=ve}return D(J.type,re,ee)},rA.createContext=function(J){return J={$$typeof:u,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:o,_context:J},J},rA.createElement=function(J,U,X){var ee,re={},fe=null;if(U!=null)for(ee in U.key!==void 0&&(fe=""+U.key),U)E.call(U,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(re[ee]=U[ee]);var ve=arguments.length-2;if(ve===1)re.children=X;else if(1<ve){for(var xe=Array(ve),Ce=0;Ce<ve;Ce++)xe[Ce]=arguments[Ce+2];re.children=xe}if(J&&J.defaultProps)for(ee in ve=J.defaultProps,ve)re[ee]===void 0&&(re[ee]=ve[ee]);return D(J,fe,re)},rA.createRef=function(){return{current:null}},rA.forwardRef=function(J){return{$$typeof:d,render:J}},rA.isValidElement=T,rA.lazy=function(J){return{$$typeof:w,_payload:{_status:-1,_result:J},_init:Y}},rA.memo=function(J,U){return{$$typeof:m,type:J,compare:U===void 0?null:U}},rA.startTransition=function(J){var U=P.T,X={};P.T=X;try{var ee=J(),re=P.S;re!==null&&re(X,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(k,le)}catch(fe){le(fe)}finally{U!==null&&X.types!==null&&(U.types=X.types),P.T=U}},rA.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},rA.use=function(J){return P.H.use(J)},rA.useActionState=function(J,U,X){return P.H.useActionState(J,U,X)},rA.useCallback=function(J,U){return P.H.useCallback(J,U)},rA.useContext=function(J){return P.H.useContext(J)},rA.useDebugValue=function(){},rA.useDeferredValue=function(J,U){return P.H.useDeferredValue(J,U)},rA.useEffect=function(J,U){return P.H.useEffect(J,U)},rA.useEffectEvent=function(J){return P.H.useEffectEvent(J)},rA.useId=function(){return P.H.useId()},rA.useImperativeHandle=function(J,U,X){return P.H.useImperativeHandle(J,U,X)},rA.useInsertionEffect=function(J,U){return P.H.useInsertionEffect(J,U)},rA.useLayoutEffect=function(J,U){return P.H.useLayoutEffect(J,U)},rA.useMemo=function(J,U){return P.H.useMemo(J,U)},rA.useOptimistic=function(J,U){return P.H.useOptimistic(J,U)},rA.useReducer=function(J,U,X){return P.H.useReducer(J,U,X)},rA.useRef=function(J){return P.H.useRef(J)},rA.useState=function(J){return P.H.useState(J)},rA.useSyncExternalStore=function(J,U,X){return P.H.useSyncExternalStore(J,U,X)},rA.useTransition=function(){return P.H.useTransition()},rA.version="19.2.4",rA}var Cx;function P0(){return Cx||(Cx=1,vm.exports=mb()),vm.exports}var se=P0();const Qi=v2(se);var bm={exports:{}},Su={},wm={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function pb(){return Nx||(Nx=1,(function(A){function s(S,M){var Y=S.length;S.push(M);e:for(;0<Y;){var le=Y-1>>>1,de=S[le];if(0<l(de,M))S[le]=M,S[Y]=de,Y=le;else break e}}function n(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var M=S[0],Y=S.pop();if(Y!==M){S[0]=Y;e:for(var le=0,de=S.length,J=de>>>1;le<J;){var U=2*(le+1)-1,X=S[U],ee=U+1,re=S[ee];if(0>l(X,Y))ee<de&&0>l(re,X)?(S[le]=re,S[ee]=Y,le=ee):(S[le]=X,S[U]=Y,le=U);else if(ee<de&&0>l(re,Y))S[le]=re,S[ee]=Y,le=ee;else break e}}return M}function l(S,M){var Y=S.sortIndex-M.sortIndex;return Y!==0?Y:S.id-M.id}if(A.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;A.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();A.unstable_now=function(){return u.now()-d}}var h=[],m=[],w=1,v=null,B=3,x=!1,C=!1,N=!1,L=!1,F=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function te(S){for(var M=n(m);M!==null;){if(M.callback===null)r(m);else if(M.startTime<=S)r(m),M.sortIndex=M.expirationTime,s(h,M);else break;M=n(m)}}function O(S){if(N=!1,te(S),!C)if(n(h)!==null)C=!0,k||(k=!0,R());else{var M=n(m);M!==null&&ue(O,M.startTime-S)}}var k=!1,P=-1,E=5,D=-1;function G(){return L?!0:!(A.unstable_now()-D<E)}function T(){if(L=!1,k){var S=A.unstable_now();D=S;var M=!0;try{e:{C=!1,N&&(N=!1,Q(P),P=-1),x=!0;var Y=B;try{t:{for(te(S),v=n(h);v!==null&&!(v.expirationTime>S&&G());){var le=v.callback;if(typeof le=="function"){v.callback=null,B=v.priorityLevel;var de=le(v.expirationTime<=S);if(S=A.unstable_now(),typeof de=="function"){v.callback=de,te(S),M=!0;break t}v===n(h)&&r(h),te(S)}else r(h);v=n(h)}if(v!==null)M=!0;else{var J=n(m);J!==null&&ue(O,J.startTime-S),M=!1}}break e}finally{v=null,B=Y,x=!1}M=void 0}}finally{M?R():k=!1}}}var R;if(typeof _=="function")R=function(){_(T)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Z=V.port2;V.port1.onmessage=T,R=function(){Z.postMessage(null)}}else R=function(){F(T,0)};function ue(S,M){P=F(function(){S(A.unstable_now())},M)}A.unstable_IdlePriority=5,A.unstable_ImmediatePriority=1,A.unstable_LowPriority=4,A.unstable_NormalPriority=3,A.unstable_Profiling=null,A.unstable_UserBlockingPriority=2,A.unstable_cancelCallback=function(S){S.callback=null},A.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<S?Math.floor(1e3/S):5},A.unstable_getCurrentPriorityLevel=function(){return B},A.unstable_next=function(S){switch(B){case 1:case 2:case 3:var M=3;break;default:M=B}var Y=B;B=M;try{return S()}finally{B=Y}},A.unstable_requestPaint=function(){L=!0},A.unstable_runWithPriority=function(S,M){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var Y=B;B=S;try{return M()}finally{B=Y}},A.unstable_scheduleCallback=function(S,M,Y){var le=A.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?le+Y:le):Y=le,S){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Y+de,S={id:w++,callback:M,priorityLevel:S,startTime:Y,expirationTime:de,sortIndex:-1},Y>le?(S.sortIndex=Y,s(m,S),n(h)===null&&S===n(m)&&(N?(Q(P),P=-1):N=!0,ue(O,Y-le))):(S.sortIndex=de,s(h,S),C||x||(C=!0,k||(k=!0,R()))),S},A.unstable_shouldYield=G,A.unstable_wrapCallback=function(S){var M=B;return function(){var Y=B;B=M;try{return S.apply(this,arguments)}finally{B=Y}}}})(Bm)),Bm}var jx;function gb(){return jx||(jx=1,wm.exports=pb()),wm.exports}var ym={exports:{}},Js={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx;function xb(){if(Fx)return Js;Fx=1;var A=P0();function s(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(h,m,w){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:h,containerInfo:m,implementation:w}}var u=A.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Js.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Js.createPortal=function(h,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(s(299));return o(h,m,null,w)},Js.flushSync=function(h){var m=u.T,w=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=m,r.p=w,r.d.f()}},Js.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(h,m))},Js.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Js.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var w=m.as,v=d(w,m.crossOrigin),B=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;w==="style"?r.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:B,fetchPriority:x}):w==="script"&&r.d.X(h,{crossOrigin:v,integrity:B,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Js.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var w=d(m.as,m.crossOrigin);r.d.M(h,{crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(h)},Js.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var w=m.as,v=d(w,m.crossOrigin);r.d.L(h,w,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Js.preloadModule=function(h,m){if(typeof h=="string")if(m){var w=d(m.as,m.crossOrigin);r.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(h)},Js.requestFormReset=function(h){r.d.r(h)},Js.unstable_batchedUpdates=function(h,m){return h(m)},Js.useFormState=function(h,m,w){return u.H.useFormState(h,m,w)},Js.useFormStatus=function(){return u.H.useHostTransitionStatus()},Js.version="19.2.4",Js}var Sx;function vb(){if(Sx)return ym.exports;Sx=1;function A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A)}catch(s){console.error(s)}}return A(),ym.exports=xb(),ym.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx;function bb(){if(Qx)return Su;Qx=1;var A=gb(),s=P0(),n=vb();function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function o(t){var a=t,i=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(i=a.return),t=a.return;while(t)}return a.tag===3?i:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function d(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function h(t){if(o(t)!==t)throw Error(r(188))}function m(t){var a=t.alternate;if(!a){if(a=o(t),a===null)throw Error(r(188));return a!==t?null:t}for(var i=t,c=a;;){var p=i.return;if(p===null)break;var b=p.alternate;if(b===null){if(c=p.return,c!==null){i=c;continue}break}if(p.child===b.child){for(b=p.child;b;){if(b===i)return h(p),t;if(b===c)return h(p),a;b=b.sibling}throw Error(r(188))}if(i.return!==c.return)i=p,c=b;else{for(var H=!1,ae=p.child;ae;){if(ae===i){H=!0,i=p,c=b;break}if(ae===c){H=!0,c=p,i=b;break}ae=ae.sibling}if(!H){for(ae=b.child;ae;){if(ae===i){H=!0,i=b,c=p;break}if(ae===c){H=!0,c=b,i=p;break}ae=ae.sibling}if(!H)throw Error(r(189))}}if(i.alternate!==c)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?t:a}function w(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=w(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,B=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),_=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function R(t){return t===null||typeof t!="object"?null:(t=T&&t[T]||t["@@iterator"],typeof t=="function"?t:null)}var V=Symbol.for("react.client.reference");function Z(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===V?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case N:return"Fragment";case F:return"Profiler";case L:return"StrictMode";case O:return"Suspense";case k:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case _:return t.displayName||"Context";case Q:return(t._context.displayName||"Context")+".Consumer";case te:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return a=t.displayName||null,a!==null?a:Z(t.type)||"Memo";case E:a=t._payload,t=t._init;try{return Z(t(a))}catch{}}return null}var ue=Array.isArray,S=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},le=[],de=-1;function J(t){return{current:t}}function U(t){0>de||(t.current=le[de],le[de]=null,de--)}function X(t,a){de++,le[de]=t.current,t.current=a}var ee=J(null),re=J(null),fe=J(null),ve=J(null);function xe(t,a){switch(X(fe,a),X(re,t),X(ee,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Vg(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Vg(a),t=zg(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}U(ee),X(ee,t)}function Ce(){U(ee),U(re),U(fe)}function st(t){t.memoizedState!==null&&X(ve,t);var a=ee.current,i=zg(a,t.type);a!==i&&(X(re,t),X(ee,i))}function _e(t){re.current===t&&(U(ee),U(re)),ve.current===t&&(U(ve),yu._currentValue=Y)}var $e,Ue;function At(t){if($e===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);$e=a&&a[1]||"",Ue=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+t+Ue}var Le=!1;function K(t,a){if(!t||Le)return"";Le=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Je){var ze=Je}Reflect.construct(t,[],dt)}else{try{dt.call()}catch(Je){ze=Je}t.call(dt.prototype)}}else{try{throw Error()}catch(Je){ze=Je}(dt=t())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Je){if(Je&&ze&&typeof Je.stack=="string")return[Je.stack,ze.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=c.DetermineComponentFrameRoot(),H=b[0],ae=b[1];if(H&&ae){var be=H.split(`
`),Ve=ae.split(`
`);for(p=c=0;c<be.length&&!be[c].includes("DetermineComponentFrameRoot");)c++;for(;p<Ve.length&&!Ve[p].includes("DetermineComponentFrameRoot");)p++;if(c===be.length||p===Ve.length)for(c=be.length-1,p=Ve.length-1;1<=c&&0<=p&&be[c]!==Ve[p];)p--;for(;1<=c&&0<=p;c--,p--)if(be[c]!==Ve[p]){if(c!==1||p!==1)do if(c--,p--,0>p||be[c]!==Ve[p]){var at=`
`+be[c].replace(" at new "," at ");return t.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",t.displayName)),at}while(1<=c&&0<=p);break}}}finally{Le=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?At(i):""}function Ge(t,a){switch(t.tag){case 26:case 27:case 5:return At(t.type);case 16:return At("Lazy");case 13:return t.child!==a&&a!==null?At("Suspense Fallback"):At("Suspense");case 19:return At("SuspenseList");case 0:case 15:return K(t.type,!1);case 11:return K(t.type.render,!1);case 1:return K(t.type,!0);case 31:return At("Activity");default:return""}}function Ye(t){try{var a="",i=null;do a+=Ge(t,i),i=t,t=t.return;while(t);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ie=Object.prototype.hasOwnProperty,Ne=A.unstable_scheduleCallback,Te=A.unstable_cancelCallback,qe=A.unstable_shouldYield,ot=A.unstable_requestPaint,xt=A.unstable_now,Ct=A.unstable_getCurrentPriorityLevel,Tt=A.unstable_ImmediatePriority,Yt=A.unstable_UserBlockingPriority,Pt=A.unstable_NormalPriority,jt=A.unstable_LowPriority,Qt=A.unstable_IdlePriority,Oe=A.log,yt=A.unstable_setDisableYieldValue,mt=null,wt=null;function Ft(t){if(typeof Oe=="function"&&yt(t),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(mt,t)}catch{}}var Fe=Math.clz32?Math.clz32:gt,vt=Math.log,ft=Math.LN2;function gt(t){return t>>>=0,t===0?32:31-(vt(t)/ft|0)|0}var Jt=256,MA=262144,VA=4194304;function uA(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Kt(t,a,i){var c=t.pendingLanes;if(c===0)return 0;var p=0,b=t.suspendedLanes,H=t.pingedLanes;t=t.warmLanes;var ae=c&134217727;return ae!==0?(c=ae&~b,c!==0?p=uA(c):(H&=ae,H!==0?p=uA(H):i||(i=ae&~t,i!==0&&(p=uA(i))))):(ae=c&~b,ae!==0?p=uA(ae):H!==0?p=uA(H):i||(i=c&~t,i!==0&&(p=uA(i)))),p===0?0:a!==0&&a!==p&&(a&b)===0&&(b=p&-p,i=a&-a,b>=i||b===32&&(i&4194048)!==0)?a:p}function lA(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function An(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oa(){var t=VA;return VA<<=1,(VA&62914560)===0&&(VA=4194304),t}function Ea(t){for(var a=[],i=0;31>i;i++)a.push(t);return a}function Ia(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ot(t,a,i,c,p,b){var H=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var ae=t.entanglements,be=t.expirationTimes,Ve=t.hiddenUpdates;for(i=H&~i;0<i;){var at=31-Fe(i),dt=1<<at;ae[at]=0,be[at]=-1;var ze=Ve[at];if(ze!==null)for(Ve[at]=null,at=0;at<ze.length;at++){var Je=ze[at];Je!==null&&(Je.lane&=-536870913)}i&=~dt}c!==0&&gs(t,c,0),b!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=b&~(H&~a))}function gs(t,a,i){t.pendingLanes|=a,t.suspendedLanes&=~a;var c=31-Fe(a);t.entangledLanes|=a,t.entanglements[c]=t.entanglements[c]|1073741824|i&261930}function ns(t,a){var i=t.entangledLanes|=a;for(t=t.entanglements;i;){var c=31-Fe(i),p=1<<c;p&a|t[c]&a&&(t[c]|=a),i&=~p}}function La(t,a){var i=a&-a;return i=(i&42)!==0?1:YA(i),(i&(t.suspendedLanes|a))!==0?0:i}function YA(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function SA(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Xt(){var t=M.p;return t!==0?t:(t=window.event,t===void 0?32:fx(t.type))}function me(t,a){var i=M.p;try{return M.p=t,a()}finally{M.p=i}}var Ze=Math.random().toString(36).slice(2),et="__reactFiber$"+Ze,rt="__reactProps$"+Ze,Xe="__reactContainer$"+Ze,_t="__reactEvents$"+Ze,Vt="__reactListeners$"+Ze,zt="__reactHandles$"+Ze,gA="__reactResources$"+Ze,RA="__reactMarker$"+Ze;function Da(t){delete t[et],delete t[rt],delete t[_t],delete t[Vt],delete t[zt]}function zA(t){var a=t[et];if(a)return a;for(var i=t.parentNode;i;){if(a=i[Xe]||i[et]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(t=Wg(t);t!==null;){if(i=t[et])return i;t=Wg(t)}return a}t=i,i=t.parentNode}return null}function Fa(t){if(t=t[et]||t[Xe]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function ma(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(r(33))}function rs(t){var a=t[gA];return a||(a=t[gA]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ca(t){t[RA]=!0}var Us=new Set,tr={};function kn(t,a){mn(t,a),mn(t+"Capture",a)}function mn(t,a){for(tr[t]=a,t=0;t<a.length;t++)Us.add(a[t])}var go=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Di={},ml={};function Yr(t){return ie.call(ml,t)?!0:ie.call(Di,t)?!1:go.test(t)?ml[t]=!0:(Di[t]=!0,!1)}function Zr(t,a,i){if(Yr(a))if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+i)}}function ZA(t,a,i){if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+i)}}function _s(t,a,i,c){if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(a,i,""+c)}}function is(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ti(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Hi(t,a,i){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,b=c.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return p.call(this)},set:function(H){i=""+H,b.call(this,H)}}),Object.defineProperty(t,a,{enumerable:c.enumerable}),{getValue:function(){return i},setValue:function(H){i=""+H},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Mi(t){if(!t._valueTracker){var a=Ti(t)?"checked":"value";t._valueTracker=Hi(t,a,""+t[a])}}function Rs(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var i=a.getValue(),c="";return t&&(c=Ti(t)?t.checked?"true":"false":t.value),t=c,t!==i?(a.setValue(t),!0):!1}function pn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ls=/[\n"\\]/g;function Ga(t){return t.replace(ls,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Wr(t,a,i,c,p,b,H,ae){t.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?t.type=H:t.removeAttribute("type"),a!=null?H==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+is(a)):t.value!==""+is(a)&&(t.value=""+is(a)):H!=="submit"&&H!=="reset"||t.removeAttribute("value"),a!=null?$r(t,H,is(a)):i!=null?$r(t,H,is(i)):c!=null&&t.removeAttribute("value"),p==null&&b!=null&&(t.defaultChecked=!!b),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?t.name=""+is(ae):t.removeAttribute("name")}function pl(t,a,i,c,p,b,H,ae){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.type=b),a!=null||i!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){Mi(t);return}i=i!=null?""+is(i):"",a=a!=null?""+is(a):i,ae||a===t.value||(t.value=a),t.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=ae?t.checked:!!c,t.defaultChecked=!!c,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(t.name=H),Mi(t)}function $r(t,a,i){a==="number"&&pn(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function Ar(t,a,i,c){if(t=t.options,a){a={};for(var p=0;p<i.length;p++)a["$"+i[p]]=!0;for(i=0;i<t.length;i++)p=a.hasOwnProperty("$"+t[i].value),t[i].selected!==p&&(t[i].selected=p),p&&c&&(t[i].defaultSelected=!0)}else{for(i=""+is(i),a=null,p=0;p<t.length;p++){if(t[p].value===i){t[p].selected=!0,c&&(t[p].defaultSelected=!0);return}a!==null||t[p].disabled||(a=t[p])}a!==null&&(a.selected=!0)}}function Oi(t,a,i){if(a!=null&&(a=""+is(a),a!==t.value&&(t.value=a),i==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=i!=null?""+is(i):""}function gl(t,a,i,c){if(a==null){if(c!=null){if(i!=null)throw Error(r(92));if(ue(c)){if(1<c.length)throw Error(r(93));c=c[0]}i=c}i==null&&(i=""),a=i}i=is(a),t.defaultValue=i,c=t.textContent,c===i&&c!==""&&c!==null&&(t.value=c),Mi(t)}function gn(t,a){if(a){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=a;return}}t.textContent=a}var xo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xl(t,a,i){var c=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":c?t.setProperty(a,i):typeof i!="number"||i===0||xo.has(a)?a==="float"?t.cssFloat=i:t[a]=(""+i).trim():t[a]=i+"px"}function vl(t,a,i){if(a!=null&&typeof a!="object")throw Error(r(62));if(t=t.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&i[p]!==c&&xl(t,p,c)}else for(var b in a)a.hasOwnProperty(b)&&xl(t,b,a[b])}function an(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ei=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ti=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cr(t){return ti.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function WA(){}var ki=null;function Ai(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gt=null,_n=null;function bl(t){var a=Fa(t);if(a&&(t=a.stateNode)){var i=t[rt]||null;e:switch(t=a.stateNode,a.type){case"input":if(Wr(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ga(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var c=i[a];if(c!==t&&c.form===t.form){var p=c[rt]||null;if(!p)throw Error(r(90));Wr(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<i.length;a++)c=i[a],c.form===t.form&&Rs(c)}break e;case"textarea":Oi(t,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&Ar(t,!!i.multiple,a,!1)}}}var Es=!1;function _i(t,a,i){if(Es)return t(a,i);Es=!0;try{var c=t(a);return c}finally{if(Es=!1,(Gt!==null||_n!==null)&&(Nd(),Gt&&(a=Gt,t=_n,_n=Gt=null,bl(a),t)))for(a=0;a<t.length;a++)bl(t[a])}}function ar(t,a){var i=t.stateNode;if(i===null)return null;var c=i[rt]||null;if(c===null)return null;i=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(r(231,a,typeof i));return i}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nr=!1;if(xs)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Nr=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Nr=!1}var xn=null,Ri=null,sr=null;function nr(){if(sr)return sr;var t,a=Ri,i=a.length,c,p="value"in xn?xn.value:xn.textContent,b=p.length;for(t=0;t<i&&a[t]===p[t];t++);var H=i-t;for(c=1;c<=H&&a[i-c]===p[b-c];c++);return sr=p.slice(t,1<c?1-c:void 0)}function sn(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function ai(){return!0}function rr(){return!1}function Ta(t){function a(i,c,p,b,H){this._reactName=i,this._targetInst=p,this.type=c,this.nativeEvent=b,this.target=H,this.currentTarget=null;for(var ae in t)t.hasOwnProperty(ae)&&(i=t[ae],this[ae]=i?i(b):b[ae]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ai:rr,this.isPropagationStopped=rr,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),a}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vs=Ta(Ps),Rn=v({},Ps,{view:0,detail:0}),Pi=Ta(Rn),Fr,Rt,oA,Ks=v({},Rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oA&&(oA&&t.type==="mousemove"?(Fr=t.screenX-oA.screenX,Rt=t.screenY-oA.screenY):Rt=Fr=0,oA=t),Fr)},movementY:function(t){return"movementY"in t?t.movementY:Rt}}),vn=Ta(Ks),nn=v({},Ks,{dataTransfer:0}),si=Ta(nn),ge=v({},Rn,{relatedTarget:0}),Be=Ta(ge),oe=v({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),ye=Ta(oe),He=v({},Ps,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ct=Ta(He),St=v({},Ps,{data:0}),dA=Ta(St),BA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ja(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Vs[t])?!!a[t]:!1}function Pn(){return Ja}var ir=v({},Rn,{key:function(t){if(t.key){var a=BA[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=sn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ha[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(t){return t.type==="keypress"?sn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vo=Ta(ir),ni=v({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wl=Ta(ni),y=v({},Rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn}),q=Ta(y),pe=v({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=Ta(pe),ke=v({},Ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=Ta(ke),pt=v({},Ps,{newState:0,oldState:0}),Ut=Ta(pt),kt=[9,13,27,32],aA=xs&&"CompositionEvent"in window,eA=null;xs&&"documentMode"in document&&(eA=document.documentMode);var yA=xs&&"TextEvent"in window&&!eA,ua=xs&&(!aA||eA&&8<eA&&11>=eA),pa=" ",Sa=!1;function os(t,a){switch(t){case"keyup":return kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _a(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bs=!1;function rn(t,a){switch(t){case"compositionend":return _a(a);case"keypress":return a.which!==32?null:(Sa=!0,pa);case"textInput":return t=a.data,t===pa&&Sa?null:t;default:return null}}function lr(t,a){if(bs)return t==="compositionend"||!aA&&os(t,a)?(t=nr(),sr=Ri=xn=null,bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ua&&a.locale!=="ko"?null:a.data;default:return null}}var zo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bl(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!zo[t.type]:a==="textarea"}function yl(t,a,i,c){Gt?_n?_n.push(c):_n=[c]:Gt=c,a=Id(a,"onChange"),0<a.length&&(i=new vs("onChange","change",null,i,c),t.push({event:i,listeners:a}))}var or=null,Sr=null;function bo(t){Og(t,0)}function Qr(t){var a=ma(t);if(Rs(a))return t}function Xa(t,a){if(t==="change")return a}var Ki=!1;if(xs){var ri;if(xs){var ii="oninput"in document;if(!ii){var Cl=document.createElement("div");Cl.setAttribute("oninput","return;"),ii=typeof Cl.oninput=="function"}ri=ii}else ri=!1;Ki=ri&&(!document.documentMode||9<document.documentMode)}function Is(){or&&(or.detachEvent("onpropertychange",qo),Sr=or=null)}function qo(t){if(t.propertyName==="value"&&Qr(Sr)){var a=[];yl(a,Sr,t,Ai(t)),_i(bo,a)}}function wo(t,a,i){t==="focusin"?(Is(),or=a,Sr=i,or.attachEvent("onpropertychange",qo)):t==="focusout"&&Is()}function Go(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qr(Sr)}function bn(t,a){if(t==="click")return Qr(a)}function Nl(t,a){if(t==="input"||t==="change")return Qr(a)}function Jo(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ws=typeof Object.is=="function"?Object.is:Jo;function wn(t,a){if(ws(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var i=Object.keys(t),c=Object.keys(a);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var p=i[c];if(!ie.call(a,p)||!ws(t[p],a[p]))return!1}return!0}function li(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ls(t,a){var i=li(t);t=0;for(var c;i;){if(i.nodeType===3){if(c=t+i.textContent.length,t<=a&&c>=a)return{node:i,offset:a-t};t=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=li(i)}}function Bs(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Bs(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Ur(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=pn(t.document);a instanceof t.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)t=a.contentWindow;else break;a=pn(t.document)}return a}function Kn(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Er=xs&&"documentMode"in document&&11>=document.documentMode,Vn=null,zn=null,sa=null,Vi=!1;function ys(t,a,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Vi||Vn==null||Vn!==pn(c)||(c=Vn,"selectionStart"in c&&Kn(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),sa&&wn(sa,c)||(sa=c,c=Id(zn,"onSelect"),0<c.length&&(a=new vs("onSelect","select",null,a,i),t.push({event:a,listeners:c}),a.target=Vn)))}function Ya(t,a){var i={};return i[t.toLowerCase()]=a.toLowerCase(),i["Webkit"+t]="webkit"+a,i["Moz"+t]="moz"+a,i}var qn={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionrun:Ya("Transition","TransitionRun"),transitionstart:Ya("Transition","TransitionStart"),transitioncancel:Ya("Transition","TransitionCancel"),transitionend:Ya("Transition","TransitionEnd")},jl={},Fl={};xs&&(Fl=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function ln(t){if(jl[t])return jl[t];if(!qn[t])return t;var a=qn[t],i;for(i in a)if(a.hasOwnProperty(i)&&i in Fl)return jl[t]=a[i];return t}var oi=ln("animationend"),Ir=ln("animationiteration"),ci=ln("animationstart"),Sl=ln("transitionrun"),zi=ln("transitionstart"),ui=ln("transitioncancel"),Ql=ln("transitionend"),on=new Map,zs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zs.push("scrollEnd");function mA(t,a){on.set(t,a),kn(a,[t])}var OA=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},EA=[],da=0,Gn=0;function di(){for(var t=da,a=Gn=da=0;a<t;){var i=EA[a];EA[a++]=null;var c=EA[a];EA[a++]=null;var p=EA[a];EA[a++]=null;var b=EA[a];if(EA[a++]=null,c!==null&&p!==null){var H=c.pending;H===null?p.next=p:(p.next=H.next,H.next=p),c.pending=p}b!==0&&Bo(i,p,b)}}function Lr(t,a,i,c){EA[da++]=t,EA[da++]=a,EA[da++]=i,EA[da++]=c,Gn|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function Ul(t,a,i,c){return Lr(t,a,i,c),Cs(t)}function Dr(t,a){return Lr(t,null,null,a),Cs(t)}function Bo(t,a,i){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i);for(var p=!1,b=t.return;b!==null;)b.childLanes|=i,c=b.alternate,c!==null&&(c.childLanes|=i),b.tag===22&&(t=b.stateNode,t===null||t._visibility&1||(p=!0)),t=b,b=b.return;return t.tag===3?(b=t.stateNode,p&&a!==null&&(p=31-Fe(i),t=b.hiddenUpdates,c=t[p],c===null?t[p]=[a]:c.push(a),a.lane=i|536870912),b):null}function Cs(t){if(50<pu)throw pu=0,Pf=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var cs={};function Xo(t,a,i,c){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(t,a,i,c){return new Xo(t,a,i,c)}function Yo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bn(t,a){var i=t.alternate;return i===null?(i=Ns(t.tag,a,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=a,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,a=t.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function yo(t,a){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,a=i.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function El(t,a,i,c,p,b){var H=0;if(c=t,typeof t=="function")Yo(t)&&(H=1);else if(typeof t=="string")H=tb(t,i,ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case D:return t=Ns(31,i,a,p),t.elementType=D,t.lanes=b,t;case N:return hi(i.children,p,b,a);case L:H=8,p|=24;break;case F:return t=Ns(12,i,a,p|2),t.elementType=F,t.lanes=b,t;case O:return t=Ns(13,i,a,p),t.elementType=O,t.lanes=b,t;case k:return t=Ns(19,i,a,p),t.elementType=k,t.lanes=b,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:H=10;break e;case Q:H=9;break e;case te:H=11;break e;case P:H=14;break e;case E:H=16,c=null;break e}H=29,i=Error(r(130,t===null?"null":typeof t,"")),c=null}return a=Ns(H,i,a,p),a.elementType=t,a.type=c,a.lanes=b,a}function hi(t,a,i,c){return t=Ns(7,t,c,a),t.lanes=i,t}function Co(t,a,i){return t=Ns(6,t,null,a),t.lanes=i,t}function Zo(t){var a=Ns(18,null,null,0);return a.stateNode=t,a}function Il(t,a,i){return a=Ns(4,t.children!==null?t.children:[],t.key,a),a.lanes=i,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Wo=new WeakMap;function yn(t,a){if(typeof t=="object"&&t!==null){var i=Wo.get(t);return i!==void 0?i:(a={value:t,source:a,stack:Ye(a)},Wo.set(t,a),a)}return{value:t,source:a,stack:Ye(a)}}var Ll=[],qi=0,$o=null,No=0,Cn=[],Nn=0,fi=null,jn=1,Fn="";function cn(t,a){Ll[qi++]=No,Ll[qi++]=$o,$o=t,No=a}function sd(t,a,i){Cn[Nn++]=jn,Cn[Nn++]=Fn,Cn[Nn++]=fi,fi=t;var c=jn;t=Fn;var p=32-Fe(c)-1;c&=~(1<<p),i+=1;var b=32-Fe(a)+p;if(30<b){var H=p-p%5;b=(c&(1<<H)-1).toString(32),c>>=H,p-=H,jn=1<<32-Fe(a)+p|i<<p|c,Fn=b+t}else jn=1<<b|i<<p|c,Fn=t}function Xc(t){t.return!==null&&(cn(t,1),sd(t,1,0))}function ec(t){for(;t===$o;)$o=Ll[--qi],Ll[qi]=null,No=Ll[--qi],Ll[qi]=null;for(;t===fi;)fi=Cn[--Nn],Cn[Nn]=null,Fn=Cn[--Nn],Cn[Nn]=null,jn=Cn[--Nn],Cn[Nn]=null}function nd(t,a){Cn[Nn++]=jn,Cn[Nn++]=Fn,Cn[Nn++]=fi,jn=a.id,Fn=a.overflow,fi=t}var us=null,na=null,xA=!1,Ds=null,ba=!1,Jn=Error(r(519));function mi(t){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(yn(a,t)),Jn}function Yc(t){var a=t.stateNode,i=t.type,c=t.memoizedProps;switch(a[et]=t,a[rt]=c,i){case"dialog":wA("cancel",a),wA("close",a);break;case"iframe":case"object":case"embed":wA("load",a);break;case"video":case"audio":for(i=0;i<xu.length;i++)wA(xu[i],a);break;case"source":wA("error",a);break;case"img":case"image":case"link":wA("error",a),wA("load",a);break;case"details":wA("toggle",a);break;case"input":wA("invalid",a),pl(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":wA("invalid",a);break;case"textarea":wA("invalid",a),gl(a,c.value,c.defaultValue,c.children)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||c.suppressHydrationWarning===!0||Pg(a.textContent,i)?(c.popover!=null&&(wA("beforetoggle",a),wA("toggle",a)),c.onScroll!=null&&wA("scroll",a),c.onScrollEnd!=null&&wA("scrollend",a),c.onClick!=null&&(a.onclick=WA),a=!0):a=!1,a||mi(t,!0)}function Tr(t){for(us=t.return;us;)switch(us.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:us=us.return}}function ds(t){if(t!==us)return!1;if(!xA)return Tr(t),xA=!0,!1;var a=t.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||am(t.type,t.memoizedProps)),i=!i),i&&na&&mi(t),Tr(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));na=Zg(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));na=Zg(t)}else a===27?(a=na,Jl(t.type)?(t=lm,lm=null,na=t):na=a):na=us?pr(t.stateNode.nextSibling):null;return!0}function Gi(){na=us=null,xA=!1}function Zc(){var t=Ds;return t!==null&&(Ln===null?Ln=t:Ln.push.apply(Ln,t),Ds=null),t}function Dl(t){Ds===null?Ds=[t]:Ds.push(t)}var tc=J(null),pi=null,cr=null;function gi(t,a,i){X(tc,a._currentValue),a._currentValue=i}function Sn(t){t._currentValue=tc.current,U(tc)}function Tl(t,a,i){for(;t!==null;){var c=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),t===i)break;t=t.return}}function Ji(t,a,i,c){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var b=p.dependencies;if(b!==null){var H=p.child;b=b.firstContext;e:for(;b!==null;){var ae=b;b=p;for(var be=0;be<a.length;be++)if(ae.context===a[be]){b.lanes|=i,ae=b.alternate,ae!==null&&(ae.lanes|=i),Tl(b.return,i,t),c||(H=null);break e}b=ae.next}}else if(p.tag===18){if(H=p.return,H===null)throw Error(r(341));H.lanes|=i,b=H.alternate,b!==null&&(b.lanes|=i),Tl(H,i,t),H=null}else H=p.child;if(H!==null)H.return=p;else for(H=p;H!==null;){if(H===t){H=null;break}if(p=H.sibling,p!==null){p.return=H.return,H=p;break}H=H.return}p=H}}function xi(t,a,i,c){t=null;for(var p=a,b=!1;p!==null;){if(!b){if((p.flags&524288)!==0)b=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var H=p.alternate;if(H===null)throw Error(r(387));if(H=H.memoizedProps,H!==null){var ae=p.type;ws(p.pendingProps.value,H.value)||(t!==null?t.push(ae):t=[ae])}}else if(p===ve.current){if(H=p.alternate,H===null)throw Error(r(387));H.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(yu):t=[yu])}p=p.return}t!==null&&Ji(a,t,i,c),a.flags|=262144}function Ac(t){for(t=t.firstContext;t!==null;){if(!ws(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function vi(t){pi=t,cr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function hs(t){return rd(pi,t)}function ac(t,a){return pi===null&&vi(t),rd(t,a)}function rd(t,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},cr===null){if(t===null)throw Error(r(308));cr=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else cr=cr.next=a;return i}var rf=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(i,c){t.push(c)}};this.abort=function(){a.aborted=!0,t.forEach(function(i){return i()})}},lf=A.unstable_scheduleCallback,of=A.unstable_NormalPriority,Qa={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hl(){return{controller:new rf,data:new Map,refCount:0}}function jo(t){t.refCount--,t.refCount===0&&lf(of,function(){t.controller.abort()})}var Fo=null,sc=0,f=0,g=null;function j(t,a){if(Fo===null){var i=Fo=[];sc=0,f=Jf(),g={status:"pending",value:void 0,then:function(c){i.push(c)}}}return sc++,a.then(I,I),a}function I(){if(--sc===0&&Fo!==null){g!==null&&(g.status="fulfilled");var t=Fo;Fo=null,f=0,g=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function z(t,a){var i=[],c={status:"pending",value:null,reason:null,then:function(p){i.push(p)}};return t.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<i.length;p++)(0,i[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<i.length;p++)(0,i[p])(void 0)}),c}var W=S.S;S.S=function(t,a){dg=xt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&j(t,a),W!==null&&W(t,a)};var $=J(null);function Ae(){var t=$.current;return t!==null?t:ia.pooledCache}function ne(t,a){a===null?X($,$.current):X($,a.pool)}function ce(){var t=Ae();return t===null?null:{parent:Qa._currentValue,pool:t}}var Se=Error(r(460)),Pe=Error(r(474)),Re=Error(r(542)),De={then:function(){}};function ut(t){return t=t.status,t==="fulfilled"||t==="rejected"}function We(t,a,i){switch(i=t[i],i===void 0?t.push(a):i!==a&&(a.then(WA,WA),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,ht(t),t;default:if(typeof a.status=="string")a.then(WA,WA);else{if(t=ia,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,ht(t),t}throw Ie=a,Se}}function Qe(t){try{var a=t._init;return a(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ie=i,Se):i}}var Ie=null;function it(){if(Ie===null)throw Error(r(459));var t=Ie;return Ie=null,t}function ht(t){if(t===Se||t===Re)throw Error(r(483))}var nt=null,Nt=0;function bt(t){var a=Nt;return Nt+=1,nt===null&&(nt=[]),We(nt,t,a)}function Mt(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Bt(t,a){throw a.$$typeof===B?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function IA(t){function a(Me,Ee){if(t){var Ke=Me.deletions;Ke===null?(Me.deletions=[Ee],Me.flags|=16):Ke.push(Ee)}}function i(Me,Ee){if(!t)return null;for(;Ee!==null;)a(Me,Ee),Ee=Ee.sibling;return null}function c(Me){for(var Ee=new Map;Me!==null;)Me.key!==null?Ee.set(Me.key,Me):Ee.set(Me.index,Me),Me=Me.sibling;return Ee}function p(Me,Ee){return Me=Bn(Me,Ee),Me.index=0,Me.sibling=null,Me}function b(Me,Ee,Ke){return Me.index=Ke,t?(Ke=Me.alternate,Ke!==null?(Ke=Ke.index,Ke<Ee?(Me.flags|=67108866,Ee):Ke):(Me.flags|=67108866,Ee)):(Me.flags|=1048576,Ee)}function H(Me){return t&&Me.alternate===null&&(Me.flags|=67108866),Me}function ae(Me,Ee,Ke,lt){return Ee===null||Ee.tag!==6?(Ee=Co(Ke,Me.mode,lt),Ee.return=Me,Ee):(Ee=p(Ee,Ke),Ee.return=Me,Ee)}function be(Me,Ee,Ke,lt){var qt=Ke.type;return qt===N?at(Me,Ee,Ke.props.children,lt,Ke.key):Ee!==null&&(Ee.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===E&&Qe(qt)===Ee.type)?(Ee=p(Ee,Ke.props),Mt(Ee,Ke),Ee.return=Me,Ee):(Ee=El(Ke.type,Ke.key,Ke.props,null,Me.mode,lt),Mt(Ee,Ke),Ee.return=Me,Ee)}function Ve(Me,Ee,Ke,lt){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Ke.containerInfo||Ee.stateNode.implementation!==Ke.implementation?(Ee=Il(Ke,Me.mode,lt),Ee.return=Me,Ee):(Ee=p(Ee,Ke.children||[]),Ee.return=Me,Ee)}function at(Me,Ee,Ke,lt,qt){return Ee===null||Ee.tag!==7?(Ee=hi(Ke,Me.mode,lt,qt),Ee.return=Me,Ee):(Ee=p(Ee,Ke),Ee.return=Me,Ee)}function dt(Me,Ee,Ke){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ee=Co(""+Ee,Me.mode,Ke),Ee.return=Me,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case x:return Ke=El(Ee.type,Ee.key,Ee.props,null,Me.mode,Ke),Mt(Ke,Ee),Ke.return=Me,Ke;case C:return Ee=Il(Ee,Me.mode,Ke),Ee.return=Me,Ee;case E:return Ee=Qe(Ee),dt(Me,Ee,Ke)}if(ue(Ee)||R(Ee))return Ee=hi(Ee,Me.mode,Ke,null),Ee.return=Me,Ee;if(typeof Ee.then=="function")return dt(Me,bt(Ee),Ke);if(Ee.$$typeof===_)return dt(Me,ac(Me,Ee),Ke);Bt(Me,Ee)}return null}function ze(Me,Ee,Ke,lt){var qt=Ee!==null?Ee.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return qt!==null?null:ae(Me,Ee,""+Ke,lt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case x:return Ke.key===qt?be(Me,Ee,Ke,lt):null;case C:return Ke.key===qt?Ve(Me,Ee,Ke,lt):null;case E:return Ke=Qe(Ke),ze(Me,Ee,Ke,lt)}if(ue(Ke)||R(Ke))return qt!==null?null:at(Me,Ee,Ke,lt,null);if(typeof Ke.then=="function")return ze(Me,Ee,bt(Ke),lt);if(Ke.$$typeof===_)return ze(Me,Ee,ac(Me,Ke),lt);Bt(Me,Ke)}return null}function Je(Me,Ee,Ke,lt,qt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Me=Me.get(Ke)||null,ae(Ee,Me,""+lt,qt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case x:return Me=Me.get(lt.key===null?Ke:lt.key)||null,be(Ee,Me,lt,qt);case C:return Me=Me.get(lt.key===null?Ke:lt.key)||null,Ve(Ee,Me,lt,qt);case E:return lt=Qe(lt),Je(Me,Ee,Ke,lt,qt)}if(ue(lt)||R(lt))return Me=Me.get(Ke)||null,at(Ee,Me,lt,qt,null);if(typeof lt.then=="function")return Je(Me,Ee,Ke,bt(lt),qt);if(lt.$$typeof===_)return Je(Me,Ee,Ke,ac(Ee,lt),qt);Bt(Ee,lt)}return null}function Lt(Me,Ee,Ke,lt){for(var qt=null,DA=null,Ht=Ee,cA=Ee=0,jA=null;Ht!==null&&cA<Ke.length;cA++){Ht.index>cA?(jA=Ht,Ht=null):jA=Ht.sibling;var TA=ze(Me,Ht,Ke[cA],lt);if(TA===null){Ht===null&&(Ht=jA);break}t&&Ht&&TA.alternate===null&&a(Me,Ht),Ee=b(TA,Ee,cA),DA===null?qt=TA:DA.sibling=TA,DA=TA,Ht=jA}if(cA===Ke.length)return i(Me,Ht),xA&&cn(Me,cA),qt;if(Ht===null){for(;cA<Ke.length;cA++)Ht=dt(Me,Ke[cA],lt),Ht!==null&&(Ee=b(Ht,Ee,cA),DA===null?qt=Ht:DA.sibling=Ht,DA=Ht);return xA&&cn(Me,cA),qt}for(Ht=c(Ht);cA<Ke.length;cA++)jA=Je(Ht,Me,cA,Ke[cA],lt),jA!==null&&(t&&jA.alternate!==null&&Ht.delete(jA.key===null?cA:jA.key),Ee=b(jA,Ee,cA),DA===null?qt=jA:DA.sibling=jA,DA=jA);return t&&Ht.forEach(function($l){return a(Me,$l)}),xA&&cn(Me,cA),qt}function Wt(Me,Ee,Ke,lt){if(Ke==null)throw Error(r(151));for(var qt=null,DA=null,Ht=Ee,cA=Ee=0,jA=null,TA=Ke.next();Ht!==null&&!TA.done;cA++,TA=Ke.next()){Ht.index>cA?(jA=Ht,Ht=null):jA=Ht.sibling;var $l=ze(Me,Ht,TA.value,lt);if($l===null){Ht===null&&(Ht=jA);break}t&&Ht&&$l.alternate===null&&a(Me,Ht),Ee=b($l,Ee,cA),DA===null?qt=$l:DA.sibling=$l,DA=$l,Ht=jA}if(TA.done)return i(Me,Ht),xA&&cn(Me,cA),qt;if(Ht===null){for(;!TA.done;cA++,TA=Ke.next())TA=dt(Me,TA.value,lt),TA!==null&&(Ee=b(TA,Ee,cA),DA===null?qt=TA:DA.sibling=TA,DA=TA);return xA&&cn(Me,cA),qt}for(Ht=c(Ht);!TA.done;cA++,TA=Ke.next())TA=Je(Ht,Me,cA,TA.value,lt),TA!==null&&(t&&TA.alternate!==null&&Ht.delete(TA.key===null?cA:TA.key),Ee=b(TA,Ee,cA),DA===null?qt=TA:DA.sibling=TA,DA=TA);return t&&Ht.forEach(function(db){return a(Me,db)}),xA&&cn(Me,cA),qt}function ta(Me,Ee,Ke,lt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===N&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case x:e:{for(var qt=Ke.key;Ee!==null;){if(Ee.key===qt){if(qt=Ke.type,qt===N){if(Ee.tag===7){i(Me,Ee.sibling),lt=p(Ee,Ke.props.children),lt.return=Me,Me=lt;break e}}else if(Ee.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===E&&Qe(qt)===Ee.type){i(Me,Ee.sibling),lt=p(Ee,Ke.props),Mt(lt,Ke),lt.return=Me,Me=lt;break e}i(Me,Ee);break}else a(Me,Ee);Ee=Ee.sibling}Ke.type===N?(lt=hi(Ke.props.children,Me.mode,lt,Ke.key),lt.return=Me,Me=lt):(lt=El(Ke.type,Ke.key,Ke.props,null,Me.mode,lt),Mt(lt,Ke),lt.return=Me,Me=lt)}return H(Me);case C:e:{for(qt=Ke.key;Ee!==null;){if(Ee.key===qt)if(Ee.tag===4&&Ee.stateNode.containerInfo===Ke.containerInfo&&Ee.stateNode.implementation===Ke.implementation){i(Me,Ee.sibling),lt=p(Ee,Ke.children||[]),lt.return=Me,Me=lt;break e}else{i(Me,Ee);break}else a(Me,Ee);Ee=Ee.sibling}lt=Il(Ke,Me.mode,lt),lt.return=Me,Me=lt}return H(Me);case E:return Ke=Qe(Ke),ta(Me,Ee,Ke,lt)}if(ue(Ke))return Lt(Me,Ee,Ke,lt);if(R(Ke)){if(qt=R(Ke),typeof qt!="function")throw Error(r(150));return Ke=qt.call(Ke),Wt(Me,Ee,Ke,lt)}if(typeof Ke.then=="function")return ta(Me,Ee,bt(Ke),lt);if(Ke.$$typeof===_)return ta(Me,Ee,ac(Me,Ke),lt);Bt(Me,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Ee!==null&&Ee.tag===6?(i(Me,Ee.sibling),lt=p(Ee,Ke),lt.return=Me,Me=lt):(i(Me,Ee),lt=Co(Ke,Me.mode,lt),lt.return=Me,Me=lt),H(Me)):i(Me,Ee)}return function(Me,Ee,Ke,lt){try{Nt=0;var qt=ta(Me,Ee,Ke,lt);return nt=null,qt}catch(Ht){if(Ht===Se||Ht===Re)throw Ht;var DA=Ns(29,Ht,null,Me.mode);return DA.lanes=lt,DA.return=Me,DA}finally{}}}var vA=IA(!0),CA=IA(!1),nA=!1;function kA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function LA(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Zt(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qA(t,a,i){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(_A&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=Cs(t),Bo(t,null,i),a}return Lr(t,c,a,i),Cs(t)}function Za(t,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var c=a.lanes;c&=t.pendingLanes,i|=c,a.lanes=i,ns(t,i)}}function wa(t,a){var i=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var p=null,b=null;if(i=i.firstBaseUpdate,i!==null){do{var H={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};b===null?p=b=H:b=b.next=H,i=i.next}while(i!==null);b===null?p=b=a:b=b.next=a}else p=b=a;i={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:b,shared:c.shared,callbacks:c.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=a:t.next=a,i.lastBaseUpdate=a}var js=!1;function QA(){if(js){var t=g;if(t!==null)throw t}}function fs(t,a,i,c){js=!1;var p=t.updateQueue;nA=!1;var b=p.firstBaseUpdate,H=p.lastBaseUpdate,ae=p.shared.pending;if(ae!==null){p.shared.pending=null;var be=ae,Ve=be.next;be.next=null,H===null?b=Ve:H.next=Ve,H=be;var at=t.alternate;at!==null&&(at=at.updateQueue,ae=at.lastBaseUpdate,ae!==H&&(ae===null?at.firstBaseUpdate=Ve:ae.next=Ve,at.lastBaseUpdate=be))}if(b!==null){var dt=p.baseState;H=0,at=Ve=be=null,ae=b;do{var ze=ae.lane&-536870913,Je=ze!==ae.lane;if(Je?(NA&ze)===ze:(c&ze)===ze){ze!==0&&ze===f&&(js=!0),at!==null&&(at=at.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var Lt=t,Wt=ae;ze=a;var ta=i;switch(Wt.tag){case 1:if(Lt=Wt.payload,typeof Lt=="function"){dt=Lt.call(ta,dt,ze);break e}dt=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Wt.payload,ze=typeof Lt=="function"?Lt.call(ta,dt,ze):Lt,ze==null)break e;dt=v({},dt,ze);break e;case 2:nA=!0}}ze=ae.callback,ze!==null&&(t.flags|=64,Je&&(t.flags|=8192),Je=p.callbacks,Je===null?p.callbacks=[ze]:Je.push(ze))}else Je={lane:ze,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},at===null?(Ve=at=Je,be=dt):at=at.next=Je,H|=ze;if(ae=ae.next,ae===null){if(ae=p.shared.pending,ae===null)break;Je=ae,ae=Je.next,Je.next=null,p.lastBaseUpdate=Je,p.shared.pending=null}}while(!0);at===null&&(be=dt),p.baseState=be,p.firstBaseUpdate=Ve,p.lastBaseUpdate=at,b===null&&(p.shared.lanes=0),Kl|=H,t.lanes=H,t.memoizedState=dt}}function qs(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function Ra(t,a){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)qs(i[t],a)}var Ba=J(null),Wa=J(0);function un(t,a){t=rl,X(Wa,t),X(Ba,a),rl=t|a.baseLanes}function Qn(){X(Wa,rl),X(Ba,Ba.current)}function Ma(){rl=Wa.current,U(Ba),U(Wa)}var Ua=J(null),$a=null;function dn(t){var a=t.alternate;X(ya,ya.current&1),X(Ua,t),$a===null&&(a===null||Ba.current!==null||a.memoizedState!==null)&&($a=t)}function ur(t){X(ya,ya.current),X(Ua,t),$a===null&&($a=t)}function ga(t){t.tag===22?(X(ya,ya.current),X(Ua,t),$a===null&&($a=t)):dr()}function dr(){X(ya,ya.current),X(Ua,Ua.current)}function Gs(t){U(Ua),$a===t&&($a=null),U(ya)}var ya=J(0);function Xi(t){for(var a=t;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||rm(i)||im(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var hn=0,sA=null,hA=null,ra=null,Hr=!1,Yi=!1,hr=!1,So=0,bi=0,wi=null,nc=0;function $A(){throw Error(r(321))}function Wc(t,a){if(a===null)return!1;for(var i=0;i<a.length&&i<t.length;i++)if(!ws(t[i],a[i]))return!1;return!0}function $c(t,a,i,c,p,b){return hn=b,sA=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,S.H=t===null||t.memoizedState===null?yp:gf,hr=!1,b=i(c,p),hr=!1,Yi&&(b=Mr(a,i,c,p)),rc(t),b}function rc(t){S.H=iu;var a=hA!==null&&hA.next!==null;if(hn=0,ra=hA=sA=null,Hr=!1,bi=0,wi=null,a)throw Error(r(300));t===null||ts||(t=t.dependencies,t!==null&&Ac(t)&&(ts=!0))}function Mr(t,a,i,c){sA=t;var p=0;do{if(Yi&&(wi=null),bi=0,Yi=!1,25<=p)throw Error(r(301));if(p+=1,ra=hA=null,t.updateQueue!=null){var b=t.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}S.H=Cp,b=a(i,c)}while(Yi);return b}function cf(){var t=S.H,a=t.useState()[0];return a=typeof a.then=="function"?Bi(a):a,t=t.useState()[0],(hA!==null?hA.memoizedState:null)!==t&&(sA.flags|=1024),a}function eu(){var t=So!==0;return So=0,t}function tu(t,a,i){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~i}function ic(t){if(Hr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Hr=!1}hn=0,ra=hA=sA=null,Yi=!1,bi=So=0,wi=null}function es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ra===null?sA.memoizedState=ra=t:ra=ra.next=t,ra}function Ca(){if(hA===null){var t=sA.alternate;t=t!==null?t.memoizedState:null}else t=hA.next;var a=ra===null?sA.memoizedState:ra.next;if(a!==null)ra=a,hA=t;else{if(t===null)throw sA.alternate===null?Error(r(467)):Error(r(310));hA=t,t={memoizedState:hA.memoizedState,baseState:hA.baseState,baseQueue:hA.baseQueue,queue:hA.queue,next:null},ra===null?sA.memoizedState=ra=t:ra=ra.next=t}return ra}function Qo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bi(t){var a=bi;return bi+=1,wi===null&&(wi=[]),t=We(wi,t,a),a=sA,(ra===null?a.memoizedState:ra.next)===null&&(a=a.alternate,S.H=a===null||a.memoizedState===null?yp:gf),t}function Ml(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Bi(t);if(t.$$typeof===_)return hs(t)}throw Error(r(438,String(t)))}function Zi(t){var a=null,i=sA.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var c=sA.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=Qo(),sA.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(t),c=0;c<t;c++)i[c]=G;return a.index++,i}function fr(t,a){return typeof a=="function"?a(t):a}function lc(t){var a=Ca();return Ol(a,hA,t)}function Ol(t,a,i){var c=t.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var p=t.baseQueue,b=c.pending;if(b!==null){if(p!==null){var H=p.next;p.next=b.next,b.next=H}a.baseQueue=p=b,c.pending=null}if(b=t.baseState,p===null)t.memoizedState=b;else{a=p.next;var ae=H=null,be=null,Ve=a,at=!1;do{var dt=Ve.lane&-536870913;if(dt!==Ve.lane?(NA&dt)===dt:(hn&dt)===dt){var ze=Ve.revertLane;if(ze===0)be!==null&&(be=be.next={lane:0,revertLane:0,gesture:null,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),dt===f&&(at=!0);else if((hn&ze)===ze){Ve=Ve.next,ze===f&&(at=!0);continue}else dt={lane:0,revertLane:Ve.revertLane,gesture:null,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},be===null?(ae=be=dt,H=b):be=be.next=dt,sA.lanes|=ze,Kl|=ze;dt=Ve.action,hr&&i(b,dt),b=Ve.hasEagerState?Ve.eagerState:i(b,dt)}else ze={lane:dt,revertLane:Ve.revertLane,gesture:Ve.gesture,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null},be===null?(ae=be=ze,H=b):be=be.next=ze,sA.lanes|=dt,Kl|=dt;Ve=Ve.next}while(Ve!==null&&Ve!==a);if(be===null?H=b:be.next=ae,!ws(b,t.memoizedState)&&(ts=!0,at&&(i=g,i!==null)))throw i;t.memoizedState=b,t.baseState=H,t.baseQueue=be,c.lastRenderedState=b}return p===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function oc(t){var a=Ca(),i=a.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=t;var c=i.dispatch,p=i.pending,b=a.memoizedState;if(p!==null){i.pending=null;var H=p=p.next;do b=t(b,H.action),H=H.next;while(H!==p);ws(b,a.memoizedState)||(ts=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),i.lastRenderedState=b}return[b,c]}function cc(t,a,i){var c=sA,p=Ca(),b=xA;if(b){if(i===void 0)throw Error(r(407));i=i()}else i=a();var H=!ws((hA||p).memoizedState,i);if(H&&(p.memoizedState=i,ts=!0),p=p.queue,uf(au.bind(null,c,p,t),[t]),p.getSnapshot!==a||H||ra!==null&&ra.memoizedState.tag&1){if(c.flags|=2048,$i(9,{destroy:void 0},Au.bind(null,c,p,i,a),null),ia===null)throw Error(r(349));b||(hn&127)!==0||Or(c,a,i)}return i}function Or(t,a,i){t.flags|=16384,t={getSnapshot:a,value:i},a=sA.updateQueue,a===null?(a=Qo(),sA.updateQueue=a,a.stores=[t]):(i=a.stores,i===null?a.stores=[t]:i.push(t))}function Au(t,a,i,c){a.value=i,a.getSnapshot=c,id(a)&&su(t)}function au(t,a,i){return i(function(){id(a)&&su(t)})}function id(t){var a=t.getSnapshot;t=t.value;try{var i=a();return!ws(t,i)}catch{return!0}}function su(t){var a=Dr(t,2);a!==null&&Dn(a,t,2)}function yi(t){var a=es();if(typeof t=="function"){var i=t;if(t=i(),hr){Ft(!0);try{i()}finally{Ft(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:t},a}function ld(t,a,i,c){return t.baseState=i,Ol(t,hA,typeof c=="function"?c:fr)}function od(t,a,i,c,p){if(hd(t))throw Error(r(485));if(t=a.action,t!==null){var b={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){b.listeners.push(H)}};S.T!==null?i(!0):b.isTransition=!1,c(b),i=a.pending,i===null?(b.next=a.pending=b,cd(a,b)):(b.next=i.next,a.pending=i.next=b)}}function cd(t,a){var i=a.action,c=a.payload,p=t.state;if(a.isTransition){var b=S.T,H={};S.T=H;try{var ae=i(p,c),be=S.S;be!==null&&be(H,ae),nu(t,a,ae)}catch(Ve){Wi(t,a,Ve)}finally{b!==null&&H.types!==null&&(b.types=H.types),S.T=b}}else try{b=i(p,c),nu(t,a,b)}catch(Ve){Wi(t,a,Ve)}}function nu(t,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){ud(t,a,c)},function(c){return Wi(t,a,c)}):ud(t,a,i)}function ud(t,a,i){a.status="fulfilled",a.value=i,uc(a),t.state=i,a=t.pending,a!==null&&(i=a.next,i===a?t.pending=null:(i=i.next,a.next=i,cd(t,i)))}function Wi(t,a,i){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=i,uc(a),a=a.next;while(a!==c)}t.action=null}function uc(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Uo(t,a){return a}function mr(t,a){if(xA){var i=ia.formState;if(i!==null){e:{var c=sA;if(xA){if(na){t:{for(var p=na,b=ba;p.nodeType!==8;){if(!b){p=null;break t}if(p=pr(p.nextSibling),p===null){p=null;break t}}b=p.data,p=b==="F!"||b==="F"?p:null}if(p){na=pr(p.nextSibling),c=p.data==="F!";break e}}mi(c)}c=!1}c&&(a=i[0])}}return i=es(),i.memoizedState=i.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:a},i.queue=c,i=bp.bind(null,sA,c),c.dispatch=i,c=yi(!1),b=pf.bind(null,sA,!1,c.queue),c=es(),p={state:a,dispatch:null,action:t,pending:null},c.queue=p,i=od.bind(null,sA,p,b,i),p.dispatch=i,c.memoizedState=t,[a,i,!1]}function kr(t){var a=Ca();return _r(a,hA,t)}function _r(t,a,i){if(a=Ol(t,a,Uo)[0],t=lc(fr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=Bi(a)}catch(H){throw H===Se?Re:H}else c=a;a=Ca();var p=a.queue,b=p.dispatch;return i!==a.memoizedState&&(sA.flags|=2048,$i(9,{destroy:void 0},dc.bind(null,p,i),null)),[c,b,t]}function dc(t,a){t.action=a}function hc(t){var a=Ca(),i=hA;if(i!==null)return _r(a,i,t);Ca(),a=a.memoizedState,i=Ca();var c=i.queue.dispatch;return i.memoizedState=t,[a,c,!1]}function $i(t,a,i,c){return t={tag:t,create:i,deps:c,inst:a,next:null},a=sA.updateQueue,a===null&&(a=Qo(),sA.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=t.next=t:(c=i.next,i.next=t,t.next=c,a.lastEffect=t),t}function dd(){return Ca().memoizedState}function kl(t,a,i,c){var p=es();sA.flags|=t,p.memoizedState=$i(1|a,{destroy:void 0},i,c===void 0?null:c)}function _l(t,a,i,c){var p=Ca();c=c===void 0?null:c;var b=p.memoizedState.inst;hA!==null&&c!==null&&Wc(c,hA.memoizedState.deps)?p.memoizedState=$i(a,b,i,c):(sA.flags|=t,p.memoizedState=$i(1|a,b,i,c))}function rp(t,a){kl(8390656,8,t,a)}function uf(t,a){_l(2048,8,t,a)}function r5(t){sA.flags|=4;var a=sA.updateQueue;if(a===null)a=Qo(),sA.updateQueue=a,a.events=[t];else{var i=a.events;i===null?a.events=[t]:i.push(t)}}function ip(t){var a=Ca().memoizedState;return r5({ref:a,nextImpl:t}),function(){if((_A&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function lp(t,a){return _l(4,2,t,a)}function op(t,a){return _l(4,4,t,a)}function cp(t,a){if(typeof a=="function"){t=t();var i=a(t);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function up(t,a,i){i=i!=null?i.concat([t]):null,_l(4,4,cp.bind(null,a,t),i)}function df(){}function dp(t,a){var i=Ca();a=a===void 0?null:a;var c=i.memoizedState;return a!==null&&Wc(a,c[1])?c[0]:(i.memoizedState=[t,a],t)}function hp(t,a){var i=Ca();a=a===void 0?null:a;var c=i.memoizedState;if(a!==null&&Wc(a,c[1]))return c[0];if(c=t(),hr){Ft(!0);try{t()}finally{Ft(!1)}}return i.memoizedState=[c,a],c}function hf(t,a,i){return i===void 0||(hn&1073741824)!==0&&(NA&261930)===0?t.memoizedState=a:(t.memoizedState=i,t=fg(),sA.lanes|=t,Kl|=t,i)}function fp(t,a,i,c){return ws(i,a)?i:Ba.current!==null?(t=hf(t,i,c),ws(t,a)||(ts=!0),t):(hn&42)===0||(hn&1073741824)!==0&&(NA&261930)===0?(ts=!0,t.memoizedState=i):(t=fg(),sA.lanes|=t,Kl|=t,a)}function mp(t,a,i,c,p){var b=M.p;M.p=b!==0&&8>b?b:8;var H=S.T,ae={};S.T=ae,pf(t,!1,a,i);try{var be=p(),Ve=S.S;if(Ve!==null&&Ve(ae,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var at=z(be,c);ru(t,a,at,Zn(t))}else ru(t,a,c,Zn(t))}catch(dt){ru(t,a,{then:function(){},status:"rejected",reason:dt},Zn())}finally{M.p=b,H!==null&&ae.types!==null&&(H.types=ae.types),S.T=H}}function i5(){}function ff(t,a,i,c){if(t.tag!==5)throw Error(r(476));var p=pp(t).queue;mp(t,p,a,Y,i===null?i5:function(){return gp(t),i(c)})}function pp(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:Y},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:i},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function gp(t){var a=pp(t);a.next===null&&(a=t.alternate.memoizedState),ru(t,a.next.queue,{},Zn())}function mf(){return hs(yu)}function xp(){return Ca().memoizedState}function vp(){return Ca().memoizedState}function l5(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var i=Zn();t=Zt(i);var c=qA(a,t,i);c!==null&&(Dn(c,a,i),Za(c,a,i)),a={cache:Hl()},t.payload=a;return}a=a.return}}function o5(t,a,i){var c=Zn();i={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},hd(t)?wp(a,i):(i=Ul(t,a,i,c),i!==null&&(Dn(i,t,c),Bp(i,a,c)))}function bp(t,a,i){var c=Zn();ru(t,a,i,c)}function ru(t,a,i,c){var p={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(hd(t))wp(a,p);else{var b=t.alternate;if(t.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var H=a.lastRenderedState,ae=b(H,i);if(p.hasEagerState=!0,p.eagerState=ae,ws(ae,H))return Lr(t,a,p,0),ia===null&&di(),!1}catch{}finally{}if(i=Ul(t,a,p,c),i!==null)return Dn(i,t,c),Bp(i,a,c),!0}return!1}function pf(t,a,i,c){if(c={lane:2,revertLane:Jf(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},hd(t)){if(a)throw Error(r(479))}else a=Ul(t,i,c,2),a!==null&&Dn(a,t,2)}function hd(t){var a=t.alternate;return t===sA||a!==null&&a===sA}function wp(t,a){Yi=Hr=!0;var i=t.pending;i===null?a.next=a:(a.next=i.next,i.next=a),t.pending=a}function Bp(t,a,i){if((i&4194048)!==0){var c=a.lanes;c&=t.pendingLanes,i|=c,a.lanes=i,ns(t,i)}}var iu={readContext:hs,use:Ml,useCallback:$A,useContext:$A,useEffect:$A,useImperativeHandle:$A,useLayoutEffect:$A,useInsertionEffect:$A,useMemo:$A,useReducer:$A,useRef:$A,useState:$A,useDebugValue:$A,useDeferredValue:$A,useTransition:$A,useSyncExternalStore:$A,useId:$A,useHostTransitionStatus:$A,useFormState:$A,useActionState:$A,useOptimistic:$A,useMemoCache:$A,useCacheRefresh:$A};iu.useEffectEvent=$A;var yp={readContext:hs,use:Ml,useCallback:function(t,a){return es().memoizedState=[t,a===void 0?null:a],t},useContext:hs,useEffect:rp,useImperativeHandle:function(t,a,i){i=i!=null?i.concat([t]):null,kl(4194308,4,cp.bind(null,a,t),i)},useLayoutEffect:function(t,a){return kl(4194308,4,t,a)},useInsertionEffect:function(t,a){kl(4,2,t,a)},useMemo:function(t,a){var i=es();a=a===void 0?null:a;var c=t();if(hr){Ft(!0);try{t()}finally{Ft(!1)}}return i.memoizedState=[c,a],c},useReducer:function(t,a,i){var c=es();if(i!==void 0){var p=i(a);if(hr){Ft(!0);try{i(a)}finally{Ft(!1)}}}else p=a;return c.memoizedState=c.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},c.queue=t,t=t.dispatch=o5.bind(null,sA,t),[c.memoizedState,t]},useRef:function(t){var a=es();return t={current:t},a.memoizedState=t},useState:function(t){t=yi(t);var a=t.queue,i=bp.bind(null,sA,a);return a.dispatch=i,[t.memoizedState,i]},useDebugValue:df,useDeferredValue:function(t,a){var i=es();return hf(i,t,a)},useTransition:function(){var t=yi(!1);return t=mp.bind(null,sA,t.queue,!0,!1),es().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,i){var c=sA,p=es();if(xA){if(i===void 0)throw Error(r(407));i=i()}else{if(i=a(),ia===null)throw Error(r(349));(NA&127)!==0||Or(c,a,i)}p.memoizedState=i;var b={value:i,getSnapshot:a};return p.queue=b,rp(au.bind(null,c,b,t),[t]),c.flags|=2048,$i(9,{destroy:void 0},Au.bind(null,c,b,i,a),null),i},useId:function(){var t=es(),a=ia.identifierPrefix;if(xA){var i=Fn,c=jn;i=(c&~(1<<32-Fe(c)-1)).toString(32)+i,a="_"+a+"R_"+i,i=So++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=nc++,a="_"+a+"r_"+i.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:mf,useFormState:mr,useActionState:mr,useOptimistic:function(t){var a=es();a.memoizedState=a.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=pf.bind(null,sA,!0,i),i.dispatch=a,[t,a]},useMemoCache:Zi,useCacheRefresh:function(){return es().memoizedState=l5.bind(null,sA)},useEffectEvent:function(t){var a=es(),i={impl:t};return a.memoizedState=i,function(){if((_A&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},gf={readContext:hs,use:Ml,useCallback:dp,useContext:hs,useEffect:uf,useImperativeHandle:up,useInsertionEffect:lp,useLayoutEffect:op,useMemo:hp,useReducer:lc,useRef:dd,useState:function(){return lc(fr)},useDebugValue:df,useDeferredValue:function(t,a){var i=Ca();return fp(i,hA.memoizedState,t,a)},useTransition:function(){var t=lc(fr)[0],a=Ca().memoizedState;return[typeof t=="boolean"?t:Bi(t),a]},useSyncExternalStore:cc,useId:xp,useHostTransitionStatus:mf,useFormState:kr,useActionState:kr,useOptimistic:function(t,a){var i=Ca();return ld(i,hA,t,a)},useMemoCache:Zi,useCacheRefresh:vp};gf.useEffectEvent=ip;var Cp={readContext:hs,use:Ml,useCallback:dp,useContext:hs,useEffect:uf,useImperativeHandle:up,useInsertionEffect:lp,useLayoutEffect:op,useMemo:hp,useReducer:oc,useRef:dd,useState:function(){return oc(fr)},useDebugValue:df,useDeferredValue:function(t,a){var i=Ca();return hA===null?hf(i,t,a):fp(i,hA.memoizedState,t,a)},useTransition:function(){var t=oc(fr)[0],a=Ca().memoizedState;return[typeof t=="boolean"?t:Bi(t),a]},useSyncExternalStore:cc,useId:xp,useHostTransitionStatus:mf,useFormState:hc,useActionState:hc,useOptimistic:function(t,a){var i=Ca();return hA!==null?ld(i,hA,t,a):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Zi,useCacheRefresh:vp};Cp.useEffectEvent=ip;function xf(t,a,i,c){a=t.memoizedState,i=i(c,a),i=i==null?a:v({},a,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var vf={enqueueSetState:function(t,a,i){t=t._reactInternals;var c=Zn(),p=Zt(c);p.payload=a,i!=null&&(p.callback=i),a=qA(t,p,c),a!==null&&(Dn(a,t,c),Za(a,t,c))},enqueueReplaceState:function(t,a,i){t=t._reactInternals;var c=Zn(),p=Zt(c);p.tag=1,p.payload=a,i!=null&&(p.callback=i),a=qA(t,p,c),a!==null&&(Dn(a,t,c),Za(a,t,c))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var i=Zn(),c=Zt(i);c.tag=2,a!=null&&(c.callback=a),a=qA(t,c,i),a!==null&&(Dn(a,t,i),Za(a,t,i))}};function Np(t,a,i,c,p,b,H){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,b,H):a.prototype&&a.prototype.isPureReactComponent?!wn(i,c)||!wn(p,b):!0}function jp(t,a,i,c){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,c),a.state!==t&&vf.enqueueReplaceState(a,a.state,null)}function Eo(t,a){var i=a;if("ref"in a){i={};for(var c in a)c!=="ref"&&(i[c]=a[c])}if(t=t.defaultProps){i===a&&(i=v({},i));for(var p in t)i[p]===void 0&&(i[p]=t[p])}return i}function Fp(t){OA(t)}function Sp(t){console.error(t)}function Qp(t){OA(t)}function fd(t,a){try{var i=t.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function Up(t,a,i){try{var c=t.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function bf(t,a,i){return i=Zt(i),i.tag=3,i.payload={element:null},i.callback=function(){fd(t,a)},i}function Ep(t){return t=Zt(t),t.tag=3,t}function Ip(t,a,i,c){var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var b=c.value;t.payload=function(){return p(b)},t.callback=function(){Up(a,i,c)}}var H=i.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(t.callback=function(){Up(a,i,c),typeof p!="function"&&(Vl===null?Vl=new Set([this]):Vl.add(this));var ae=c.stack;this.componentDidCatch(c.value,{componentStack:ae!==null?ae:""})})}function c5(t,a,i,c,p){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=i.alternate,a!==null&&xi(a,i,p,!0),i=Ua.current,i!==null){switch(i.tag){case 31:case 13:return $a===null?jd():i.alternate===null&&Oa===0&&(Oa=3),i.flags&=-257,i.flags|=65536,i.lanes=p,c===De?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([c]):a.add(c),zf(t,c,p)),!1;case 22:return i.flags|=65536,c===De?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([c]):i.add(c)),zf(t,c,p)),!1}throw Error(r(435,i.tag))}return zf(t,c,p),jd(),!1}if(xA)return a=Ua.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==Jn&&(t=Error(r(422),{cause:c}),Dl(yn(t,i)))):(c!==Jn&&(a=Error(r(423),{cause:c}),Dl(yn(a,i))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,c=yn(c,i),p=bf(t.stateNode,c,p),wa(t,p),Oa!==4&&(Oa=2)),!1;var b=Error(r(520),{cause:c});if(b=yn(b,i),mu===null?mu=[b]:mu.push(b),Oa!==4&&(Oa=2),a===null)return!0;c=yn(c,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,t=p&-p,i.lanes|=t,t=bf(i.stateNode,c,t),wa(i,t),!1;case 1:if(a=i.type,b=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vl===null||!Vl.has(b))))return i.flags|=65536,p&=-p,i.lanes|=p,p=Ep(p),Ip(p,t,i,c),wa(i,p),!1}i=i.return}while(i!==null);return!1}var wf=Error(r(461)),ts=!1;function Ts(t,a,i,c){a.child=t===null?CA(a,null,i,c):vA(a,t.child,i,c)}function Lp(t,a,i,c,p){i=i.render;var b=a.ref;if("ref"in c){var H={};for(var ae in c)ae!=="ref"&&(H[ae]=c[ae])}else H=c;return vi(a),c=$c(t,a,i,H,b,p),ae=eu(),t!==null&&!ts?(tu(t,a,p),el(t,a,p)):(xA&&ae&&Xc(a),a.flags|=1,Ts(t,a,c,p),a.child)}function Dp(t,a,i,c,p){if(t===null){var b=i.type;return typeof b=="function"&&!Yo(b)&&b.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=b,Tp(t,a,b,c,p)):(t=El(i.type,null,c,a,a.mode,p),t.ref=a.ref,t.return=a,a.child=t)}if(b=t.child,!Qf(t,p)){var H=b.memoizedProps;if(i=i.compare,i=i!==null?i:wn,i(H,c)&&t.ref===a.ref)return el(t,a,p)}return a.flags|=1,t=Bn(b,c),t.ref=a.ref,t.return=a,a.child=t}function Tp(t,a,i,c,p){if(t!==null){var b=t.memoizedProps;if(wn(b,c)&&t.ref===a.ref)if(ts=!1,a.pendingProps=c=b,Qf(t,p))(t.flags&131072)!==0&&(ts=!0);else return a.lanes=t.lanes,el(t,a,p)}return Bf(t,a,i,c,p)}function Hp(t,a,i,c){var p=c.children,b=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|i:i,t!==null){for(c=a.child=t.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~b}else c=0,a.child=null;return Mp(t,a,b,i,c)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&ne(a,b!==null?b.cachePool:null),b!==null?un(a,b):Qn(),ga(a);else return c=a.lanes=536870912,Mp(t,a,b!==null?b.baseLanes|i:i,i,c)}else b!==null?(ne(a,b.cachePool),un(a,b),dr(),a.memoizedState=null):(t!==null&&ne(a,null),Qn(),dr());return Ts(t,a,p,i),a.child}function lu(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Mp(t,a,i,c,p){var b=Ae();return b=b===null?null:{parent:Qa._currentValue,pool:b},a.memoizedState={baseLanes:i,cachePool:b},t!==null&&ne(a,null),Qn(),ga(a),t!==null&&xi(t,a,c,!0),a.childLanes=p,null}function md(t,a){return a=gd({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Op(t,a,i){return vA(a,t.child,null,i),t=md(a,a.pendingProps),t.flags|=2,Gs(a),a.memoizedState=null,t}function u5(t,a,i){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(xA){if(c.mode==="hidden")return t=md(a,c),a.lanes=536870912,lu(null,t);if(ur(a),(t=na)?(t=Yg(t,ba),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:fi!==null?{id:jn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},i=Zo(t),i.return=a,a.child=i,us=a,na=null)):t=null,t===null)throw mi(a);return a.lanes=536870912,null}return md(a,c)}var b=t.memoizedState;if(b!==null){var H=b.dehydrated;if(ur(a),p)if(a.flags&256)a.flags&=-257,a=Op(t,a,i);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(r(558));else if(ts||xi(t,a,i,!1),p=(i&t.childLanes)!==0,ts||p){if(c=ia,c!==null&&(H=La(c,i),H!==0&&H!==b.retryLane))throw b.retryLane=H,Dr(t,H),Dn(c,t,H),wf;jd(),a=Op(t,a,i)}else t=b.treeContext,na=pr(H.nextSibling),us=a,xA=!0,Ds=null,ba=!1,t!==null&&nd(a,t),a=md(a,c),a.flags|=4096;return a}return t=Bn(t.child,{mode:c.mode,children:c.children}),t.ref=a.ref,a.child=t,t.return=a,t}function pd(t,a){var i=a.ref;if(i===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(t===null||t.ref!==i)&&(a.flags|=4194816)}}function Bf(t,a,i,c,p){return vi(a),i=$c(t,a,i,c,void 0,p),c=eu(),t!==null&&!ts?(tu(t,a,p),el(t,a,p)):(xA&&c&&Xc(a),a.flags|=1,Ts(t,a,i,p),a.child)}function kp(t,a,i,c,p,b){return vi(a),a.updateQueue=null,i=Mr(a,c,i,p),rc(t),c=eu(),t!==null&&!ts?(tu(t,a,b),el(t,a,b)):(xA&&c&&Xc(a),a.flags|=1,Ts(t,a,i,b),a.child)}function _p(t,a,i,c,p){if(vi(a),a.stateNode===null){var b=cs,H=i.contextType;typeof H=="object"&&H!==null&&(b=hs(H)),b=new i(c,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=vf,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=c,b.state=a.memoizedState,b.refs={},kA(a),H=i.contextType,b.context=typeof H=="object"&&H!==null?hs(H):cs,b.state=a.memoizedState,H=i.getDerivedStateFromProps,typeof H=="function"&&(xf(a,i,H,c),b.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(H=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),H!==b.state&&vf.enqueueReplaceState(b,b.state,null),fs(a,c,b,p),QA(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(t===null){b=a.stateNode;var ae=a.memoizedProps,be=Eo(i,ae);b.props=be;var Ve=b.context,at=i.contextType;H=cs,typeof at=="object"&&at!==null&&(H=hs(at));var dt=i.getDerivedStateFromProps;at=typeof dt=="function"||typeof b.getSnapshotBeforeUpdate=="function",ae=a.pendingProps!==ae,at||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(ae||Ve!==H)&&jp(a,b,c,H),nA=!1;var ze=a.memoizedState;b.state=ze,fs(a,c,b,p),QA(),Ve=a.memoizedState,ae||ze!==Ve||nA?(typeof dt=="function"&&(xf(a,i,dt,c),Ve=a.memoizedState),(be=nA||Np(a,i,be,c,ze,Ve,H))?(at||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=Ve),b.props=c,b.state=Ve,b.context=H,c=be):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{b=a.stateNode,LA(t,a),H=a.memoizedProps,at=Eo(i,H),b.props=at,dt=a.pendingProps,ze=b.context,Ve=i.contextType,be=cs,typeof Ve=="object"&&Ve!==null&&(be=hs(Ve)),ae=i.getDerivedStateFromProps,(Ve=typeof ae=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(H!==dt||ze!==be)&&jp(a,b,c,be),nA=!1,ze=a.memoizedState,b.state=ze,fs(a,c,b,p),QA();var Je=a.memoizedState;H!==dt||ze!==Je||nA||t!==null&&t.dependencies!==null&&Ac(t.dependencies)?(typeof ae=="function"&&(xf(a,i,ae,c),Je=a.memoizedState),(at=nA||Np(a,i,at,c,ze,Je,be)||t!==null&&t.dependencies!==null&&Ac(t.dependencies))?(Ve||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,Je,be),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,Je,be)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||H===t.memoizedProps&&ze===t.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&ze===t.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=Je),b.props=c,b.state=Je,b.context=be,c=at):(typeof b.componentDidUpdate!="function"||H===t.memoizedProps&&ze===t.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||H===t.memoizedProps&&ze===t.memoizedState||(a.flags|=1024),c=!1)}return b=c,pd(t,a),c=(a.flags&128)!==0,b||c?(b=a.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,t!==null&&c?(a.child=vA(a,t.child,null,p),a.child=vA(a,null,i,p)):Ts(t,a,i,p),a.memoizedState=b.state,t=a.child):t=el(t,a,p),t}function Rp(t,a,i,c){return Gi(),a.flags|=256,Ts(t,a,i,c),a.child}var yf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(t){return{baseLanes:t,cachePool:ce()}}function Nf(t,a,i){return t=t!==null?t.childLanes&~i:0,a&&(t|=Yn),t}function Pp(t,a,i){var c=a.pendingProps,p=!1,b=(a.flags&128)!==0,H;if((H=b)||(H=t!==null&&t.memoizedState===null?!1:(ya.current&2)!==0),H&&(p=!0,a.flags&=-129),H=(a.flags&32)!==0,a.flags&=-33,t===null){if(xA){if(p?dn(a):dr(),(t=na)?(t=Yg(t,ba),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:fi!==null?{id:jn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},i=Zo(t),i.return=a,a.child=i,us=a,na=null)):t=null,t===null)throw mi(a);return im(t)?a.lanes=32:a.lanes=536870912,null}var ae=c.children;return c=c.fallback,p?(dr(),p=a.mode,ae=gd({mode:"hidden",children:ae},p),c=hi(c,p,i,null),ae.return=a,c.return=a,ae.sibling=c,a.child=ae,c=a.child,c.memoizedState=Cf(i),c.childLanes=Nf(t,H,i),a.memoizedState=yf,lu(null,c)):(dn(a),jf(a,ae))}var be=t.memoizedState;if(be!==null&&(ae=be.dehydrated,ae!==null)){if(b)a.flags&256?(dn(a),a.flags&=-257,a=Ff(t,a,i)):a.memoizedState!==null?(dr(),a.child=t.child,a.flags|=128,a=null):(dr(),ae=c.fallback,p=a.mode,c=gd({mode:"visible",children:c.children},p),ae=hi(ae,p,i,null),ae.flags|=2,c.return=a,ae.return=a,c.sibling=ae,a.child=c,vA(a,t.child,null,i),c=a.child,c.memoizedState=Cf(i),c.childLanes=Nf(t,H,i),a.memoizedState=yf,a=lu(null,c));else if(dn(a),im(ae)){if(H=ae.nextSibling&&ae.nextSibling.dataset,H)var Ve=H.dgst;H=Ve,c=Error(r(419)),c.stack="",c.digest=H,Dl({value:c,source:null,stack:null}),a=Ff(t,a,i)}else if(ts||xi(t,a,i,!1),H=(i&t.childLanes)!==0,ts||H){if(H=ia,H!==null&&(c=La(H,i),c!==0&&c!==be.retryLane))throw be.retryLane=c,Dr(t,c),Dn(H,t,c),wf;rm(ae)||jd(),a=Ff(t,a,i)}else rm(ae)?(a.flags|=192,a.child=t.child,a=null):(t=be.treeContext,na=pr(ae.nextSibling),us=a,xA=!0,Ds=null,ba=!1,t!==null&&nd(a,t),a=jf(a,c.children),a.flags|=4096);return a}return p?(dr(),ae=c.fallback,p=a.mode,be=t.child,Ve=be.sibling,c=Bn(be,{mode:"hidden",children:c.children}),c.subtreeFlags=be.subtreeFlags&65011712,Ve!==null?ae=Bn(Ve,ae):(ae=hi(ae,p,i,null),ae.flags|=2),ae.return=a,c.return=a,c.sibling=ae,a.child=c,lu(null,c),c=a.child,ae=t.child.memoizedState,ae===null?ae=Cf(i):(p=ae.cachePool,p!==null?(be=Qa._currentValue,p=p.parent!==be?{parent:be,pool:be}:p):p=ce(),ae={baseLanes:ae.baseLanes|i,cachePool:p}),c.memoizedState=ae,c.childLanes=Nf(t,H,i),a.memoizedState=yf,lu(t.child,c)):(dn(a),i=t.child,t=i.sibling,i=Bn(i,{mode:"visible",children:c.children}),i.return=a,i.sibling=null,t!==null&&(H=a.deletions,H===null?(a.deletions=[t],a.flags|=16):H.push(t)),a.child=i,a.memoizedState=null,i)}function jf(t,a){return a=gd({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function gd(t,a){return t=Ns(22,t,null,a),t.lanes=0,t}function Ff(t,a,i){return vA(a,t.child,null,i),t=jf(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Kp(t,a,i){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a),Tl(t.return,a,i)}function Sf(t,a,i,c,p,b){var H=t.memoizedState;H===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:p,treeForkCount:b}:(H.isBackwards=a,H.rendering=null,H.renderingStartTime=0,H.last=c,H.tail=i,H.tailMode=p,H.treeForkCount=b)}function Vp(t,a,i){var c=a.pendingProps,p=c.revealOrder,b=c.tail;c=c.children;var H=ya.current,ae=(H&2)!==0;if(ae?(H=H&1|2,a.flags|=128):H&=1,X(ya,H),Ts(t,a,c,i),c=xA?No:0,!ae&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kp(t,i,a);else if(t.tag===19)Kp(t,i,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(i=a.child,p=null;i!==null;)t=i.alternate,t!==null&&Xi(t)===null&&(p=i),i=i.sibling;i=p,i===null?(p=a.child,a.child=null):(p=i.sibling,i.sibling=null),Sf(a,!1,p,i,b,c);break;case"backwards":case"unstable_legacy-backwards":for(i=null,p=a.child,a.child=null;p!==null;){if(t=p.alternate,t!==null&&Xi(t)===null){a.child=p;break}t=p.sibling,p.sibling=i,i=p,p=t}Sf(a,!0,i,null,b,c);break;case"together":Sf(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function el(t,a,i){if(t!==null&&(a.dependencies=t.dependencies),Kl|=a.lanes,(i&a.childLanes)===0)if(t!==null){if(xi(t,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,i=Bn(t,t.pendingProps),a.child=i,i.return=a;t.sibling!==null;)t=t.sibling,i=i.sibling=Bn(t,t.pendingProps),i.return=a;i.sibling=null}return a.child}function Qf(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Ac(t)))}function d5(t,a,i){switch(a.tag){case 3:xe(a,a.stateNode.containerInfo),gi(a,Qa,t.memoizedState.cache),Gi();break;case 27:case 5:st(a);break;case 4:xe(a,a.stateNode.containerInfo);break;case 10:gi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,ur(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(dn(a),a.flags|=128,null):(i&a.child.childLanes)!==0?Pp(t,a,i):(dn(a),t=el(t,a,i),t!==null?t.sibling:null);dn(a);break;case 19:var p=(t.flags&128)!==0;if(c=(i&a.childLanes)!==0,c||(xi(t,a,i,!1),c=(i&a.childLanes)!==0),p){if(c)return Vp(t,a,i);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),X(ya,ya.current),c)break;return null;case 22:return a.lanes=0,Hp(t,a,i,a.pendingProps);case 24:gi(a,Qa,t.memoizedState.cache)}return el(t,a,i)}function zp(t,a,i){if(t!==null)if(t.memoizedProps!==a.pendingProps)ts=!0;else{if(!Qf(t,i)&&(a.flags&128)===0)return ts=!1,d5(t,a,i);ts=(t.flags&131072)!==0}else ts=!1,xA&&(a.flags&1048576)!==0&&sd(a,No,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(t=Qe(a.elementType),a.type=t,typeof t=="function")Yo(t)?(c=Eo(t,c),a.tag=1,a=_p(null,a,t,c,i)):(a.tag=0,a=Bf(null,a,t,c,i));else{if(t!=null){var p=t.$$typeof;if(p===te){a.tag=11,a=Lp(null,a,t,c,i);break e}else if(p===P){a.tag=14,a=Dp(null,a,t,c,i);break e}}throw a=Z(t)||t,Error(r(306,a,""))}}return a;case 0:return Bf(t,a,a.type,a.pendingProps,i);case 1:return c=a.type,p=Eo(c,a.pendingProps),_p(t,a,c,p,i);case 3:e:{if(xe(a,a.stateNode.containerInfo),t===null)throw Error(r(387));c=a.pendingProps;var b=a.memoizedState;p=b.element,LA(t,a),fs(a,c,null,i);var H=a.memoizedState;if(c=H.cache,gi(a,Qa,c),c!==b.cache&&Ji(a,[Qa],i,!0),QA(),c=H.element,b.isDehydrated)if(b={element:c,isDehydrated:!1,cache:H.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Rp(t,a,c,i);break e}else if(c!==p){p=yn(Error(r(424)),a),Dl(p),a=Rp(t,a,c,i);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(na=pr(t.firstChild),us=a,xA=!0,Ds=null,ba=!0,i=CA(a,null,c,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Gi(),c===p){a=el(t,a,i);break e}Ts(t,a,c,i)}a=a.child}return a;case 26:return pd(t,a),t===null?(i=Ax(a.type,null,a.pendingProps,null))?a.memoizedState=i:xA||(i=a.type,t=a.pendingProps,c=Ld(fe.current).createElement(i),c[et]=a,c[rt]=t,Hs(c,i,t),ca(c),a.stateNode=c):a.memoizedState=Ax(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return st(a),t===null&&xA&&(c=a.stateNode=$g(a.type,a.pendingProps,fe.current),us=a,ba=!0,p=na,Jl(a.type)?(lm=p,na=pr(c.firstChild)):na=p),Ts(t,a,a.pendingProps.children,i),pd(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&xA&&((p=c=na)&&(c=P5(c,a.type,a.pendingProps,ba),c!==null?(a.stateNode=c,us=a,na=pr(c.firstChild),ba=!1,p=!0):p=!1),p||mi(a)),st(a),p=a.type,b=a.pendingProps,H=t!==null?t.memoizedProps:null,c=b.children,am(p,b)?c=null:H!==null&&am(p,H)&&(a.flags|=32),a.memoizedState!==null&&(p=$c(t,a,cf,null,null,i),yu._currentValue=p),pd(t,a),Ts(t,a,c,i),a.child;case 6:return t===null&&xA&&((t=i=na)&&(i=K5(i,a.pendingProps,ba),i!==null?(a.stateNode=i,us=a,na=null,t=!0):t=!1),t||mi(a)),null;case 13:return Pp(t,a,i);case 4:return xe(a,a.stateNode.containerInfo),c=a.pendingProps,t===null?a.child=vA(a,null,c,i):Ts(t,a,c,i),a.child;case 11:return Lp(t,a,a.type,a.pendingProps,i);case 7:return Ts(t,a,a.pendingProps,i),a.child;case 8:return Ts(t,a,a.pendingProps.children,i),a.child;case 12:return Ts(t,a,a.pendingProps.children,i),a.child;case 10:return c=a.pendingProps,gi(a,a.type,c.value),Ts(t,a,c.children,i),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,vi(a),p=hs(p),c=c(p),a.flags|=1,Ts(t,a,c,i),a.child;case 14:return Dp(t,a,a.type,a.pendingProps,i);case 15:return Tp(t,a,a.type,a.pendingProps,i);case 19:return Vp(t,a,i);case 31:return u5(t,a,i);case 22:return Hp(t,a,i,a.pendingProps);case 24:return vi(a),c=hs(Qa),t===null?(p=Ae(),p===null&&(p=ia,b=Hl(),p.pooledCache=b,b.refCount++,b!==null&&(p.pooledCacheLanes|=i),p=b),a.memoizedState={parent:c,cache:p},kA(a),gi(a,Qa,p)):((t.lanes&i)!==0&&(LA(t,a),fs(a,null,null,i),QA()),p=t.memoizedState,b=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),gi(a,Qa,c)):(c=b.cache,gi(a,Qa,c),c!==p.cache&&Ji(a,[Qa],i,!0))),Ts(t,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function tl(t){t.flags|=4}function Uf(t,a,i,c,p){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(xg())t.flags|=8192;else throw Ie=De,Pe}else t.flags&=-16777217}function qp(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ix(a))if(xg())t.flags|=8192;else throw Ie=De,Pe}function xd(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?oa():536870912,t.lanes|=a,gc|=a)}function ou(t,a){if(!xA)switch(t.tailMode){case"hidden":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function xa(t){var a=t.alternate!==null&&t.alternate.child===t.child,i=0,c=0;if(a)for(var p=t.child;p!==null;)i|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)i|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=c,t.childLanes=i,a}function h5(t,a,i){var c=a.pendingProps;switch(ec(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xa(a),null;case 1:return xa(a),null;case 3:return i=a.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Sn(Qa),Ce(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ds(a)?tl(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Zc())),xa(a),null;case 26:var p=a.type,b=a.memoizedState;return t===null?(tl(a),b!==null?(xa(a),qp(a,b)):(xa(a),Uf(a,p,null,c,i))):b?b!==t.memoizedState?(tl(a),xa(a),qp(a,b)):(xa(a),a.flags&=-16777217):(t=t.memoizedProps,t!==c&&tl(a),xa(a),Uf(a,p,t,c,i)),null;case 27:if(_e(a),i=fe.current,p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&tl(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return xa(a),null}t=ee.current,ds(a)?Yc(a):(t=$g(p,c,i),a.stateNode=t,tl(a))}return xa(a),null;case 5:if(_e(a),p=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&tl(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return xa(a),null}if(b=ee.current,ds(a))Yc(a);else{var H=Ld(fe.current);switch(b){case 1:b=H.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:b=H.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":b=H.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":b=H.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":b=H.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof c.is=="string"?H.createElement("select",{is:c.is}):H.createElement("select"),c.multiple?b.multiple=!0:c.size&&(b.size=c.size);break;default:b=typeof c.is=="string"?H.createElement(p,{is:c.is}):H.createElement(p)}}b[et]=a,b[rt]=c;e:for(H=a.child;H!==null;){if(H.tag===5||H.tag===6)b.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===a)break e;for(;H.sibling===null;){if(H.return===null||H.return===a)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}a.stateNode=b;e:switch(Hs(b,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&tl(a)}}return xa(a),Uf(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,i),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==c&&tl(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(t=fe.current,ds(a)){if(t=a.stateNode,i=a.memoizedProps,c=null,p=us,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}t[et]=a,t=!!(t.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Pg(t.nodeValue,i)),t||mi(a,!0)}else t=Ld(t).createTextNode(c),t[et]=a,a.stateNode=t}return xa(a),null;case 31:if(i=a.memoizedState,t===null||t.memoizedState!==null){if(c=ds(a),i!==null){if(t===null){if(!c)throw Error(r(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[et]=a}else Gi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xa(a),t=!1}else i=Zc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return a.flags&256?(Gs(a),a):(Gs(a),null);if((a.flags&128)!==0)throw Error(r(558))}return xa(a),null;case 13:if(c=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=ds(a),c!==null&&c.dehydrated!==null){if(t===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[et]=a}else Gi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xa(a),p=!1}else p=Zc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Gs(a),a):(Gs(a),null)}return Gs(a),(a.flags&128)!==0?(a.lanes=i,a):(i=c!==null,t=t!==null&&t.memoizedState!==null,i&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),b=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),b!==p&&(c.flags|=2048)),i!==t&&i&&(a.child.flags|=8192),xd(a,a.updateQueue),xa(a),null);case 4:return Ce(),t===null&&Wf(a.stateNode.containerInfo),xa(a),null;case 10:return Sn(a.type),xa(a),null;case 19:if(U(ya),c=a.memoizedState,c===null)return xa(a),null;if(p=(a.flags&128)!==0,b=c.rendering,b===null)if(p)ou(c,!1);else{if(Oa!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(b=Xi(t),b!==null){for(a.flags|=128,ou(c,!1),t=b.updateQueue,a.updateQueue=t,xd(a,t),a.subtreeFlags=0,t=i,i=a.child;i!==null;)yo(i,t),i=i.sibling;return X(ya,ya.current&1|2),xA&&cn(a,c.treeForkCount),a.child}t=t.sibling}c.tail!==null&&xt()>yd&&(a.flags|=128,p=!0,ou(c,!1),a.lanes=4194304)}else{if(!p)if(t=Xi(b),t!==null){if(a.flags|=128,p=!0,t=t.updateQueue,a.updateQueue=t,xd(a,t),ou(c,!0),c.tail===null&&c.tailMode==="hidden"&&!b.alternate&&!xA)return xa(a),null}else 2*xt()-c.renderingStartTime>yd&&i!==536870912&&(a.flags|=128,p=!0,ou(c,!1),a.lanes=4194304);c.isBackwards?(b.sibling=a.child,a.child=b):(t=c.last,t!==null?t.sibling=b:a.child=b,c.last=b)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=xt(),t.sibling=null,i=ya.current,X(ya,p?i&1|2:i&1),xA&&cn(a,c.treeForkCount),t):(xa(a),null);case 22:case 23:return Gs(a),Ma(),c=a.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(i&536870912)!==0&&(a.flags&128)===0&&(xa(a),a.subtreeFlags&6&&(a.flags|=8192)):xa(a),i=a.updateQueue,i!==null&&xd(a,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==i&&(a.flags|=2048),t!==null&&U($),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),Sn(Qa),xa(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function f5(t,a){switch(ec(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Sn(Qa),Ce(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return _e(a),null;case 31:if(a.memoizedState!==null){if(Gs(a),a.alternate===null)throw Error(r(340));Gi()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Gs(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Gi()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return U(ya),null;case 4:return Ce(),null;case 10:return Sn(a.type),null;case 22:case 23:return Gs(a),Ma(),t!==null&&U($),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Sn(Qa),null;case 25:return null;default:return null}}function Gp(t,a){switch(ec(a),a.tag){case 3:Sn(Qa),Ce();break;case 26:case 27:case 5:_e(a);break;case 4:Ce();break;case 31:a.memoizedState!==null&&Gs(a);break;case 13:Gs(a);break;case 19:U(ya);break;case 10:Sn(a.type);break;case 22:case 23:Gs(a),Ma(),t!==null&&U($);break;case 24:Sn(Qa)}}function cu(t,a){try{var i=a.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var p=c.next;i=p;do{if((i.tag&t)===t){c=void 0;var b=i.create,H=i.inst;c=b(),H.destroy=c}i=i.next}while(i!==p)}}catch(ae){JA(a,a.return,ae)}}function Rl(t,a,i){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var b=p.next;c=b;do{if((c.tag&t)===t){var H=c.inst,ae=H.destroy;if(ae!==void 0){H.destroy=void 0,p=a;var be=i,Ve=ae;try{Ve()}catch(at){JA(p,be,at)}}}c=c.next}while(c!==b)}}catch(at){JA(a,a.return,at)}}function Jp(t){var a=t.updateQueue;if(a!==null){var i=t.stateNode;try{Ra(a,i)}catch(c){JA(t,t.return,c)}}}function Xp(t,a,i){i.props=Eo(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(c){JA(t,a,c)}}function uu(t,a){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof i=="function"?t.refCleanup=i(c):i.current=c}}catch(p){JA(t,a,p)}}function Ci(t,a){var i=t.ref,c=t.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(p){JA(t,a,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(p){JA(t,a,p)}else i.current=null}function Yp(t){var a=t.type,i=t.memoizedProps,c=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(p){JA(t,t.return,p)}}function Ef(t,a,i){try{var c=t.stateNode;H5(c,t.type,i,a),c[rt]=a}catch(p){JA(t,t.return,p)}}function Zp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Jl(t.type)||t.tag===4}function If(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Jl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lf(t,a,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(t),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=WA));else if(c!==4&&(c===27&&Jl(t.type)&&(i=t.stateNode,a=null),t=t.child,t!==null))for(Lf(t,a,i),t=t.sibling;t!==null;)Lf(t,a,i),t=t.sibling}function vd(t,a,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?i.insertBefore(t,a):i.appendChild(t);else if(c!==4&&(c===27&&Jl(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(vd(t,a,i),t=t.sibling;t!==null;)vd(t,a,i),t=t.sibling}function Wp(t){var a=t.stateNode,i=t.memoizedProps;try{for(var c=t.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Hs(a,c,i),a[et]=t,a[rt]=i}catch(b){JA(t,t.return,b)}}var Al=!1,As=!1,Df=!1,$p=typeof WeakSet=="function"?WeakSet:Set,Fs=null;function m5(t,a){if(t=t.containerInfo,tm=_d,t=Ur(t),Kn(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var p=c.anchorOffset,b=c.focusNode;c=c.focusOffset;try{i.nodeType,b.nodeType}catch{i=null;break e}var H=0,ae=-1,be=-1,Ve=0,at=0,dt=t,ze=null;t:for(;;){for(var Je;dt!==i||p!==0&&dt.nodeType!==3||(ae=H+p),dt!==b||c!==0&&dt.nodeType!==3||(be=H+c),dt.nodeType===3&&(H+=dt.nodeValue.length),(Je=dt.firstChild)!==null;)ze=dt,dt=Je;for(;;){if(dt===t)break t;if(ze===i&&++Ve===p&&(ae=H),ze===b&&++at===c&&(be=H),(Je=dt.nextSibling)!==null)break;dt=ze,ze=dt.parentNode}dt=Je}i=ae===-1||be===-1?null:{start:ae,end:be}}else i=null}i=i||{start:0,end:0}}else i=null;for(Am={focusedElem:t,selectionRange:i},_d=!1,Fs=a;Fs!==null;)if(a=Fs,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Fs=t;else for(;Fs!==null;){switch(a=Fs,b=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)p=t[i],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&b!==null){t=void 0,i=a,p=b.memoizedProps,b=b.memoizedState,c=i.stateNode;try{var Lt=Eo(i.type,p);t=c.getSnapshotBeforeUpdate(Lt,b),c.__reactInternalSnapshotBeforeUpdate=t}catch(Wt){JA(i,i.return,Wt)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,i=t.nodeType,i===9)nm(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":nm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=a.sibling,t!==null){t.return=a.return,Fs=t;break}Fs=a.return}}function eg(t,a,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:sl(t,i),c&4&&cu(5,i);break;case 1:if(sl(t,i),c&4)if(t=i.stateNode,a===null)try{t.componentDidMount()}catch(H){JA(i,i.return,H)}else{var p=Eo(i.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(p,a,t.__reactInternalSnapshotBeforeUpdate)}catch(H){JA(i,i.return,H)}}c&64&&Jp(i),c&512&&uu(i,i.return);break;case 3:if(sl(t,i),c&64&&(t=i.updateQueue,t!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{Ra(t,a)}catch(H){JA(i,i.return,H)}}break;case 27:a===null&&c&4&&Wp(i);case 26:case 5:sl(t,i),a===null&&c&4&&Yp(i),c&512&&uu(i,i.return);break;case 12:sl(t,i);break;case 31:sl(t,i),c&4&&ag(t,i);break;case 13:sl(t,i),c&4&&sg(t,i),c&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=C5.bind(null,i),V5(t,i))));break;case 22:if(c=i.memoizedState!==null||Al,!c){a=a!==null&&a.memoizedState!==null||As,p=Al;var b=As;Al=c,(As=a)&&!b?nl(t,i,(i.subtreeFlags&8772)!==0):sl(t,i),Al=p,As=b}break;case 30:break;default:sl(t,i)}}function tg(t){var a=t.alternate;a!==null&&(t.alternate=null,tg(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Da(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Na=null,Un=!1;function al(t,a,i){for(i=i.child;i!==null;)Ag(t,a,i),i=i.sibling}function Ag(t,a,i){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(mt,i)}catch{}switch(i.tag){case 26:As||Ci(i,a),al(t,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:As||Ci(i,a);var c=Na,p=Un;Jl(i.type)&&(Na=i.stateNode,Un=!1),al(t,a,i),bu(i.stateNode),Na=c,Un=p;break;case 5:As||Ci(i,a);case 6:if(c=Na,p=Un,Na=null,al(t,a,i),Na=c,Un=p,Na!==null)if(Un)try{(Na.nodeType===9?Na.body:Na.nodeName==="HTML"?Na.ownerDocument.body:Na).removeChild(i.stateNode)}catch(b){JA(i,a,b)}else try{Na.removeChild(i.stateNode)}catch(b){JA(i,a,b)}break;case 18:Na!==null&&(Un?(t=Na,Jg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Nc(t)):Jg(Na,i.stateNode));break;case 4:c=Na,p=Un,Na=i.stateNode.containerInfo,Un=!0,al(t,a,i),Na=c,Un=p;break;case 0:case 11:case 14:case 15:Rl(2,i,a),As||Rl(4,i,a),al(t,a,i);break;case 1:As||(Ci(i,a),c=i.stateNode,typeof c.componentWillUnmount=="function"&&Xp(i,a,c)),al(t,a,i);break;case 21:al(t,a,i);break;case 22:As=(c=As)||i.memoizedState!==null,al(t,a,i),As=c;break;default:al(t,a,i)}}function ag(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Nc(t)}catch(i){JA(a,a.return,i)}}}function sg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Nc(t)}catch(i){JA(a,a.return,i)}}function p5(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new $p),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new $p),a;default:throw Error(r(435,t.tag))}}function bd(t,a){var i=p5(t);a.forEach(function(c){if(!i.has(c)){i.add(c);var p=N5.bind(null,t,c);c.then(p,p)}})}function En(t,a){var i=a.deletions;if(i!==null)for(var c=0;c<i.length;c++){var p=i[c],b=t,H=a,ae=H;e:for(;ae!==null;){switch(ae.tag){case 27:if(Jl(ae.type)){Na=ae.stateNode,Un=!1;break e}break;case 5:Na=ae.stateNode,Un=!1;break e;case 3:case 4:Na=ae.stateNode.containerInfo,Un=!0;break e}ae=ae.return}if(Na===null)throw Error(r(160));Ag(b,H,p),Na=null,Un=!1,b=p.alternate,b!==null&&(b.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)ng(a,t),a=a.sibling}var Rr=null;function ng(t,a){var i=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:En(a,t),In(t),c&4&&(Rl(3,t,t.return),cu(3,t),Rl(5,t,t.return));break;case 1:En(a,t),In(t),c&512&&(As||i===null||Ci(i,i.return)),c&64&&Al&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var p=Rr;if(En(a,t),In(t),c&512&&(As||i===null||Ci(i,i.return)),c&4){var b=i!==null?i.memoizedState:null;if(c=t.memoizedState,i===null)if(c===null)if(t.stateNode===null){e:{c=t.type,i=t.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":b=p.getElementsByTagName("title")[0],(!b||b[RA]||b[et]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=p.createElement(c),p.head.insertBefore(b,p.querySelector("head > title"))),Hs(b,c,i),b[et]=t,ca(b),c=b;break e;case"link":var H=nx("link","href",p).get(c+(i.href||""));if(H){for(var ae=0;ae<H.length;ae++)if(b=H[ae],b.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&b.getAttribute("rel")===(i.rel==null?null:i.rel)&&b.getAttribute("title")===(i.title==null?null:i.title)&&b.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){H.splice(ae,1);break t}}b=p.createElement(c),Hs(b,c,i),p.head.appendChild(b);break;case"meta":if(H=nx("meta","content",p).get(c+(i.content||""))){for(ae=0;ae<H.length;ae++)if(b=H[ae],b.getAttribute("content")===(i.content==null?null:""+i.content)&&b.getAttribute("name")===(i.name==null?null:i.name)&&b.getAttribute("property")===(i.property==null?null:i.property)&&b.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&b.getAttribute("charset")===(i.charSet==null?null:i.charSet)){H.splice(ae,1);break t}}b=p.createElement(c),Hs(b,c,i),p.head.appendChild(b);break;default:throw Error(r(468,c))}b[et]=t,ca(b),c=b}t.stateNode=c}else rx(p,t.type,t.stateNode);else t.stateNode=sx(p,c,t.memoizedProps);else b!==c?(b===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):b.count--,c===null?rx(p,t.type,t.stateNode):sx(p,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Ef(t,t.memoizedProps,i.memoizedProps)}break;case 27:En(a,t),In(t),c&512&&(As||i===null||Ci(i,i.return)),i!==null&&c&4&&Ef(t,t.memoizedProps,i.memoizedProps);break;case 5:if(En(a,t),In(t),c&512&&(As||i===null||Ci(i,i.return)),t.flags&32){p=t.stateNode;try{gn(p,"")}catch(Lt){JA(t,t.return,Lt)}}c&4&&t.stateNode!=null&&(p=t.memoizedProps,Ef(t,p,i!==null?i.memoizedProps:p)),c&1024&&(Df=!0);break;case 6:if(En(a,t),In(t),c&4){if(t.stateNode===null)throw Error(r(162));c=t.memoizedProps,i=t.stateNode;try{i.nodeValue=c}catch(Lt){JA(t,t.return,Lt)}}break;case 3:if(Hd=null,p=Rr,Rr=Dd(a.containerInfo),En(a,t),Rr=p,In(t),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Nc(a.containerInfo)}catch(Lt){JA(t,t.return,Lt)}Df&&(Df=!1,rg(t));break;case 4:c=Rr,Rr=Dd(t.stateNode.containerInfo),En(a,t),In(t),Rr=c;break;case 12:En(a,t),In(t);break;case 31:En(a,t),In(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bd(t,c)));break;case 13:En(a,t),In(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Bd=xt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bd(t,c)));break;case 22:p=t.memoizedState!==null;var be=i!==null&&i.memoizedState!==null,Ve=Al,at=As;if(Al=Ve||p,As=at||be,En(a,t),As=at,Al=Ve,In(t),c&8192)e:for(a=t.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(i===null||be||Al||As||Io(t)),i=null,a=t;;){if(a.tag===5||a.tag===26){if(i===null){be=i=a;try{if(b=be.stateNode,p)H=b.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{ae=be.stateNode;var dt=be.memoizedProps.style,ze=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;ae.style.display=ze==null||typeof ze=="boolean"?"":(""+ze).trim()}}catch(Lt){JA(be,be.return,Lt)}}}else if(a.tag===6){if(i===null){be=a;try{be.stateNode.nodeValue=p?"":be.memoizedProps}catch(Lt){JA(be,be.return,Lt)}}}else if(a.tag===18){if(i===null){be=a;try{var Je=be.stateNode;p?Xg(Je,!0):Xg(be.stateNode,!1)}catch(Lt){JA(be,be.return,Lt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=t.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,bd(t,i))));break;case 19:En(a,t),In(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bd(t,c)));break;case 30:break;case 21:break;default:En(a,t),In(t)}}function In(t){var a=t.flags;if(a&2){try{for(var i,c=t.return;c!==null;){if(Zp(c)){i=c;break}c=c.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var p=i.stateNode,b=If(t);vd(t,b,p);break;case 5:var H=i.stateNode;i.flags&32&&(gn(H,""),i.flags&=-33);var ae=If(t);vd(t,ae,H);break;case 3:case 4:var be=i.stateNode.containerInfo,Ve=If(t);Lf(t,Ve,be);break;default:throw Error(r(161))}}catch(at){JA(t,t.return,at)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function rg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;rg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function sl(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)eg(t,a.alternate,a),a=a.sibling}function Io(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Rl(4,a,a.return),Io(a);break;case 1:Ci(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Xp(a,a.return,i),Io(a);break;case 27:bu(a.stateNode);case 26:case 5:Ci(a,a.return),Io(a);break;case 22:a.memoizedState===null&&Io(a);break;case 30:Io(a);break;default:Io(a)}t=t.sibling}}function nl(t,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=t,b=a,H=b.flags;switch(b.tag){case 0:case 11:case 15:nl(p,b,i),cu(4,b);break;case 1:if(nl(p,b,i),c=b,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Ve){JA(c,c.return,Ve)}if(c=b,p=c.updateQueue,p!==null){var ae=c.stateNode;try{var be=p.shared.hiddenCallbacks;if(be!==null)for(p.shared.hiddenCallbacks=null,p=0;p<be.length;p++)qs(be[p],ae)}catch(Ve){JA(c,c.return,Ve)}}i&&H&64&&Jp(b),uu(b,b.return);break;case 27:Wp(b);case 26:case 5:nl(p,b,i),i&&c===null&&H&4&&Yp(b),uu(b,b.return);break;case 12:nl(p,b,i);break;case 31:nl(p,b,i),i&&H&4&&ag(p,b);break;case 13:nl(p,b,i),i&&H&4&&sg(p,b);break;case 22:b.memoizedState===null&&nl(p,b,i),uu(b,b.return);break;case 30:break;default:nl(p,b,i)}a=a.sibling}}function Tf(t,a){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&jo(i))}function Hf(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&jo(t))}function Pr(t,a,i,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ig(t,a,i,c),a=a.sibling}function ig(t,a,i,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Pr(t,a,i,c),p&2048&&cu(9,a);break;case 1:Pr(t,a,i,c);break;case 3:Pr(t,a,i,c),p&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&jo(t)));break;case 12:if(p&2048){Pr(t,a,i,c),t=a.stateNode;try{var b=a.memoizedProps,H=b.id,ae=b.onPostCommit;typeof ae=="function"&&ae(H,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(be){JA(a,a.return,be)}}else Pr(t,a,i,c);break;case 31:Pr(t,a,i,c);break;case 13:Pr(t,a,i,c);break;case 23:break;case 22:b=a.stateNode,H=a.alternate,a.memoizedState!==null?b._visibility&2?Pr(t,a,i,c):du(t,a):b._visibility&2?Pr(t,a,i,c):(b._visibility|=2,fc(t,a,i,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Tf(H,a);break;case 24:Pr(t,a,i,c),p&2048&&Hf(a.alternate,a);break;default:Pr(t,a,i,c)}}function fc(t,a,i,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=t,H=a,ae=i,be=c,Ve=H.flags;switch(H.tag){case 0:case 11:case 15:fc(b,H,ae,be,p),cu(8,H);break;case 23:break;case 22:var at=H.stateNode;H.memoizedState!==null?at._visibility&2?fc(b,H,ae,be,p):du(b,H):(at._visibility|=2,fc(b,H,ae,be,p)),p&&Ve&2048&&Tf(H.alternate,H);break;case 24:fc(b,H,ae,be,p),p&&Ve&2048&&Hf(H.alternate,H);break;default:fc(b,H,ae,be,p)}a=a.sibling}}function du(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=t,c=a,p=c.flags;switch(c.tag){case 22:du(i,c),p&2048&&Tf(c.alternate,c);break;case 24:du(i,c),p&2048&&Hf(c.alternate,c);break;default:du(i,c)}a=a.sibling}}var hu=8192;function mc(t,a,i){if(t.subtreeFlags&hu)for(t=t.child;t!==null;)lg(t,a,i),t=t.sibling}function lg(t,a,i){switch(t.tag){case 26:mc(t,a,i),t.flags&hu&&t.memoizedState!==null&&Ab(i,Rr,t.memoizedState,t.memoizedProps);break;case 5:mc(t,a,i);break;case 3:case 4:var c=Rr;Rr=Dd(t.stateNode.containerInfo),mc(t,a,i),Rr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=hu,hu=16777216,mc(t,a,i),hu=c):mc(t,a,i));break;default:mc(t,a,i)}}function og(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function fu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var c=a[i];Fs=c,ug(c,t)}og(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)cg(t),t=t.sibling}function cg(t){switch(t.tag){case 0:case 11:case 15:fu(t),t.flags&2048&&Rl(9,t,t.return);break;case 3:fu(t);break;case 12:fu(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,wd(t)):fu(t);break;default:fu(t)}}function wd(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var c=a[i];Fs=c,ug(c,t)}og(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Rl(8,a,a.return),wd(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,wd(a));break;default:wd(a)}t=t.sibling}}function ug(t,a){for(;Fs!==null;){var i=Fs;switch(i.tag){case 0:case 11:case 15:Rl(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:jo(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,Fs=c;else e:for(i=t;Fs!==null;){c=Fs;var p=c.sibling,b=c.return;if(tg(c),c===i){Fs=null;break e}if(p!==null){p.return=b,Fs=p;break e}Fs=b}}}var g5={getCacheForType:function(t){var a=hs(Qa),i=a.data.get(t);return i===void 0&&(i=t(),a.data.set(t,i)),i},cacheSignal:function(){return hs(Qa).controller.signal}},x5=typeof WeakMap=="function"?WeakMap:Map,_A=0,ia=null,bA=null,NA=0,GA=0,Xn=null,Pl=!1,pc=!1,Mf=!1,rl=0,Oa=0,Kl=0,Lo=0,Of=0,Yn=0,gc=0,mu=null,Ln=null,kf=!1,Bd=0,dg=0,yd=1/0,Cd=null,Vl=null,ms=0,zl=null,xc=null,il=0,_f=0,Rf=null,hg=null,pu=0,Pf=null;function Zn(){return(_A&2)!==0&&NA!==0?NA&-NA:S.T!==null?Jf():Xt()}function fg(){if(Yn===0)if((NA&536870912)===0||xA){var t=MA;MA<<=1,(MA&3932160)===0&&(MA=262144),Yn=t}else Yn=536870912;return t=Ua.current,t!==null&&(t.flags|=32),Yn}function Dn(t,a,i){(t===ia&&(GA===2||GA===9)||t.cancelPendingCommit!==null)&&(vc(t,0),ql(t,NA,Yn,!1)),Ia(t,i),((_A&2)===0||t!==ia)&&(t===ia&&((_A&2)===0&&(Lo|=i),Oa===4&&ql(t,NA,Yn,!1)),Ni(t))}function mg(t,a,i){if((_A&6)!==0)throw Error(r(327));var c=!i&&(a&127)===0&&(a&t.expiredLanes)===0||lA(t,a),p=c?w5(t,a):Vf(t,a,!0),b=c;do{if(p===0){pc&&!c&&ql(t,a,0,!1);break}else{if(i=t.current.alternate,b&&!v5(i)){p=Vf(t,a,!1),b=!1;continue}if(p===2){if(b=a,t.errorRecoveryDisabledLanes&b)var H=0;else H=t.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){a=H;e:{var ae=t;p=mu;var be=ae.current.memoizedState.isDehydrated;if(be&&(vc(ae,H).flags|=256),H=Vf(ae,H,!1),H!==2){if(Mf&&!be){ae.errorRecoveryDisabledLanes|=b,Lo|=b,p=4;break e}b=Ln,Ln=p,b!==null&&(Ln===null?Ln=b:Ln.push.apply(Ln,b))}p=H}if(b=!1,p!==2)continue}}if(p===1){vc(t,0),ql(t,a,0,!0);break}e:{switch(c=t,b=p,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ql(c,a,Yn,!Pl);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Bd+300-xt(),10<p)){if(ql(c,a,Yn,!Pl),Kt(c,0,!0)!==0)break e;il=a,c.timeoutHandle=qg(pg.bind(null,c,i,Ln,Cd,kf,a,Yn,Lo,gc,Pl,b,"Throttled",-0,0),p);break e}pg(c,i,Ln,Cd,kf,a,Yn,Lo,gc,Pl,b,null,-0,0)}}break}while(!0);Ni(t)}function pg(t,a,i,c,p,b,H,ae,be,Ve,at,dt,ze,Je){if(t.timeoutHandle=-1,dt=a.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:WA},lg(a,b,dt);var Lt=(b&62914560)===b?Bd-xt():(b&4194048)===b?dg-xt():0;if(Lt=ab(dt,Lt),Lt!==null){il=b,t.cancelPendingCommit=Lt(Cg.bind(null,t,a,b,i,c,p,H,ae,be,at,dt,null,ze,Je)),ql(t,b,H,!Ve);return}}Cg(t,a,b,i,c,p,H,ae,be)}function v5(t){for(var a=t;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var p=i[c],b=p.getSnapshot;p=p.value;try{if(!ws(b(),p))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ql(t,a,i,c){a&=~Of,a&=~Lo,t.suspendedLanes|=a,t.pingedLanes&=~a,c&&(t.warmLanes|=a),c=t.expirationTimes;for(var p=a;0<p;){var b=31-Fe(p),H=1<<b;c[b]=-1,p&=~H}i!==0&&gs(t,i,a)}function Nd(){return(_A&6)===0?(gu(0),!1):!0}function Kf(){if(bA!==null){if(GA===0)var t=bA.return;else t=bA,cr=pi=null,ic(t),nt=null,Nt=0,t=bA;for(;t!==null;)Gp(t.alternate,t),t=t.return;bA=null}}function vc(t,a){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,k5(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),il=0,Kf(),ia=t,bA=i=Bn(t.current,null),NA=a,GA=0,Xn=null,Pl=!1,pc=lA(t,a),Mf=!1,gc=Yn=Of=Lo=Kl=Oa=0,Ln=mu=null,kf=!1,(a&8)!==0&&(a|=a&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=a;0<c;){var p=31-Fe(c),b=1<<p;a|=t[p],c&=~b}return rl=a,di(),i}function gg(t,a){sA=null,S.H=iu,a===Se||a===Re?(a=it(),GA=3):a===Pe?(a=it(),GA=4):GA=a===wf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xn=a,bA===null&&(Oa=1,fd(t,yn(a,t.current)))}function xg(){var t=Ua.current;return t===null?!0:(NA&4194048)===NA?$a===null:(NA&62914560)===NA||(NA&536870912)!==0?t===$a:!1}function vg(){var t=S.H;return S.H=iu,t===null?iu:t}function bg(){var t=S.A;return S.A=g5,t}function jd(){Oa=4,Pl||(NA&4194048)!==NA&&Ua.current!==null||(pc=!0),(Kl&134217727)===0&&(Lo&134217727)===0||ia===null||ql(ia,NA,Yn,!1)}function Vf(t,a,i){var c=_A;_A|=2;var p=vg(),b=bg();(ia!==t||NA!==a)&&(Cd=null,vc(t,a)),a=!1;var H=Oa;e:do try{if(GA!==0&&bA!==null){var ae=bA,be=Xn;switch(GA){case 8:Kf(),H=6;break e;case 3:case 2:case 9:case 6:Ua.current===null&&(a=!0);var Ve=GA;if(GA=0,Xn=null,bc(t,ae,be,Ve),i&&pc){H=0;break e}break;default:Ve=GA,GA=0,Xn=null,bc(t,ae,be,Ve)}}b5(),H=Oa;break}catch(at){gg(t,at)}while(!0);return a&&t.shellSuspendCounter++,cr=pi=null,_A=c,S.H=p,S.A=b,bA===null&&(ia=null,NA=0,di()),H}function b5(){for(;bA!==null;)wg(bA)}function w5(t,a){var i=_A;_A|=2;var c=vg(),p=bg();ia!==t||NA!==a?(Cd=null,yd=xt()+500,vc(t,a)):pc=lA(t,a);e:do try{if(GA!==0&&bA!==null){a=bA;var b=Xn;t:switch(GA){case 1:GA=0,Xn=null,bc(t,a,b,1);break;case 2:case 9:if(ut(b)){GA=0,Xn=null,Bg(a);break}a=function(){GA!==2&&GA!==9||ia!==t||(GA=7),Ni(t)},b.then(a,a);break e;case 3:GA=7;break e;case 4:GA=5;break e;case 7:ut(b)?(GA=0,Xn=null,Bg(a)):(GA=0,Xn=null,bc(t,a,b,7));break;case 5:var H=null;switch(bA.tag){case 26:H=bA.memoizedState;case 5:case 27:var ae=bA;if(H?ix(H):ae.stateNode.complete){GA=0,Xn=null;var be=ae.sibling;if(be!==null)bA=be;else{var Ve=ae.return;Ve!==null?(bA=Ve,Fd(Ve)):bA=null}break t}}GA=0,Xn=null,bc(t,a,b,5);break;case 6:GA=0,Xn=null,bc(t,a,b,6);break;case 8:Kf(),Oa=6;break e;default:throw Error(r(462))}}B5();break}catch(at){gg(t,at)}while(!0);return cr=pi=null,S.H=c,S.A=p,_A=i,bA!==null?0:(ia=null,NA=0,di(),Oa)}function B5(){for(;bA!==null&&!qe();)wg(bA)}function wg(t){var a=zp(t.alternate,t,rl);t.memoizedProps=t.pendingProps,a===null?Fd(t):bA=a}function Bg(t){var a=t,i=a.alternate;switch(a.tag){case 15:case 0:a=kp(i,a,a.pendingProps,a.type,void 0,NA);break;case 11:a=kp(i,a,a.pendingProps,a.type.render,a.ref,NA);break;case 5:ic(a);default:Gp(i,a),a=bA=yo(a,rl),a=zp(i,a,rl)}t.memoizedProps=t.pendingProps,a===null?Fd(t):bA=a}function bc(t,a,i,c){cr=pi=null,ic(a),nt=null,Nt=0;var p=a.return;try{if(c5(t,p,a,i,NA)){Oa=1,fd(t,yn(i,t.current)),bA=null;return}}catch(b){if(p!==null)throw bA=p,b;Oa=1,fd(t,yn(i,t.current)),bA=null;return}a.flags&32768?(xA||c===1?t=!0:pc||(NA&536870912)!==0?t=!1:(Pl=t=!0,(c===2||c===9||c===3||c===6)&&(c=Ua.current,c!==null&&c.tag===13&&(c.flags|=16384))),yg(a,t)):Fd(a)}function Fd(t){var a=t;do{if((a.flags&32768)!==0){yg(a,Pl);return}t=a.return;var i=h5(a.alternate,a,rl);if(i!==null){bA=i;return}if(a=a.sibling,a!==null){bA=a;return}bA=a=t}while(a!==null);Oa===0&&(Oa=5)}function yg(t,a){do{var i=f5(t.alternate,t);if(i!==null){i.flags&=32767,bA=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(t=t.sibling,t!==null)){bA=t;return}bA=t=i}while(t!==null);Oa=6,bA=null}function Cg(t,a,i,c,p,b,H,ae,be){t.cancelPendingCommit=null;do Sd();while(ms!==0);if((_A&6)!==0)throw Error(r(327));if(a!==null){if(a===t.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=Gn,Ot(t,i,b,H,ae,be),t===ia&&(bA=ia=null,NA=0),xc=a,zl=t,il=i,_f=b,Rf=p,hg=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,j5(Pt,function(){return Qg(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=S.T,S.T=null,p=M.p,M.p=2,H=_A,_A|=4;try{m5(t,a,i)}finally{_A=H,M.p=p,S.T=c}}ms=1,Ng(),jg(),Fg()}}function Ng(){if(ms===1){ms=0;var t=zl,a=xc,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=S.T,S.T=null;var c=M.p;M.p=2;var p=_A;_A|=4;try{ng(a,t);var b=Am,H=Ur(t.containerInfo),ae=b.focusedElem,be=b.selectionRange;if(H!==ae&&ae&&ae.ownerDocument&&Bs(ae.ownerDocument.documentElement,ae)){if(be!==null&&Kn(ae)){var Ve=be.start,at=be.end;if(at===void 0&&(at=Ve),"selectionStart"in ae)ae.selectionStart=Ve,ae.selectionEnd=Math.min(at,ae.value.length);else{var dt=ae.ownerDocument||document,ze=dt&&dt.defaultView||window;if(ze.getSelection){var Je=ze.getSelection(),Lt=ae.textContent.length,Wt=Math.min(be.start,Lt),ta=be.end===void 0?Wt:Math.min(be.end,Lt);!Je.extend&&Wt>ta&&(H=ta,ta=Wt,Wt=H);var Me=Ls(ae,Wt),Ee=Ls(ae,ta);if(Me&&Ee&&(Je.rangeCount!==1||Je.anchorNode!==Me.node||Je.anchorOffset!==Me.offset||Je.focusNode!==Ee.node||Je.focusOffset!==Ee.offset)){var Ke=dt.createRange();Ke.setStart(Me.node,Me.offset),Je.removeAllRanges(),Wt>ta?(Je.addRange(Ke),Je.extend(Ee.node,Ee.offset)):(Ke.setEnd(Ee.node,Ee.offset),Je.addRange(Ke))}}}}for(dt=[],Je=ae;Je=Je.parentNode;)Je.nodeType===1&&dt.push({element:Je,left:Je.scrollLeft,top:Je.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<dt.length;ae++){var lt=dt[ae];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}_d=!!tm,Am=tm=null}finally{_A=p,M.p=c,S.T=i}}t.current=a,ms=2}}function jg(){if(ms===2){ms=0;var t=zl,a=xc,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=S.T,S.T=null;var c=M.p;M.p=2;var p=_A;_A|=4;try{eg(t,a.alternate,a)}finally{_A=p,M.p=c,S.T=i}}ms=3}}function Fg(){if(ms===4||ms===3){ms=0,ot();var t=zl,a=xc,i=il,c=hg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ms=5:(ms=0,xc=zl=null,Sg(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(Vl=null),SA(i),a=a.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(mt,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=S.T,p=M.p,M.p=2,S.T=null;try{for(var b=t.onRecoverableError,H=0;H<c.length;H++){var ae=c[H];b(ae.value,{componentStack:ae.stack})}}finally{S.T=a,M.p=p}}(il&3)!==0&&Sd(),Ni(t),p=t.pendingLanes,(i&261930)!==0&&(p&42)!==0?t===Pf?pu++:(pu=0,Pf=t):pu=0,gu(0)}}function Sg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,jo(a)))}function Sd(){return Ng(),jg(),Fg(),Qg()}function Qg(){if(ms!==5)return!1;var t=zl,a=_f;_f=0;var i=SA(il),c=S.T,p=M.p;try{M.p=32>i?32:i,S.T=null,i=Rf,Rf=null;var b=zl,H=il;if(ms=0,xc=zl=null,il=0,(_A&6)!==0)throw Error(r(331));var ae=_A;if(_A|=4,cg(b.current),ig(b,b.current,H,i),_A=ae,gu(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(mt,b)}catch{}return!0}finally{M.p=p,S.T=c,Sg(t,a)}}function Ug(t,a,i){a=yn(i,a),a=bf(t.stateNode,a,2),t=qA(t,a,2),t!==null&&(Ia(t,2),Ni(t))}function JA(t,a,i){if(t.tag===3)Ug(t,t,i);else for(;a!==null;){if(a.tag===3){Ug(a,t,i);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Vl===null||!Vl.has(c))){t=yn(i,t),i=Ep(2),c=qA(a,i,2),c!==null&&(Ip(i,c,a,t),Ia(c,2),Ni(c));break}}a=a.return}}function zf(t,a,i){var c=t.pingCache;if(c===null){c=t.pingCache=new x5;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(i)||(Mf=!0,p.add(i),t=y5.bind(null,t,a,i),a.then(t,t))}function y5(t,a,i){var c=t.pingCache;c!==null&&c.delete(a),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,ia===t&&(NA&i)===i&&(Oa===4||Oa===3&&(NA&62914560)===NA&&300>xt()-Bd?(_A&2)===0&&vc(t,0):Of|=i,gc===NA&&(gc=0)),Ni(t)}function Eg(t,a){a===0&&(a=oa()),t=Dr(t,a),t!==null&&(Ia(t,a),Ni(t))}function C5(t){var a=t.memoizedState,i=0;a!==null&&(i=a.retryLane),Eg(t,i)}function N5(t,a){var i=0;switch(t.tag){case 31:case 13:var c=t.stateNode,p=t.memoizedState;p!==null&&(i=p.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),Eg(t,i)}function j5(t,a){return Ne(t,a)}var Qd=null,wc=null,qf=!1,Ud=!1,Gf=!1,Gl=0;function Ni(t){t!==wc&&t.next===null&&(wc===null?Qd=wc=t:wc=wc.next=t),Ud=!0,qf||(qf=!0,S5())}function gu(t,a){if(!Gf&&Ud){Gf=!0;do for(var i=!1,c=Qd;c!==null;){if(t!==0){var p=c.pendingLanes;if(p===0)var b=0;else{var H=c.suspendedLanes,ae=c.pingedLanes;b=(1<<31-Fe(42|t)+1)-1,b&=p&~(H&~ae),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(i=!0,Tg(c,b))}else b=NA,b=Kt(c,c===ia?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(b&3)===0||lA(c,b)||(i=!0,Tg(c,b));c=c.next}while(i);Gf=!1}}function F5(){Ig()}function Ig(){Ud=qf=!1;var t=0;Gl!==0&&O5()&&(t=Gl);for(var a=xt(),i=null,c=Qd;c!==null;){var p=c.next,b=Lg(c,a);b===0?(c.next=null,i===null?Qd=p:i.next=p,p===null&&(wc=i)):(i=c,(t!==0||(b&3)!==0)&&(Ud=!0)),c=p}ms!==0&&ms!==5||gu(t),Gl!==0&&(Gl=0)}function Lg(t,a){for(var i=t.suspendedLanes,c=t.pingedLanes,p=t.expirationTimes,b=t.pendingLanes&-62914561;0<b;){var H=31-Fe(b),ae=1<<H,be=p[H];be===-1?((ae&i)===0||(ae&c)!==0)&&(p[H]=An(ae,a)):be<=a&&(t.expiredLanes|=ae),b&=~ae}if(a=ia,i=NA,i=Kt(t,t===a?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,i===0||t===a&&(GA===2||GA===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Te(c),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||lA(t,i)){if(a=i&-i,a===t.callbackPriority)return a;switch(c!==null&&Te(c),SA(i)){case 2:case 8:i=Yt;break;case 32:i=Pt;break;case 268435456:i=Qt;break;default:i=Pt}return c=Dg.bind(null,t),i=Ne(i,c),t.callbackPriority=a,t.callbackNode=i,a}return c!==null&&c!==null&&Te(c),t.callbackPriority=2,t.callbackNode=null,2}function Dg(t,a){if(ms!==0&&ms!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Sd()&&t.callbackNode!==i)return null;var c=NA;return c=Kt(t,t===ia?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(mg(t,c,a),Lg(t,xt()),t.callbackNode!=null&&t.callbackNode===i?Dg.bind(null,t):null)}function Tg(t,a){if(Sd())return null;mg(t,a,!0)}function S5(){_5(function(){(_A&6)!==0?Ne(Tt,F5):Ig()})}function Jf(){if(Gl===0){var t=f;t===0&&(t=Jt,Jt<<=1,(Jt&261888)===0&&(Jt=256)),Gl=t}return Gl}function Hg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Cr(""+t)}function Mg(t,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,t.id&&i.setAttribute("form",t.id),a.parentNode.insertBefore(i,a),t=new FormData(t),i.parentNode.removeChild(i),t}function Q5(t,a,i,c,p){if(a==="submit"&&i&&i.stateNode===p){var b=Hg((p[rt]||null).action),H=c.submitter;H&&(a=(a=H[rt]||null)?Hg(a.formAction):H.getAttribute("formAction"),a!==null&&(b=a,H=null));var ae=new vs("action","action",null,c,p);t.push({event:ae,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Gl!==0){var be=H?Mg(p,H):new FormData(p);ff(i,{pending:!0,data:be,method:p.method,action:b},null,be)}}else typeof b=="function"&&(ae.preventDefault(),be=H?Mg(p,H):new FormData(p),ff(i,{pending:!0,data:be,method:p.method,action:b},b,be))},currentTarget:p}]})}}for(var Xf=0;Xf<zs.length;Xf++){var Yf=zs[Xf],U5=Yf.toLowerCase(),E5=Yf[0].toUpperCase()+Yf.slice(1);mA(U5,"on"+E5)}mA(oi,"onAnimationEnd"),mA(Ir,"onAnimationIteration"),mA(ci,"onAnimationStart"),mA("dblclick","onDoubleClick"),mA("focusin","onFocus"),mA("focusout","onBlur"),mA(Sl,"onTransitionRun"),mA(zi,"onTransitionStart"),mA(ui,"onTransitionCancel"),mA(Ql,"onTransitionEnd"),mn("onMouseEnter",["mouseout","mouseover"]),mn("onMouseLeave",["mouseout","mouseover"]),mn("onPointerEnter",["pointerout","pointerover"]),mn("onPointerLeave",["pointerout","pointerover"]),kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function Og(t,a){a=(a&4)!==0;for(var i=0;i<t.length;i++){var c=t[i],p=c.event;c=c.listeners;e:{var b=void 0;if(a)for(var H=c.length-1;0<=H;H--){var ae=c[H],be=ae.instance,Ve=ae.currentTarget;if(ae=ae.listener,be!==b&&p.isPropagationStopped())break e;b=ae,p.currentTarget=Ve;try{b(p)}catch(at){OA(at)}p.currentTarget=null,b=be}else for(H=0;H<c.length;H++){if(ae=c[H],be=ae.instance,Ve=ae.currentTarget,ae=ae.listener,be!==b&&p.isPropagationStopped())break e;b=ae,p.currentTarget=Ve;try{b(p)}catch(at){OA(at)}p.currentTarget=null,b=be}}}}function wA(t,a){var i=a[_t];i===void 0&&(i=a[_t]=new Set);var c=t+"__bubble";i.has(c)||(kg(a,t,2,!1),i.add(c))}function Zf(t,a,i){var c=0;a&&(c|=4),kg(i,t,c,a)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function Wf(t){if(!t[Ed]){t[Ed]=!0,Us.forEach(function(i){i!=="selectionchange"&&(I5.has(i)||Zf(i,!1,t),Zf(i,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Ed]||(a[Ed]=!0,Zf("selectionchange",!1,a))}}function kg(t,a,i,c){switch(fx(a)){case 2:var p=rb;break;case 8:p=ib;break;default:p=hm}i=p.bind(null,a,i,t),p=void 0,!Nr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?t.addEventListener(a,i,{capture:!0,passive:p}):t.addEventListener(a,i,!0):p!==void 0?t.addEventListener(a,i,{passive:p}):t.addEventListener(a,i,!1)}function $f(t,a,i,c,p){var b=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var H=c.tag;if(H===3||H===4){var ae=c.stateNode.containerInfo;if(ae===p)break;if(H===4)for(H=c.return;H!==null;){var be=H.tag;if((be===3||be===4)&&H.stateNode.containerInfo===p)return;H=H.return}for(;ae!==null;){if(H=zA(ae),H===null)return;if(be=H.tag,be===5||be===6||be===26||be===27){c=b=H;continue e}ae=ae.parentNode}}c=c.return}_i(function(){var Ve=b,at=Ai(i),dt=[];e:{var ze=on.get(t);if(ze!==void 0){var Je=vs,Lt=t;switch(t){case"keypress":if(sn(i)===0)break e;case"keydown":case"keyup":Je=vo;break;case"focusin":Lt="focus",Je=Be;break;case"focusout":Lt="blur",Je=Be;break;case"beforeblur":case"afterblur":Je=Be;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=si;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=q;break;case oi:case Ir:case ci:Je=ye;break;case Ql:Je=je;break;case"scroll":case"scrollend":Je=Pi;break;case"wheel":Je=tt;break;case"copy":case"cut":case"paste":Je=ct;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=wl;break;case"toggle":case"beforetoggle":Je=Ut}var Wt=(a&4)!==0,ta=!Wt&&(t==="scroll"||t==="scrollend"),Me=Wt?ze!==null?ze+"Capture":null:ze;Wt=[];for(var Ee=Ve,Ke;Ee!==null;){var lt=Ee;if(Ke=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||Ke===null||Me===null||(lt=ar(Ee,Me),lt!=null&&Wt.push(vu(Ee,lt,Ke))),ta)break;Ee=Ee.return}0<Wt.length&&(ze=new Je(ze,Lt,null,i,at),dt.push({event:ze,listeners:Wt}))}}if((a&7)===0){e:{if(ze=t==="mouseover"||t==="pointerover",Je=t==="mouseout"||t==="pointerout",ze&&i!==ki&&(Lt=i.relatedTarget||i.fromElement)&&(zA(Lt)||Lt[Xe]))break e;if((Je||ze)&&(ze=at.window===at?at:(ze=at.ownerDocument)?ze.defaultView||ze.parentWindow:window,Je?(Lt=i.relatedTarget||i.toElement,Je=Ve,Lt=Lt?zA(Lt):null,Lt!==null&&(ta=o(Lt),Wt=Lt.tag,Lt!==ta||Wt!==5&&Wt!==27&&Wt!==6)&&(Lt=null)):(Je=null,Lt=Ve),Je!==Lt)){if(Wt=vn,lt="onMouseLeave",Me="onMouseEnter",Ee="mouse",(t==="pointerout"||t==="pointerover")&&(Wt=wl,lt="onPointerLeave",Me="onPointerEnter",Ee="pointer"),ta=Je==null?ze:ma(Je),Ke=Lt==null?ze:ma(Lt),ze=new Wt(lt,Ee+"leave",Je,i,at),ze.target=ta,ze.relatedTarget=Ke,lt=null,zA(at)===Ve&&(Wt=new Wt(Me,Ee+"enter",Lt,i,at),Wt.target=Ke,Wt.relatedTarget=ta,lt=Wt),ta=lt,Je&&Lt)t:{for(Wt=L5,Me=Je,Ee=Lt,Ke=0,lt=Me;lt;lt=Wt(lt))Ke++;lt=0;for(var qt=Ee;qt;qt=Wt(qt))lt++;for(;0<Ke-lt;)Me=Wt(Me),Ke--;for(;0<lt-Ke;)Ee=Wt(Ee),lt--;for(;Ke--;){if(Me===Ee||Ee!==null&&Me===Ee.alternate){Wt=Me;break t}Me=Wt(Me),Ee=Wt(Ee)}Wt=null}else Wt=null;Je!==null&&_g(dt,ze,Je,Wt,!1),Lt!==null&&ta!==null&&_g(dt,ta,Lt,Wt,!0)}}e:{if(ze=Ve?ma(Ve):window,Je=ze.nodeName&&ze.nodeName.toLowerCase(),Je==="select"||Je==="input"&&ze.type==="file")var DA=Xa;else if(Bl(ze))if(Ki)DA=Nl;else{DA=Go;var Ht=wo}else Je=ze.nodeName,!Je||Je.toLowerCase()!=="input"||ze.type!=="checkbox"&&ze.type!=="radio"?Ve&&an(Ve.elementType)&&(DA=Xa):DA=bn;if(DA&&(DA=DA(t,Ve))){yl(dt,DA,i,at);break e}Ht&&Ht(t,ze,Ve),t==="focusout"&&Ve&&ze.type==="number"&&Ve.memoizedProps.value!=null&&$r(ze,"number",ze.value)}switch(Ht=Ve?ma(Ve):window,t){case"focusin":(Bl(Ht)||Ht.contentEditable==="true")&&(Vn=Ht,zn=Ve,sa=null);break;case"focusout":sa=zn=Vn=null;break;case"mousedown":Vi=!0;break;case"contextmenu":case"mouseup":case"dragend":Vi=!1,ys(dt,i,at);break;case"selectionchange":if(Er)break;case"keydown":case"keyup":ys(dt,i,at)}var cA;if(aA)e:{switch(t){case"compositionstart":var jA="onCompositionStart";break e;case"compositionend":jA="onCompositionEnd";break e;case"compositionupdate":jA="onCompositionUpdate";break e}jA=void 0}else bs?os(t,i)&&(jA="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(jA="onCompositionStart");jA&&(ua&&i.locale!=="ko"&&(bs||jA!=="onCompositionStart"?jA==="onCompositionEnd"&&bs&&(cA=nr()):(xn=at,Ri="value"in xn?xn.value:xn.textContent,bs=!0)),Ht=Id(Ve,jA),0<Ht.length&&(jA=new dA(jA,t,null,i,at),dt.push({event:jA,listeners:Ht}),cA?jA.data=cA:(cA=_a(i),cA!==null&&(jA.data=cA)))),(cA=yA?rn(t,i):lr(t,i))&&(jA=Id(Ve,"onBeforeInput"),0<jA.length&&(Ht=new dA("onBeforeInput","beforeinput",null,i,at),dt.push({event:Ht,listeners:jA}),Ht.data=cA)),Q5(dt,t,Ve,i,at)}Og(dt,a)})}function vu(t,a,i){return{instance:t,listener:a,currentTarget:i}}function Id(t,a){for(var i=a+"Capture",c=[];t!==null;){var p=t,b=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||b===null||(p=ar(t,i),p!=null&&c.unshift(vu(t,p,b)),p=ar(t,a),p!=null&&c.push(vu(t,p,b))),t.tag===3)return c;t=t.return}return[]}function L5(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function _g(t,a,i,c,p){for(var b=a._reactName,H=[];i!==null&&i!==c;){var ae=i,be=ae.alternate,Ve=ae.stateNode;if(ae=ae.tag,be!==null&&be===c)break;ae!==5&&ae!==26&&ae!==27||Ve===null||(be=Ve,p?(Ve=ar(i,b),Ve!=null&&H.unshift(vu(i,Ve,be))):p||(Ve=ar(i,b),Ve!=null&&H.push(vu(i,Ve,be)))),i=i.return}H.length!==0&&t.push({event:a,listeners:H})}var D5=/\r\n?/g,T5=/\u0000|\uFFFD/g;function Rg(t){return(typeof t=="string"?t:""+t).replace(D5,`
`).replace(T5,"")}function Pg(t,a){return a=Rg(a),Rg(t)===a}function ea(t,a,i,c,p,b){switch(i){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||gn(t,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&gn(t,""+c);break;case"className":ZA(t,"class",c);break;case"tabIndex":ZA(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ZA(t,i,c);break;case"style":vl(t,c,b);break;case"data":if(a!=="object"){ZA(t,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||i!=="href")){t.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(i);break}c=Cr(""+c),t.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(i==="formAction"?(a!=="input"&&ea(t,a,"name",p.name,p,null),ea(t,a,"formEncType",p.formEncType,p,null),ea(t,a,"formMethod",p.formMethod,p,null),ea(t,a,"formTarget",p.formTarget,p,null)):(ea(t,a,"encType",p.encType,p,null),ea(t,a,"method",p.method,p,null),ea(t,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(i);break}c=Cr(""+c),t.setAttribute(i,c);break;case"onClick":c!=null&&(t.onclick=WA);break;case"onScroll":c!=null&&wA("scroll",t);break;case"onScrollEnd":c!=null&&wA("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(p.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}i=Cr(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,""+c):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":c===!0?t.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,c):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(i,c):t.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(i):t.setAttribute(i,c);break;case"popover":wA("beforetoggle",t),wA("toggle",t),Zr(t,"popover",c);break;case"xlinkActuate":_s(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":_s(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":_s(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":_s(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":_s(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":_s(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":_s(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":_s(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":_s(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Zr(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=ei.get(i)||i,Zr(t,i,c))}}function em(t,a,i,c,p,b){switch(i){case"style":vl(t,c,b);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(p.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"children":typeof c=="string"?gn(t,c):(typeof c=="number"||typeof c=="bigint")&&gn(t,""+c);break;case"onScroll":c!=null&&wA("scroll",t);break;case"onScrollEnd":c!=null&&wA("scrollend",t);break;case"onClick":c!=null&&(t.onclick=WA);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tr.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(p=i.endsWith("Capture"),a=i.slice(2,p?i.length-7:void 0),b=t[rt]||null,b=b!=null?b[i]:null,typeof b=="function"&&t.removeEventListener(a,b,p),typeof c=="function")){typeof b!="function"&&b!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(a,c,p);break e}i in t?t[i]=c:c===!0?t.setAttribute(i,""):Zr(t,i,c)}}}function Hs(t,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wA("error",t),wA("load",t);var c=!1,p=!1,b;for(b in i)if(i.hasOwnProperty(b)){var H=i[b];if(H!=null)switch(b){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ea(t,a,b,H,i,null)}}p&&ea(t,a,"srcSet",i.srcSet,i,null),c&&ea(t,a,"src",i.src,i,null);return;case"input":wA("invalid",t);var ae=b=H=p=null,be=null,Ve=null;for(c in i)if(i.hasOwnProperty(c)){var at=i[c];if(at!=null)switch(c){case"name":p=at;break;case"type":H=at;break;case"checked":be=at;break;case"defaultChecked":Ve=at;break;case"value":b=at;break;case"defaultValue":ae=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,a));break;default:ea(t,a,c,at,i,null)}}pl(t,b,ae,be,Ve,H,p,!1);return;case"select":wA("invalid",t),c=H=b=null;for(p in i)if(i.hasOwnProperty(p)&&(ae=i[p],ae!=null))switch(p){case"value":b=ae;break;case"defaultValue":H=ae;break;case"multiple":c=ae;default:ea(t,a,p,ae,i,null)}a=b,i=H,t.multiple=!!c,a!=null?Ar(t,!!c,a,!1):i!=null&&Ar(t,!!c,i,!0);return;case"textarea":wA("invalid",t),b=p=c=null;for(H in i)if(i.hasOwnProperty(H)&&(ae=i[H],ae!=null))switch(H){case"value":c=ae;break;case"defaultValue":p=ae;break;case"children":b=ae;break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(91));break;default:ea(t,a,H,ae,i,null)}gl(t,c,p,b);return;case"option":for(be in i)if(i.hasOwnProperty(be)&&(c=i[be],c!=null))switch(be){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ea(t,a,be,c,i,null)}return;case"dialog":wA("beforetoggle",t),wA("toggle",t),wA("cancel",t),wA("close",t);break;case"iframe":case"object":wA("load",t);break;case"video":case"audio":for(c=0;c<xu.length;c++)wA(xu[c],t);break;case"image":wA("error",t),wA("load",t);break;case"details":wA("toggle",t);break;case"embed":case"source":case"link":wA("error",t),wA("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ve in i)if(i.hasOwnProperty(Ve)&&(c=i[Ve],c!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ea(t,a,Ve,c,i,null)}return;default:if(an(a)){for(at in i)i.hasOwnProperty(at)&&(c=i[at],c!==void 0&&em(t,a,at,c,i,void 0));return}}for(ae in i)i.hasOwnProperty(ae)&&(c=i[ae],c!=null&&ea(t,a,ae,c,i,null))}function H5(t,a,i,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,b=null,H=null,ae=null,be=null,Ve=null,at=null;for(Je in i){var dt=i[Je];if(i.hasOwnProperty(Je)&&dt!=null)switch(Je){case"checked":break;case"value":break;case"defaultValue":be=dt;default:c.hasOwnProperty(Je)||ea(t,a,Je,null,c,dt)}}for(var ze in c){var Je=c[ze];if(dt=i[ze],c.hasOwnProperty(ze)&&(Je!=null||dt!=null))switch(ze){case"type":b=Je;break;case"name":p=Je;break;case"checked":Ve=Je;break;case"defaultChecked":at=Je;break;case"value":H=Je;break;case"defaultValue":ae=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(r(137,a));break;default:Je!==dt&&ea(t,a,ze,Je,c,dt)}}Wr(t,H,ae,be,Ve,at,b,p);return;case"select":Je=H=ae=ze=null;for(b in i)if(be=i[b],i.hasOwnProperty(b)&&be!=null)switch(b){case"value":break;case"multiple":Je=be;default:c.hasOwnProperty(b)||ea(t,a,b,null,c,be)}for(p in c)if(b=c[p],be=i[p],c.hasOwnProperty(p)&&(b!=null||be!=null))switch(p){case"value":ze=b;break;case"defaultValue":ae=b;break;case"multiple":H=b;default:b!==be&&ea(t,a,p,b,c,be)}a=ae,i=H,c=Je,ze!=null?Ar(t,!!i,ze,!1):!!c!=!!i&&(a!=null?Ar(t,!!i,a,!0):Ar(t,!!i,i?[]:"",!1));return;case"textarea":Je=ze=null;for(ae in i)if(p=i[ae],i.hasOwnProperty(ae)&&p!=null&&!c.hasOwnProperty(ae))switch(ae){case"value":break;case"children":break;default:ea(t,a,ae,null,c,p)}for(H in c)if(p=c[H],b=i[H],c.hasOwnProperty(H)&&(p!=null||b!=null))switch(H){case"value":ze=p;break;case"defaultValue":Je=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==b&&ea(t,a,H,p,c,b)}Oi(t,ze,Je);return;case"option":for(var Lt in i)if(ze=i[Lt],i.hasOwnProperty(Lt)&&ze!=null&&!c.hasOwnProperty(Lt))switch(Lt){case"selected":t.selected=!1;break;default:ea(t,a,Lt,null,c,ze)}for(be in c)if(ze=c[be],Je=i[be],c.hasOwnProperty(be)&&ze!==Je&&(ze!=null||Je!=null))switch(be){case"selected":t.selected=ze&&typeof ze!="function"&&typeof ze!="symbol";break;default:ea(t,a,be,ze,c,Je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in i)ze=i[Wt],i.hasOwnProperty(Wt)&&ze!=null&&!c.hasOwnProperty(Wt)&&ea(t,a,Wt,null,c,ze);for(Ve in c)if(ze=c[Ve],Je=i[Ve],c.hasOwnProperty(Ve)&&ze!==Je&&(ze!=null||Je!=null))switch(Ve){case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,a));break;default:ea(t,a,Ve,ze,c,Je)}return;default:if(an(a)){for(var ta in i)ze=i[ta],i.hasOwnProperty(ta)&&ze!==void 0&&!c.hasOwnProperty(ta)&&em(t,a,ta,void 0,c,ze);for(at in c)ze=c[at],Je=i[at],!c.hasOwnProperty(at)||ze===Je||ze===void 0&&Je===void 0||em(t,a,at,ze,c,Je);return}}for(var Me in i)ze=i[Me],i.hasOwnProperty(Me)&&ze!=null&&!c.hasOwnProperty(Me)&&ea(t,a,Me,null,c,ze);for(dt in c)ze=c[dt],Je=i[dt],!c.hasOwnProperty(dt)||ze===Je||ze==null&&Je==null||ea(t,a,dt,ze,c,Je)}function Kg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M5(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,i=performance.getEntriesByType("resource"),c=0;c<i.length;c++){var p=i[c],b=p.transferSize,H=p.initiatorType,ae=p.duration;if(b&&ae&&Kg(H)){for(H=0,ae=p.responseEnd,c+=1;c<i.length;c++){var be=i[c],Ve=be.startTime;if(Ve>ae)break;var at=be.transferSize,dt=be.initiatorType;at&&Kg(dt)&&(be=be.responseEnd,H+=at*(be<ae?1:(ae-Ve)/(be-Ve)))}if(--c,a+=8*(b+H)/(p.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var tm=null,Am=null;function Ld(t){return t.nodeType===9?t:t.ownerDocument}function Vg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zg(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function am(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var sm=null;function O5(){var t=window.event;return t&&t.type==="popstate"?t===sm?!1:(sm=t,!0):(sm=null,!1)}var qg=typeof setTimeout=="function"?setTimeout:void 0,k5=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,_5=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(R5)}:qg;function R5(t){setTimeout(function(){throw t})}function Jl(t){return t==="head"}function Jg(t,a){var i=a,c=0;do{var p=i.nextSibling;if(t.removeChild(i),p&&p.nodeType===8)if(i=p.data,i==="/$"||i==="/&"){if(c===0){t.removeChild(p),Nc(a);return}c--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")c++;else if(i==="html")bu(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,bu(i);for(var b=i.firstChild;b;){var H=b.nextSibling,ae=b.nodeName;b[RA]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&b.rel.toLowerCase()==="stylesheet"||i.removeChild(b),b=H}}else i==="body"&&bu(t.ownerDocument.body);i=p}while(i);Nc(a)}function Xg(t,a){var i=t;t=0;do{var c=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=c}while(i)}function nm(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":nm(i),Da(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function P5(t,a,i,c){for(;t.nodeType===1;){var p=i;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[RA])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(b=t.getAttribute("rel"),b==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(b!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(b=t.getAttribute("src"),(b!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&b&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var b=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===b)return t}else return t;if(t=pr(t.nextSibling),t===null)break}return null}function K5(t,a,i){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=pr(t.nextSibling),t===null))return null;return t}function Yg(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=pr(t.nextSibling),t===null))return null;return t}function rm(t){return t.data==="$?"||t.data==="$~"}function im(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function V5(t,a){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||i.readyState!=="loading")a();else{var c=function(){a(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function pr(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var lm=null;function Zg(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(a===0)return pr(t.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}t=t.nextSibling}return null}function Wg(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return t;a--}else i!=="/$"&&i!=="/&"||a++}t=t.previousSibling}return null}function $g(t,a,i){switch(a=Ld(i),t){case"html":if(t=a.documentElement,!t)throw Error(r(452));return t;case"head":if(t=a.head,!t)throw Error(r(453));return t;case"body":if(t=a.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function bu(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Da(t)}var gr=new Map,ex=new Set;function Dd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ll=M.d;M.d={f:z5,r:q5,D:G5,C:J5,L:X5,m:Y5,X:W5,S:Z5,M:$5};function z5(){var t=ll.f(),a=Nd();return t||a}function q5(t){var a=Fa(t);a!==null&&a.tag===5&&a.type==="form"?gp(a):ll.r(t)}var Bc=typeof document>"u"?null:document;function tx(t,a,i){var c=Bc;if(c&&typeof a=="string"&&a){var p=Ga(a);p='link[rel="'+t+'"][href="'+p+'"]',typeof i=="string"&&(p+='[crossorigin="'+i+'"]'),ex.has(p)||(ex.add(p),t={rel:t,crossOrigin:i,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),Hs(a,"link",t),ca(a),c.head.appendChild(a)))}}function G5(t){ll.D(t),tx("dns-prefetch",t,null)}function J5(t,a){ll.C(t,a),tx("preconnect",t,a)}function X5(t,a,i){ll.L(t,a,i);var c=Bc;if(c&&t&&a){var p='link[rel="preload"][as="'+Ga(a)+'"]';a==="image"&&i&&i.imageSrcSet?(p+='[imagesrcset="'+Ga(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(p+='[imagesizes="'+Ga(i.imageSizes)+'"]')):p+='[href="'+Ga(t)+'"]';var b=p;switch(a){case"style":b=yc(t);break;case"script":b=Cc(t)}gr.has(b)||(t=v({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:t,as:a},i),gr.set(b,t),c.querySelector(p)!==null||a==="style"&&c.querySelector(wu(b))||a==="script"&&c.querySelector(Bu(b))||(a=c.createElement("link"),Hs(a,"link",t),ca(a),c.head.appendChild(a)))}}function Y5(t,a){ll.m(t,a);var i=Bc;if(i&&t){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Ga(c)+'"][href="'+Ga(t)+'"]',b=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Cc(t)}if(!gr.has(b)&&(t=v({rel:"modulepreload",href:t},a),gr.set(b,t),i.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Bu(b)))return}c=i.createElement("link"),Hs(c,"link",t),ca(c),i.head.appendChild(c)}}}function Z5(t,a,i){ll.S(t,a,i);var c=Bc;if(c&&t){var p=rs(c).hoistableStyles,b=yc(t);a=a||"default";var H=p.get(b);if(!H){var ae={loading:0,preload:null};if(H=c.querySelector(wu(b)))ae.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},i),(i=gr.get(b))&&om(t,i);var be=H=c.createElement("link");ca(be),Hs(be,"link",t),be._p=new Promise(function(Ve,at){be.onload=Ve,be.onerror=at}),be.addEventListener("load",function(){ae.loading|=1}),be.addEventListener("error",function(){ae.loading|=2}),ae.loading|=4,Td(H,a,c)}H={type:"stylesheet",instance:H,count:1,state:ae},p.set(b,H)}}}function W5(t,a){ll.X(t,a);var i=Bc;if(i&&t){var c=rs(i).hoistableScripts,p=Cc(t),b=c.get(p);b||(b=i.querySelector(Bu(p)),b||(t=v({src:t,async:!0},a),(a=gr.get(p))&&cm(t,a),b=i.createElement("script"),ca(b),Hs(b,"link",t),i.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(p,b))}}function $5(t,a){ll.M(t,a);var i=Bc;if(i&&t){var c=rs(i).hoistableScripts,p=Cc(t),b=c.get(p);b||(b=i.querySelector(Bu(p)),b||(t=v({src:t,async:!0,type:"module"},a),(a=gr.get(p))&&cm(t,a),b=i.createElement("script"),ca(b),Hs(b,"link",t),i.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(p,b))}}function Ax(t,a,i,c){var p=(p=fe.current)?Dd(p):null;if(!p)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=yc(i.href),i=rs(p).hoistableStyles,c=i.get(a),c||(c={type:"style",instance:null,count:0,state:null},i.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=yc(i.href);var b=rs(p).hoistableStyles,H=b.get(t);if(H||(p=p.ownerDocument||p,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(t,H),(b=p.querySelector(wu(t)))&&!b._p&&(H.instance=b,H.state.loading=5),gr.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},gr.set(t,i),b||eb(p,t,i,H.state))),a&&c===null)throw Error(r(528,""));return H}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Cc(i),i=rs(p).hoistableScripts,c=i.get(a),c||(c={type:"script",instance:null,count:0,state:null},i.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function yc(t){return'href="'+Ga(t)+'"'}function wu(t){return'link[rel="stylesheet"]['+t+"]"}function ax(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function eb(t,a,i,c){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=t.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Hs(a,"link",i),ca(a),t.head.appendChild(a))}function Cc(t){return'[src="'+Ga(t)+'"]'}function Bu(t){return"script[async]"+t}function sx(t,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var c=t.querySelector('style[data-href~="'+Ga(i.href)+'"]');if(c)return a.instance=c,ca(c),c;var p=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),ca(c),Hs(c,"style",p),Td(c,i.precedence,t),a.instance=c;case"stylesheet":p=yc(i.href);var b=t.querySelector(wu(p));if(b)return a.state.loading|=4,a.instance=b,ca(b),b;c=ax(i),(p=gr.get(p))&&om(c,p),b=(t.ownerDocument||t).createElement("link"),ca(b);var H=b;return H._p=new Promise(function(ae,be){H.onload=ae,H.onerror=be}),Hs(b,"link",c),a.state.loading|=4,Td(b,i.precedence,t),a.instance=b;case"script":return b=Cc(i.src),(p=t.querySelector(Bu(b)))?(a.instance=p,ca(p),p):(c=i,(p=gr.get(b))&&(c=v({},i),cm(c,p)),t=t.ownerDocument||t,p=t.createElement("script"),ca(p),Hs(p,"link",c),t.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Td(c,i.precedence,t));return a.instance}function Td(t,a,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,b=p,H=0;H<c.length;H++){var ae=c[H];if(ae.dataset.precedence===a)b=ae;else if(b!==p)break}b?b.parentNode.insertBefore(t,b.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(t,a.firstChild))}function om(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function cm(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Hd=null;function nx(t,a,i){if(Hd===null){var c=new Map,p=Hd=new Map;p.set(i,c)}else p=Hd,c=p.get(i),c||(c=new Map,p.set(i,c));if(c.has(t))return c;for(c.set(t,null),i=i.getElementsByTagName(t),p=0;p<i.length;p++){var b=i[p];if(!(b[RA]||b[et]||t==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var H=b.getAttribute(a)||"";H=t+H;var ae=c.get(H);ae?ae.push(b):c.set(H,[b])}}return c}function rx(t,a,i){t=t.ownerDocument||t,t.head.insertBefore(i,a==="title"?t.querySelector("head > title"):null)}function tb(t,a,i){if(i===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ix(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Ab(t,a,i,c){if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var p=yc(c.href),b=a.querySelector(wu(p));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Md.bind(t),a.then(t,t)),i.state.loading|=4,i.instance=b,ca(b);return}b=a.ownerDocument||a,c=ax(c),(p=gr.get(p))&&om(c,p),b=b.createElement("link"),ca(b);var H=b;H._p=new Promise(function(ae,be){H.onload=ae,H.onerror=be}),Hs(b,"link",c),i.instance=b}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Md.bind(t),a.addEventListener("load",i),a.addEventListener("error",i))}}var um=0;function ab(t,a){return t.stylesheets&&t.count===0&&kd(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var c=setTimeout(function(){if(t.stylesheets&&kd(t,t.stylesheets),t.unsuspend){var b=t.unsuspend;t.unsuspend=null,b()}},6e4+a);0<t.imgBytes&&um===0&&(um=62500*M5());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&kd(t,t.stylesheets),t.unsuspend)){var b=t.unsuspend;t.unsuspend=null,b()}},(t.imgBytes>um?50:800)+a);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Md(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Od=null;function kd(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Od=new Map,a.forEach(sb,t),Od=null,Md.call(t))}function sb(t,a){if(!(a.state.loading&4)){var i=Od.get(t);if(i)var c=i.get(null);else{i=new Map,Od.set(t,i);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<p.length;b++){var H=p[b];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(i.set(H.dataset.precedence,H),c=H)}c&&i.set(null,c)}p=a.instance,H=p.getAttribute("data-precedence"),b=i.get(H)||c,b===c&&i.set(null,p),i.set(H,p),this.count++,c=Md.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),b?b.parentNode.insertBefore(p,b.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),a.state.loading|=4}}var yu={$$typeof:_,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function nb(t,a,i,c,p,b,H,ae,be){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ea(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ea(0),this.hiddenUpdates=Ea(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=b,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function lx(t,a,i,c,p,b,H,ae,be,Ve,at,dt){return t=new nb(t,a,i,H,be,Ve,at,dt,ae),a=1,b===!0&&(a|=24),b=Ns(3,null,null,a),t.current=b,b.stateNode=t,a=Hl(),a.refCount++,t.pooledCache=a,a.refCount++,b.memoizedState={element:c,isDehydrated:i,cache:a},kA(b),t}function ox(t){return t?(t=cs,t):cs}function cx(t,a,i,c,p,b){p=ox(p),c.context===null?c.context=p:c.pendingContext=p,c=Zt(a),c.payload={element:i},b=b===void 0?null:b,b!==null&&(c.callback=b),i=qA(t,c,a),i!==null&&(Dn(i,t,a),Za(i,t,a))}function ux(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<a?i:a}}function dm(t,a){ux(t,a),(t=t.alternate)&&ux(t,a)}function dx(t){if(t.tag===13||t.tag===31){var a=Dr(t,67108864);a!==null&&Dn(a,t,67108864),dm(t,67108864)}}function hx(t){if(t.tag===13||t.tag===31){var a=Zn();a=YA(a);var i=Dr(t,a);i!==null&&Dn(i,t,a),dm(t,a)}}var _d=!0;function rb(t,a,i,c){var p=S.T;S.T=null;var b=M.p;try{M.p=2,hm(t,a,i,c)}finally{M.p=b,S.T=p}}function ib(t,a,i,c){var p=S.T;S.T=null;var b=M.p;try{M.p=8,hm(t,a,i,c)}finally{M.p=b,S.T=p}}function hm(t,a,i,c){if(_d){var p=fm(c);if(p===null)$f(t,a,c,Rd,i),mx(t,c);else if(ob(p,t,a,i,c))c.stopPropagation();else if(mx(t,c),a&4&&-1<lb.indexOf(t)){for(;p!==null;){var b=Fa(p);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var H=uA(b.pendingLanes);if(H!==0){var ae=b;for(ae.pendingLanes|=2,ae.entangledLanes|=2;H;){var be=1<<31-Fe(H);ae.entanglements[1]|=be,H&=~be}Ni(b),(_A&6)===0&&(yd=xt()+500,gu(0))}}break;case 31:case 13:ae=Dr(b,2),ae!==null&&Dn(ae,b,2),Nd(),dm(b,2)}if(b=fm(c),b===null&&$f(t,a,c,Rd,i),b===p)break;p=b}p!==null&&c.stopPropagation()}else $f(t,a,c,null,i)}}function fm(t){return t=Ai(t),mm(t)}var Rd=null;function mm(t){if(Rd=null,t=zA(t),t!==null){var a=o(t);if(a===null)t=null;else{var i=a.tag;if(i===13){if(t=u(a),t!==null)return t;t=null}else if(i===31){if(t=d(a),t!==null)return t;t=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Rd=t,null}function fx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ct()){case Tt:return 2;case Yt:return 8;case Pt:case jt:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var pm=!1,Xl=null,Yl=null,Zl=null,Cu=new Map,Nu=new Map,Wl=[],lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mx(t,a){switch(t){case"focusin":case"focusout":Xl=null;break;case"dragenter":case"dragleave":Yl=null;break;case"mouseover":case"mouseout":Zl=null;break;case"pointerover":case"pointerout":Cu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(a.pointerId)}}function ju(t,a,i,c,p,b){return t===null||t.nativeEvent!==b?(t={blockedOn:a,domEventName:i,eventSystemFlags:c,nativeEvent:b,targetContainers:[p]},a!==null&&(a=Fa(a),a!==null&&dx(a)),t):(t.eventSystemFlags|=c,a=t.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),t)}function ob(t,a,i,c,p){switch(a){case"focusin":return Xl=ju(Xl,t,a,i,c,p),!0;case"dragenter":return Yl=ju(Yl,t,a,i,c,p),!0;case"mouseover":return Zl=ju(Zl,t,a,i,c,p),!0;case"pointerover":var b=p.pointerId;return Cu.set(b,ju(Cu.get(b)||null,t,a,i,c,p)),!0;case"gotpointercapture":return b=p.pointerId,Nu.set(b,ju(Nu.get(b)||null,t,a,i,c,p)),!0}return!1}function px(t){var a=zA(t.target);if(a!==null){var i=o(a);if(i!==null){if(a=i.tag,a===13){if(a=u(i),a!==null){t.blockedOn=a,me(t.priority,function(){hx(i)});return}}else if(a===31){if(a=d(i),a!==null){t.blockedOn=a,me(t.priority,function(){hx(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pd(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var i=fm(t.nativeEvent);if(i===null){i=t.nativeEvent;var c=new i.constructor(i.type,i);ki=c,i.target.dispatchEvent(c),ki=null}else return a=Fa(i),a!==null&&dx(a),t.blockedOn=i,!1;a.shift()}return!0}function gx(t,a,i){Pd(t)&&i.delete(a)}function cb(){pm=!1,Xl!==null&&Pd(Xl)&&(Xl=null),Yl!==null&&Pd(Yl)&&(Yl=null),Zl!==null&&Pd(Zl)&&(Zl=null),Cu.forEach(gx),Nu.forEach(gx)}function Kd(t,a){t.blockedOn===a&&(t.blockedOn=null,pm||(pm=!0,A.unstable_scheduleCallback(A.unstable_NormalPriority,cb)))}var Vd=null;function xx(t){Vd!==t&&(Vd=t,A.unstable_scheduleCallback(A.unstable_NormalPriority,function(){Vd===t&&(Vd=null);for(var a=0;a<t.length;a+=3){var i=t[a],c=t[a+1],p=t[a+2];if(typeof c!="function"){if(mm(c||i)===null)continue;break}var b=Fa(i);b!==null&&(t.splice(a,3),a-=3,ff(b,{pending:!0,data:p,method:i.method,action:c},c,p))}}))}function Nc(t){function a(be){return Kd(be,t)}Xl!==null&&Kd(Xl,t),Yl!==null&&Kd(Yl,t),Zl!==null&&Kd(Zl,t),Cu.forEach(a),Nu.forEach(a);for(var i=0;i<Wl.length;i++){var c=Wl[i];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Wl.length&&(i=Wl[0],i.blockedOn===null);)px(i),i.blockedOn===null&&Wl.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var p=i[c],b=i[c+1],H=p[rt]||null;if(typeof b=="function")H||xx(i);else if(H){var ae=null;if(b&&b.hasAttribute("formAction")){if(p=b,H=b[rt]||null)ae=H.formAction;else if(mm(p)!==null)continue}else ae=H.action;typeof ae=="function"?i[c+1]=ae:(i.splice(c,3),c-=3),xx(i)}}}function vx(){function t(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(H){return p=H})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(i,20)}function i(){if(!c&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function gm(t){this._internalRoot=t}zd.prototype.render=gm.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(r(409));var i=a.current,c=Zn();cx(i,c,t,a,null,null)},zd.prototype.unmount=gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;cx(t.current,2,null,t,null,null),Nd(),a[Xe]=null}};function zd(t){this._internalRoot=t}zd.prototype.unstable_scheduleHydration=function(t){if(t){var a=Xt();t={blockedOn:null,target:t,priority:a};for(var i=0;i<Wl.length&&a!==0&&a<Wl[i].priority;i++);Wl.splice(i,0,t),i===0&&px(t)}};var bx=s.version;if(bx!=="19.2.4")throw Error(r(527,bx,"19.2.4"));M.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=m(a),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var ub={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qd.isDisabled&&qd.supportsFiber)try{mt=qd.inject(ub),wt=qd}catch{}}return Su.createRoot=function(t,a){if(!l(t))throw Error(r(299));var i=!1,c="",p=Fp,b=Sp,H=Qp;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(H=a.onRecoverableError)),a=lx(t,1,!1,null,null,i,c,null,p,b,H,vx),t[Xe]=a.current,Wf(t),new gm(a)},Su.hydrateRoot=function(t,a,i){if(!l(t))throw Error(r(299));var c=!1,p="",b=Fp,H=Sp,ae=Qp,be=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onUncaughtError!==void 0&&(b=i.onUncaughtError),i.onCaughtError!==void 0&&(H=i.onCaughtError),i.onRecoverableError!==void 0&&(ae=i.onRecoverableError),i.formState!==void 0&&(be=i.formState)),a=lx(t,1,!0,a,i??null,c,p,be,b,H,ae,vx),a.context=ox(null),i=a.current,c=Zn(),c=YA(c),p=Zt(c),p.callback=null,qA(i,p,c),i=c,a.current.lanes=i,Ia(a,i),Ni(a),t[Xe]=a.current,Wf(t),new zd(a)},Su.version="19.2.4",Su}var Ux;function wb(){if(Ux)return bm.exports;Ux=1;function A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A)}catch(s){console.error(s)}}return A(),bm.exports=bb(),bm.exports}var Bb=wb();const yb=v2(Bb);var ha=(A=>(A.SQ_M="sq_m",A.SQ_FT="sq_ft",A.SQ_CM="sq_cm",A.SQ_MM="sq_mm",A.SQ_IN="sq_in",A.M="m",A.CM="cm",A.MM="mm",A.FT="ft",A.IN="in",A))(ha||{}),Aa=(A=>(A.FIXED="fixed",A.MEASURED="measured",A))(Aa||{});const K0=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15A2.25 2.25 0 0 0 2.25 6.75v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),Ph=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.455.09-.934.09-1.425 0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})}),oo=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 3.375-3.375-3.375m0 0A9.06 9.06 0 0 1 12 2.25c-5.006 0-9 4.044-9 9s4.044 9 9 9 9-4.044 9-9z"})}),V0=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25Z"})}),z0=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-12v.75m0 3v.75m0 3v.75m0 3V18m-3-12h18M3 12h18m-3 6h3M3 6h3M3 18h3"})}),co=({status:A})=>{const r=`px-2.5 py-0.5 text-xs font-semibold rounded-full inline-block capitalize ${{Paid:"bg-green-100 text-green-800",Unpaid:"bg-red-100 text-red-800","Partially Paid":"bg-yellow-100 text-yellow-800",Draft:"bg-slate-200 text-slate-800",Approved:"bg-blue-100 text-blue-800"}[A]}`;return e.jsx("span",{className:r,children:A})},jc=.3048,Cm=100,Nm=1e3,jm=12,br={[ha.SQ_M]:1,[ha.SQ_FT]:jc*jc,[ha.SQ_CM]:1/Cm*(1/Cm),[ha.SQ_MM]:1/Nm*(1/Nm),[ha.SQ_IN]:jc/jm*(jc/jm),[ha.M]:1,[ha.CM]:1/Cm,[ha.MM]:1/Nm,[ha.FT]:jc,[ha.IN]:jc/jm},hl=A=>A.startsWith("sq_"),Cb=A=>!hl(A),Fm=(A,s)=>{if(!hl(s)||!A||A<=0)return{};const n=A/br[s],r={};return Object.values(ha).filter(o=>hl(o)).forEach(o=>{r[o]=n*br[o]}),r},Nb=(A,s,n,r)=>{if(!A||A<=0||!s||s<=0||!n||n<=0||!r)return{};if(hl(r))return console.error("calculateCostUnitPrices expects a linear unit for dimensions."),{};const l=s*br[r],o=n*br[r],u=l*o;if(u<=0)return{};const d=A/u,h={};return Object.values(ha).filter(w=>hl(w)).forEach(w=>{h[w]=d*br[w]}),h},Hn=(A,s)=>{const n=(s.selectedAddOnIds||[]).reduce((l,o)=>{const u=(A.addOnOptions||[]).find(d=>d.id===o);return l+((u==null?void 0:u.price)||0)},0),r=A.price+n;if(A.type!==Aa.FIXED&&A.measurementUnit){const{length:l=0,width:o=0,unit:u,quantity:d}=s;if(!u)return 0;let h;if(hl(u))h=l*(o>0?o:1)*br[u];else{const v=l*br[u],B=o*br[u];h=v*B}const m=r/br[A.measurementUnit];let w=h*m*d;return A.minPrice&&w<A.minPrice?A.minPrice:w}return r*s.quantity},Ku=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 7.756a4.5 4.5 0 1 0 0 8.488M7.5 10.5h5.25m-5.25 3h5.25M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),we=({className:A,type:s,value:n,onChange:r,...l})=>{const o="block w-full rounded-md border-blue-300 bg-blue-50 text-blue-900 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm placeholder:text-blue-400 px-3 py-2";if(s==="number"){const[h,m]=se.useState(String(n??""));se.useEffect(()=>{const B=Number(n),x=parseFloat(h);B!==x&&(h===""&&(B===0||isNaN(B))||m(String(n??"")))},[n]);const w=B=>{const x=B.target.value;if((x===""||x==="-"||/^-?\d*\.?\d*$/.test(x))&&(m(x),r)){const C={...B,target:{...B.target,value:x}};r(C)}},v=`${o} no-spinners ${A||""}`;return e.jsx("input",{...l,type:"text",inputMode:"decimal",className:v,value:h,onChange:w})}const d=`${o} ${s==="date"?"[color-scheme:light]":""} ${A||""}`;return e.jsx("input",{type:s,className:d,value:n,onChange:r,...l})},he=({children:A,variant:s="primary",size:n="normal",className:r,...l})=>{const o="inline-flex items-center justify-center rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",outline:"border border-blue-500 bg-transparent text-blue-600 hover:bg-blue-100 focus:ring-blue-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"text-blue-600 hover:bg-blue-100 focus:ring-blue-500"},d={normal:"px-4 py-2 text-sm",icon:"p-2",sm:"px-3 py-1.5 text-xs"},h=`${o} ${u[s]} ${d[n]} ${r||""}`;return e.jsx("button",{className:h,...l,children:A})},jb=A=>{const s=String(A??"");return/[",\n]/.test(s)?`"${s.replace(/"/g,'""')}"`:s},ks=(A,s)=>{if(s.length===0){alert("No data to export.");return}const n=s.map(h=>{const m={};for(const w in h){const v=h[w];typeof v=="object"&&v!==null?m[w]=JSON.stringify(v):m[w]=v}return m}),r=Object.keys(n[0]),o=[r.join(","),...n.map(h=>r.map(m=>jb(h[m])).join(","))].join(`
`),u=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");if(d.download!==void 0){const h=URL.createObjectURL(u);d.setAttribute("href",h),d.setAttribute("download",A),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}};function Fb(A){const s=[];let n="",r=!1;for(let l=0;l<A.length;l++){const o=A[l];o==='"'?r&&A[l+1]==='"'?(n+='"',l++):r=!r:o===","&&!r?(s.push(n),n=""):n+=o}return s.push(n),s.map(l=>l.startsWith('"')&&l.endsWith('"')?l.slice(1,-1).replace(/""/g,'"'):l)}const Kh=A=>new Promise((s,n)=>{const r=new FileReader;r.onload=l=>{var o;try{const d=((o=l.target)==null?void 0:o.result).split(/\r\n|\n/).filter(w=>w.trim());if(d.length<1)throw new Error("CSV file appears to be empty.");const h=d[0].split(",").map(w=>w.trim()),m=[];for(let w=1;w<d.length;w++){const v=Fb(d[w]);if(v.length!==h.length){console.warn(`Row ${w+1} has incorrect number of columns. Expected ${h.length}, got ${v.length}. Skipping.`);continue}const B={};h.forEach((x,C)=>{B[x]=v[C]}),m.push(B)}s(m)}catch(u){n(u)}},r.onerror=l=>{n(l)},r.readAsText(A)}),KA=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),r0=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.075c0 1.313-.964 2.4-2.175 2.4H5.925a2.175 2.175 0 0 1-2.175-2.4V14.15M17.25 6.75v-1.5a2.25 2.25 0 0 0-2.25-2.25H9a2.25 2.25 0 0 0-2.25 2.25v1.5m6 0h-6m6 0a2.25 2.25 0 0 1 2.25 2.25v3.75a2.25 2.25 0 0 1-2.25-2.25h-6a2.25 2.25 0 0 1-2.25-2.25V9a2.25 2.25 0 0 1 2.25-2.25h6Z"})}),Sb=({invoices:A,quotes:s,drafts:n,purchaseOrders:r,bills:l,creditNotes:o,settings:u,inventory:d,trackedJobs:h,onViewJob:m,onDownloadVatReportPdf:w})=>{const v=u.companyName&&u.companyName!=="Your Company Name"?`Welcome Back, ${u.companyName}!`:"Welcome Back!",[B,x]=se.useState(""),[C,N]=se.useState(""),L=u.currencySymbol||"",F=V=>`${L}${V.toFixed(2)}`,Q=se.useMemo(()=>{const V=new Date;V.setHours(0,0,0,0);const Z=[];return h.filter(ue=>ue.status!=="complete").forEach(ue=>{const S=new Date(ue.dueDate);S.setHours(0,0,0,0);const M=S.getTime()-V.getTime(),Y=Math.ceil(M/(1e3*60*60*24));Y<0?Z.push({id:ue.id,type:"Job",description:ue.description,customer:ue.customerName,daysUntilDue:Y,statusText:"Overdue",colorClass:"text-red-600 font-bold",action:()=>m()}):Y===0?Z.push({id:ue.id,type:"Job",description:ue.description,customer:ue.customerName,daysUntilDue:Y,statusText:"Due today",colorClass:"text-orange-600 font-bold",action:()=>m()}):Y<=7&&Z.push({id:ue.id,type:"Job",description:ue.description,customer:ue.customerName,daysUntilDue:Y,statusText:`Due in ${Y} day${Y===1?"":"s"}`,colorClass:"text-yellow-700",action:()=>m()})}),Z.sort((ue,S)=>ue.daysUntilDue-S.daysUntilDue)},[h,m]),_=se.useMemo(()=>{const V={totalCount:A.length,totalValue:0,totalPaid:0,statuses:{Paid:0,"Partially Paid":0,Unpaid:0}};return A.forEach(Z=>{V.totalValue+=Z.total;const ue=Z.payments.reduce((S,M)=>S+M.amount,0);V.totalPaid+=ue,ue>=Z.total?V.statuses.Paid++:ue>0?V.statuses["Partially Paid"]++:V.statuses.Unpaid++}),V},[A]),te=se.useMemo(()=>{const V=Z=>{const ue=new Date(Z.state.issueDate),S=B?new Date(B):null,M=C?new Date(C):null;return!(S&&ue<S||M&&(M.setHours(23,59,59,999),ue>M))};return{invoices:A.filter(V),purchaseOrders:r.filter(V),bills:l.filter(V),creditNotes:o.filter(V)}},[A,r,l,o,B,C]),O=se.useMemo(()=>{let V=0,Z=0;te.invoices.forEach(S=>{S.state.lineItems.forEach(M=>{let Y;const le=d.find(X=>X.id===M.inventoryItemId);if(le){const X=le.parentId?d.find(re=>re.id===le.parentId):null,ee=[...le.addOnOptions||[],...(X==null?void 0:X.addOnOptions)||[]];Y=Hn({...le,addOnOptions:ee},M)}else Y=(M.price||0)*M.quantity;const de=M.discount.type==="percentage"?Y*(M.discount.value/100):M.discount.value,J=Y-de;let U=0;if(S.state.taxMode==="inclusive"){const X=1+M.vatRate/100,ee=J/X;U=J-ee}else S.state.taxMode==="exclusive"&&(U=J*(M.vatRate/100));V+=U})}),te.creditNotes.forEach(S=>{S.state.lineItems.forEach(M=>{let Y;const le=d.find(X=>X.id===M.inventoryItemId);if(le){const X=le.parentId?d.find(re=>re.id===le.parentId):null,ee=[...le.addOnOptions||[],...(X==null?void 0:X.addOnOptions)||[]];Y=Hn({...le,addOnOptions:ee},M)}else Y=(M.price||0)*M.quantity;const de=M.discount.type==="percentage"?Y*(M.discount.value/100):M.discount.value,J=Y-de;let U=0;if(S.state.taxMode==="inclusive"){const X=1+M.vatRate/100,ee=J/X;U=J-ee}else S.state.taxMode==="exclusive"&&(U=J*(M.vatRate/100));V-=U})});const ue=(S,M)=>{let Y=0;return S.forEach(le=>{const de=le.quantity*le.unitPrice;let J=0;if(M==="inclusive"){const U=1+le.vatRate/100,X=de/U;J=de-X}else M==="exclusive"&&(J=de*(le.vatRate/100));Y+=J}),Y};return te.purchaseOrders.forEach(S=>{Z+=ue(S.state.lineItems,S.state.taxMode)}),te.bills.forEach(S=>{Z+=ue(S.state.lineItems,S.state.taxMode)}),{totalVatPayable:V,totalVatReclaimable:Z,netVatPosition:V-Z}},[te,d]),k=se.useMemo(()=>({totalCount:s.length,totalValue:s.reduce((V,Z)=>V+Z.total,0)}),[s]),P=se.useMemo(()=>({totalCount:r.length,totalValue:r.reduce((V,Z)=>V+Z.total,0)}),[r]),E=se.useMemo(()=>({totalCount:l.length,totalValue:l.reduce((V,Z)=>V+Z.total,0)}),[l]),D=se.useMemo(()=>({totalCount:n.length,totalValue:n.reduce((V,Z)=>V+Z.total,0)}),[n]),G=()=>{const V=te.invoices.map(S=>{var M,Y;return{Date:S.state.issueDate,"Document #":S.state.invoiceNumber,Customer:S.state.customerName,Net:S.total/(1+(((M=S.state.lineItems[0])==null?void 0:M.vatRate)||0)/100),VAT:S.total-S.total/(1+(((Y=S.state.lineItems[0])==null?void 0:Y.vatRate)||0)/100),Total:S.total}}),Z=[...te.purchaseOrders.map(S=>{var M,Y;return{Date:S.state.issueDate,"Document #":S.state.poNumber,Supplier:S.state.supplierName,Net:S.total/(1+(((M=S.state.lineItems[0])==null?void 0:M.vatRate)||0)/100),VAT:S.total-S.total/(1+(((Y=S.state.lineItems[0])==null?void 0:Y.vatRate)||0)/100),Total:S.total}}),...te.bills.map(S=>{var M,Y;return{Date:S.state.issueDate,"Document #":S.state.reference,Supplier:S.state.supplierName,Net:S.total/(1+(((M=S.state.lineItems[0])==null?void 0:M.vatRate)||0)/100),VAT:S.total-S.total/(1+(((Y=S.state.lineItems[0])==null?void 0:Y.vatRate)||0)/100),Total:S.total}})],ue=[{A:"VAT SUMMARY"},{A:"Start Date",B:B||"N/A"},{A:"End Date",B:C||"N/A"},{A:"Total VAT Payable",B:O.totalVatPayable.toFixed(2)},{A:"Total VAT Reclaimable",B:O.totalVatReclaimable.toFixed(2)},{A:"Net VAT Position",B:O.netVatPosition.toFixed(2)},{},{A:"VAT ON SALES (PAYABLE)"},{A:"Date",B:"Document #",C:"Customer",D:"Net",E:"VAT",F:"Total"},...V.map(S=>({A:S.Date,B:S["Document #"],C:S.Customer,D:S.Net.toFixed(2),E:S.VAT.toFixed(2),F:S.Total.toFixed(2)})),{},{A:"VAT ON PURCHASES (RECLAIMABLE)"},{A:"Date",B:"Document #",C:"Supplier",D:"Net",E:"VAT",F:"Total"},...Z.map(S=>({A:S.Date,B:S["Document #"],C:S.Supplier,D:S.Net.toFixed(2),E:S.VAT.toFixed(2),F:S.Total.toFixed(2)}))];ks(`VAT_Report_${B||"start"}_to_${C||"end"}.csv`,ue)},T=()=>{w({filteredInvoices:te.invoices,filteredCreditNotes:te.creditNotes,filteredPurchaseOrders:te.purchaseOrders,filteredBills:te.bills,vatSummary:O,startDate:B,endDate:C,settings:u,inventory:d})},R=({title:V,value:Z,description:ue})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:V}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:Z}),ue&&e.jsx("p",{className:"text-sm text-slate-500",children:ue})]});return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:v}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(r0,{className:"w-8 h-8 text-indigo-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Jobs Board Reminders"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-2",children:Q.length>0?Q.map(V=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-md",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:V.description}),e.jsxs("p",{className:"text-sm text-slate-500",children:[V.type," for ",V.customer]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`text-sm font-medium ${V.colorClass}`,children:V.statusText}),e.jsx(he,{variant:"outline",onClick:V.action,children:"View"})]})]},`${V.type}-${V.id}`)):e.jsx("p",{className:"text-slate-500 text-center py-4",children:"No upcoming jobs due soon!"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(K0,{className:"w-8 h-8 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Invoices Overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(R,{title:"Total Invoices",value:String(_.totalCount)}),e.jsx(R,{title:"Total Value",value:F(_.totalValue)}),e.jsx(R,{title:"Total Paid",value:F(_.totalPaid)}),e.jsx(R,{title:"Balance Due",value:F(_.totalValue-_.totalPaid)})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 mb-2",children:"Invoices by Status"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(co,{status:"Paid"}),e.jsx("span",{children:_.statuses.Paid}),e.jsx("div",{className:"w-px h-4 bg-slate-200"}),e.jsx(co,{status:"Partially Paid"}),e.jsx("span",{children:_.statuses["Partially Paid"]}),e.jsx("div",{className:"w-px h-4 bg-slate-200"}),e.jsx(co,{status:"Unpaid"}),e.jsx("span",{children:_.statuses.Unpaid})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ku,{className:"w-8 h-8 text-teal-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"VAT Overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-6 bg-slate-50 p-4 rounded-lg items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vatStartDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Start Date"}),e.jsx(we,{id:"vatStartDate",type:"date",value:B,onChange:V=>x(V.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vatEndDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"End Date"}),e.jsx(we,{id:"vatEndDate",type:"date",value:C,onChange:V=>N(V.target.value)})]}),e.jsx(he,{variant:"outline",onClick:()=>{x(""),N("")},children:"Clear Dates"}),e.jsxs(he,{variant:"primary",onClick:G,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs(he,{variant:"primary",onClick:T,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"PDF"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(R,{title:"VAT Payable (from Invoices)",value:F(O.totalVatPayable)}),e.jsx(R,{title:"VAT Reclaimable (from Purchases)",value:F(O.totalVatReclaimable)}),e.jsx(R,{title:"Net VAT Position",value:F(O.netVatPosition),description:O.netVatPosition>=0?"Amount you owe":"Amount you can reclaim"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ph,{className:"w-6 h-6 text-slate-600 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Quotes"})]}),e.jsx(R,{title:"Total Quotes",value:String(k.totalCount)}),e.jsx(R,{title:"Total Value",value:F(k.totalValue)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(V0,{className:"w-6 h-6 text-slate-600 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"POs"})]}),e.jsx(R,{title:"Total POs",value:String(P.totalCount)}),e.jsx(R,{title:"Total Value",value:F(P.totalValue)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(z0,{className:"w-6 h-6 text-slate-600 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Bills"})]}),e.jsx(R,{title:"Total Bills",value:String(E.totalCount)}),e.jsx(R,{title:"Total Value",value:F(E.totalValue)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(oo,{className:"w-6 h-6 text-slate-600 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Drafts"})]}),e.jsx(R,{title:"Total Drafts",value:String(D.totalCount)}),e.jsx(R,{title:"Total Value",value:F(D.totalValue)})]})]})]})},yr=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),AA=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Qb=({mode:A,customers:s,customerName:n,setCustomerName:r,invoiceNumber:l,reference:o,setReference:u,issueDate:d,setIssueDate:h,completionDate:m,setCompletionDate:w,dueDate:v,setDueDate:B,onOpenSearch:x,onOpenNewCustomerModal:C,onSaveCustomer:N})=>{const L=n.trim()!==""&&!s.some(F=>F.name.toLowerCase()===n.toLowerCase().trim());return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-start",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customerName",className:"block text-sm font-medium text-slate-600 mb-1",children:"Customer / Business Name"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(we,{id:"customerName",value:n,onChange:F=>r(F.target.value),placeholder:"Search or type a new name..."}),L&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"New customer. Click '+' to save."})]}),e.jsx(he,{type:"button",size:"icon",variant:"outline",onClick:x,title:"Search for existing customer",children:e.jsx(yr,{className:"w-5 h-5"})}),e.jsx(he,{type:"button",size:"icon",variant:"outline",onClick:C,title:"Add detailed new customer",children:e.jsx(AA,{className:"w-5 h-5"})}),L&&e.jsx(he,{type:"button",size:"icon",variant:"primary",onClick:()=>N(n),title:"Quick save name only",children:e.jsx(AA,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invoiceNumber",className:"block text-sm font-medium text-slate-600 mb-1",children:A==="invoice"?"Invoice Number":"Quote Number"}),e.jsx(we,{id:"invoiceNumber",value:l,readOnly:!0,disabled:!0,className:"bg-slate-200 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reference",className:"block text-sm font-medium text-slate-600 mb-1",children:"Reference (PO #)"}),e.jsx(we,{id:"reference",value:o,onChange:F=>u(F.target.value)})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"issueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Issue Date"}),e.jsx(we,{id:"issueDate",type:"date",value:d,onChange:F=>h(F.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"completionDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Completion of Order"}),e.jsx(we,{id:"completionDate",type:"date",value:m,onChange:F=>w(F.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Payment Due Date"}),e.jsx(we,{id:"dueDate",type:"date",value:v,onChange:F=>B(F.target.value)})]})]})},fA=({className:A,children:s,...n})=>{const l=`block w-full rounded-md border-blue-300 bg-blue-50 text-blue-900 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-3 py-2 ${A||""}`;return e.jsx("select",{className:l,...n,children:s})},HA=Qi.forwardRef(({className:A,...s},n)=>{const l=`block w-full rounded-md border-blue-300 bg-blue-50 text-blue-900 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm placeholder:text-blue-400 px-3 py-2 ${A||""}`;return e.jsx("textarea",{className:l,...s,ref:n})});HA.displayName="TextArea";const pA=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.067-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),Ub=Object.values(ha).filter(A=>hl(A)),b2=({item:A,inventory:s,taxMode:n,settings:r,accounts:l=[],onUpdate:o,onRemove:u,onOpenSearch:d,onOpenAddOns:h,readOnly:m=!1})=>{const w=s.find(k=>k.id===A.inventoryItemId),v=w!=null&&w.parentId?s.find(k=>k.id===w.parentId):null,B=se.useRef(null),x=r.currencySymbol||"",C=r.showAccountOnInvoices??!0;se.useLayoutEffect(()=>{B.current&&(B.current.style.height="auto",A.description&&(B.current.style.height=`${B.current.scrollHeight}px`))},[A.description]);const N=(k,P)=>{o(A.id,{[k]:P})},L=(k,P)=>{({...A.discount},k==="value"&&(P=parseFloat(P)||0)),o(A.id,{discount:{...A.discount,[k]:P}})},F=se.useMemo(()=>{let k;if(!w)k=(A.price||0)*A.quantity;else{const D=[...w.addOnOptions||[],...(v==null?void 0:v.addOnOptions)||[]],G=Array.from(new Map(D.map(T=>[`${T.name.toLowerCase()}-${T.price}`,T])).values());k=Hn({...w,addOnOptions:G},A)}const P=A.discount.type==="percentage"?k*(A.discount.value/100):A.discount.value,E=k-P;if(n==="exclusive"){const D=E*(A.vatRate/100);return E+D}return E},[A,w,v,n]),Q=se.useMemo(()=>{const k={Income:[],Expenses:[],Assets:[],Liabilities:[],Equity:[]};return l.forEach(P=>{k[P.type]?k[P.type].push(P):(k.Other||(k.Other=[]),k.Other.push(P))}),k},[l]),_=["Income","Expenses","Assets","Liabilities","Equity"],te=se.useMemo(()=>{if(!w)return[];const k=[...w.addOnOptions||[],...(v==null?void 0:v.addOnOptions)||[]];return Array.from(new Map(k.map(P=>[`${P.name.toLowerCase()}-${P.price}`,P])).values())},[w,v]),O=se.useMemo(()=>!A.selectedAddOnIds||A.selectedAddOnIds.length===0?"":A.selectedAddOnIds.map(k=>{const P=te.find(E=>E.id===k);return P?`${P.name} (+${x}${P.price.toFixed(2)})`:null}).filter(Boolean).join(", "),[A.selectedAddOnIds,te,x]);return e.jsxs("fieldset",{disabled:m,className:"bg-slate-50 p-4 rounded-lg grid grid-cols-1 sm:grid-cols-[repeat(24,minmax(0,1fr))] gap-x-1 gap-y-2 items-start text-sm disabled:opacity-70",children:[e.jsxs("div",{className:`col-span-1 ${C?n==="none"?"sm:col-span-5":"sm:col-span-4":n==="none"?"sm:col-span-7":"sm:col-span-6"}`,children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"Item / Description"}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(he,{variant:"outline",size:"icon",onClick:()=>d(A.id),type:"button",title:w?`Change item: ${w.name}`:"Search & Select Item...",children:e.jsx(yr,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-grow flex flex-col gap-1",children:[e.jsx(HA,{ref:B,value:A.description,onChange:k=>N("description",k.target.value),placeholder:"Item description...",rows:1,className:"resize-none text-left !py-1.5 w-full"}),w&&te.length>0&&!m&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-1",children:[e.jsxs(he,{variant:"outline",size:"sm",className:"!py-0.5 !px-2 text-[10px] h-auto",onClick:()=>h==null?void 0:h(A.id),children:[e.jsx(AA,{className:"w-3 h-3 mr-1"})," Add-ons"]}),O&&e.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded border border-blue-100 italic truncate max-w-[200px]",title:O,children:O})]})]})]})]}),C&&e.jsxs("div",{className:"col-span-1 sm:col-span-4",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"Account"}),e.jsxs(fA,{value:A.accountId||"",onChange:k=>N("accountId",k.target.value),className:"!py-1.5 w-full",children:[e.jsx("option",{value:"",children:"Select Account"}),_.map(k=>{const P=Q[k];return!P||P.length===0?null:e.jsx("optgroup",{label:k,children:P.map(E=>e.jsx("option",{value:E.id,children:E.code?`${E.code}  ${E.name}`:E.name},E.id))},k)})]})]}),e.jsxs("div",{className:`col-span-1 ${C?n==="none"?"sm:col-span-7":"sm:col-span-6":n==="none"?"sm:col-span-9":"sm:col-span-8"}`,children:[e.jsxs("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:[n==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"," / Dimensions"]}),w?w.type===Aa.MEASURED?e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsx(we,{type:"number",placeholder:"L",value:A.length||"",onChange:k=>N("length",parseFloat(k.target.value)),className:"text-left !py-1.5 no-spinners"}),e.jsx(we,{type:"number",placeholder:"W",value:A.width||"",onChange:k=>N("width",parseFloat(k.target.value)),className:"text-left !py-1.5 no-spinners"}),e.jsx(fA,{value:A.unit||"",onChange:k=>N("unit",k.target.value),className:"!py-1.5 !px-1",children:Ub.map(k=>e.jsx("option",{value:k,children:k},k))})]}):e.jsxs("div",{className:"text-slate-500 h-full flex items-center pl-2 text-sm border rounded bg-slate-100",children:["Fixed: ",e.jsxs("span",{className:"font-medium text-slate-700 ml-1",children:[x,w.price.toFixed(2)]})]}):e.jsx(we,{type:"number",placeholder:"Unit Price",value:A.price??"",onChange:k=>N("price",parseFloat(k.target.value)||0),className:"text-left !py-1.5 no-spinners w-full","aria-label":"Unit Price for Manual Entry Only"})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"Qty"}),e.jsx(we,{type:"number",value:A.quantity,onChange:k=>N("quantity",parseInt(k.target.value,10)||1),min:"1",className:"text-center !py-1.5 no-spinners w-full"})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"Discount"}),e.jsxs("div",{className:"flex",children:[e.jsx(we,{type:"number",step:"0.01",min:"0",value:A.discount.value,onChange:k=>L("value",k.target.value),className:"rounded-r-none text-left !py-1.5 !px-1 no-spinners w-full"}),e.jsxs(fA,{value:A.discount.type,onChange:k=>L("type",k.target.value),className:"rounded-l-none border-l-0 !py-1.5 !px-0 w-10 text-center",children:[e.jsx("option",{value:"fixed",children:x}),e.jsx("option",{value:"percentage",children:"%"})]})]})]}),n!=="none"&&e.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"VAT (%)"}),e.jsx(we,{type:"number",value:A.vatRate,onChange:k=>N("vatRate",parseInt(k.target.value,10)||0),min:"0",className:"text-center !py-1.5 no-spinners w-full"})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-3 flex items-end sm:items-center justify-end h-full",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1 mr-2",children:"Total:"}),e.jsxs("span",{className:"font-semibold text-slate-800",children:[x,F.toFixed(2)]})]}),!m&&e.jsx("div",{className:"col-span-1 sm:col-span-1 flex items-center justify-end h-full",children:e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>u(A.id),title:"Delete line item",className:"h-8 w-8",children:e.jsx(pA,{className:"w-4 h-4 text-slate-400 hover:text-red-500"})})})]})},er=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),Mn=({isOpen:A,onClose:s,title:n,children:r,footer:l,size:o="6xl"})=>{if(!A)return null;const u={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl"};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:s}),e.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl transform transition-all sm:my-8 w-full ${u[o]} mx-4 border border-slate-200`,children:[e.jsxs("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xl leading-6 font-bold text-slate-900",id:"modal-title",children:n}),e.jsxs("button",{type:"button",className:"text-slate-400 hover:text-slate-600",onClick:s,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(er,{className:"h-6 w-6"})]})]}),e.jsx("div",{className:"mt-6",children:r})]}),e.jsx("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-3 sm:px-6 flex flex-row-reverse gap-2",children:l!==void 0?l:e.jsx(he,{variant:"primary",onClick:s,children:"Done"})})]})]})},q0=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),w2=({isOpen:A,onClose:s,inventory:n,categories:r,settings:l,onSelectItem:o,invoiceType:u})=>{const[d,h]=se.useState(""),[m,w]=se.useState("all"),[v,B]=se.useState(new Set),x=l.currencySymbol||"",C=se.useMemo(()=>{let F=n;if(u==="fixed"&&(F=n.filter(_=>_.type===Aa.FIXED)),!d)return F;const Q=d.toLowerCase();return F.filter(_=>_.name.toLowerCase().includes(Q)||_.sku&&_.sku.toLowerCase().includes(Q))},[n,d,u]),N=se.useMemo(()=>{const F=[],Q={};for(const _ of C){const te=_.categoryId||"uncategorized";m!=="all"&&te!==m||(Q[te]||(Q[te]=[]),Q[te].push(_))}for(const _ of r)Q[_.id]&&F.push({category:_,items:Q[_.id]});return Q.uncategorized&&F.push({category:null,items:Q.uncategorized}),F},[C,r,m]),L=F=>{B(Q=>{const _=new Set(Q);return _.has(F)?_.delete(F):_.add(F),_})};return e.jsxs(Mn,{isOpen:A,onClose:s,title:"Search Inventory",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Search Items"}),e.jsx(we,{placeholder:"Search by name or SKU...",value:d,onChange:F=>h(F.target.value),autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Category"}),e.jsxs(fA,{value:m,onChange:F=>w(F.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"uncategorized",children:"Uncategorized"}),r.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-4 pr-2",children:N.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[e.jsx("p",{className:"text-slate-500",children:"No items found matching your criteria."}),(d||m!=="all")&&e.jsx("button",{onClick:()=>{h(""),w("all")},className:"mt-2 text-sm text-blue-600 hover:underline",children:"Clear all filters"})]}):N.map(({category:F,items:Q})=>{const _=(F==null?void 0:F.id)||null,te=m!=="all"||d.trim().length>0||v.has(_);return e.jsxs("div",{className:"border border-slate-100 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>L(_),className:"w-full flex items-center justify-between p-3 bg-slate-50 hover:bg-slate-100 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wider",children:(F==null?void 0:F.name)||"Uncategorized"}),e.jsxs("span",{className:"text-[10px] text-slate-400 lowercase",children:["(",Q.length," items)"]})]}),e.jsx(q0,{className:`w-5 h-5 text-slate-400 transition-transform duration-200 ${te?"rotate-180":""}`})]}),te&&e.jsx("div",{className:"p-2 grid grid-cols-1 gap-2 bg-white",children:Q.map(O=>e.jsx("button",{onClick:()=>o(O),className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 border border-slate-200 hover:border-blue-300 rounded-lg transition-all group focus:outline-none focus:ring-2 focus:ring-blue-500",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-grow pr-4",children:[e.jsx("p",{className:"font-semibold text-slate-800 group-hover:text-blue-700 transition-colors",children:O.name}),O.sku&&e.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:["SKU: ",O.sku]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("p",{className:"font-bold text-slate-900",children:[x,O.price.toFixed(2)]}),e.jsx("p",{className:"text-[10px] text-slate-500",children:O.type===Aa.MEASURED?`per ${O.measurementUnit}`:"Fixed Price"})]})]})},O.id))})]},_||"uncategorized")})})]})},Eb=({isOpen:A,onClose:s,unlinkedBills:n,initiallySelectedIds:r,settings:l,onLinkBills:o})=>{const[u,d]=se.useState(""),[h,m]=se.useState(new Set),w=l.currencySymbol||"";se.useEffect(()=>{A&&m(new Set(r))},[A,r]);const v=se.useMemo(()=>{if(!u)return n;const C=u.toLowerCase();return n.filter(N=>N.state.supplierName.toLowerCase().includes(C)||N.state.reference&&N.state.reference.toLowerCase().includes(C))},[n,u]),B=C=>{const N=new Set(h);N.has(C)?N.delete(C):N.add(C),m(N)},x=()=>{o(Array.from(h))};return A?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl transform transition-all sm:my-8 w-full max-w-2xl mx-4 border border-slate-200",children:[e.jsxs("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xl leading-6 font-bold text-slate-900",id:"modal-title",children:"Link Bills to Invoice"}),e.jsxs("button",{type:"button",className:"text-slate-400 hover:text-slate-600",onClick:s,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(we,{placeholder:"Search by supplier or reference...",value:u,onChange:C=>d(C.target.value),autoFocus:!0})}),e.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto space-y-2 pr-2",children:v.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No unlinked bills found."}):v.map(C=>{const N=h.has(C.id);return e.jsxs("div",{onClick:()=>B(C.id),className:`flex items-center p-3 rounded-lg cursor-pointer transition-colors ${N?"bg-blue-100 ring-2 ring-blue-500":"bg-slate-100 hover:bg-slate-200"}`,children:[e.jsx("input",{type:"checkbox",checked:N,readOnly:!0,className:"h-4 w-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsxs("p",{className:"font-medium text-slate-900",children:[C.state.supplierName," - Ref: ",C.state.reference]}),e.jsxs("p",{className:"text-slate-500",children:[new Date(C.state.issueDate).toLocaleDateString()," - ",w,C.total.toFixed(2)]})]})]},C.id)})})]}),e.jsxs("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2",children:[e.jsxs(he,{variant:"primary",onClick:x,children:["Link ",h.size," Bill(s)"]}),e.jsx(he,{variant:"outline",onClick:s,children:"Cancel"})]})]})]}):null},B2=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),Vh=({isOpen:A,onClose:s,customers:n,onSelectCustomer:r})=>{const[l,o]=se.useState(""),u=se.useMemo(()=>{if(!l)return n;const d=l.toLowerCase();return n.filter(h=>h.name.toLowerCase().includes(d)||h.contactName&&h.contactName.toLowerCase().includes(d)||h.address.toLowerCase().includes(d))},[n,l]);return e.jsxs(Mn,{isOpen:A,onClose:s,title:"Search Customers",children:[e.jsx("div",{className:"mb-4",children:e.jsx(we,{placeholder:"Search by name, contact, or address...",value:l,onChange:d=>o(d.target.value),autoFocus:!0})}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-2 pr-2",children:u.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No customers found."}):u.map(d=>e.jsxs("button",{onClick:()=>r(d),className:"w-full text-left p-3 bg-slate-100 hover:bg-blue-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("p",{className:"font-medium text-slate-800",children:d.name}),e.jsx("p",{className:"text-sm text-slate-500 whitespace-pre-wrap",children:d.address})]},d.id))})]})},Ex={name:"",contactName:"",address:"",mobile:"",email:"",website:"",companyReg:"",notes:""},y2=({isOpen:A,onClose:s,onSave:n})=>{const[r,l]=se.useState(Ex),o=(d,h)=>{l(m=>({...m,[d]:h}))},u=d=>{if(d.preventDefault(),!r.name.trim()||!r.address.trim()){alert("Please provide both a business name and an address.");return}n({name:r.name.trim(),contactName:r.contactName.trim()||void 0,address:r.address.trim(),mobile:r.mobile.trim()||void 0,email:r.email.trim()||void 0,website:r.website.trim()||void 0,companyReg:r.companyReg.trim()||void 0,notes:r.notes.trim()||void 0}),l(Ex)};return e.jsx(Mn,{isOpen:A,onClose:s,title:"Add New Detailed Customer",size:"2xl",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Business Name *"}),e.jsx(we,{value:r.name,onChange:d=>o("name",d.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Contact Person"}),e.jsx(we,{value:r.contactName,onChange:d=>o("contactName",d.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Mobile"}),e.jsx(we,{value:r.mobile,onChange:d=>o("mobile",d.target.value)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Address *"}),e.jsx(HA,{value:r.address,onChange:d=>o("address",d.target.value),rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Email"}),e.jsx(we,{type:"email",value:r.email,onChange:d=>o("email",d.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Website"}),e.jsx(we,{value:r.website,onChange:d=>o("website",d.target.value)})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(he,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:"Save Customer"})]})]})})},C2=({isOpen:A,onClose:s,addOnOptions:n,initiallySelectedIds:r,onConfirm:l,settings:o,itemName:u})=>{const[d,h]=se.useState(new Set),m=o.currencySymbol||"";se.useEffect(()=>{A&&h(new Set(r))},[A,r]);const w=B=>{const x=new Set(d);x.has(B)?x.delete(B):x.add(B),h(x)},v=()=>{l(Array.from(d)),s()};return e.jsx(Mn,{isOpen:A,onClose:s,title:`Optional Add-ons for ${u}`,size:"md",footer:e.jsxs("div",{className:"flex justify-end gap-2 w-full",children:[e.jsx(he,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(he,{variant:"primary",onClick:v,children:"Confirm Selection"})]}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Select any additional options to add to the unit price."}),n.map(B=>e.jsxs("label",{className:`flex items-center justify-between p-4 rounded-lg border-2 cursor-pointer transition-all ${d.has(B.id)?"border-blue-500 bg-blue-50":"border-slate-100 bg-slate-50 hover:border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:d.has(B.id),onChange:()=>w(B.id),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-800",children:B.name})]}),e.jsxs("span",{className:"font-bold text-slate-900",children:["+",m,B.price.toFixed(2)]})]},B.id)),n.length===0&&e.jsx("p",{className:"text-center py-8 text-slate-500 italic",children:"No add-on options available for this item."})]})})},Ib=({mode:A,editingInvoice:s,editingQuoteId:n,invoiceState:r,setInvoiceState:l,inventory:o,customers:u,settings:d,categories:h,bills:m,unlinkedBills:w,creditNotes:v,accounts:B,onSaveDraft:x,onSaveQuote:C,onUpdateQuote:N,onFinalizeInvoice:L,onUpdateInvoice:F,onDownloadPdf:Q,onAddCustomer:_,onViewCreditNote:te,onCancel:O})=>{var Qt;const[k,P]=se.useState(!1),[E,D]=se.useState(!1),[G,T]=se.useState(null),[R,V]=se.useState(!1),[Z,ue]=se.useState(!1),[S,M]=se.useState(!1),[Y,le]=se.useState(null),{invoiceType:de="measured"}=r,J=!!s,U=!!n,X=J||U||!!r._isLoaded,ee=d.showAccountOnInvoices??!0,re=(Oe,yt)=>{l(mt=>({...mt,[Oe]:yt}))},fe=()=>{const Oe={id:crypto.randomUUID(),inventoryItemId:null,description:"",quantity:1,vatRate:d.defaultVatRate,discount:{type:"fixed",value:0},price:0,selectedAddOnIds:[]};l(yt=>({...yt,lineItems:[...yt.lineItems,Oe]}))},ve=(Oe,yt)=>{l(mt=>({...mt,lineItems:mt.lineItems.map(wt=>wt.id===Oe?{...wt,...yt}:wt)}))},xe=Oe=>{l(yt=>({...yt,lineItems:yt.lineItems.filter(mt=>mt.id!==Oe)}))},Ce=Oe=>{l(yt=>({...yt,notes:Oe.target.value}))},st=Oe=>{T(Oe),P(!0)},_e=Oe=>{if(G){if(!r.lineItems.find(vt=>vt.id===G))return;const mt={inventoryItemId:Oe.id,description:Oe.name,price:void 0,vatRate:Oe.vatRate??d.defaultVatRate,selectedAddOnIds:[],length:void 0,width:void 0,unit:void 0};Oe.type===Aa.MEASURED&&(mt.unit=Oe.measurementUnit||ha.M),ve(G,mt),P(!1);let wt=[];if(Oe.parentId){const vt=o.find(ft=>ft.id===Oe.parentId);vt&&vt.addOnOptions&&(wt=vt.addOnOptions)}const Ft=[...Oe.addOnOptions||[],...wt],Fe=Array.from(new Map(Ft.map(vt=>[`${vt.name.toLowerCase()}-${vt.price}`,vt])).values());Fe.length>0&&(le({lineItemId:G,inventoryItem:{...Oe,addOnOptions:Fe}}),M(!0)),T(null)}},$e=Oe=>{Y&&ve(Y.lineItemId,{selectedAddOnIds:Oe}),M(!1),le(null)},Ue=Oe=>{const yt=Oe.target.value,mt=r.lineItems.map(wt=>({...wt,vatRate:yt==="none"?0:wt.vatRate===0?d.defaultVatRate:wt.vatRate}));l(wt=>({...wt,taxMode:yt,lineItems:mt}))},At=Oe=>{l(yt=>({...yt,linkedBillIds:Oe})),D(!1)},Le=Oe=>{l(yt=>({...yt,linkedBillIds:(yt.linkedBillIds||[]).filter(mt=>mt!==Oe)}))},K=Oe=>{l(yt=>({...yt,customerName:Oe.name})),V(!1)},Ge=Oe=>{const yt={name:Oe.trim(),address:"Please update address in Customer Manager"};_(yt)},Ye=Oe=>{_(Oe),l(yt=>({...yt,customerName:Oe.name})),ue(!1)},ie=Qi.useMemo(()=>(r.linkedBillIds||[]).map(Oe=>m.find(yt=>yt.id===Oe)).filter(Oe=>!!Oe),[r.linkedBillIds,m]),Ne=Qi.useMemo(()=>[...w,...ie],[w,ie]),Te=Qi.useMemo(()=>{let Oe=0,yt=0,mt=0;return r.lineItems.forEach(wt=>{let Ft;const Fe=o.find(gt=>gt.id===wt.inventoryItemId);if(Fe){const gt=Fe.parentId?o.find(VA=>VA.id===Fe.parentId):null,Jt=[...Fe.addOnOptions||[],...(gt==null?void 0:gt.addOnOptions)||[]],MA=Array.from(new Map(Jt.map(VA=>[`${VA.name.toLowerCase()}-${VA.price}`,VA])).values());Ft=Hn({...Fe,addOnOptions:MA},wt)}else Ft=(wt.price||0)*wt.quantity;const vt=wt.discount.type==="percentage"?Ft*(wt.discount.value/100):wt.discount.value,ft=Ft-vt;if(r.taxMode==="inclusive"){const gt=1+wt.vatRate/100,Jt=ft/gt,MA=ft-Jt;Oe+=Jt,yt+=MA,mt+=ft}else if(r.taxMode==="exclusive"){const gt=ft*(wt.vatRate/100);Oe+=ft,yt+=gt,mt+=ft+gt}else Oe+=ft,mt+=ft}),{subtotal:Oe,vatTotal:yt,grandTotal:mt}},[r.lineItems,o,r.taxMode]),{totalPaid:qe,totalCredited:ot,isFullyPaid:xt,appliedCredits:Ct}=se.useMemo(()=>{if(!J||!s)return{totalPaid:0,totalCredited:0,isFullyPaid:!1,appliedCredits:[]};const Oe=[];v.forEach(Fe=>{(Fe.applications||[]).forEach(vt=>{vt.invoiceId===s.id&&Oe.push({id:Fe.id,number:Fe.state.creditNoteNumber,amount:vt.amount})})});const yt=Oe.reduce((Fe,vt)=>Fe+vt.amount,0),mt=s.payments.reduce((Fe,vt)=>Fe+vt.amount,0),wt=s.total-yt,Ft=mt>=wt-.001;return{totalPaid:mt,totalCredited:yt,isFullyPaid:Ft,appliedCredits:Oe}},[J,s,v]),Tt=Oe=>{if(!r.customerName.trim()){alert("Customer / Business Name must be filled in before saving.");return}if(!(Oe==="finalize"&&!r.reference.trim()&&!window.confirm("No Reference (PO #) was provided. Would you like to finalize this invoice anyway?")))switch(Oe){case"draft":x(Te.grandTotal);break;case"quote":U&&N?N(Te.grandTotal):C(Te.grandTotal);break;case"finalize":L(r,Te.grandTotal);break;case"update":F&&F(r,Te.grandTotal);break}},Yt=J?"Edit Invoice":U?"Edit Quote":A==="invoice"?d.invoiceTitle||"Invoice":d.quoteTitle||"Quote",Pt=d.currencySymbol||"",jt=Oe=>{const yt=r.lineItems.find(vt=>vt.id===Oe);if(!yt||!yt.inventoryItemId)return;const mt=o.find(vt=>vt.id===yt.inventoryItemId);if(!mt)return;let wt=[];if(mt.parentId){const vt=o.find(ft=>ft.id===mt.parentId);vt&&vt.addOnOptions&&(wt=vt.addOnOptions)}const Ft=[...mt.addOnOptions||[],...wt],Fe=Array.from(new Map(Ft.map(vt=>[`${vt.name.toLowerCase()}-${vt.price}`,vt])).values());Fe.length>0?(le({lineItemId:Oe,inventoryItem:{...mt,addOnOptions:Fe}}),M(!0)):alert("No add-on options available for this item.")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:d.companyName}),e.jsx("p",{className:"text-sm text-slate-500 whitespace-pre-wrap",children:d.companyAddress}),d.vatNumber&&e.jsxs("p",{className:"text-sm text-slate-500",children:["VAT: ",d.vatNumber]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[d.companyLogo&&e.jsx("img",{src:d.companyLogo,alt:"Company Logo",className:"h-16 w-auto max-w-xs object-contain"}),e.jsx("h1",{className:"text-4xl font-bold text-slate-400 uppercase tracking-widest",children:Yt}),e.jsx("p",{className:"text-sm font-medium text-slate-500 bg-slate-100 px-2 py-1 rounded",children:de==="fixed"?"Fixed Price":"Unit Measurement"})]})]}),e.jsx("section",{className:"mb-8",children:e.jsx(Qb,{mode:A,customers:u,customerName:r.customerName,setCustomerName:Oe=>re("customerName",Oe),invoiceNumber:r.invoiceNumber,reference:r.reference,setReference:Oe=>re("reference",Oe),issueDate:r.issueDate,setIssueDate:Oe=>re("issueDate",Oe),completionDate:r.completionDate||r.issueDate,setCompletionDate:Oe=>re("completionDate",Oe),dueDate:r.dueDate,setDueDate:Oe=>re("dueDate",Oe),onOpenSearch:()=>V(!0),onOpenNewCustomerModal:()=>ue(!0),onSaveCustomer:Ge})}),e.jsx("section",{className:"mb-2 hidden sm:block",children:e.jsxs("div",{className:"bg-slate-100 p-4 rounded-t-lg border-b border-slate-200 hidden sm:grid sm:grid-cols-[repeat(24,minmax(0,1fr))] gap-x-1 items-center text-sm font-semibold text-slate-600",children:[e.jsx("div",{className:`pl-2 ${ee?r.taxMode==="none"?"col-span-5":"col-span-4":r.taxMode==="none"?"col-span-7":"col-span-6"}`,children:"Item / Description"}),ee&&e.jsx("div",{className:"col-span-4 pl-2",children:"Account"}),e.jsxs("div",{className:`pl-2 ${ee?r.taxMode==="none"?"col-span-7":"col-span-6":r.taxMode==="none"?"col-span-9":"col-span-8"}`,children:[r.taxMode==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"," / Dim"]}),e.jsx("div",{className:"col-span-2 text-center pl-1",children:"Qty"}),e.jsx("div",{className:"col-span-2 text-center pl-1",children:"Discount"}),r.taxMode!=="none"&&e.jsx("div",{className:"col-span-2 text-center pl-1",children:"VAT (%)"}),e.jsx("div",{className:"col-span-3 text-right pl-2",children:"Total"}),e.jsx("div",{className:"col-span-1"})]})}),e.jsx("section",{children:e.jsx("div",{className:"space-y-4",children:r.lineItems.map(Oe=>e.jsx(b2,{item:Oe,inventory:o,settings:d,taxMode:r.taxMode,accounts:B,onUpdate:ve,onRemove:xe,onOpenSearch:st,onOpenAddOns:()=>jt(Oe.id)},Oe.id))})}),e.jsxs(he,{variant:"outline",onClick:fe,className:"mt-4",children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Line Item"]}),(A==="invoice"||J)&&e.jsxs("section",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Linked Bills (for Job Costing)"}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[ie.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:ie.map(Oe=>e.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:Oe.state.supplierName})," - Ref: ",Oe.state.reference," - ",Pt,Oe.total.toFixed(2)]}),e.jsx(he,{size:"icon",variant:"ghost",onClick:()=>Le(Oe.id),children:e.jsx(er,{className:"w-4 h-4 text-red-500"})})]},Oe.id))}),e.jsxs(he,{variant:"outline",onClick:()=>D(!0),children:[e.jsx(B2,{className:"w-5 h-5 mr-2"}),ie.length>0?"Link More Bills":"Link Bills"]})]})]}),e.jsxs("section",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"taxMode",className:"block text-sm font-medium text-slate-600",children:"Tax Calculation"}),e.jsxs(fA,{id:"taxMode",value:r.taxMode,onChange:Ue,children:[e.jsx("option",{value:"exclusive",children:"Tax Exclusive (add tax to prices)"}),e.jsx("option",{value:"inclusive",children:"Tax Inclusive (tax is included in prices)"}),e.jsx("option",{value:"none",children:"No Tax"})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Notes & Payment Details"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"text-sm font-medium text-slate-600",children:"Notes"}),e.jsx(HA,{id:"notes",value:r.notes,onChange:Ce,placeholder:"Any additional notes...",rows:2,className:"mb-4"})]}),e.jsxs("div",{className:"text-sm text-slate-600 bg-slate-50 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold mb-1",children:"Payment Details:"}),e.jsx("p",{children:d.paymentTerms}),e.jsxs("p",{children:["Bank: ",d.bankName]}),e.jsxs("p",{children:["A/N: ",d.accountNumber," | Sort Code: ",d.sortCode]})]})]}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2 text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:[Pt,Te.subtotal.toFixed(2)]})]}),r.taxMode!=="none"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT"}),e.jsxs("span",{className:"font-medium",children:[Pt,Te.vatTotal.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[Pt,Te.grandTotal.toFixed(2)]})]}),J&&!xt&&Ct.length>0&&e.jsx(e.Fragment,{children:Ct.map(Oe=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("button",{type:"button",onClick:()=>te&&te(Oe.id),className:"text-blue-600 hover:underline font-medium",title:`View Credit Note ${Oe.number}`,children:["Credit Note #",Oe.number]}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",Pt,Oe.amount.toFixed(2)]})]},Oe.id))}),J&&!xt&&e.jsx("div",{className:"border-t my-2"}),J&&!xt&&e.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900 bg-slate-100 p-2 rounded",children:[e.jsx("span",{children:"Amount Due"}),e.jsxs("span",{children:[Pt,(Te.grandTotal-ot-qe).toFixed(2)]})]})]})})]}),e.jsx("footer",{className:"mt-12 pt-6 border-t",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[J?e.jsx(he,{variant:"primary",onClick:()=>Tt("update"),children:"Update Invoice"}):A==="invoice"?e.jsxs(e.Fragment,{children:[e.jsxs(he,{variant:"outline",onClick:()=>Tt("draft"),children:[e.jsx(oo,{className:"w-5 h-5 mr-2"}),"Save Draft"]}),e.jsx(he,{variant:"primary",onClick:()=>Tt("finalize"),children:"Finalise & Save Invoice"})]}):U?e.jsxs(e.Fragment,{children:[e.jsx(he,{variant:"outline",onClick:O,children:"Back to Quotes"}),e.jsxs(he,{variant:"primary",onClick:()=>Tt("quote"),children:[e.jsx(oo,{className:"w-5 h-5 mr-2"}),"Update Quote"]})]}):e.jsxs(he,{variant:"outline",onClick:()=>Tt("quote"),children:[e.jsx(oo,{className:"w-5 h-5 mr-2"}),"Save Quote"]}),e.jsxs(he,{variant:"primary",onClick:Q,disabled:!X,children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Download ",J?"Invoice":Yt," PDF"]})]})})]}),e.jsx(Vh,{isOpen:R,onClose:()=>V(!1),customers:u,onSelectCustomer:K}),e.jsx(y2,{isOpen:Z,onClose:()=>ue(!1),onSave:Ye}),e.jsx(w2,{isOpen:k,onClose:()=>P(!1),inventory:o,categories:h,settings:d,onSelectItem:_e,invoiceType:de}),e.jsx(Eb,{isOpen:E,onClose:()=>D(!1),unlinkedBills:Ne,initiallySelectedIds:r.linkedBillIds||[],settings:d,onLinkBills:At}),e.jsx(C2,{isOpen:S,onClose:()=>M(!1),addOnOptions:(Y==null?void 0:Y.inventoryItem.addOnOptions)||[],initiallySelectedIds:((Qt=r.lineItems.find(Oe=>Oe.id===(Y==null?void 0:Y.lineItemId)))==null?void 0:Qt.selectedAddOnIds)||[],onConfirm:$e,settings:d,itemName:(Y==null?void 0:Y.inventoryItem.name)||""})]})},N2=A=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75V18h-1.5v.75m-1.5 0h-3.375c-.621 0-1.125-.504-1.125-1.125V15h6.75v2.625c0 .621-.504 1.125-1.125 1.125Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 20.625 4.5H3.375A2.25 2.25 0 0 0 1.125 6.75v10.5A2.25 2.25 0 0 0 3.375 19.5Z"})]}),zh=({isOpen:A,onClose:s,items:n,onSelectItem:r})=>{const[l,o]=se.useState(""),u=se.useMemo(()=>{if(!l)return n;const d=l.toLowerCase();return n.filter(h=>h.name.toLowerCase().includes(d)||h.itemCode&&h.itemCode.toLowerCase().includes(d))},[n,l]);return e.jsxs(Mn,{isOpen:A,onClose:s,title:"Search Supplier Inventory",children:[e.jsx("div",{className:"mb-4",children:e.jsx(we,{placeholder:"Search for an item by name or code...",value:l,onChange:d=>o(d.target.value),autoFocus:!0})}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-2 pr-2",children:n.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No items found for this supplier."}):u.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No matching items found."}):u.map(d=>e.jsxs("button",{onClick:()=>r(d),className:"w-full text-left p-3 bg-slate-100 hover:bg-blue-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("p",{className:"font-medium text-slate-800",children:d.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Price: ",d.price.toFixed(2)]}),d.itemCode&&e.jsxs("p",{className:"text-sm text-slate-500",children:["Code: ",d.itemCode]})]},d.id))})]})},j2=({isOpen:A,onClose:s,suppliers:n,onSelectSupplier:r})=>{const[l,o]=se.useState(""),u=se.useMemo(()=>{if(!l)return n;const d=l.toLowerCase();return n.filter(h=>h.name.toLowerCase().includes(d)||h.address.toLowerCase().includes(d))},[n,l]);return e.jsxs(Mn,{isOpen:A,onClose:s,title:"Search Suppliers",children:[e.jsx("div",{className:"mb-4",children:e.jsx(we,{placeholder:"Search by name or address...",value:l,onChange:d=>o(d.target.value),autoFocus:!0})}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-2 pr-2",children:u.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No suppliers found."}):u.map(d=>e.jsxs("button",{onClick:()=>r(d),className:"w-full text-left p-3 bg-slate-100 hover:bg-blue-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("p",{className:"font-medium text-slate-800",children:d.name}),e.jsx("p",{className:"text-sm text-slate-500 whitespace-pre-wrap",children:d.address})]},d.id))})]})},Lb=({editingPOId:A,poState:s,setPOState:n,suppliers:r,settings:l,supplierInventory:o,onSave:u,onUpdate:d,onApprove:h,onDownloadPdf:m,onAddSupplier:w})=>{const v=!!A,[B,x]=se.useState(!1),[C,N]=se.useState(!1),[L,F]=se.useState(null),Q=(S,M)=>{if(S==="supplierName"){const Y=r.find(le=>le.name.toLowerCase()===M.toLowerCase().trim());n(le=>({...le,supplierName:M,supplierId:Y?Y.id:null}))}else n(Y=>({...Y,[S]:M}))},_=(S,M,Y)=>{n(le=>({...le,lineItems:le.lineItems.map(de=>de.id===S?{...de,[M]:Y}:de)}))},te=()=>{const S={id:crypto.randomUUID(),supplierInventoryItemId:null,description:"",quantity:1,unitPrice:0,vatRate:l.defaultVatRate};n(M=>({...M,lineItems:[...M.lineItems,S]}))},O=S=>{n(M=>({...M,lineItems:M.lineItems.filter(Y=>Y.id!==S)}))},k=S=>{F(S),x(!0)},P=S=>{L&&(_(L,"supplierInventoryItemId",S.id),_(L,"description",S.name),_(L,"unitPrice",S.price),x(!1),F(null))},E=S=>{const M=S.target.value,Y=s.lineItems.map(le=>({...le,vatRate:M==="none"?0:le.vatRate===0?l.defaultVatRate:le.vatRate}));n(le=>({...le,taxMode:M,lineItems:Y}))},D=S=>{n(M=>({...M,supplierId:S.id,supplierName:S.name})),N(!1)},G=S=>{const M={name:S.trim(),address:"Please update address in Supplier Manager"};w(M),n(Y=>({...Y,supplierName:S.trim(),supplierId:null}))},T=s.supplierName.trim()!==""&&s.supplierId===null&&!r.some(S=>S.name.toLowerCase()===s.supplierName.toLowerCase().trim()),R=se.useMemo(()=>{let S=0,M=0,Y=0;return s.lineItems.forEach(le=>{const de=le.quantity*le.unitPrice;if(s.taxMode==="inclusive"){const J=1+le.vatRate/100,U=de/J,X=de-U;S+=U,M+=X,Y+=de}else if(s.taxMode==="exclusive"){const J=de*(le.vatRate/100);S+=de,M+=J,Y+=de+J}else S+=de,Y+=de}),{subtotal:S,vatTotal:M,grandTotal:Y}},[s.lineItems,s.taxMode]),V=se.useMemo(()=>o.filter(S=>S.supplierId===s.supplierId),[o,s.supplierId]),Z=()=>{if(!s.supplierName.trim()||!s.reference.trim()){alert("Please fill in both the Supplier and Reference fields.");return}v&&A?d({id:A,state:s,total:R.grandTotal}):u(s,R.grandTotal)},ue=()=>{if(!s.supplierName.trim()||!s.reference.trim()){alert("Please fill in both the Supplier and Reference fields before approving.");return}h({id:A,state:s,total:R.grandTotal})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:l.companyName}),e.jsx("p",{className:"text-sm text-slate-500 whitespace-pre-wrap",children:l.companyAddress})]}),e.jsx("h1",{className:"text-4xl font-bold text-slate-400 uppercase tracking-widest",children:"Purchase Order"})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplierName",className:"block text-sm font-medium text-slate-600 mb-1",children:"Supplier"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(we,{id:"supplierName",value:s.supplierName,onChange:S=>Q("supplierName",S.target.value),placeholder:"Search or type a new name..."}),T&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"New supplier. Click '+' to save."})]}),e.jsx(he,{type:"button",size:"icon",variant:"outline",onClick:()=>N(!0),title:"Search for existing supplier",children:e.jsx(yr,{className:"w-5 h-5"})}),T&&e.jsx(he,{type:"button",size:"icon",variant:"primary",onClick:()=>G(s.supplierName),title:"Save new supplier",children:e.jsx(AA,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"poNumber",className:"block text-sm font-medium text-slate-600 mb-1",children:"PO Number"}),e.jsx(we,{id:"poNumber",value:s.poNumber,onChange:S=>Q("poNumber",S.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"poReference",className:"block text-sm font-medium text-slate-600 mb-1",children:"Reference"}),e.jsx(we,{id:"poReference",value:s.reference,onChange:S=>Q("reference",S.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"issueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Order Date"}),e.jsx(we,{id:"issueDate",type:"date",value:s.issueDate,onChange:S=>Q("issueDate",S.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"deliveryDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Expected Delivery"}),e.jsx(we,{id:"deliveryDate",type:"date",value:s.deliveryDate,onChange:S=>Q("deliveryDate",S.target.value)})]})]}),e.jsx("section",{className:"mb-2 hidden sm:block",children:e.jsxs("div",{className:"bg-slate-100 p-4 rounded-t-lg border-b border-slate-200 grid grid-cols-12 gap-x-4 items-center text-sm font-semibold text-slate-600",children:[e.jsx("div",{className:`col-span-12 ${s.taxMode==="none"?"sm:col-span-7":"sm:col-span-6"} pl-3`,children:"Item Description"}),e.jsx("div",{className:"col-span-4 sm:col-span-1 text-left pl-3",children:"Qty"}),e.jsx("div",{className:"col-span-8 sm:col-span-2 text-left pl-3",children:s.taxMode==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"}),s.taxMode!=="none"&&e.jsx("div",{className:"col-span-4 sm:col-span-1 text-left pl-3",children:"VAT (%)"}),e.jsx("div",{className:"col-span-12 sm:col-span-1 text-left pl-3",children:"Total"}),e.jsx("div",{className:"col-span-1"})]})}),e.jsx("section",{children:e.jsx("div",{className:"space-y-4",children:s.lineItems.map(S=>{const M=o.find(de=>de.id===S.supplierInventoryItemId),Y=S.quantity*S.unitPrice,le=s.taxMode==="exclusive"?Y*(1+S.vatRate/100):Y;return e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg grid grid-cols-12 gap-x-4 gap-y-2 items-start text-sm",children:[e.jsxs("div",{className:`col-span-12 ${s.taxMode==="none"?"sm:col-span-7":"sm:col-span-6"}`,children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"Item Description"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(he,{variant:"outline",size:"icon",onClick:()=>k(S.id),type:"button",disabled:!s.supplierId,title:s.supplierId?M?`Change item: ${M.name}`:"Search supplier's inventory":"Please select a supplier first",children:e.jsx(yr,{className:"w-5 h-5"})}),e.jsx(HA,{value:S.description,onChange:de=>_(S.id,"description",de.target.value),placeholder:"Item to purchase description...",rows:1,className:"resize-none text-left !py-1.5 flex-grow"})]})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-1",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"Qty"}),e.jsx(we,{type:"number",value:S.quantity,onChange:de=>_(S.id,"quantity",parseInt(de.target.value,10)||1)})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:s.taxMode==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"}),e.jsx(we,{type:"number",value:S.unitPrice,onChange:de=>_(S.id,"unitPrice",parseFloat(de.target.value)||0)})]}),s.taxMode!=="none"&&e.jsxs("div",{className:"col-span-6 sm:col-span-1",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"VAT (%)"}),e.jsx(we,{type:"number",value:S.vatRate,onChange:de=>_(S.id,"vatRate",parseInt(de.target.value,10)||0)})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-1 flex items-end sm:items-center",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1 mr-2",children:"Total:"}),e.jsxs("span",{className:"font-semibold text-slate-800",children:["",le.toFixed(2)]})]}),e.jsx("div",{className:"col-span-12 sm:col-span-1 flex items-center justify-end",children:e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>O(S.id),title:"Delete line item",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})})})]},S.id)})})}),e.jsxs(he,{variant:"outline",onClick:te,className:"mt-4",children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Item"]}),e.jsxs("section",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"taxMode",className:"block text-sm font-medium text-slate-600",children:"Tax Calculation"}),e.jsxs(fA,{id:"taxMode",value:s.taxMode,onChange:E,children:[e.jsx("option",{value:"exclusive",children:"Tax Exclusive (add tax to prices)"}),e.jsx("option",{value:"inclusive",children:"Tax Inclusive (tax is included in prices)"}),e.jsx("option",{value:"none",children:"No Tax"})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Notes"}),e.jsx(HA,{value:s.notes,onChange:S=>Q("notes",S.target.value),placeholder:"Any notes for the supplier...",rows:4})]}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2 text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["",R.subtotal.toFixed(2)]})]}),s.taxMode!=="none"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT"}),e.jsxs("span",{className:"font-medium",children:["",R.vatTotal.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["",R.grandTotal.toFixed(2)]})]})]})})]}),e.jsx("footer",{className:"mt-12 pt-6 border-t",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(he,{variant:"outline",onClick:Z,children:[e.jsx(N2,{className:"w-5 h-5 mr-2"}),v?"Update Draft":"Save Draft"]}),e.jsx(he,{variant:"primary",onClick:ue,children:"Approve"}),e.jsxs(he,{variant:"outline",onClick:m,children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Download PDF"]})]})})]}),e.jsx(j2,{isOpen:C,onClose:()=>N(!1),suppliers:r,onSelectSupplier:D}),e.jsx(zh,{isOpen:B,onClose:()=>x(!1),items:V,onSelectItem:P})]})},Db=({editingBillId:A,billState:s,setBillState:n,suppliers:r,settings:l,supplierInventory:o,onSave:u,onUpdate:d,onAddSupplier:h})=>{const[m,w]=se.useState(!1),[v,B]=se.useState(!1),[x,C]=se.useState(null),N=!!A;se.useEffect(()=>{},[A,s]);const L=(V,Z)=>{if(V==="supplierName"){const ue=r.find(S=>S.name.toLowerCase()===Z.toLowerCase().trim());n(S=>({...S,supplierName:Z,supplierId:ue?ue.id:null}))}else n(ue=>({...ue,[V]:Z}))},F=(V,Z,ue)=>{n(S=>({...S,lineItems:S.lineItems.map(M=>M.id===V?{...M,[Z]:ue}:M)}))},Q=()=>{const V={id:crypto.randomUUID(),supplierInventoryItemId:null,description:"",quantity:1,unitPrice:0,vatRate:l.defaultVatRate};n(Z=>({...Z,lineItems:[...Z.lineItems,V]}))},_=V=>{n(Z=>({...Z,lineItems:Z.lineItems.filter(ue=>ue.id!==V)}))},te=V=>{C(V),w(!0)},O=V=>{x&&(F(x,"supplierInventoryItemId",V.id),F(x,"description",V.name),F(x,"unitPrice",V.price),w(!1),C(null))},k=V=>{const Z=V.target.value,ue=s.lineItems.map(S=>({...S,vatRate:Z==="none"?0:S.vatRate===0?l.defaultVatRate:S.vatRate}));n(S=>({...S,taxMode:Z,lineItems:ue}))},P=V=>{n(Z=>({...Z,supplierId:V.id,supplierName:V.name})),B(!1)},E=V=>{const Z={name:V.trim(),address:"Please update address in Supplier Manager"};h(Z),n(ue=>({...ue,supplierName:V.trim(),supplierId:null}))},D=s.supplierName.trim()!==""&&s.supplierId===null&&!r.some(V=>V.name.toLowerCase()===s.supplierName.toLowerCase().trim()),G=se.useMemo(()=>{let V=0,Z=0,ue=0;return s.lineItems.forEach(S=>{const M=S.quantity*S.unitPrice;if(s.taxMode==="inclusive"){const Y=1+S.vatRate/100,le=M/Y,de=M-le;V+=le,Z+=de,ue+=M}else if(s.taxMode==="exclusive"){const Y=M*(S.vatRate/100);V+=M,Z+=Y,ue+=M+Y}else V+=M,ue+=M}),{subtotal:V,vatTotal:Z,grandTotal:ue}},[s.lineItems,s.taxMode]),T=se.useMemo(()=>o.filter(V=>V.supplierId===s.supplierId),[o,s.supplierId]),R=()=>{if(!s.supplierName.trim()||!s.reference.trim()){alert("Please fill in both the Supplier and Supplier Invoice / Ref # fields.");return}N&&A?d({id:A,state:s,total:G.grandTotal}):u(s,G.grandTotal)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Record a Bill"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Enter details from a supplier's bill or invoice for your records."})]})}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplierName",className:"block text-sm font-medium text-slate-600 mb-1",children:"Supplier"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(we,{id:"supplierName",value:s.supplierName,onChange:V=>L("supplierName",V.target.value),placeholder:"Search or type a new name..."}),D&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"New supplier. Click '+' to save."})]}),e.jsx(he,{type:"button",size:"icon",variant:"outline",onClick:()=>B(!0),title:"Search for existing supplier",children:e.jsx(yr,{className:"w-5 h-5"})}),D&&e.jsx(he,{type:"button",size:"icon",variant:"primary",onClick:()=>E(s.supplierName),title:"Save new supplier",children:e.jsx(AA,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billReference",className:"block text-sm font-medium text-slate-600 mb-1",children:"Supplier Invoice / Ref #"}),e.jsx(we,{id:"billReference",value:s.reference,onChange:V=>L("reference",V.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"issueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Issue Date"}),e.jsx(we,{id:"issueDate",type:"date",value:s.issueDate,onChange:V=>L("issueDate",V.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Due Date"}),e.jsx(we,{id:"dueDate",type:"date",value:s.dueDate,onChange:V=>L("dueDate",V.target.value)})]})]}),e.jsx("section",{className:"mb-2 hidden sm:block",children:e.jsxs("div",{className:"bg-slate-100 p-4 rounded-t-lg border-b border-slate-200 grid grid-cols-12 gap-x-4 items-center text-sm font-semibold text-slate-600",children:[e.jsx("div",{className:`col-span-12 ${s.taxMode==="none"?"sm:col-span-7":"sm:col-span-6"} pl-3`,children:"Item Description"}),e.jsx("div",{className:"col-span-4 sm:col-span-1 text-left pl-3",children:"Qty"}),e.jsx("div",{className:"col-span-8 sm:col-span-2 text-left pl-3",children:s.taxMode==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"}),s.taxMode!=="none"&&e.jsx("div",{className:"col-span-4 sm:col-span-1 text-left pl-3",children:"VAT (%)"}),e.jsx("div",{className:"col-span-12 sm:col-span-1 text-left pl-3",children:"Total"}),e.jsx("div",{className:"col-span-1"})]})}),e.jsx("section",{children:e.jsx("div",{className:"space-y-4",children:s.lineItems.map(V=>{const Z=o.find(M=>M.id===V.supplierInventoryItemId),ue=V.quantity*V.unitPrice,S=s.taxMode==="exclusive"?ue*(1+V.vatRate/100):ue;return e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg grid grid-cols-12 gap-x-4 gap-y-2 items-start text-sm",children:[e.jsxs("div",{className:`col-span-12 ${s.taxMode==="none"?"sm:col-span-7":"sm:col-span-6"}`,children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"Item Description"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(he,{variant:"outline",size:"icon",onClick:()=>te(V.id),type:"button",disabled:!s.supplierId,title:s.supplierId?Z?`Change item: ${Z.name}`:"Search supplier's inventory":"Please select a supplier first",children:e.jsx(yr,{className:"w-5 h-5"})}),e.jsx(HA,{value:V.description,onChange:M=>F(V.id,"description",M.target.value),placeholder:"Item description from bill...",rows:1,className:"resize-none text-left !py-1.5 flex-grow"})]})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-1",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"Qty"}),e.jsx(we,{type:"number",value:V.quantity,onChange:M=>F(V.id,"quantity",parseInt(M.target.value,10)||1)})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:s.taxMode==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"}),e.jsx(we,{type:"number",value:V.unitPrice,onChange:M=>F(V.id,"unitPrice",parseFloat(M.target.value)||0)})]}),s.taxMode!=="none"&&e.jsxs("div",{className:"col-span-6 sm:col-span-1",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1",children:"VAT (%)"}),e.jsx(we,{type:"number",value:V.vatRate,onChange:M=>F(V.id,"vatRate",parseInt(M.target.value,10)||0)})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-1 flex items-end sm:items-center",children:[e.jsx("div",{className:"block sm:hidden text-xs font-medium text-slate-500 mb-1 mr-2",children:"Total:"}),e.jsxs("span",{className:"font-semibold text-slate-800",children:["",S.toFixed(2)]})]}),e.jsx("div",{className:"col-span-12 sm:col-span-1 flex items-center justify-end",children:e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>_(V.id),title:"Delete line item",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})})})]},V.id)})})}),e.jsxs(he,{variant:"outline",onClick:Q,className:"mt-4",children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Item"]}),e.jsxs("section",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"taxMode",className:"block text-sm font-medium text-slate-600",children:"Tax Calculation"}),e.jsxs(fA,{id:"taxMode",value:s.taxMode,onChange:k,children:[e.jsx("option",{value:"exclusive",children:"Tax Exclusive (add tax to prices)"}),e.jsx("option",{value:"inclusive",children:"Tax Inclusive (tax is included in prices)"}),e.jsx("option",{value:"none",children:"No Tax"})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Notes"}),e.jsx(HA,{value:s.notes,onChange:V=>L("notes",V.target.value),placeholder:"Any notes about this bill...",rows:4})]}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2 text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["",G.subtotal.toFixed(2)]})]}),s.taxMode!=="none"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT"}),e.jsxs("span",{className:"font-medium",children:["",G.vatTotal.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["",G.grandTotal.toFixed(2)]})]})]})})]}),e.jsx("footer",{className:"mt-12 pt-6 border-t",children:e.jsx("div",{className:"flex justify-end gap-2",children:e.jsxs(he,{variant:"primary",onClick:R,children:[e.jsx(N2,{className:"w-5 h-5 mr-2"}),N?"Update Bill":"Save Bill"]})})})]}),e.jsx(j2,{isOpen:v,onClose:()=>B(!1),suppliers:r,onSelectSupplier:P}),e.jsx(zh,{isOpen:m,onClose:()=>w(!1),items:T,onSelectItem:O})]})},ss=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),G0=A=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),ed=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),td=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Tb=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),Sm={name:"",sku:"",price:0,vatRate:0,quantity:0,minStockLevel:5,status:"active",image:"",minPrice:void 0,type:Aa.FIXED,measurementUnit:void 0,unitPrices:{},categoryId:void 0,linkedSupplierItemIds:[],isParent:!1,definedAttributeKeys:[],definedAttributeValues:{},variantAttributes:void 0,addOnOptions:[]},Hb=({inventory:A,supplierInventory:s,categories:n,settings:r,currentUser:l,canUseMeasured:o,onAddItem:u,onAddItems:d,onUpdateItem:h,onRemoveItem:m,onUpdateItems:w,onRemoveItems:v,onAddCategory:B,onRemoveCategory:x,onUpdateCategory:C})=>{const[N,L]=se.useState(Sm),[F,Q]=se.useState(null),[_,te]=se.useState(""),[O,k]=se.useState(null),[P,E]=se.useState(""),[D,G]=se.useState(null),[T,R]=se.useState("list"),[V,Z]=se.useState("details"),[ue,S]=se.useState(""),[M,Y]=se.useState({}),[le,de]=se.useState(null),[J,U]=se.useState(0),[X,ee]=se.useState(0),[re,fe]=se.useState(new Set),[ve,xe]=se.useState({price:"",quantity:"",sku:""}),[Ce,st]=se.useState({name:"",price:0}),[_e,$e]=se.useState(""),[Ue,At]=se.useState(""),[Le,K]=se.useState("all"),[Ge,Ye]=se.useState(""),[ie,Ne]=se.useState({key:"name",direction:"asc"}),[Te,qe]=se.useState(!1),ot=r.currencySymbol||"",xt=Object.values(ha).filter(me=>me.startsWith("sq_")),Ct=(me,Ze)=>{if(me.preventDefault(),me.stopPropagation(),window.confirm("Delete this item?")){const et=[Ze];A.filter(Xe=>Xe.parentId===Ze).forEach(Xe=>et.push(Xe.id)),v(et)}},Tt=(me,Ze)=>{if(me.preventDefault(),me.stopPropagation(),A.some(rt=>rt.categoryId===Ze)){alert("All items must be deleted before the category can be removed.");return}window.confirm("Delete this category?")&&x(Ze)},Yt=(me,Ze)=>{me.preventDefault(),me.stopPropagation(),window.confirm("Delete this item?")&&m(Ze)},Pt=se.useMemo(()=>{const me=A.reduce((Xe,_t)=>Xe+_t.price*(_t.quantity||0),0),Ze=A.filter(Xe=>!Xe.parentId).length,et=A.filter(Xe=>!Xe.isParent&&(Xe.quantity||0)<=(Xe.minStockLevel||5)&&Xe.status!=="discontinued").length,rt=A.filter(Xe=>!Xe.isParent&&(Xe.quantity||0)===0&&Xe.status!=="discontinued").length;return{totalValue:me,totalItems:Ze,lowStockItems:et,outOfStockItems:rt}},[A]),jt=me=>{var et;const Ze=(et=me.target.files)==null?void 0:et[0];if(Ze){const rt=new FileReader;rt.onloadend=()=>{L(Xe=>({...Xe,image:rt.result}))},rt.readAsDataURL(Ze)}},Qt=(me,Ze)=>{const et={...N,[me]:Ze};if(me==="type"){if(Ze===Aa.FIXED)et.measurementUnit=void 0,et.minPrice=void 0,et.unitPrices={};else if(Ze===Aa.MEASURED){const rt=ha.SQ_M,Xe=et.price>0?et.price:10;et.measurementUnit=rt,et.price=Xe,et.unitPrices=Fm(Xe,rt)}}if(et.type===Aa.MEASURED&&(me==="price"||me==="measurementUnit")){const rt=me==="price"?parseFloat(Ze)||0:et.price,Xe=me==="measurementUnit"?Ze:et.measurementUnit;Xe&&String(Xe).startsWith("sq_")&&(et.unitPrices=Fm(rt,Xe))}["price","minPrice","quantity","minStockLevel","vatRate"].includes(me)&&(et[me]=parseFloat(Ze)||(me==="minPrice"?void 0:0)),me==="categoryId"&&Ze===""&&(et.categoryId=void 0),me==="isParent"&&Ze===!0&&(!et.definedAttributeKeys||et.definedAttributeKeys.length===0)&&(et.definedAttributeKeys=["Size","Colour"]),L(et)},Oe=me=>{if(me&&me.preventDefault(),!N.name.trim()||!N.price||N.price<=0){alert("Please provide a valid name and a price greater than zero.");return}F?h({id:F,...N}):u(N),mt()},yt=()=>{if(!N.name.trim()||!N.price||N.price<=0){alert("Please provide a valid name and a price greater than zero.");return}F&&h({id:F,...N}),mt()},mt=()=>{Q(null),L(Sm),Z("details"),R("list"),Y({}),U(0),ee(0),S(""),fe(new Set)},wt=me=>{Q(me.id),L({name:me.name,sku:me.sku||"",price:me.price,vatRate:me.vatRate??r.defaultVatRate,quantity:me.quantity||0,minStockLevel:me.minStockLevel||5,status:me.status||"active",image:me.image||"",minPrice:me.minPrice,type:me.type,measurementUnit:me.measurementUnit,unitPrices:me.unitPrices&&Object.keys(me.unitPrices).length>0?me.unitPrices:me.type===Aa.MEASURED?Fm(me.price,me.measurementUnit):{},categoryId:me.categoryId,linkedSupplierItemIds:me.linkedSupplierItemIds||[],isParent:me.isParent||!1,definedAttributeKeys:me.definedAttributeKeys||(me.isParent?["Size","Colour"]:[]),definedAttributeValues:me.definedAttributeValues||{},variantAttributes:me.variantAttributes,addOnOptions:me.addOnOptions||[]}),Z("details"),R("form"),ee(me.price),fe(new Set),Y({})},Ft=()=>{Q(null),L({...Sm,vatRate:r.defaultVatRate}),Z("details"),R("form"),fe(new Set)},Fe=()=>{if(!Ce.name.trim())return;const me={id:crypto.randomUUID(),name:Ce.name.trim(),price:Ce.price},Ze=[...N.addOnOptions||[],me],et={...N,addOnOptions:Ze};L(et),F&&h({id:F,...et}),st({name:"",price:0})},vt=me=>{const Ze=(N.addOnOptions||[]).filter(rt=>rt.id!==me),et={...N,addOnOptions:Ze};L(et),F&&h({id:F,...et})},ft=()=>{var Xe;const me=ue.trim();if(!me)return;if((Xe=N.definedAttributeKeys)!=null&&Xe.some(_t=>_t.toLowerCase()===me.toLowerCase())){alert("Attribute already exists.");return}const Ze=[...N.definedAttributeKeys||[],me],et={...N.definedAttributeValues,[me]:[]},rt={...N,definedAttributeKeys:Ze,definedAttributeValues:et};L(rt),F&&h({...rt,id:F}),S("")},gt=me=>{if(!window.confirm(`Removing "${me}" will delete all variants that rely on this attribute. Continue?`))return;const Ze=(N.definedAttributeKeys||[]).filter(Xe=>Xe!==me),et={...N.definedAttributeValues};if(delete et[me],F){const Xe=A.filter(_t=>_t.parentId===F).map(_t=>_t.id);Xe.length>0&&v(Xe)}const rt={...N,definedAttributeKeys:Ze,definedAttributeValues:et};L(rt),F&&h({...rt,id:F})},Jt=me=>{var Vt;const Ze=(M[me]||"").trim();if(!Ze)return;const et=((Vt=N.definedAttributeValues)==null?void 0:Vt[me])||[];if(et.some(zt=>zt.toLowerCase()===Ze.toLowerCase())){alert("Value already exists.");return}const rt=[...et,Ze],Xe={...N.definedAttributeValues,[me]:rt},_t={...N,definedAttributeValues:Xe};L(_t),F&&h({..._t,id:F}),Y(zt=>({...zt,[me]:""}))},MA=(me,Ze,et)=>{var gA;if(!et.trim())return;const rt=((gA=N.definedAttributeValues)==null?void 0:gA[me])||[],Xe=rt[Ze];if(Xe===et){de(null);return}const _t=[...rt];_t[Ze]=et;const Vt={...N.definedAttributeValues,[me]:_t},zt={...N,definedAttributeValues:Vt};if(L(zt),F){const RA=[];RA.push({...zt,id:F}),A.filter(zA=>zA.parentId===F).forEach(zA=>{if(zA.variantAttributes&&zA.variantAttributes[me]===Xe){const Fa={...zA.variantAttributes,[me]:et},rs=(N.definedAttributeKeys||[]).map(Us=>Fa[Us]||"").join(" - "),ca=`${N.name} - ${rs}`;RA.push({...zA,name:ca,variantAttributes:Fa})}}),w(RA)}de(null)},VA=(me,Ze)=>{var Vt;if(!window.confirm(`Deleting "${Ze}" will remove all variants with this ${me}. Continue?`))return;const rt=(((Vt=N.definedAttributeValues)==null?void 0:Vt[me])||[]).filter(zt=>zt!==Ze),Xe={...N.definedAttributeValues,[me]:rt},_t={...N,definedAttributeValues:Xe};if(L(_t),F){h({..._t,id:F});const zt=A.filter(gA=>gA.parentId===F&&gA.variantAttributes&&gA.variantAttributes[me]===Ze).map(gA=>gA.id);zt.length>0&&v(zt)}},uA=se.useMemo(()=>F?A.filter(me=>me.parentId===F).reverse():[],[A,F]),Kt=()=>{var _t;if(!F)return;const me=N.definedAttributeKeys||[];if(me.length===0){alert("Please add at least one attribute (e.g. Size).");return}for(const Vt of me)if((((_t=N.definedAttributeValues)==null?void 0:_t[Vt])||[]).length===0){alert(`Please add at least one value for attribute: ${Vt}`);return}const Ze=(Vt,zt)=>{var Fa;if(zt===Vt.length)return[{}];const gA=Vt[zt],RA=((Fa=N.definedAttributeValues)==null?void 0:Fa[gA])||[],Da=Ze(Vt,zt+1),zA=[];for(const ma of RA)for(const rs of Da)zA.push({[gA]:ma,...rs});return zA},et=Ze(me,0),rt=[];let Xe=0;et.forEach(Vt=>{if(A.some(ma=>ma.parentId===F&&ma.variantAttributes&&me.every(rs=>ma.variantAttributes[rs]===Vt[rs])))return;const gA=me.map(ma=>Vt[ma]).join(" - "),RA=`${N.name} - ${gA}`,Da=me.map(ma=>Vt[ma].toUpperCase().substring(0,3)).join("-"),zA=`${N.sku?N.sku+"-":""}${Da}`,Fa={...N,vatRate:N.vatRate,name:RA,sku:zA,price:X>0?X:N.price,quantity:J,parentId:F,isParent:!1,definedAttributeKeys:void 0,definedAttributeValues:void 0,variantAttributes:Vt,linkedSupplierItemIds:[]};rt.push(Fa),Xe++}),Xe>0?(d(rt),R("variants")):alert('All combinations already exist. You can manage them in "View Existing Variants".')},lA=me=>{if(me.target.checked){const Ze=new Set(uA.map(et=>et.id));fe(Ze)}else fe(new Set)},An=(me,Ze)=>{fe(et=>{const rt=new Set(et);return Ze?rt.add(me):rt.delete(me),rt})},oa=me=>{if(re.size===0)return;const Ze=ve[me];if(Ze==="")return;const et=uA.filter(rt=>re.has(rt.id)).map(rt=>({...rt,[me]:me==="price"?parseFloat(Ze):me==="quantity"?parseInt(Ze,10):Ze}));w(et),xe(rt=>({...rt,[me]:""})),alert(`${me.toUpperCase()} updated for ${et.length} items.`)},Ea=me=>{Ne(Ze=>({key:me,direction:Ze.key===me&&Ze.direction==="asc"?"desc":"asc"}))},Ia=se.useMemo(()=>{let me=A.filter(et=>!et.parentId);const Ze=D==="uncategorized"?"uncategorized":D||Ue;if(Ze==="uncategorized"?me=me.filter(et=>!et.categoryId):Ze&&(me=me.filter(et=>et.categoryId===Ze)),Le==="low_stock"?me=me.filter(et=>(et.quantity||0)<=(et.minStockLevel||5)&&et.status!=="discontinued"):Le!=="all"&&(me=me.filter(et=>(et.status||"active")===Le)),_e){const et=_e.toLowerCase();me=me.filter(rt=>rt.name.toLowerCase().includes(et)||rt.sku&&rt.sku.toLowerCase().includes(et))}return Ge&&(me=me.filter(et=>et.linkedSupplierItemIds?et.linkedSupplierItemIds.some(rt=>{const Xe=s.find(_t=>_t.id===rt);return Xe&&Xe.supplierId===Ge}):!1)),me.sort((et,rt)=>{let Xe=et[ie.key],_t=rt[ie.key];const Vt=zt=>{if(zt.isParent){const gA=A.filter(RA=>RA.parentId===zt.id);if(ie.key==="quantity")return gA.reduce((RA,Da)=>RA+(Da.quantity||0),0);if(ie.key==="value")return gA.reduce((RA,Da)=>RA+Da.price*(Da.quantity||0),0)}return ie.key==="value"?zt.price*(zt.quantity||0):zt[ie.key]};if(ie.key==="quantity"||ie.key==="value")Xe=Vt(et),_t=Vt(rt);else if(ie.key==="status"){const zt=gA=>gA.status==="discontinued"?0:(gA.quantity||0)===0?1:(gA.quantity||0)<=(gA.minStockLevel||5)?2:3;Xe=zt(et),_t=zt(rt)}else Xe=Xe??"",_t=_t??"";return Xe<_t?ie.direction==="asc"?-1:1:Xe>_t?ie.direction==="asc"?1:-1:0}),me},[A,D,Ue,Le,_e,Ge,ie,s]),Ot=({item:me})=>{if(me.status==="discontinued")return e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Discontinued"});let Ze=me.quantity||0;return me.isParent&&(Ze=A.filter(rt=>rt.parentId===me.id).reduce((rt,Xe)=>rt+(Xe.quantity||0),0)),Ze===0?e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:"Out of Stock"}):Ze<=(me.minStockLevel||5)?e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-700 rounded-full",children:"Low Stock"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:"In Stock"})},gs=me=>{L(Ze=>{const et=Ze.linkedSupplierItemIds||[];return et.includes(me.id)?Ze:{...Ze,linkedSupplierItemIds:[...et,me.id]}}),qe(!1)},ns=me=>{L(Ze=>({...Ze,linkedSupplierItemIds:(Ze.linkedSupplierItemIds||[]).filter(et=>et!==me)}))},La=me=>{me.preventDefault(),_.trim()&&(B(_),te(""))},YA=me=>{k(me.id),E(me.name)},SA=()=>{O&&P.trim()&&C(O,P.trim()),k(null),E("")},Xt=()=>{k(null),E("")};if(T==="categories")return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(he,{variant:"outline",onClick:()=>R("list"),children:" Back to Customer Inventory"}),e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Manage Categories"})]})}),e.jsx("div",{className:"max-h-[80vh] overflow-y-auto pr-2",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("form",{onSubmit:La,className:"flex gap-4 mb-8 p-6 bg-slate-50 rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800 mb-1",children:"New Category Name"}),e.jsx(we,{placeholder:"e.g. Electronics, Furniture",value:_,onChange:me=>te(me.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(he,{type:"submit",variant:"primary",children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Category"]})})]}),e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-100 text-sm font-semibold text-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Category Name"}),e.jsx("th",{className:"p-4 text-center w-32",children:"Items"}),e.jsx("th",{className:"p-4 text-right w-32",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.map(me=>{const Ze=A.filter(rt=>rt.categoryId===me.id).length,et=O===me.id;return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4 font-medium text-slate-800",children:et?e.jsx(we,{value:P,onChange:rt=>E(rt.target.value),autoFocus:!0,className:"h-8 text-sm",onKeyDown:rt=>{rt.key==="Enter"&&SA(),rt.key==="Escape"&&Xt()}}):me.name}),e.jsx("td",{className:"p-4 text-center text-slate-600",children:Ze}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("div",{className:"flex justify-end gap-2",children:et?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:SA,className:"p-2 bg-green-100 text-green-600 hover:bg-green-200 rounded transition-colors",title:"Save",type:"button",children:e.jsx(td,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Xt,className:"p-2 bg-red-100 text-red-600 hover:bg-red-200 rounded transition-colors",title:"Cancel",type:"button",children:e.jsx(er,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>YA(me),className:"p-2 bg-green-100 text-green-600 hover:bg-green-200 rounded transition-colors",title:"Edit",type:"button",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:rt=>Tt(rt,me.id),className:"p-2 bg-red-100 text-red-600 hover:bg-red-200 rounded transition-colors",title:"Delete",type:"button",children:e.jsx(pA,{className:"w-4 h-4"})})]})})})]},me.id)}),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-500",children:"No categories created yet."})})]})]})})]})})]});if(T==="variants"){const me=A.find(Ze=>Ze.id===F);return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(he,{variant:"outline",onClick:()=>{R("form"),Z("variants")},children:" Back to Product"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Existing Variants"}),me&&e.jsx("p",{className:"text-slate-500 text-sm",children:me.name})]})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h4",{className:"font-semibold text-slate-800",children:["Variants List (",uA.length,")"]})}),re.size>0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-4 flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"text-sm text-blue-800 font-medium mb-2 w-full sm:w-auto",children:[re.size," selected"]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-slate-800 font-medium mb-1",children:"Set Price"}),e.jsxs("div",{className:"flex",children:[e.jsx(we,{type:"number",className:"!h-8 !py-0 w-24 rounded-r-none",value:ve.price,onChange:Ze=>xe(et=>({...et,price:Ze.target.value}))}),e.jsx(he,{size:"sm",variant:"primary",className:"!rounded-l-none",onClick:()=>oa("price"),children:"Update"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-slate-800 font-medium mb-1",children:"Set Stock"}),e.jsxs("div",{className:"flex",children:[e.jsx(we,{type:"number",className:"!h-8 !py-0 w-24 rounded-r-none",value:ve.quantity,onChange:Ze=>xe(et=>({...et,quantity:Ze.target.value}))}),e.jsx(he,{size:"sm",variant:"primary",className:"!rounded-l-none",onClick:()=>oa("quantity"),children:"Update"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-slate-800 font-medium mb-1",children:"Set SKU"}),e.jsxs("div",{className:"flex",children:[e.jsx(we,{className:"!h-8 !py-0 w-32 rounded-r-none",value:ve.sku,onChange:Ze=>xe(et=>({...et,sku:Ze.target.value})),placeholder:"New SKU"}),e.jsx(he,{size:"sm",variant:"primary",className:"!rounded-l-none",onClick:()=>oa("sku"),children:"Update"})]})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden max-h-[600px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-100 text-xs uppercase text-slate-800 font-semibold sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 w-10",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:lA,checked:re.size>0&&re.size===uA.length})}),e.jsx("th",{className:"p-4",children:"Attributes"}),e.jsx("th",{className:"p-4 w-40",children:"SKU"}),e.jsx("th",{className:"p-4 text-right w-32",children:"Stock"}),e.jsx("th",{className:"p-4 text-right w-32",children:"Price"}),e.jsx("th",{className:"p-4 text-right w-16",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[uA.map(Ze=>{const et=Ze.variantAttributes?Object.entries(Ze.variantAttributes).map(([rt,Xe])=>`${rt}: ${Xe}`).join(" | "):"No attributes";return e.jsxs("tr",{className:re.has(Ze.id)?"bg-blue-50":"",children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",checked:re.has(Ze.id),onChange:rt=>An(Ze.id,rt.target.checked)})}),e.jsx("td",{className:"p-4 font-medium text-slate-800",children:et}),e.jsx("td",{className:"p-4 text-slate-800",children:e.jsx(we,{value:Ze.sku||"",onChange:rt=>h({...Ze,sku:rt.target.value}),className:"!py-1 h-9"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx(we,{type:"number",value:Ze.quantity,onChange:rt=>h({...Ze,quantity:parseInt(rt.target.value)||0}),className:"!py-1 text-right h-9"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-slate-400",children:ot}),e.jsx(we,{type:"number",step:"0.01",value:Ze.price,onChange:rt=>h({...Ze,price:parseFloat(rt.target.value)||0}),className:"!py-1 !pl-6 text-right h-9"})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx(he,{variant:"ghost",size:"icon",onClick:rt=>Yt(rt,Ze.id),type:"button",children:e.jsx(pA,{className:"w-5 h-5 text-red-500"})})})]},Ze.id)}),uA.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"No variants added yet."})})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t mt-4",children:e.jsx(he,{type:"button",variant:"primary",onClick:yt,children:"Done"})})]})}return T==="form"?e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(he,{variant:"outline",onClick:mt,children:" Back to Customer Inventory"}),e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:F?N.isParent?"Manage Product Variations":"Edit Item":"Add New Item"})]})}),N.isParent&&F&&e.jsxs("div",{className:"flex border-b mb-6",children:[e.jsx("button",{className:`px-4 py-2 font-medium text-sm ${V==="details"?"border-b-2 border-blue-500 text-blue-600":"text-slate-800 hover:text-slate-700"}`,onClick:()=>Z("details"),type:"button",children:"Product Details"}),e.jsx("button",{className:`px-4 py-2 font-medium text-sm ${V==="variants"?"border-b-2 border-blue-500 text-blue-600":"text-slate-800 hover:text-slate-700"}`,onClick:()=>Z("variants"),type:"button",children:"Manage Variants"}),e.jsx("button",{className:`px-4 py-2 font-medium text-sm ${V==="addons"?"border-b-2 border-blue-500 text-blue-600":"text-slate-800 hover:text-slate-700"}`,onClick:()=>Z("addons"),type:"button",children:"Optional Add-ons"})]}),V==="details"?e.jsxs("form",{onSubmit:Oe,className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"font-semibold text-slate-800 border-b pb-2",children:"Basic Details"}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"w-32 h-32 bg-slate-100 border-2 border-dashed border-slate-300 rounded-lg flex flex-col items-center justify-center relative hover:bg-slate-200 transition-colors cursor-pointer overflow-hidden",children:[N.image?e.jsx("img",{src:N.image,alt:"Preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center p-2",children:[e.jsx(ed,{className:"w-8 h-8 text-slate-400 mx-auto"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Upload"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:jt,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),e.jsxs("div",{className:"flex-grow space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Item Name *"}),e.jsx(we,{value:N.name,onChange:me=>Qt("name",me.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"SKU (Stock Keeping Unit)"}),e.jsx(we,{value:N.sku,onChange:me=>Qt("sku",me.target.value),placeholder:"e.g. PRD-001"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Category"}),e.jsxs(fA,{value:N.categoryId||"",onChange:me=>Qt("categoryId",me.target.value),children:[e.jsx("option",{value:"",children:"Uncategorized"}),n.map(me=>e.jsx("option",{value:me.id,children:me.name},me.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Status"}),e.jsxs(fA,{value:N.status||"active",onChange:me=>Qt("status",me.target.value),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})]})]}),!F&&e.jsxs("div",{className:"flex items-center p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx("input",{type:"checkbox",id:"isParent",checked:N.isParent,onChange:me=>Qt("isParent",me.target.checked),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isParent",className:"ml-3 text-sm font-medium text-blue-800",children:"This product has variants (Size, Colour, etc.)"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"font-semibold text-slate-800 border-b pb-2",children:"Inventory & Pricing"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-800",children:["Selling Price (",ot,") *"]}),e.jsx(we,{type:"number",step:"0.01",min:"0",value:N.price,onChange:me=>Qt("price",me.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"VAT Rate (%)"}),e.jsx(we,{type:"number",step:"0.01",min:"0",value:N.vatRate,onChange:me=>Qt("vatRate",me.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Min Price (Optional)"}),e.jsx(we,{type:"number",step:"0.01",min:"0",value:N.minPrice||"",onChange:me=>Qt("minPrice",me.target.value)})]}),N.isParent?e.jsx("div",{className:"p-4 bg-slate-100 rounded text-center text-sm text-slate-800 italic",children:'Stock quantity is managed via individual variants in the "Manage Variants" tab.'}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Current Stock"}),e.jsx(we,{type:"number",step:"1",value:N.quantity,onChange:me=>Qt("quantity",me.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Low Stock Alert Level"}),e.jsx(we,{type:"number",step:"1",value:N.minStockLevel,onChange:me=>Qt("minStockLevel",me.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Pricing Type"}),e.jsxs(fA,{value:N.type,onChange:me=>Qt("type",me.target.value),children:[e.jsx("option",{value:Aa.FIXED,children:"Fixed Price"}),e.jsx("option",{value:Aa.MEASURED,disabled:!o,children:"Measured (e.g. per m)"})]})]}),N.type===Aa.MEASURED&&e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800 mb-1",children:"Base Unit"}),e.jsx(fA,{value:N.measurementUnit||"",onChange:me=>Qt("measurementUnit",me.target.value),children:xt.map(me=>e.jsx("option",{value:me,children:me},me))}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-slate-800",children:"Equivalent Prices:"}),xt.map(me=>{var Ze;return e.jsxs("div",{className:"flex justify-between text-xs text-slate-800",children:[e.jsxs("span",{children:["Per ",me,":"]}),e.jsxs("span",{children:[ot,(((Ze=N.unitPrices)==null?void 0:Ze[me])??0).toFixed(4)]})]},me)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800 mb-2",children:"Linked Supplier Items"}),e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg bg-slate-50 max-h-40 overflow-y-auto",children:[(N.linkedSupplierItemIds||[]).length===0?e.jsx("p",{className:"text-sm text-slate-500 text-center",children:"No supplier items linked."}):(N.linkedSupplierItemIds||[]).map(me=>{const Ze=s.find(et=>et.id===me);return Ze?e.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded text-sm shadow-sm",children:[e.jsx("span",{className:"text-slate-800 truncate max-w-[250px]",children:Ze.name}),e.jsx(he,{type:"button",size:"icon",variant:"ghost",onClick:()=>ns(me),children:e.jsx(er,{className:"w-4 h-4 text-red-500"})})]},me):null}),e.jsxs(he,{type:"button",variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>qe(!0),children:[e.jsx(AA,{className:"w-4 h-4 mr-1"})," Link Material"]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 pt-6 border-t mt-4",children:[e.jsx(he,{type:"button",variant:"outline",onClick:mt,children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:F?"Update Product":N.isParent?"Create Parent Product":"Add Item"})]})]}):V==="variants"?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"1. Define Attributes & Values"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx(we,{placeholder:"Add attribute (e.g. Size, Colour, Material)",value:ue,onChange:me=>S(me.target.value),className:"max-w-md"}),e.jsx(he,{onClick:ft,variant:"outline",disabled:!ue.trim(),children:"Add Attribute"})]}),e.jsxs("div",{className:"space-y-6",children:[(N.definedAttributeKeys||[]).map(me=>{var Ze,et;return e.jsxs("div",{className:"bg-slate-50 border rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-semibold text-slate-700 text-lg",children:me}),e.jsx("button",{onClick:()=>gt(me),type:"button",className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Remove Attribute"})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(we,{placeholder:`Add ${me} value (e.g. Small)`,value:M[me]||"",onChange:rt=>Y(Xe=>({...Xe,[me]:rt.target.value})),className:"max-w-xs h-9 text-sm",onKeyDown:rt=>{rt.key==="Enter"&&(rt.preventDefault(),Jt(me))}}),e.jsx(he,{size:"sm",variant:"outline",onClick:()=>Jt(me),type:"button",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(((Ze=N.definedAttributeValues)==null?void 0:Ze[me])||[]).map((rt,Xe)=>(le==null?void 0:le.attribute)===me&&(le==null?void 0:le.index)===Xe?e.jsx(we,{autoFocus:!0,value:le.value,onChange:Vt=>de(zt=>zt?{...zt,value:Vt.target.value}:null),onBlur:()=>MA(me,Xe,le.value),onKeyDown:Vt=>{Vt.key==="Enter"&&MA(me,Xe,le.value),Vt.key==="Escape"&&de(null)},className:"h-8 w-32 text-sm"},Xe):e.jsxs("div",{className:"group flex items-center bg-white border rounded-full px-3 py-1 text-sm text-slate-700 hover:border-blue-400 transition-colors",children:[e.jsx("span",{children:rt}),e.jsxs("div",{className:"flex ml-2 gap-1 opacity-0 group-hover:opacity-100 transition-opacity border-l pl-2 border-slate-200",children:[e.jsx("button",{onClick:()=>de({attribute:me,index:Xe,value:rt}),type:"button",className:"text-slate-400 hover:text-blue-600",children:e.jsx(ss,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>VA(me,rt),type:"button",className:"text-slate-400 hover:text-red-600",children:e.jsx(pA,{className:"w-3 h-3"})})]})]},Xe)),(((et=N.definedAttributeValues)==null?void 0:et[me])||[]).length===0&&e.jsx("p",{className:"text-xs text-slate-400 italic py-1",children:"No values added yet."})]})]},me)}),(N.definedAttributeKeys||[]).length===0&&e.jsx("div",{className:"text-center py-8 border-2 border-dashed rounded-lg text-slate-500 bg-slate-50",children:"Add an attribute above to start defining variants."})]})]}),e.jsxs("div",{className:"pt-6 border-t",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"2. Defaults for New Variants"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"These values will only apply to newly created combinations. Existing variants will not be changed."}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-800",children:["Default Price (",ot,")"]}),e.jsx(we,{type:"number",value:X||"",onChange:me=>ee(parseFloat(me.target.value)),placeholder:"Same as parent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Default Stock Qty"}),e.jsx(we,{type:"number",value:J,onChange:me=>U(parseInt(me.target.value)||0)})]})]})]}),e.jsxs("div",{className:"pt-6 border-t flex flex-col gap-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"3. Update Variants"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800",children:['Clicking "Update Variants" will generate any missing combinations based on the attributes above. It will ',e.jsx("strong",{children:"not"})," change the price or stock of variants that already exist."]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(he,{variant:"outline",onClick:()=>R("variants"),type:"button",children:[e.jsx(Tb,{className:"w-4 h-4 mr-2"}),"View Existing Variants (",uA.length,")"]}),e.jsx(he,{type:"button",variant:"primary",size:"normal",className:"px-8",onClick:Kt,disabled:(N.definedAttributeKeys||[]).length===0,children:"Update / Generate Variants"})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsx(he,{type:"button",variant:"primary",onClick:yt,children:"Done"})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Manage Optional Add-ons"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Add options that customers can choose to include when this product is added to a quote or invoice."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 p-4 bg-slate-50 border rounded-lg items-end",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Add-on Name"}),e.jsx(we,{placeholder:"e.g. Gloss Finish",value:Ce.name,onChange:me=>st(Ze=>({...Ze,name:me.target.value}))})]}),e.jsxs("div",{className:"sm:col-span-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:["Price (",ot,")"]}),e.jsx(we,{type:"number",step:"0.01",value:Ce.price,onChange:me=>st(Ze=>({...Ze,price:parseFloat(me.target.value)||0}))})]}),e.jsx("div",{className:"sm:col-span-1",children:e.jsxs(he,{variant:"primary",className:"w-full",onClick:Fe,children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Option"]})})]}),e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b text-xs font-semibold text-slate-600 uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Option Name"}),e.jsxs("th",{className:"p-4 text-right",children:["Price (",ot,")"]}),e.jsx("th",{className:"p-4 text-right w-20",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[(N.addOnOptions||[]).map(me=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4 font-medium text-slate-800",children:me.name}),e.jsxs("td",{className:"p-4 text-right text-slate-800",children:[ot,me.price.toFixed(2)]}),e.jsx("td",{className:"p-4 text-right",children:e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>vt(me.id),children:e.jsx(pA,{className:"w-4 h-4 text-red-500"})})})]},me.id)),(N.addOnOptions||[]).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-400 italic",children:"No add-on options defined yet."})})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsx(he,{type:"button",variant:"primary",onClick:yt,children:"Done"})})]}),e.jsx(zh,{isOpen:Te,onClose:()=>qe(!1),items:s,onSelectItem:gs})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border-l-4 border-blue-500",children:[e.jsx("p",{className:"text-sm text-slate-500 font-medium uppercase",children:"Total Customer Inventory Value"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:[ot,Pt.totalValue.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border-l-4 border-orange-500",children:[e.jsx("p",{className:"text-sm text-slate-500 font-medium uppercase",children:"Low / Out of Stock"}),e.jsxs("div",{className:"flex gap-3 mt-1",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Pt.lowStockItems}),e.jsx("span",{className:"text-gray-300 text-2xl",children:"/"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Pt.outOfStockItems})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border-l-4 border-green-500",children:[e.jsx("p",{className:"text-sm text-slate-500 font-medium uppercase",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:Pt.totalItems})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border border-slate-200",children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 bg-slate-50 flex flex-col md:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full md:w-auto flex-grow",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(yr,{className:"w-4 h-4 text-gray-400"})}),e.jsx(we,{placeholder:"Search Name or SKU...",value:_e,onChange:me=>$e(me.target.value),className:"pl-10"})]}),e.jsxs(fA,{value:Le,onChange:me=>K(me.target.value),className:"w-full md:w-40",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[!l.subscriptionStatus.startsWith("trial_")&&e.jsxs(he,{variant:"outline",onClick:()=>ks("inventory.csv",A),children:[e.jsx(KA,{className:"w-4 h-4 mr-2"})," Export"]}),e.jsxs(he,{variant:"primary",onClick:Ft,children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Item"]})]})]}),e.jsxs("div",{className:"px-5 py-3 border-b border-slate-200 flex flex-col sm:flex-row items-center justify-between gap-4 bg-slate-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("label",{htmlFor:"categoryFilter",className:"text-sm font-medium text-slate-700 whitespace-nowrap",children:"Filter Category:"}),e.jsxs(fA,{id:"categoryFilter",value:D||Ue||"",onChange:me=>{const Ze=me.target.value;Ze==="all"?(G(null),At("")):Ze==="uncategorized"?G("uncategorized"):(G(Ze),At(Ze))},className:"w-full sm:w-64 bg-white",children:[e.jsx("option",{value:"all",children:"All Items"}),e.jsx("option",{value:"uncategorized",children:"Uncategorized"}),n.map(me=>e.jsx("option",{value:me.id,children:me.name},me.id))]})]}),e.jsxs("button",{onClick:()=>R("categories"),className:"text-sm font-medium text-blue-600 hover:text-blue-800 flex items-center whitespace-nowrap bg-white px-3 py-1.5 rounded border border-blue-200 hover:border-blue-300 transition-colors shadow-sm",type:"button",children:[e.jsx(G0,{className:"w-4 h-4 mr-2"})," Manage Categories"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-100 text-xs uppercase text-slate-800 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 w-16",children:"Img"}),e.jsx("th",{className:"p-4 cursor-pointer hover:text-blue-600",onClick:()=>Ea("name"),children:"Product / SKU"}),e.jsx("th",{className:"p-4",children:"Category"}),e.jsx("th",{className:"p-4 text-center cursor-pointer hover:text-blue-600",onClick:()=>Ea("status"),children:"Status"}),e.jsx("th",{className:"p-4 text-right cursor-pointer hover:text-blue-600",onClick:()=>Ea("quantity"),children:"Stock"}),e.jsx("th",{className:"p-4 text-right cursor-pointer hover:text-blue-600",onClick:()=>Ea("price"),children:"Price"}),e.jsx("th",{className:"p-4 text-right cursor-pointer hover:text-blue-600",onClick:()=>Ea("value"),children:"Value"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"text-sm divide-y divide-slate-100",children:Ia.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-500",children:"No items found matching your filters."})}):Ia.map(me=>{const Ze=n.find(_t=>_t.id===me.categoryId);let et=me.quantity||0,rt=(me.price||0)*et,Xe=`${ot}${me.price.toFixed(2)}`;if(me.isParent){const _t=A.filter(Vt=>Vt.parentId===me.id);if(et=_t.reduce((Vt,zt)=>Vt+(zt.quantity||0),0),rt=_t.reduce((Vt,zt)=>Vt+zt.price*(zt.quantity||0),0),_t.length>0){const Vt=_t.map(RA=>RA.price),zt=Math.min(...Vt),gA=Math.max(...Vt);zt!==gA?Xe=`${ot}${zt.toFixed(2)} - ${ot}${gA.toFixed(2)}`:Xe=`${ot}${zt.toFixed(2)}`}}return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"w-10 h-10 bg-slate-100 rounded-md overflow-hidden border flex items-center justify-center relative",children:[me.image?e.jsx("img",{src:me.image,alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-slate-300 text-xs",children:"IMG"}),me.isParent&&e.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white p-0.5 rounded-tl-md",title:"Product with Variants",children:e.jsx(oo,{className:"w-3 h-3"})})]})}),e.jsxs("td",{className:"p-4",children:[e.jsx("p",{className:"font-medium text-slate-800",children:me.name}),me.sku&&e.jsxs("p",{className:"text-xs text-slate-500",children:["SKU: ",me.sku]}),me.isParent&&e.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded mt-1 inline-block",children:"Has Variants"})]}),e.jsx("td",{className:"p-4 text-slate-800",children:(Ze==null?void 0:Ze.name)||e.jsx("span",{className:"text-slate-400 italic",children:"Uncategorized"})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx(Ot,{item:me})}),e.jsx("td",{className:"p-4 text-right font-medium text-slate-800",children:et}),e.jsxs("td",{className:"p-4 text-right text-slate-800",children:[Xe," ",me.measurementUnit?` / ${me.measurementUnit}`:""]}),e.jsxs("td",{className:"p-4 text-right text-slate-800",children:[ot,rt.toFixed(2)]}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>wt(me),className:"p-2 rounded bg-green-100 text-green-600 hover:bg-green-200 transition-colors",title:me.isParent?"Manage Variants":"Edit Item",type:"button",children:me.isParent?e.jsx(oo,{className:"w-4 h-4"}):e.jsx(ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:_t=>Ct(_t,me.id),className:"p-2 rounded bg-red-100 text-red-600 hover:bg-red-200 transition-colors",type:"button",children:e.jsx(pA,{className:"w-4 h-4"})})]})})]},me.id)})})]})})]})]})},qc=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})}),Mb=A=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639l4.42-7.58a1.012 1.012 0 0 1 1.737 0l4.42 7.58c.24.41.24.93 0 1.342l-4.42 7.58a1.012 1.012 0 0 1-1.737 0l-4.42-7.58Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),Ob=({customers:A,currentUser:s,onRemoveCustomer:n,onViewHistory:r,onImportCustomers:l,onNavigateToAdd:o,onNavigateToEdit:u})=>{const[d,h]=se.useState(""),m=se.useRef(null),w=async B=>{var C;const x=(C=B.target.files)==null?void 0:C[0];if(x){if(window.confirm("Are you sure you want to import this file? This will overwrite all existing customers. This action cannot be undone."))try{const N=await Kh(x);l(N)}catch(N){console.error("Failed to parse CSV",N),alert("Failed to import customers. The file might be corrupted or in the wrong format.")}B.target.value=""}},v=se.useMemo(()=>{if(!d)return A;const B=d.toLowerCase();return A.filter(x=>x.name.toLowerCase().includes(B)||x.contactName&&x.contactName.toLowerCase().includes(B)||x.address.toLowerCase().includes(B)||x.email&&x.email.toLowerCase().includes(B)||x.mobile&&x.mobile.toLowerCase().includes(B))},[A,d]);return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"All Customers"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(he,{variant:"primary",onClick:o,children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Customer"]}),!s.subscriptionStatus.startsWith("trial_")&&e.jsxs(e.Fragment,{children:[e.jsxs(he,{variant:"outline",onClick:()=>ks("customers-backup.csv",A),children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Export"]}),e.jsxs(he,{variant:"outline",onClick:()=>{var B;return(B=m.current)==null?void 0:B.click()},children:[e.jsx(ed,{className:"w-5 h-5 mr-2"}),"Import"]}),e.jsx("input",{type:"file",ref:m,onChange:w,accept:".csv",style:{display:"none"}})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(we,{placeholder:"Search by name, address, email, or mobile...",value:d,onChange:B=>h(B.target.value),className:"max-w-md"})}),e.jsx("div",{className:"bg-slate-50 rounded-lg border border-slate-200 overflow-hidden",children:e.jsx("div",{className:"max-h-[65vh] overflow-y-auto",children:A.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(qc,{className:"mx-auto h-16 w-16 text-slate-300"}),e.jsx("p",{className:"mt-4 text-lg text-slate-500",children:"No customers saved yet."}),e.jsxs(he,{variant:"primary",onClick:o,className:"mt-4",children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Your First Customer"]})]}):v.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-lg text-slate-500",children:"No customers found matching your search."})}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-100 text-sm font-semibold text-slate-600 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b",children:"Business Name"}),e.jsx("th",{className:"p-4 border-b hidden md:table-cell",children:"Contact"}),e.jsx("th",{className:"p-4 border-b hidden sm:table-cell",children:"Details"}),e.jsx("th",{className:"p-4 border-b text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:v.map(B=>e.jsxs("tr",{className:"hover:bg-white transition-colors",children:[e.jsxs("td",{className:"p-4 align-top",children:[e.jsx("p",{className:"font-semibold text-slate-800",children:B.name}),e.jsx("p",{className:"text-sm text-slate-500 whitespace-pre-wrap sm:hidden",children:B.address})]}),e.jsxs("td",{className:"p-4 align-top hidden md:table-cell",children:[B.contactName&&e.jsx("p",{className:"text-sm text-slate-800",children:B.contactName}),B.email&&e.jsx("p",{className:"text-sm text-slate-500",children:B.email}),B.mobile&&e.jsx("p",{className:"text-sm text-slate-500",children:B.mobile})]}),e.jsx("td",{className:"p-4 align-top hidden sm:table-cell",children:e.jsx("p",{className:"text-sm text-slate-600 whitespace-pre-wrap max-w-xs",children:B.address})}),e.jsx("td",{className:"p-4 align-top text-right",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center justify-end gap-2",children:[e.jsxs(he,{variant:"outline",className:"!py-1 !px-2 text-xs w-full sm:w-auto",onClick:()=>r(B.id),title:"View details & statement",children:[e.jsx(Mb,{className:"w-4 h-4 mr-1.5"}),"Details"]}),e.jsxs(he,{variant:"outline",className:"!py-1 !px-2 text-xs w-full sm:w-auto",onClick:()=>u(B),title:"Edit customer",children:[e.jsx(ss,{className:"w-4 h-4 mr-1.5"}),"Edit"]}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>n(B.id),title:"Delete customer",className:"hidden sm:inline-flex",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})}),e.jsx(he,{variant:"danger",className:"!py-1 !px-2 text-xs w-full sm:hidden",onClick:()=>n(B.id),children:"Delete"})]})})]},B.id))})]})})})]})},Ix={name:"",contactName:"",address:"",mobile:"",email:"",website:"",companyReg:"",notes:""},kb=({initialCustomer:A,onSave:s,onUpdate:n,onCancel:r})=>{const[l,o]=se.useState(Ix);se.useEffect(()=>{o(A?{name:A.name,contactName:A.contactName||"",address:A.address,mobile:A.mobile||"",email:A.email||"",website:A.website||"",companyReg:A.companyReg||"",notes:A.notes||""}:Ix)},[A]);const u=(h,m)=>{o(w=>({...w,[h]:m}))},d=h=>{if(h.preventDefault(),!l.name.trim()||!l.address.trim()){alert("Please provide both a business name and an address.");return}const m={name:l.name,contactName:l.contactName||void 0,address:l.address,mobile:l.mobile||void 0,email:l.email||void 0,website:l.website||void 0,companyReg:l.companyReg||void 0,notes:l.notes||void 0};A?n({id:A.id,...m}):s(m)};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 border-b pb-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:A?"Edit Customer":"Add New Customer"}),e.jsx(he,{variant:"outline",onClick:r,children:"Cancel"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"customerName",className:"block text-sm font-medium text-slate-600",children:"Business Name *"}),e.jsx(we,{id:"customerName",value:l.name,onChange:h=>u("name",h.target.value),required:!0,placeholder:"e.g. Acme Corp"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contactName",className:"block text-sm font-medium text-slate-600",children:"Contact Name (Optional)"}),e.jsx(we,{id:"contactName",value:l.contactName,onChange:h=>u("contactName",h.target.value),placeholder:"e.g. John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customerMobile",className:"block text-sm font-medium text-slate-600",children:"Mobile"}),e.jsx(we,{id:"customerMobile",value:l.mobile,onChange:h=>u("mobile",h.target.value),placeholder:"e.g. 07700 900000"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"customerAddress",className:"block text-sm font-medium text-slate-600",children:"Address *"}),e.jsx(HA,{id:"customerAddress",value:l.address,onChange:h=>u("address",h.target.value),rows:3,required:!0,placeholder:"Full business address..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customerEmail",className:"block text-sm font-medium text-slate-600",children:"Email"}),e.jsx(we,{id:"customerEmail",type:"email",value:l.email,onChange:h=>u("email",h.target.value),placeholder:"contact@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customerWebsite",className:"block text-sm font-medium text-slate-600",children:"Website"}),e.jsx(we,{id:"customerWebsite",value:l.website,onChange:h=>u("website",h.target.value),placeholder:"www.example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customerCompanyReg",className:"block text-sm font-medium text-slate-600",children:"Company Reg #"}),e.jsx(we,{id:"customerCompanyReg",value:l.companyReg,onChange:h=>u("companyReg",h.target.value)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"customerNotes",className:"block text-sm font-medium text-slate-600",children:"Notes"}),e.jsx(HA,{id:"customerNotes",value:l.notes,onChange:h=>u("notes",h.target.value),rows:3,placeholder:"Internal notes..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx(he,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),e.jsxs(he,{type:"submit",variant:"primary",children:[A?e.jsx(ss,{className:"w-5 h-5 mr-2"}):e.jsx(AA,{className:"w-5 h-5 mr-2"}),A?"Update Customer":"Save Customer"]})]})]})]})},F2=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a3.375 3.375 0 0 1 3.375-3.375h9.75a3.375 3.375 0 0 1 3.375 3.375v1.875M3.375 14.25v-1.875a3.375 3.375 0 0 1 3.375-3.375h9.75a3.375 3.375 0 0 1 3.375 3.375v1.875m0 0H20.25m-16.5 0H3.375m0 0v-6.375c0-.621.504-1.125 1.125-1.125h13.5c.621 0 1.125.504 1.125 1.125v6.375"})}),_b=({suppliers:A,currentUser:s,onRemoveSupplier:n,onImportSuppliers:r,onNavigateToAdd:l,onNavigateToEdit:o})=>{const[u,d]=se.useState(""),h=se.useRef(null),m=async v=>{var x;const B=(x=v.target.files)==null?void 0:x[0];if(B){if(window.confirm("Are you sure you want to import this file? This will overwrite all existing suppliers. This action cannot be undone."))try{const C=await Kh(B);r(C)}catch(C){console.error("Failed to parse CSV",C),alert("Failed to import suppliers. The file might be corrupted or in the wrong format.")}v.target.value=""}},w=se.useMemo(()=>{if(!u)return A;const v=u.toLowerCase();return A.filter(B=>B.name.toLowerCase().includes(v)||B.address.toLowerCase().includes(v)||B.email&&B.email.toLowerCase().includes(v)||B.phone&&B.phone.toLowerCase().includes(v))},[A,u]);return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"All Suppliers"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(he,{variant:"primary",onClick:l,children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Supplier"]}),!s.subscriptionStatus.startsWith("trial_")&&e.jsxs(e.Fragment,{children:[e.jsxs(he,{variant:"outline",onClick:()=>ks("suppliers-backup.csv",A),children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Export"]}),e.jsxs(he,{variant:"outline",onClick:()=>{var v;return(v=h.current)==null?void 0:v.click()},children:[e.jsx(ed,{className:"w-5 h-5 mr-2"}),"Import"]}),e.jsx("input",{type:"file",ref:h,onChange:m,accept:".csv",style:{display:"none"}})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(we,{placeholder:"Search by name, address, email, or phone...",value:u,onChange:v=>d(v.target.value),className:"max-w-md"})}),e.jsx("div",{className:"bg-slate-50 rounded-lg border border-slate-200 overflow-hidden",children:e.jsx("div",{className:"max-h-[65vh] overflow-y-auto",children:A.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(F2,{className:"mx-auto h-16 w-16 text-slate-300"}),e.jsx("p",{className:"mt-4 text-lg text-slate-500",children:"No suppliers saved yet."}),e.jsxs(he,{variant:"primary",onClick:l,className:"mt-4",children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Your First Supplier"]})]}):w.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-lg text-slate-500",children:"No suppliers found matching your search."})}):e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-100 text-sm font-semibold text-slate-600 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b",children:"Supplier Name"}),e.jsx("th",{className:"p-4 border-b hidden md:table-cell",children:"Contact"}),e.jsx("th",{className:"p-4 border-b hidden sm:table-cell",children:"Details"}),e.jsx("th",{className:"p-4 border-b text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:w.map(v=>e.jsxs("tr",{className:"hover:bg-white transition-colors",children:[e.jsxs("td",{className:"p-4 align-top",children:[e.jsx("p",{className:"font-semibold text-slate-800",children:v.name}),e.jsx("p",{className:"text-sm text-slate-500 whitespace-pre-wrap sm:hidden",children:v.address})]}),e.jsxs("td",{className:"p-4 align-top hidden md:table-cell",children:[v.contactPerson&&e.jsx("p",{className:"text-sm text-slate-800",children:v.contactPerson}),v.email&&e.jsx("p",{className:"text-sm text-slate-500",children:v.email}),v.phone&&e.jsx("p",{className:"text-sm text-slate-500",children:v.phone})]}),e.jsxs("td",{className:"p-4 align-top hidden sm:table-cell",children:[e.jsx("p",{className:"text-sm text-slate-600 whitespace-pre-wrap max-w-xs",children:v.address}),v.vatNumber&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["VAT: ",v.vatNumber]})]}),e.jsx("td",{className:"p-4 align-top text-right",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center justify-end gap-2",children:[e.jsxs(he,{variant:"outline",className:"!py-1 !px-2 text-xs w-full sm:w-auto",onClick:()=>o(v),title:"Edit supplier",children:[e.jsx(ss,{className:"w-4 h-4 mr-1.5"}),"Edit"]}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>n(v.id),title:"Delete supplier",className:"hidden sm:inline-flex",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})}),e.jsx(he,{variant:"danger",className:"!py-1 !px-2 text-xs w-full sm:hidden",onClick:()=>n(v.id),children:"Delete"})]})})]},v.id))})]})})})]})},Lx={name:"",address:"",contactPerson:"",email:"",phone:"",website:"",vatNumber:"",notes:"",bankBusinessName:"",bankSortCode:"",bankAccountNumber:""},Rb=({initialSupplier:A,onSave:s,onUpdate:n,onCancel:r})=>{const[l,o]=se.useState(Lx);se.useEffect(()=>{var h,m,w;o(A?{name:A.name,address:A.address,contactPerson:A.contactPerson||"",email:A.email||"",phone:A.phone||"",website:A.website||"",vatNumber:A.vatNumber||"",notes:A.notes||"",bankBusinessName:((h=A.bankDetails)==null?void 0:h.businessName)||"",bankSortCode:((m=A.bankDetails)==null?void 0:m.sortCode)||"",bankAccountNumber:((w=A.bankDetails)==null?void 0:w.accountNumber)||""}:Lx)},[A]);const u=(h,m)=>{o(w=>({...w,[h]:m}))},d=h=>{if(h.preventDefault(),!l.name.trim()||!l.address.trim()){alert("Please provide both a name and an address.");return}const m={name:l.name,address:l.address,contactPerson:l.contactPerson||void 0,email:l.email||void 0,phone:l.phone||void 0,website:l.website||void 0,vatNumber:l.vatNumber||void 0,notes:l.notes||void 0,bankDetails:{businessName:l.bankBusinessName,sortCode:l.bankSortCode,accountNumber:l.bankAccountNumber}};A?n({id:A.id,...m}):s(m)};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 border-b pb-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:A?"Edit Supplier":"Add New Supplier"}),e.jsx(he,{variant:"outline",onClick:r,children:"Cancel"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"supplierName",className:"block text-sm font-medium text-slate-600",children:"Supplier/Business Name *"}),e.jsx(we,{id:"supplierName",value:l.name,onChange:h=>u("name",h.target.value),required:!0,placeholder:"e.g. ABC Supplies Ltd"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"supplierAddress",className:"block text-sm font-medium text-slate-600",children:"Address *"}),e.jsx(HA,{id:"supplierAddress",value:l.address,onChange:h=>u("address",h.target.value),rows:3,required:!0,placeholder:"Full address..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplierContact",className:"block text-sm font-medium text-slate-600",children:"Contact Person"}),e.jsx(we,{id:"supplierContact",value:l.contactPerson,onChange:h=>u("contactPerson",h.target.value),placeholder:"e.g. Jane Smith"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplierPhone",className:"block text-sm font-medium text-slate-600",children:"Phone"}),e.jsx(we,{id:"supplierPhone",value:l.phone,onChange:h=>u("phone",h.target.value),placeholder:"e.g. 01234 567890"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplierEmail",className:"block text-sm font-medium text-slate-600",children:"Email"}),e.jsx(we,{id:"supplierEmail",type:"email",value:l.email,onChange:h=>u("email",h.target.value),placeholder:"orders@abcsupplies.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplierWebsite",className:"block text-sm font-medium text-slate-600",children:"Website"}),e.jsx(we,{id:"supplierWebsite",value:l.website,onChange:h=>u("website",h.target.value),placeholder:"www.abcsupplies.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplierVat",className:"block text-sm font-medium text-slate-600",children:"VAT Number"}),e.jsx(we,{id:"supplierVat",value:l.vatNumber,onChange:h=>u("vatNumber",h.target.value),placeholder:"GB..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4 border-b pb-2",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bankBusinessName",className:"block text-sm font-medium text-slate-600",children:"Business Name"}),e.jsx(we,{id:"bankBusinessName",value:l.bankBusinessName,onChange:h=>u("bankBusinessName",h.target.value),placeholder:"Name on account"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bankSortCode",className:"block text-sm font-medium text-slate-600",children:"Sort Code"}),e.jsx(we,{id:"bankSortCode",value:l.bankSortCode,onChange:h=>u("bankSortCode",h.target.value),placeholder:"00-00-00"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bankAccountNumber",className:"block text-sm font-medium text-slate-600",children:"Account Details"}),e.jsx(we,{id:"bankAccountNumber",value:l.bankAccountNumber,onChange:h=>u("bankAccountNumber",h.target.value),placeholder:"12345678"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"supplierNotes",className:"block text-sm font-medium text-slate-600",children:"Notes"}),e.jsx(HA,{id:"supplierNotes",value:l.notes,onChange:h=>u("notes",h.target.value),rows:3,placeholder:"Internal notes, payment terms, etc."})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(he,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),e.jsxs(he,{type:"submit",variant:"primary",children:[A?e.jsx(ss,{className:"w-5 h-5 mr-2"}):e.jsx(AA,{className:"w-5 h-5 mr-2"}),A?"Update Supplier":"Add Supplier"]})]})]})]})},_o=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),qh=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.572a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})}),Dx={date:new Date().toISOString().split("T")[0],amount:0,notes:"",method:"Bank Transfer"},Pb=({invoices:A,drafts:s,creditNotes:n,settings:r,currentUser:l,onAddPayment:o,onRemovePayment:u,onRemoveInvoice:d,onApplyCreditNote:h,onLoadInvoiceForEdit:m,onLoadInvoiceForCredit:w,onLoadDraft:v,onRemoveDraft:B,selectedInvoiceId:x,setSelectedInvoiceId:C,fromCustomerHistory:N,onBackToCustomerHistory:L,onDownloadInvoice:F,onOpenEmailModal:Q})=>{const[_,te]=se.useState(Dx),[O,k]=se.useState(""),[P,E]=se.useState(!1),[D,G]=se.useState("pending"),[T,R]=se.useState(""),[V,Z]=se.useState(""),[ue,S]=se.useState(""),[M,Y]=se.useState({}),le=r.currencySymbol||"",de=se.useMemo(()=>A.find(_e=>_e.id===x)||null,[A,x]),J=(_e,$e)=>{te(Ue=>({...Ue,[_e]:$e}))},U=_e=>{_e.preventDefault(),x&&_.amount>0&&(o(x,{date:_.date,amount:Number(_.amount),notes:_.notes,method:_.method}),te(Dx))},X=_e=>{let $e=0;return n.forEach(Ue=>{(Ue.applications||[]).forEach(At=>{At.invoiceId===_e&&($e+=At.amount)})}),$e},ee=_e=>{const $e=_e.payments.reduce((Le,K)=>Le+K.amount,0),Ue=X(_e.id),At=_e.total-Ue;return At<=.001||$e>=At-.001?"Paid":$e>0?"Partially Paid":"Unpaid"},re=se.useMemo(()=>{const _e=new Set(A.map($e=>$e.state.customerName));return s.forEach($e=>_e.add($e.state.customerName)),Array.from(_e)},[A,s]),fe=se.useMemo(()=>{let _e;if(D==="saved")_e=s.map(Ue=>({...Ue,isDraft:!0}));else{const Ue=A;D==="pending"?_e=Ue.filter(At=>{const Le=ee(At);return Le==="Unpaid"||Le==="Partially Paid"}):_e=Ue.filter(At=>ee(At)==="Paid")}let $e=_e;if(T&&($e=$e.filter(Ue=>Ue.state.customerName.toLowerCase().includes(T.toLowerCase()))),V){const Ue=new Date(V);Ue.setHours(0,0,0,0),$e=$e.filter(At=>new Date(At.state.issueDate)>=Ue)}if(ue){const Ue=new Date(ue);Ue.setHours(23,59,59,999),$e=$e.filter(At=>new Date(At.state.issueDate)<=Ue)}if(O){const Ue=O.toLowerCase();$e=$e.filter(At=>At.name.toLowerCase().includes(Ue)||At.state.invoiceNumber.toLowerCase().includes(Ue)||At.state.reference.toLowerCase().includes(Ue))}return $e.sort((Ue,At)=>new Date(At.createdAt).getTime()-new Date(Ue.createdAt).getTime())},[A,s,n,O,D,T,V,ue]),ve=()=>{R(""),Z(""),S(""),k("")},xe=({tab:_e,label:$e})=>e.jsx("button",{onClick:()=>G(_e),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${D===_e?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:$e}),Ce=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b border-slate-200 mb-4",children:e.jsxs("div",{className:"flex -mb-px",children:[e.jsx(xe,{tab:"saved",label:"Saved"}),e.jsx(xe,{tab:"pending",label:"Payment Pending"}),e.jsx(xe,{tab:"paid",label:"Paid"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(we,{placeholder:"Search by invoice #, reference, or customer name...",value:O,onChange:_e=>k(_e.target.value),className:"flex-grow"}),e.jsxs(he,{variant:"outline",onClick:()=>E(!P),className:"w-full sm:w-auto",children:[e.jsx(qh,{className:"w-5 h-5 mr-2"}),"Filters"]})]}),P&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-4 p-4 bg-slate-50 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Customer"}),e.jsx(we,{list:"customer-names",value:T,onChange:_e=>R(_e.target.value),placeholder:"All customers"}),e.jsx("datalist",{id:"customer-names",children:re.map(_e=>e.jsx("option",{value:_e},_e))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"From Date"}),e.jsx(we,{type:"date",value:V,onChange:_e=>Z(_e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"To Date"}),e.jsx(we,{type:"date",value:ue,onChange:_e=>S(_e.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(he,{variant:"outline",onClick:ve,className:"w-full",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto space-y-3 pr-2",children:fe.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:A.length===0&&s.length===0?e.jsxs(e.Fragment,{children:[e.jsx(K0,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No finalized invoices or drafts yet."})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"No documents found for the selected filters."})}):fe.map(_e=>{if("isDraft"in _e&&_e.isDraft)return e.jsxs("div",{className:"bg-slate-100 p-4 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:_e.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Saved on ",new Date(_e.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(co,{status:"Draft"}),e.jsxs(he,{variant:"outline",onClick:()=>v(_e.id),children:[e.jsx(ss,{className:"w-4 h-4 mr-2"})," Edit"]}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>B(_e.id),title:"Delete draft",children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200 grid grid-cols-3 gap-4 text-sm",children:e.jsxs("p",{className:"text-slate-800 col-span-3",children:[e.jsx("strong",{children:"Total:"})," ",e.jsxs("span",{className:"font-medium text-slate-600",children:[le,_e.total.toFixed(2)]})]})})]},_e.id);const Ue=_e,At=ee(Ue),Le=Ue.payments.reduce((Ye,ie)=>Ye+ie.amount,0),K=X(Ue.id),Ge=Ue.total-K-Le;return e.jsxs("div",{className:"bg-slate-100 p-4 rounded-md",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:Ue.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Created on ",new Date(Ue.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-start sm:justify-end gap-2 w-full sm:w-auto",children:[e.jsx(co,{status:At}),e.jsx(he,{variant:"outline",className:"!py-1 !px-2 text-xs",onClick:()=>w(Ue.id),children:"Credit Note"}),e.jsxs(he,{variant:"outline",className:"!py-1 !px-2 text-xs",onClick:()=>m(Ue.id),children:[e.jsx(ss,{className:"w-4 h-4 mr-1.5"})," Edit"]}),e.jsxs(he,{variant:"outline",className:"!py-1 !px-2 text-xs",onClick:()=>Q(Ue),children:[e.jsx(_o,{className:"w-4 h-4 mr-1.5"})," Email"]}),e.jsxs(he,{variant:"outline",className:"!py-1 !px-2 text-xs",onClick:()=>F(Ue.id),children:[e.jsx(KA,{className:"w-4 h-4 mr-1.5"})," PDF"]}),e.jsx(he,{variant:"primary",className:"!py-1 !px-2 text-xs",onClick:()=>C(Ue.id),children:"Manage Payments"}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>d(Ue.id),title:"Delete invoice",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200 grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("p",{className:"text-slate-800",children:[e.jsx("strong",{children:"Total:"})," ",e.jsxs("span",{className:"font-medium text-slate-600",children:[le,Ue.total.toFixed(2)]})]}),e.jsxs("p",{className:"text-slate-800",children:[e.jsx("strong",{children:"Paid:"})," ",e.jsxs("span",{className:"font-medium text-green-600",children:[le,Le.toFixed(2)]})]}),e.jsxs("p",{className:"text-slate-800",children:[e.jsx("strong",{children:"Balance:"})," ",e.jsxs("span",{className:"font-medium text-red-600",children:[le,Ge.toFixed(2)]})]})]})]},Ue.id)})})]}),st=()=>{if(!de)return null;const _e=de.payments.reduce((K,Ge)=>K+Ge.amount,0),$e=X(de.id),Ue=de.total-$e-_e,At=n.filter(K=>K.state.customerName===de.state.customerName).map(K=>{const Ge=(K.applications||[]).reduce((ie,Ne)=>ie+Ne.amount,0),Ye=K.total-Ge;return{...K,remaining:Ye}}).filter(K=>K.remaining>.001),Le=K=>{const Ge=M[K]||0;if(Ge<=0)return;const Ye=At.find(ie=>ie.id===K);if(Ye){if(Ge>Ye.remaining){alert("Amount to apply cannot exceed the remaining credit on the note.");return}if(Ge>Ue){alert("Amount to apply cannot exceed the invoice balance due.");return}h(de.id,K,Ge),Y(ie=>({...ie,[K]:0}))}};return e.jsxs("div",{children:[N?e.jsx(he,{variant:"outline",onClick:L,className:"mb-4",children:" Back to Statements"}):e.jsx(he,{variant:"outline",onClick:()=>C(null),className:"mb-4",children:" Back to All Invoices"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:de.name}),e.jsxs("div",{className:"mb-4 flex items-center gap-4 text-slate-600 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("span",{children:["Total: ",e.jsxs("span",{className:"font-medium text-slate-800",children:[le,de.total.toFixed(2)]})]}),e.jsx("span",{className:"w-px h-4 bg-slate-200"}),e.jsxs("span",{children:["Paid: ",e.jsxs("span",{className:"font-medium text-green-600",children:[le,_e.toFixed(2)]})]}),e.jsx("span",{className:"w-px h-4 bg-slate-200"}),e.jsxs("span",{children:["Credited: ",e.jsxs("span",{className:"font-medium text-orange-600",children:[le,$e.toFixed(2)]})]}),e.jsx("span",{className:"w-px h-4 bg-slate-200"}),e.jsxs("span",{children:["Balance: ",e.jsxs("span",{className:"font-medium text-red-600",children:[le,Ue.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-1 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Record a New Payment"}),e.jsxs("form",{onSubmit:U,className:"space-y-4 bg-slate-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"paymentAmount",className:"block text-sm font-medium text-slate-600",children:["Amount (",le,")"]}),e.jsx(we,{id:"paymentAmount",type:"number",step:"0.01",value:_.amount,onChange:K=>J("amount",parseFloat(K.target.value)||0),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-slate-600",children:"Date"}),e.jsx(we,{id:"paymentDate",type:"date",value:_.date,onChange:K=>J("date",K.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-slate-600",children:"Payment Method"}),e.jsxs(fA,{id:"paymentMethod",value:_.method,onChange:K=>J("method",K.target.value),required:!0,children:[e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Card Payment",children:"Card Payment"}),e.jsx("option",{value:"Online Payment",children:"Online Payment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentNotes",className:"block text-sm font-medium text-slate-600",children:"Notes (Optional)"}),e.jsx(HA,{id:"paymentNotes",value:_.notes,onChange:K=>J("notes",K.target.value),rows:2})]}),e.jsx(he,{type:"submit",variant:"primary",className:"w-full",children:"Record Payment"})]})]}),At.length>0&&Ue>.001&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Apply Available Credit"}),e.jsx("div",{className:"space-y-4 bg-slate-50 p-4 rounded-lg",children:At.map(K=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium text-slate-700",children:K.state.creditNoteNumber}),e.jsxs("span",{className:"text-slate-500",children:["Available: ",le,K.remaining.toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(we,{type:"number",step:"0.01",max:Math.min(K.remaining,Ue),value:M[K.id]||"",onChange:Ge=>Y(Ye=>({...Ye,[K.id]:parseFloat(Ge.target.value)||0})),placeholder:"Amount to apply"}),e.jsx(he,{variant:"outline",onClick:()=>Le(K.id),children:"Apply"})]})]},K.id))})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Payment History"}),e.jsx("div",{className:"max-h-80 overflow-y-auto space-y-3 pr-2",children:de.payments.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No payments recorded yet."}):[...de.payments].sort((K,Ge)=>new Date(Ge.date).getTime()-new Date(K.date).getTime()).map(K=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-100 p-3 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-slate-800",children:[le,K.amount.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[new Date(K.date).toLocaleDateString()," via ",K.method]}),K.notes&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1 italic",children:['"',K.notes,'"']})]}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>u(de.id,K.id),title:"Delete payment",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})})]},K.id))})]})]})]})};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Manage Invoices"}),!de&&e.jsx("div",{className:"flex gap-2",children:!l.subscriptionStatus.startsWith("trial_")&&e.jsx(e.Fragment,{children:e.jsxs(he,{variant:"outline",onClick:()=>ks("invoices-backup.csv",A),children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Export to CSV"]})})})]}),de?st():Ce()]})},Tx={date:new Date().toISOString().split("T")[0],amount:0,notes:"",method:"Bank Transfer"},Kb=({purchaseOrders:A,settings:s,currentUser:n,onLoadPO:r,onRemovePO:l,onImportPOs:o,onDownloadPO:u,onAddPayment:d,onRemovePayment:h})=>{const[m,w]=se.useState(""),[v,B]=se.useState(null),[x,C]=se.useState(Tx),N=se.useRef(null),L=s.currencySymbol||"",F=se.useMemo(()=>A.find(E=>E.id===v)||null,[A,v]),Q=async E=>{var G;const D=(G=E.target.files)==null?void 0:G[0];if(D){if(window.confirm("Are you sure? This will overwrite all existing purchase orders."))try{const T=await Kh(D);o(T)}catch{alert("Failed to import purchase orders.")}E.target.value=""}},_=(E,D)=>{C(G=>({...G,[E]:D}))},te=E=>{E.preventDefault(),v&&x.amount>0&&(d(v,{date:x.date,amount:Number(x.amount),notes:x.notes,method:x.method}),C(Tx))},O=se.useMemo(()=>{const E=[...A].sort((G,T)=>new Date(T.createdAt).getTime()-new Date(G.createdAt).getTime());if(!m)return E;const D=m.toLowerCase();return E.filter(G=>G.name.toLowerCase().includes(D)||G.state.poNumber.toLowerCase().includes(D)||G.state.reference&&G.state.reference.toLowerCase().includes(D)||G.state.supplierName.toLowerCase().includes(D))},[A,m]),k=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(we,{placeholder:"Search by PO #, reference, supplier name, or description...",value:m,onChange:E=>w(E.target.value)})}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto pr-2",children:O.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:A.length===0?e.jsxs(e.Fragment,{children:[e.jsx(V0,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No purchase orders created yet."})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"No purchase orders found for your search."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-[700px] space-y-3",children:O.map(E=>e.jsx("div",{className:"bg-slate-100 p-4 rounded-md",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:E.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Created on ",new Date(E.createdAt).toLocaleDateString(),e.jsx("span",{className:"mx-2",children:"|"}),"Total: ",e.jsxs("span",{className:"font-medium text-slate-600",children:[L,E.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(co,{status:E.status==="approved"?"Approved":"Draft"}),E.status==="approved"&&e.jsx(he,{variant:"outline",onClick:()=>B(E.id),children:"Manage Payments"}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>u(E.id),title:"Download PDF","aria-label":"Download PDF",children:e.jsx(KA,{className:"w-5 h-5 text-slate-500 hover:text-blue-600"})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>r(E.id),title:"Edit purchase order","aria-label":"Edit PO",children:e.jsx(ss,{className:"w-5 h-5 text-slate-500 hover:text-blue-600"})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>l(E.id),title:"Delete purchase order","aria-label":"Delete PO",children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]})]})},E.id))})})})]}),P=()=>{if(!F)return null;const E=(F.payments||[]).reduce((G,T)=>G+T.amount,0),D=F.total-E;return e.jsxs("div",{children:[e.jsx(he,{variant:"outline",onClick:()=>B(null),className:"mb-4",children:" Back to All Purchase Orders"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:F.name}),e.jsxs("div",{className:"mb-4 flex items-center gap-4 text-slate-600 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("span",{children:["Total: ",e.jsxs("span",{className:"font-medium text-slate-800",children:[L,F.total.toFixed(2)]})]}),e.jsx("span",{className:"w-px h-4 bg-slate-200"}),e.jsxs("span",{children:["Paid: ",e.jsxs("span",{className:"font-medium text-green-600",children:[L,E.toFixed(2)]})]}),e.jsx("span",{className:"w-px h-4 bg-slate-200"}),e.jsxs("span",{children:["Balance: ",e.jsxs("span",{className:"font-medium text-red-600",children:[L,D.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Record a New Payment"}),e.jsxs("form",{onSubmit:te,className:"space-y-4 bg-slate-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"paymentAmount",className:"block text-sm font-medium text-slate-600",children:["Amount (",L,")"]}),e.jsx(we,{id:"paymentAmount",type:"number",step:"0.01",value:x.amount,onChange:G=>_("amount",parseFloat(G.target.value)||0),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-slate-600",children:"Date"}),e.jsx(we,{id:"paymentDate",type:"date",value:x.date,onChange:G=>_("date",G.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-slate-600",children:"Payment Method"}),e.jsxs(fA,{id:"paymentMethod",value:x.method,onChange:G=>_("method",G.target.value),required:!0,children:[e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Card Payment",children:"Card Payment"}),e.jsx("option",{value:"Online Payment",children:"Online Payment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentNotes",className:"block text-sm font-medium text-slate-600",children:"Notes (Optional)"}),e.jsx(HA,{id:"paymentNotes",value:x.notes,onChange:G=>_("notes",G.target.value),rows:2})]}),e.jsx(he,{type:"submit",variant:"primary",className:"w-full",children:"Record Payment"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Payment History"}),e.jsx("div",{className:"max-h-80 overflow-y-auto space-y-3 pr-2",children:(F.payments||[]).length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No payments recorded yet."}):[...F.payments||[]].sort((G,T)=>new Date(T.date).getTime()-new Date(G.date).getTime()).map(G=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-100 p-3 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-slate-800",children:[L,G.amount.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[new Date(G.date).toLocaleDateString()," via ",G.method]}),G.notes&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1 italic",children:['"',G.notes,'"']})]}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>h(F.id,G.id),title:"Delete payment",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})})]},G.id))})]})]})]})};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Manage Purchase Orders"}),!F&&e.jsx("div",{className:"flex gap-2",children:!n.subscriptionStatus.startsWith("trial_")&&e.jsxs(e.Fragment,{children:[e.jsxs(he,{variant:"outline",onClick:()=>ks("purchase-orders-backup.csv",A),children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Export to CSV"]}),e.jsxs(he,{variant:"outline",onClick:()=>{var E;return(E=N.current)==null?void 0:E.click()},children:[e.jsx(ed,{className:"w-5 h-5 mr-2"}),"Import from CSV"]}),e.jsx("input",{type:"file",ref:N,onChange:Q,accept:".csv",style:{display:"none"}})]})})]}),F?P():k()]})},Hx={date:new Date().toISOString().split("T")[0],amount:0,notes:"",method:"Bank Transfer"},Vb=({bills:A,settings:s,currentUser:n,onLoadBill:r,onRemoveBill:l,onImportBills:o,onAddPayment:u,onRemovePayment:d})=>{const[h,m]=se.useState(""),[w,v]=se.useState(null),[B,x]=se.useState(Hx),C=se.useRef(null),N=s.currencySymbol||"",L=se.useMemo(()=>A.find(E=>E.id===w)||null,[A,w]),F=async E=>{var G;const D=(G=E.target.files)==null?void 0:G[0];if(D){if(window.confirm("Are you sure? This will overwrite all existing bills."))try{const T=await Kh(D);o(T)}catch{alert("Failed to import bills.")}E.target.value=""}},Q=(E,D)=>{x(G=>({...G,[E]:D}))},_=E=>{E.preventDefault(),w&&B.amount>0&&(u(w,{date:B.date,amount:Number(B.amount),notes:B.notes,method:B.method}),x(Hx))},te=se.useMemo(()=>{const E=[...A].sort((G,T)=>new Date(T.createdAt).getTime()-new Date(G.createdAt).getTime());if(!h)return E;const D=h.toLowerCase();return E.filter(G=>G.state.reference&&G.state.reference.toLowerCase().includes(D)||G.state.supplierName.toLowerCase().includes(D))},[A,h]),O=E=>{const D=(E.payments||[]).reduce((G,T)=>G+T.amount,0);return D>=E.total?"Paid":D>0?"Partially Paid":"Unpaid"},k=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(we,{placeholder:"Search by supplier name or reference #",value:h,onChange:E=>m(E.target.value)})}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto pr-2",children:te.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:A.length===0?e.jsxs(e.Fragment,{children:[e.jsx(z0,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No bills recorded yet."})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"No bills found for your search."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-[700px] space-y-3",children:te.map(E=>{const D=O(E),G=(E.payments||[]).reduce((R,V)=>R+V.amount,0),T=E.total-G;return e.jsxs("div",{className:"bg-slate-100 p-4 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-slate-800",children:[E.state.supplierName," - ",e.jsxs("span",{className:"font-normal",children:["Ref: ",E.state.reference]})]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Dated ",new Date(E.state.issueDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(co,{status:D}),e.jsx(he,{variant:"outline",onClick:()=>v(E.id),children:"Manage Payments"}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>r(E.id),title:"Edit bill","aria-label":"Edit Bill",children:e.jsx(ss,{className:"w-5 h-5 text-slate-500 hover:text-blue-600"})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>l(E.id),title:"Delete bill","aria-label":"Delete Bill",children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200 grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("p",{className:"text-slate-800",children:[e.jsx("strong",{children:"Total:"})," ",e.jsxs("span",{className:"font-medium text-slate-600",children:[N,E.total.toFixed(2)]})]}),e.jsxs("p",{className:"text-slate-800",children:[e.jsx("strong",{children:"Paid:"})," ",e.jsxs("span",{className:"font-medium text-green-600",children:[N,G.toFixed(2)]})]}),e.jsxs("p",{className:"text-slate-800",children:[e.jsx("strong",{children:"Balance:"})," ",e.jsxs("span",{className:"font-medium text-red-600",children:[N,T.toFixed(2)]})]})]})]},E.id)})})})})]}),P=()=>{if(!L)return null;const E=(L.payments||[]).reduce((G,T)=>G+T.amount,0),D=L.total-E;return e.jsxs("div",{children:[e.jsx(he,{variant:"outline",onClick:()=>v(null),className:"mb-4",children:" Back to All Bills"}),e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:[L.state.supplierName," - Ref: ",L.state.reference]}),e.jsxs("div",{className:"mb-4 flex items-center gap-4 text-slate-600 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("span",{children:["Total: ",e.jsxs("span",{className:"font-medium text-slate-800",children:[N,L.total.toFixed(2)]})]}),e.jsx("span",{className:"w-px h-4 bg-slate-200"}),e.jsxs("span",{children:["Paid: ",e.jsxs("span",{className:"font-medium text-green-600",children:[N,E.toFixed(2)]})]}),e.jsx("span",{className:"w-px h-4 bg-slate-200"}),e.jsxs("span",{children:["Balance: ",e.jsxs("span",{className:"font-medium text-red-600",children:[N,D.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Record a New Payment"}),e.jsxs("form",{onSubmit:_,className:"space-y-4 bg-slate-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"paymentAmount",className:"block text-sm font-medium text-slate-600",children:["Amount (",N,")"]}),e.jsx(we,{id:"paymentAmount",type:"number",step:"0.01",value:B.amount,onChange:G=>Q("amount",parseFloat(G.target.value)||0),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-slate-600",children:"Date"}),e.jsx(we,{id:"paymentDate",type:"date",value:B.date,onChange:G=>Q("date",G.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-slate-600",children:"Payment Method"}),e.jsxs(fA,{id:"paymentMethod",value:B.method,onChange:G=>Q("method",G.target.value),required:!0,children:[e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Card Payment",children:"Card Payment"}),e.jsx("option",{value:"Online Payment",children:"Online Payment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentNotes",className:"block text-sm font-medium text-slate-600",children:"Notes (Optional)"}),e.jsx(HA,{id:"paymentNotes",value:B.notes,onChange:G=>Q("notes",G.target.value),rows:2})]}),e.jsx(he,{type:"submit",variant:"primary",className:"w-full",children:"Record Payment"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Payment History"}),e.jsx("div",{className:"max-h-80 overflow-y-auto space-y-3 pr-2",children:(L.payments||[]).length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No payments recorded yet."}):[...L.payments||[]].sort((G,T)=>new Date(T.date).getTime()-new Date(G.date).getTime()).map(G=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-100 p-3 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-slate-800",children:[N,G.amount.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[new Date(G.date).toLocaleDateString()," via ",G.method]}),G.notes&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1 italic",children:['"',G.notes,'"']})]}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>d(L.id,G.id),title:"Delete payment",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})})]},G.id))})]})]})]})};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Manage Bills"}),!L&&e.jsx("div",{className:"flex gap-2",children:!n.subscriptionStatus.startsWith("trial_")&&e.jsxs(e.Fragment,{children:[e.jsxs(he,{variant:"outline",onClick:()=>ks("bills-backup.csv",A),children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Export to CSV"]}),e.jsxs(he,{variant:"outline",onClick:()=>{var E;return(E=C.current)==null?void 0:E.click()},children:[e.jsx(ed,{className:"w-5 h-5 mr-2"}),"Import from CSV"]}),e.jsx("input",{type:"file",ref:C,onChange:F,accept:".csv",style:{display:"none"}})]})})]}),L?P():k()]})},zb=({quotes:A,settings:s,currentUser:n,onLoadQuote:r,onRemoveQuote:l,onConvertToInvoice:o,onDownloadQuote:u,onOpenEmailModal:d})=>{const[h,m]=se.useState(""),[w,v]=se.useState(!1),[B,x]=se.useState(""),[C,N]=se.useState(""),[L,F]=se.useState(""),Q=s.currencySymbol||"",_=se.useMemo(()=>{const k=new Set(A.map(P=>P.state.customerName));return Array.from(k)},[A]),te=se.useMemo(()=>{let k=[...A];if(B&&(k=k.filter(P=>P.state.customerName.toLowerCase().includes(B.toLowerCase()))),C){const P=new Date(C);P.setHours(0,0,0,0),k=k.filter(E=>new Date(E.state.issueDate)>=P)}if(L){const P=new Date(L);P.setHours(23,59,59,999),k=k.filter(E=>new Date(E.state.issueDate)<=P)}if(h){const P=h.toLowerCase();k=k.filter(E=>E.name.toLowerCase().includes(P)||E.state.invoiceNumber.toLowerCase().includes(P)||E.state.reference.toLowerCase().includes(P))}return k.sort((P,E)=>new Date(E.createdAt).getTime()-new Date(P.createdAt).getTime())},[A,h,B,C,L]),O=()=>{x(""),N(""),F(""),m("")};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Manage Quotes"}),e.jsx("div",{className:"flex gap-2",children:!n.subscriptionStatus.startsWith("trial_")&&e.jsx(e.Fragment,{children:e.jsxs(he,{variant:"outline",onClick:()=>ks("quotes-backup.csv",A),children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Export to CSV"]})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(we,{placeholder:"Search by quote name, number, or reference...",value:h,onChange:k=>m(k.target.value),className:"flex-grow"}),e.jsxs(he,{variant:"outline",onClick:()=>v(!w),className:"w-full sm:w-auto",children:[e.jsx(qh,{className:"w-5 h-5 mr-2"}),"Filters"]})]}),w&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-4 p-4 bg-slate-50 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Customer"}),e.jsx(we,{list:"customer-names-quote",value:B,onChange:k=>x(k.target.value),placeholder:"All customers"}),e.jsx("datalist",{id:"customer-names-quote",children:_.map(k=>e.jsx("option",{value:k},k))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"From Date"}),e.jsx(we,{type:"date",value:C,onChange:k=>N(k.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"To Date"}),e.jsx(we,{type:"date",value:L,onChange:k=>F(k.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(he,{variant:"outline",onClick:O,className:"w-full",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto pr-2",children:te.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:A.length===0?e.jsxs(e.Fragment,{children:[e.jsx(Ph,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No quotes saved yet."})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"No quotes found for your search."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-[600px] space-y-3",children:te.map(k=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-100 p-4 rounded-md",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:k.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Saved on ",new Date(k.createdAt).toLocaleDateString(),e.jsx("span",{className:"mx-2",children:"|"}),"Total: ",e.jsxs("span",{className:"font-medium text-slate-600",children:[Q,k.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{variant:"primary",onClick:()=>o(k.id),children:"Convert to Invoice"}),e.jsx(he,{variant:"outline",onClick:()=>r(k.id),children:"Edit"}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>d(k),title:"Send email","aria-label":"Send Email",children:e.jsx(_o,{className:"w-5 h-5 text-slate-500 hover:text-blue-600"})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>u(k.id),title:"Download PDF","aria-label":"Download PDF",children:e.jsx(KA,{className:"w-5 h-5 text-slate-500 hover:text-blue-600"})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>l(k.id),title:"Delete quote",children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]})]},k.id))})})})]})},qb=({drafts:A,onLoadDraft:s,onRemoveDraft:n})=>{const[r,l]=se.useState(""),o=se.useMemo(()=>{const u=[...A].sort((h,m)=>new Date(m.createdAt).getTime()-new Date(h.createdAt).getTime());if(!r)return u;const d=r.toLowerCase();return u.filter(h=>h.name.toLowerCase().includes(d)||h.state.invoiceNumber.toLowerCase().includes(d)||h.state.reference.toLowerCase().includes(d)||h.state.customerName.toLowerCase().includes(d))},[A,r]);return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-slate-800",children:"Manage Drafts"}),e.jsx("div",{className:"mb-4",children:e.jsx(we,{placeholder:"Search by draft name, number, reference, or customer...",value:r,onChange:u=>l(u.target.value)})}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto pr-2",children:o.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:A.length===0?e.jsxs(e.Fragment,{children:[e.jsx(oo,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No drafts saved yet."})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"No drafts found for your search."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-[500px] space-y-3",children:o.map(u=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-100 p-4 rounded-md",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:u.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Saved on ",new Date(u.createdAt).toLocaleDateString(),e.jsx("span",{className:"mx-2",children:"|"}),"Total: ",e.jsxs("span",{className:"font-medium text-slate-600",children:["",u.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{variant:"outline",onClick:()=>s(u.id),children:"Edit"}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>n(u.id),children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]})]},u.id))})})})]})},Gb=({settings:A,onSave:s,onCancel:n,currentUser:r})=>{var B;const[l,o]=se.useState(A),u=r.role==="admin"||r.role==="master"||((B=r.permissions)==null?void 0:B.settings)==="edit";se.useEffect(()=>{o(x=>({...A,nextJobNumber:A.nextJobNumber||1,nextCreditNoteNumber:A.nextCreditNoteNumber||1}))},[A]);const d=(x,C)=>{o(N=>({...N,[x]:C}))},h=x=>{var N;const C=(N=x.target.files)==null?void 0:N[0];if(C){const L=new FileReader;L.onloadend=()=>{d("companyLogo",L.result)},L.readAsDataURL(C)}},m=()=>{d("companyLogo","")},w=()=>{s(l)},v=["[CustomerName]","[InvoiceNumber]","[TotalAmount]","[DueDate]","[CompanyName]"];return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-slate-800",children:"Settings"}),e.jsxs("fieldset",{disabled:!u,className:"space-y-8",children:[e.jsxs("div",{className:"p-6 rounded-lg border border-slate-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Company & Document Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-slate-600",children:"Company Name"}),e.jsx(we,{id:"companyName",value:l.companyName,onChange:x=>d("companyName",x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyRegistrationNumber",className:"block text-sm font-medium text-slate-600",children:"Company Registration Number"}),e.jsx(we,{id:"companyRegistrationNumber",value:l.companyRegistrationNumber||"",onChange:x=>d("companyRegistrationNumber",x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invoiceTitle",className:"block text-sm font-medium text-slate-600",children:"Invoice Title"}),e.jsx(we,{id:"invoiceTitle",value:l.invoiceTitle||"",onChange:x=>d("invoiceTitle",x.target.value),placeholder:"e.g., INVOICE"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"quoteTitle",className:"block text-sm font-medium text-slate-600",children:"Quote Title"}),e.jsx(we,{id:"quoteTitle",value:l.quoteTitle||"",onChange:x=>d("quoteTitle",x.target.value),placeholder:"e.g., QUOTE"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nextInvoiceNumber",className:"block text-sm font-medium text-slate-600",children:"Next Invoice Number"}),e.jsx(we,{id:"nextInvoiceNumber",type:"number",value:l.nextInvoiceNumber||1,onChange:x=>d("nextInvoiceNumber",parseInt(x.target.value,10)||1),className:"no-spinners"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nextQuoteNumber",className:"block text-sm font-medium text-slate-600",children:"Next Quote Number"}),e.jsx(we,{id:"nextQuoteNumber",type:"number",value:l.nextQuoteNumber||1,onChange:x=>d("nextQuoteNumber",parseInt(x.target.value,10)||1),className:"no-spinners"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nextCreditNoteNumber",className:"block text-sm font-medium text-slate-600",children:"Next Credit Note Number"}),e.jsx(we,{id:"nextCreditNoteNumber",type:"number",value:l.nextCreditNoteNumber||1,onChange:x=>d("nextCreditNoteNumber",parseInt(x.target.value,10)||1),className:"no-spinners"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nextJobNumber",className:"block text-sm font-medium text-slate-600",children:"Next Job Number"}),e.jsx(we,{id:"nextJobNumber",type:"number",value:l.nextJobNumber||1,onChange:x=>d("nextJobNumber",parseInt(x.target.value,10)||1),className:"no-spinners"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"poPrefix",className:"block text-sm font-medium text-slate-600",children:"Purchase Order Prefix"}),e.jsx(we,{id:"poPrefix",value:l.poPrefix||"",onChange:x=>d("poPrefix",x.target.value),placeholder:"e.g., PO"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nextPoNumber",className:"block text-sm font-medium text-slate-600",children:"Next Purchase Order Number"}),e.jsx(we,{id:"nextPoNumber",type:"number",value:l.nextPoNumber||1,onChange:x=>d("nextPoNumber",parseInt(x.target.value,10)||1),className:"no-spinners"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyAddress",className:"block text-sm font-medium text-slate-600",children:"Company Address"}),e.jsx(HA,{id:"companyAddress",value:l.companyAddress,onChange:x=>d("companyAddress",x.target.value),rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Company Logo"}),e.jsx("div",{className:"mt-2 flex items-center gap-4",children:l.companyLogo?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:l.companyLogo,alt:"Company Logo",className:"h-16 w-auto rounded border p-1"}),e.jsx(he,{variant:"outline",onClick:m,children:"Remove Logo"})]}):e.jsx(we,{type:"file",accept:"image/png, image/jpeg",onChange:h,className:"!p-0 file:mr-4 file:py-2 file:px-4 file:rounded-l-md file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"})})]})]})]}),e.jsxs("div",{className:"p-6 rounded-lg border border-slate-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Financial Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vatNumber",className:"block text-sm font-medium text-slate-600",children:"VAT Number"}),e.jsx(we,{id:"vatNumber",value:l.vatNumber,onChange:x=>d("vatNumber",x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"defaultVatRate",className:"block text-sm font-medium text-slate-600",children:"Default VAT Rate (%)"}),e.jsx(we,{id:"defaultVatRate",type:"number",value:l.defaultVatRate,onChange:x=>d("defaultVatRate",parseFloat(x.target.value)||0),className:"no-spinners"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currencySymbol",className:"block text-sm font-medium text-slate-600",children:"Currency"}),e.jsxs(fA,{id:"currencySymbol",value:l.currencySymbol||"",onChange:x=>d("currencySymbol",x.target.value),children:[e.jsx("option",{value:"",children:"GBP ()"}),e.jsx("option",{value:"$",children:"USD ($)"}),e.jsx("option",{value:"",children:"EUR ()"}),e.jsx("option",{value:"",children:"JPY ()"}),e.jsx("option",{value:"",children:"INR ()"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bankName",className:"block text-sm font-medium text-slate-600",children:"Bank Name"}),e.jsx(we,{id:"bankName",value:l.bankName,onChange:x=>d("bankName",x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accountNumber",className:"block text-sm font-medium text-slate-600",children:"Account Number"}),e.jsx(we,{id:"accountNumber",value:l.accountNumber,onChange:x=>d("accountNumber",x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sortCode",className:"block text-sm font-medium text-slate-600",children:"Sort Code"}),e.jsx(we,{id:"sortCode",value:l.sortCode,onChange:x=>d("sortCode",x.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentTerms",className:"block text-sm font-medium text-slate-600",children:"Payment Terms / Notes"}),e.jsx(HA,{id:"paymentTerms",value:l.paymentTerms,onChange:x=>d("paymentTerms",x.target.value),rows:3})]})]})]}),e.jsxs("div",{className:"p-6 rounded-lg border border-slate-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Email Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailFromName",className:"block text-sm font-medium text-slate-600",children:'"From" Name'}),e.jsx(we,{id:"emailFromName",value:l.emailFromName||"",onChange:x=>d("emailFromName",x.target.value),placeholder:"The name customers will see"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailReplyTo",className:"block text-sm font-medium text-slate-600",children:'"Reply-To" Email'}),e.jsx(we,{id:"emailReplyTo",type:"email",value:l.emailReplyTo||"",onChange:x=>d("emailReplyTo",x.target.value),placeholder:"your-email@example.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invoiceEmailSubject",className:"block text-sm font-medium text-slate-600",children:"Invoice Email Subject"}),e.jsx(we,{id:"invoiceEmailSubject",value:l.invoiceEmailSubject||"",onChange:x=>d("invoiceEmailSubject",x.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"quoteEmailSubject",className:"block text-sm font-medium text-slate-600",children:"Quote Email Subject"}),e.jsx(we,{id:"quoteEmailSubject",value:l.quoteEmailSubject||"",onChange:x=>d("quoteEmailSubject",x.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invoiceEmailBody",className:"block text-sm font-medium text-slate-600",children:"Invoice Email Body"}),e.jsx(HA,{id:"invoiceEmailBody",value:l.invoiceEmailBody||"",onChange:x=>d("invoiceEmailBody",x.target.value),rows:5})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"quoteEmailBody",className:"block text-sm font-medium text-slate-600",children:"Quote Email Body"}),e.jsx(HA,{id:"quoteEmailBody",value:l.quoteEmailBody||"",onChange:x=>d("quoteEmailBody",x.target.value),rows:5})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Available placeholders:"}),e.jsx("div",{className:"flex flex-wrap gap-x-2 text-xs text-slate-600",children:v.map(x=>e.jsx("code",{className:"bg-slate-200 px-1 py-0.5 rounded",children:x},x))})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t flex justify-end gap-2",children:[e.jsx(he,{variant:"outline",onClick:n,children:"Cancel"}),u&&e.jsx(he,{variant:"primary",onClick:w,children:"Save Settings"})]})]})},Jb=({id:A,customer:s,invoices:n,creditNotes:r,settings:l,startDate:o,endDate:u})=>{const d=l.currencySymbol||"",h=Qi.useMemo(()=>{const v=[];return n.forEach(B=>{v.push({date:B.state.issueDate,description:`Invoice #${B.state.invoiceNumber}`,billed:B.total,paid:0}),B.payments.forEach(x=>{v.push({date:x.date,description:`Payment for #${B.state.invoiceNumber}`,billed:0,paid:x.amount})})}),r.forEach(B=>{v.push({date:B.state.issueDate,description:`Credit Note #${B.state.creditNoteNumber}`,billed:-B.total,paid:0})}),v.filter(B=>{const x=new Date(B.date),C=o?new Date(o):null,N=u?new Date(u):null;return C&&C.setHours(0,0,0,0),N&&N.setHours(23,59,59,999),!(C&&x<C||N&&x>N)}).sort((B,x)=>new Date(B.date).getTime()-new Date(x.date).getTime())},[n,r,o,u]),m=Qi.useMemo(()=>{const v=n.filter(L=>{const F=new Date(L.state.issueDate),Q=o?new Date(o):null,_=u?new Date(u):null;return Q&&Q.setHours(0,0,0,0),_&&_.setHours(23,59,59,999),!(Q&&F<Q||_&&F>_)}),B=v.reduce((L,F)=>L+F.total,0),x=v.reduce((L,F)=>L+F.payments.reduce((Q,_)=>Q+_.amount,0),0),N=r.filter(L=>{const F=new Date(L.state.issueDate),Q=o?new Date(o):null,_=u?new Date(u):null;return Q&&Q.setHours(0,0,0,0),_&&_.setHours(23,59,59,999),!(Q&&F<Q||_&&F>_)}).reduce((L,F)=>L+F.total,0);return{totalBilled:B,totalPaid:x,totalCredited:N,balanceDue:B-N-x}},[n,r,o,u]);let w=0;return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:l.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:l.companyAddress}),l.vatNumber&&e.jsxs("p",{children:["VAT: ",l.vatNumber]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.companyLogo&&e.jsx("img",{src:l.companyLogo,alt:"Company Logo",className:"h-12 w-auto max-w-[150px] object-contain"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Statement"})]})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-600 mb-1",children:"Statement For:"}),e.jsx("p",{className:"font-semibold",children:s.name}),s.contactName&&e.jsxs("p",{className:"text-slate-600",children:["Attn: ",s.contactName]}),e.jsx("p",{className:"whitespace-pre-wrap text-slate-600",children:s.address})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Date Issued:"})," ",new Date().toLocaleDateString()]}),o&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"From:"})," ",new Date(o).toLocaleDateString()]}),u&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"To:"})," ",new Date(u).toLocaleDateString()]})]})]}),e.jsx("section",{children:e.jsxs("table",{className:"w-full text-left table-fixed text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:"p-1 w-[15%]",children:"Date"}),e.jsx("th",{className:"p-1 w-[40%]",children:"Description"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:"Billed / Credited"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:"Paid"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:"Balance"})]})}),e.jsx("tbody",{children:h.map((v,B)=>(w+=v.billed-v.paid,e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1 align-top",children:new Date(v.date).toLocaleDateString()}),e.jsx("td",{className:"p-1 align-top",children:e.jsx("p",{className:"font-medium",children:v.description})}),e.jsx("td",{className:"p-1 text-right align-top",children:v.billed!==0?d+v.billed.toFixed(2):""}),e.jsx("td",{className:"p-1 text-right align-top",children:v.paid!==0?d+v.paid.toFixed(2):""}),e.jsxs("td",{className:"p-1 text-right align-top",children:[d,w.toFixed(2)]})]},B)))})]})}),e.jsx("section",{className:"mt-8 flex justify-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Billed"}),e.jsxs("span",{className:"font-medium",children:[d,m.totalBilled.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Credited"}),e.jsxs("span",{className:"font-medium",children:["-",d,m.totalCredited.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Paid"}),e.jsxs("span",{className:"font-medium",children:[d,m.totalPaid.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900",children:[e.jsx("span",{children:"Balance Due"}),e.jsxs("span",{children:[d,m.balanceDue.toFixed(2)]})]})]})}),e.jsxs("section",{className:"mt-16 text-xs text-slate-600 bg-slate-50 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold mb-1",children:"Payment Details:"}),e.jsx("p",{children:l.paymentTerms}),e.jsxs("p",{children:["Bank: ",l.bankName]}),e.jsxs("p",{children:["A/N: ",l.accountNumber," | Sort Code: ",l.sortCode]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i0=function(A,s){return i0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])},i0(A,s)};function Gr(A,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i0(A,s);function n(){this.constructor=A}A.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}var l0=function(){return l0=Object.assign||function(s){for(var n,r=1,l=arguments.length;r<l;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(s[o]=n[o])}return s},l0.apply(this,arguments)};function fn(A,s,n,r){function l(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function d(w){try{m(r.next(w))}catch(v){u(v)}}function h(w){try{m(r.throw(w))}catch(v){u(v)}}function m(w){w.done?o(w.value):l(w.value).then(d,h)}m((r=r.apply(A,[])).next())})}function $s(A,s){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,l,o,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(m){return function(w){return h([m,w])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,l&&(o=m[0]&2?l.return:m[0]?l.throw||((o=l.return)&&o.call(l),0):l.next)&&!(o=o.call(l,m[1])).done)return o;switch(l=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,l=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=s.call(A,n)}catch(w){m=[6,w],l=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function Gd(A,s,n){if(arguments.length===2)for(var r=0,l=s.length,o;r<l;r++)(o||!(r in s))&&(o||(o=Array.prototype.slice.call(s,0,r)),o[r]=s[r]);return A.concat(o||s)}var fl=(function(){function A(s,n,r,l){this.left=s,this.top=n,this.width=r,this.height=l}return A.prototype.add=function(s,n,r,l){return new A(this.left+s,this.top+n,this.width+r,this.height+l)},A.fromClientRect=function(s,n){return new A(n.left+s.windowBounds.left,n.top+s.windowBounds.top,n.width,n.height)},A.fromDOMRectList=function(s,n){var r=Array.from(n).find(function(l){return l.width!==0});return r?new A(r.left+s.windowBounds.left,r.top+s.windowBounds.top,r.width,r.height):A.EMPTY},A.EMPTY=new A(0,0,0,0),A})(),Gh=function(A,s){return fl.fromClientRect(A,s.getBoundingClientRect())},Xb=function(A){var s=A.body,n=A.documentElement;if(!s||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(s.scrollWidth,n.scrollWidth),Math.max(s.offsetWidth,n.offsetWidth),Math.max(s.clientWidth,n.clientWidth)),l=Math.max(Math.max(s.scrollHeight,n.scrollHeight),Math.max(s.offsetHeight,n.offsetHeight),Math.max(s.clientHeight,n.clientHeight));return new fl(0,0,r,l)},Jh=function(A){for(var s=[],n=0,r=A.length;n<r;){var l=A.charCodeAt(n++);if(l>=55296&&l<=56319&&n<r){var o=A.charCodeAt(n++);(o&64512)===56320?s.push(((l&1023)<<10)+(o&1023)+65536):(s.push(l),n--)}else s.push(l)}return s},Ka=function(){for(var A=[],s=0;s<arguments.length;s++)A[s]=arguments[s];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var n=A.length;if(!n)return"";for(var r=[],l=-1,o="";++l<n;){var u=A[l];u<=65535?r.push(u):(u-=65536,r.push((u>>10)+55296,u%1024+56320)),(l+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},Mx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jd=0;Jd<Mx.length;Jd++)Yb[Mx.charCodeAt(Jd)]=Jd;var Ox="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xd=0;Xd<Ox.length;Xd++)Hu[Ox.charCodeAt(Xd)]=Xd;var Zb=function(A){var s=A.length*.75,n=A.length,r,l=0,o,u,d,h;A[A.length-1]==="="&&(s--,A[A.length-2]==="="&&s--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(s):new Array(s),w=Array.isArray(m)?m:new Uint8Array(m);for(r=0;r<n;r+=4)o=Hu[A.charCodeAt(r)],u=Hu[A.charCodeAt(r+1)],d=Hu[A.charCodeAt(r+2)],h=Hu[A.charCodeAt(r+3)],w[l++]=o<<2|u>>4,w[l++]=(u&15)<<4|d>>2,w[l++]=(d&3)<<6|h&63;return m},Wb=function(A){for(var s=A.length,n=[],r=0;r<s;r+=2)n.push(A[r+1]<<8|A[r]);return n},$b=function(A){for(var s=A.length,n=[],r=0;r<s;r+=4)n.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return n},Ro=5,J0=11,Qm=2,ew=J0-Ro,S2=65536>>Ro,tw=1<<Ro,Um=tw-1,Aw=1024>>Ro,aw=S2+Aw,sw=aw,nw=32,rw=sw+nw,iw=65536>>J0,lw=1<<ew,ow=lw-1,kx=function(A,s,n){return A.slice?A.slice(s,n):new Uint16Array(Array.prototype.slice.call(A,s,n))},cw=function(A,s,n){return A.slice?A.slice(s,n):new Uint32Array(Array.prototype.slice.call(A,s,n))},uw=function(A,s){var n=Zb(A),r=Array.isArray(n)?$b(n):new Uint32Array(n),l=Array.isArray(n)?Wb(n):new Uint16Array(n),o=24,u=kx(l,o/2,r[4]/2),d=r[5]===2?kx(l,(o+r[4])/2):cw(r,Math.ceil((o+r[4])/4));return new dw(r[0],r[1],r[2],r[3],u,d)},dw=(function(){function A(s,n,r,l,o,u){this.initialValue=s,this.errorValue=n,this.highStart=r,this.highValueIndex=l,this.index=o,this.data=u}return A.prototype.get=function(s){var n;if(s>=0){if(s<55296||s>56319&&s<=65535)return n=this.index[s>>Ro],n=(n<<Qm)+(s&Um),this.data[n];if(s<=65535)return n=this.index[S2+(s-55296>>Ro)],n=(n<<Qm)+(s&Um),this.data[n];if(s<this.highStart)return n=rw-iw+(s>>J0),n=this.index[n],n+=s>>Ro&ow,n=this.index[n],n=(n<<Qm)+(s&Um),this.data[n];if(s<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A})(),_x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yd=0;Yd<_x.length;Yd++)hw[_x.charCodeAt(Yd)]=Yd;var fw="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Rx=50,mw=1,Q2=2,U2=3,pw=4,gw=5,Px=7,E2=8,Kx=9,no=10,o0=11,Vx=12,c0=13,xw=14,Mu=15,u0=16,Zd=17,Qu=18,vw=19,zx=20,d0=21,Uu=22,Em=23,Fc=24,Wn=25,Ou=26,ku=27,Sc=28,bw=29,Mo=30,ww=31,Wd=32,$d=33,h0=34,f0=35,m0=36,Yu=37,p0=38,Bh=39,yh=40,Im=41,I2=42,Bw=43,yw=[9001,65288],L2="!",FA="",eh="",g0=uw(fw),ol=[Mo,m0],x0=[mw,Q2,U2,gw],D2=[no,E2],qx=[ku,Ou],Cw=x0.concat(D2),Gx=[p0,Bh,yh,h0,f0],Nw=[Mu,c0],jw=function(A,s){s===void 0&&(s="strict");var n=[],r=[],l=[];return A.forEach(function(o,u){var d=g0.get(o);if(d>Rx?(l.push(!0),d-=Rx):l.push(!1),["normal","auto","loose"].indexOf(s)!==-1&&[8208,8211,12316,12448].indexOf(o)!==-1)return r.push(u),n.push(u0);if(d===pw||d===o0){if(u===0)return r.push(u),n.push(Mo);var h=n[u-1];return Cw.indexOf(h)===-1?(r.push(r[u-1]),n.push(h)):(r.push(u),n.push(Mo))}if(r.push(u),d===ww)return n.push(s==="strict"?d0:Yu);if(d===I2||d===bw)return n.push(Mo);if(d===Bw)return o>=131072&&o<=196605||o>=196608&&o<=262141?n.push(Yu):n.push(Mo);n.push(d)}),[r,n,l]},Lm=function(A,s,n,r){var l=r[n];if(Array.isArray(A)?A.indexOf(l)!==-1:A===l)for(var o=n;o<=r.length;){o++;var u=r[o];if(u===s)return!0;if(u!==no)break}if(l===no)for(var o=n;o>0;){o--;var d=r[o];if(Array.isArray(A)?A.indexOf(d)!==-1:A===d)for(var h=n;h<=r.length;){h++;var u=r[h];if(u===s)return!0;if(u!==no)break}if(d!==no)break}return!1},Jx=function(A,s){for(var n=A;n>=0;){var r=s[n];if(r===no)n--;else return r}return 0},Fw=function(A,s,n,r,l){if(n[r]===0)return FA;var o=r-1;if(Array.isArray(l)&&l[o]===!0)return FA;var u=o-1,d=o+1,h=s[o],m=u>=0?s[u]:0,w=s[d];if(h===Q2&&w===U2)return FA;if(x0.indexOf(h)!==-1)return L2;if(x0.indexOf(w)!==-1||D2.indexOf(w)!==-1)return FA;if(Jx(o,s)===E2)return eh;if(g0.get(A[o])===o0||(h===Wd||h===$d)&&g0.get(A[d])===o0||h===Px||w===Px||h===Kx||[no,c0,Mu].indexOf(h)===-1&&w===Kx||[Zd,Qu,vw,Fc,Sc].indexOf(w)!==-1||Jx(o,s)===Uu||Lm(Em,Uu,o,s)||Lm([Zd,Qu],d0,o,s)||Lm(Vx,Vx,o,s))return FA;if(h===no)return eh;if(h===Em||w===Em)return FA;if(w===u0||h===u0)return eh;if([c0,Mu,d0].indexOf(w)!==-1||h===xw||m===m0&&Nw.indexOf(h)!==-1||h===Sc&&w===m0||w===zx||ol.indexOf(w)!==-1&&h===Wn||ol.indexOf(h)!==-1&&w===Wn||h===ku&&[Yu,Wd,$d].indexOf(w)!==-1||[Yu,Wd,$d].indexOf(h)!==-1&&w===Ou||ol.indexOf(h)!==-1&&qx.indexOf(w)!==-1||qx.indexOf(h)!==-1&&ol.indexOf(w)!==-1||[ku,Ou].indexOf(h)!==-1&&(w===Wn||[Uu,Mu].indexOf(w)!==-1&&s[d+1]===Wn)||[Uu,Mu].indexOf(h)!==-1&&w===Wn||h===Wn&&[Wn,Sc,Fc].indexOf(w)!==-1)return FA;if([Wn,Sc,Fc,Zd,Qu].indexOf(w)!==-1)for(var v=o;v>=0;){var B=s[v];if(B===Wn)return FA;if([Sc,Fc].indexOf(B)!==-1)v--;else break}if([ku,Ou].indexOf(w)!==-1)for(var v=[Zd,Qu].indexOf(h)!==-1?u:o;v>=0;){var B=s[v];if(B===Wn)return FA;if([Sc,Fc].indexOf(B)!==-1)v--;else break}if(p0===h&&[p0,Bh,h0,f0].indexOf(w)!==-1||[Bh,h0].indexOf(h)!==-1&&[Bh,yh].indexOf(w)!==-1||[yh,f0].indexOf(h)!==-1&&w===yh||Gx.indexOf(h)!==-1&&[zx,Ou].indexOf(w)!==-1||Gx.indexOf(w)!==-1&&h===ku||ol.indexOf(h)!==-1&&ol.indexOf(w)!==-1||h===Fc&&ol.indexOf(w)!==-1||ol.concat(Wn).indexOf(h)!==-1&&w===Uu&&yw.indexOf(A[d])===-1||ol.concat(Wn).indexOf(w)!==-1&&h===Qu)return FA;if(h===Im&&w===Im){for(var x=n[o],C=1;x>0&&(x--,s[x]===Im);)C++;if(C%2!==0)return FA}return h===Wd&&w===$d?FA:eh},Sw=function(A,s){s||(s={lineBreak:"normal",wordBreak:"normal"});var n=jw(A,s.lineBreak),r=n[0],l=n[1],o=n[2];(s.wordBreak==="break-all"||s.wordBreak==="break-word")&&(l=l.map(function(d){return[Wn,Mo,I2].indexOf(d)!==-1?Yu:d}));var u=s.wordBreak==="keep-all"?o.map(function(d,h){return d&&A[h]>=19968&&A[h]<=40959}):void 0;return[r,l,u]},Qw=(function(){function A(s,n,r,l){this.codePoints=s,this.required=n===L2,this.start=r,this.end=l}return A.prototype.slice=function(){return Ka.apply(void 0,this.codePoints.slice(this.start,this.end))},A})(),Uw=function(A,s){var n=Jh(A),r=Sw(n,s),l=r[0],o=r[1],u=r[2],d=n.length,h=0,m=0;return{next:function(){if(m>=d)return{done:!0,value:null};for(var w=FA;m<d&&(w=Fw(n,o,l,++m,u))===FA;);if(w!==FA||m===d){var v=new Qw(n,w,h,m);return h=m,{value:v,done:!1}}return{done:!0,value:null}}}},Ew=1,Iw=2,Ad=4,Xx=8,Uh=10,Yx=47,Vu=92,Lw=9,Dw=32,th=34,Eu=61,Tw=35,Hw=36,Mw=37,Ah=39,ah=40,Iu=41,Ow=95,Tn=45,kw=33,_w=60,Rw=62,Pw=64,Kw=91,Vw=93,zw=61,qw=123,sh=63,Gw=125,Zx=124,Jw=126,Xw=128,Wx=65533,Dm=42,ko=43,Yw=44,Zw=58,Ww=59,Zu=46,$w=0,eB=8,tB=11,AB=14,aB=31,sB=127,ji=-1,T2=48,H2=97,M2=101,nB=102,rB=117,iB=122,O2=65,k2=69,_2=70,lB=85,oB=90,en=function(A){return A>=T2&&A<=57},cB=function(A){return A>=55296&&A<=57343},Qc=function(A){return en(A)||A>=O2&&A<=_2||A>=H2&&A<=nB},uB=function(A){return A>=H2&&A<=iB},dB=function(A){return A>=O2&&A<=oB},hB=function(A){return uB(A)||dB(A)},fB=function(A){return A>=Xw},nh=function(A){return A===Uh||A===Lw||A===Dw},Eh=function(A){return hB(A)||fB(A)||A===Ow},$x=function(A){return Eh(A)||en(A)||A===Tn},mB=function(A){return A>=$w&&A<=eB||A===tB||A>=AB&&A<=aB||A===sB},so=function(A,s){return A!==Vu?!1:s!==Uh},rh=function(A,s,n){return A===Tn?Eh(s)||so(s,n):Eh(A)?!0:!!(A===Vu&&so(A,s))},Tm=function(A,s,n){return A===ko||A===Tn?en(s)?!0:s===Zu&&en(n):en(A===Zu?s:A)},pB=function(A){var s=0,n=1;(A[s]===ko||A[s]===Tn)&&(A[s]===Tn&&(n=-1),s++);for(var r=[];en(A[s]);)r.push(A[s++]);var l=r.length?parseInt(Ka.apply(void 0,r),10):0;A[s]===Zu&&s++;for(var o=[];en(A[s]);)o.push(A[s++]);var u=o.length,d=u?parseInt(Ka.apply(void 0,o),10):0;(A[s]===k2||A[s]===M2)&&s++;var h=1;(A[s]===ko||A[s]===Tn)&&(A[s]===Tn&&(h=-1),s++);for(var m=[];en(A[s]);)m.push(A[s++]);var w=m.length?parseInt(Ka.apply(void 0,m),10):0;return n*(l+d*Math.pow(10,-u))*Math.pow(10,h*w)},gB={type:2},xB={type:3},vB={type:4},bB={type:13},wB={type:8},BB={type:21},yB={type:9},CB={type:10},NB={type:11},jB={type:12},FB={type:14},ih={type:23},SB={type:1},QB={type:25},UB={type:24},EB={type:26},IB={type:27},LB={type:28},DB={type:29},TB={type:31},v0={type:32},R2=(function(){function A(){this._value=[]}return A.prototype.write=function(s){this._value=this._value.concat(Jh(s))},A.prototype.read=function(){for(var s=[],n=this.consumeToken();n!==v0;)s.push(n),n=this.consumeToken();return s},A.prototype.consumeToken=function(){var s=this.consumeCodePoint();switch(s){case th:return this.consumeStringToken(th);case Tw:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),l=this.peekCodePoint(2);if($x(n)||so(r,l)){var o=rh(n,r,l)?Iw:Ew,u=this.consumeName();return{type:5,value:u,flags:o}}break;case Hw:if(this.peekCodePoint(0)===Eu)return this.consumeCodePoint(),bB;break;case Ah:return this.consumeStringToken(Ah);case ah:return gB;case Iu:return xB;case Dm:if(this.peekCodePoint(0)===Eu)return this.consumeCodePoint(),FB;break;case ko:if(Tm(s,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(s),this.consumeNumericToken();break;case Yw:return vB;case Tn:var d=s,h=this.peekCodePoint(0),m=this.peekCodePoint(1);if(Tm(d,h,m))return this.reconsumeCodePoint(s),this.consumeNumericToken();if(rh(d,h,m))return this.reconsumeCodePoint(s),this.consumeIdentLikeToken();if(h===Tn&&m===Rw)return this.consumeCodePoint(),this.consumeCodePoint(),UB;break;case Zu:if(Tm(s,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(s),this.consumeNumericToken();break;case Yx:if(this.peekCodePoint(0)===Dm)for(this.consumeCodePoint();;){var w=this.consumeCodePoint();if(w===Dm&&(w=this.consumeCodePoint(),w===Yx))return this.consumeToken();if(w===ji)return this.consumeToken()}break;case Zw:return EB;case Ww:return IB;case _w:if(this.peekCodePoint(0)===kw&&this.peekCodePoint(1)===Tn&&this.peekCodePoint(2)===Tn)return this.consumeCodePoint(),this.consumeCodePoint(),QB;break;case Pw:var v=this.peekCodePoint(0),B=this.peekCodePoint(1),x=this.peekCodePoint(2);if(rh(v,B,x)){var u=this.consumeName();return{type:7,value:u}}break;case Kw:return LB;case Vu:if(so(s,this.peekCodePoint(0)))return this.reconsumeCodePoint(s),this.consumeIdentLikeToken();break;case Vw:return DB;case zw:if(this.peekCodePoint(0)===Eu)return this.consumeCodePoint(),wB;break;case qw:return NB;case Gw:return jB;case rB:case lB:var C=this.peekCodePoint(0),N=this.peekCodePoint(1);return C===ko&&(Qc(N)||N===sh)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(s),this.consumeIdentLikeToken();case Zx:if(this.peekCodePoint(0)===Eu)return this.consumeCodePoint(),yB;if(this.peekCodePoint(0)===Zx)return this.consumeCodePoint(),BB;break;case Jw:if(this.peekCodePoint(0)===Eu)return this.consumeCodePoint(),CB;break;case ji:return v0}return nh(s)?(this.consumeWhiteSpace(),TB):en(s)?(this.reconsumeCodePoint(s),this.consumeNumericToken()):Eh(s)?(this.reconsumeCodePoint(s),this.consumeIdentLikeToken()):{type:6,value:Ka(s)}},A.prototype.consumeCodePoint=function(){var s=this._value.shift();return typeof s>"u"?-1:s},A.prototype.reconsumeCodePoint=function(s){this._value.unshift(s)},A.prototype.peekCodePoint=function(s){return s>=this._value.length?-1:this._value[s]},A.prototype.consumeUnicodeRangeToken=function(){for(var s=[],n=this.consumeCodePoint();Qc(n)&&s.length<6;)s.push(n),n=this.consumeCodePoint();for(var r=!1;n===sh&&s.length<6;)s.push(n),n=this.consumeCodePoint(),r=!0;if(r){var l=parseInt(Ka.apply(void 0,s.map(function(h){return h===sh?T2:h})),16),o=parseInt(Ka.apply(void 0,s.map(function(h){return h===sh?_2:h})),16);return{type:30,start:l,end:o}}var u=parseInt(Ka.apply(void 0,s),16);if(this.peekCodePoint(0)===Tn&&Qc(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var d=[];Qc(n)&&d.length<6;)d.push(n),n=this.consumeCodePoint();var o=parseInt(Ka.apply(void 0,d),16);return{type:30,start:u,end:o}}else return{type:30,start:u,end:u}},A.prototype.consumeIdentLikeToken=function(){var s=this.consumeName();return s.toLowerCase()==="url"&&this.peekCodePoint(0)===ah?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ah?(this.consumeCodePoint(),{type:19,value:s}):{type:20,value:s}},A.prototype.consumeUrlToken=function(){var s=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ji)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Ah||n===th){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ji||this.peekCodePoint(0)===Iu)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),ih)}for(;;){var l=this.consumeCodePoint();if(l===ji||l===Iu)return{type:22,value:Ka.apply(void 0,s)};if(nh(l))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ji||this.peekCodePoint(0)===Iu?(this.consumeCodePoint(),{type:22,value:Ka.apply(void 0,s)}):(this.consumeBadUrlRemnants(),ih);if(l===th||l===Ah||l===ah||mB(l))return this.consumeBadUrlRemnants(),ih;if(l===Vu)if(so(l,this.peekCodePoint(0)))s.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ih;else s.push(l)}},A.prototype.consumeWhiteSpace=function(){for(;nh(this.peekCodePoint(0));)this.consumeCodePoint()},A.prototype.consumeBadUrlRemnants=function(){for(;;){var s=this.consumeCodePoint();if(s===Iu||s===ji)return;so(s,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},A.prototype.consumeStringSlice=function(s){for(var n=5e4,r="";s>0;){var l=Math.min(n,s);r+=Ka.apply(void 0,this._value.splice(0,l)),s-=l}return this._value.shift(),r},A.prototype.consumeStringToken=function(s){var n="",r=0;do{var l=this._value[r];if(l===ji||l===void 0||l===s)return n+=this.consumeStringSlice(r),{type:0,value:n};if(l===Uh)return this._value.splice(0,r),SB;if(l===Vu){var o=this._value[r+1];o!==ji&&o!==void 0&&(o===Uh?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):so(l,o)&&(n+=this.consumeStringSlice(r),n+=Ka(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},A.prototype.consumeNumber=function(){var s=[],n=Ad,r=this.peekCodePoint(0);for((r===ko||r===Tn)&&s.push(this.consumeCodePoint());en(this.peekCodePoint(0));)s.push(this.consumeCodePoint());r=this.peekCodePoint(0);var l=this.peekCodePoint(1);if(r===Zu&&en(l))for(s.push(this.consumeCodePoint(),this.consumeCodePoint()),n=Xx;en(this.peekCodePoint(0));)s.push(this.consumeCodePoint());r=this.peekCodePoint(0),l=this.peekCodePoint(1);var o=this.peekCodePoint(2);if((r===k2||r===M2)&&((l===ko||l===Tn)&&en(o)||en(l)))for(s.push(this.consumeCodePoint(),this.consumeCodePoint()),n=Xx;en(this.peekCodePoint(0));)s.push(this.consumeCodePoint());return[pB(s),n]},A.prototype.consumeNumericToken=function(){var s=this.consumeNumber(),n=s[0],r=s[1],l=this.peekCodePoint(0),o=this.peekCodePoint(1),u=this.peekCodePoint(2);if(rh(l,o,u)){var d=this.consumeName();return{type:15,number:n,flags:r,unit:d}}return l===Mw?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},A.prototype.consumeEscapedCodePoint=function(){var s=this.consumeCodePoint();if(Qc(s)){for(var n=Ka(s);Qc(this.peekCodePoint(0))&&n.length<6;)n+=Ka(this.consumeCodePoint());nh(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||cB(r)||r>1114111?Wx:r}return s===ji?Wx:s},A.prototype.consumeName=function(){for(var s="";;){var n=this.consumeCodePoint();if($x(n))s+=Ka(n);else if(so(n,this.peekCodePoint(0)))s+=Ka(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),s}},A})(),P2=(function(){function A(s){this._tokens=s}return A.create=function(s){var n=new R2;return n.write(s),new A(n.read())},A.parseValue=function(s){return A.create(s).parseComponentValue()},A.parseValues=function(s){return A.create(s).parseComponentValues()},A.prototype.parseComponentValue=function(){for(var s=this.consumeToken();s.type===31;)s=this.consumeToken();if(s.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(s);var n=this.consumeComponentValue();do s=this.consumeToken();while(s.type===31);if(s.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},A.prototype.parseComponentValues=function(){for(var s=[];;){var n=this.consumeComponentValue();if(n.type===32)return s;s.push(n),s.push()}},A.prototype.consumeComponentValue=function(){var s=this.consumeToken();switch(s.type){case 11:case 28:case 2:return this.consumeSimpleBlock(s.type);case 19:return this.consumeFunction(s)}return s},A.prototype.consumeSimpleBlock=function(s){for(var n={type:s,values:[]},r=this.consumeToken();;){if(r.type===32||MB(r,s))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},A.prototype.consumeFunction=function(s){for(var n={name:s.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},A.prototype.consumeToken=function(){var s=this._tokens.shift();return typeof s>"u"?v0:s},A.prototype.reconsumeToken=function(s){this._tokens.unshift(s)},A})(),ad=function(A){return A.type===15},Jc=function(A){return A.type===17},aa=function(A){return A.type===20},HB=function(A){return A.type===0},b0=function(A,s){return aa(A)&&A.value===s},K2=function(A){return A.type!==31},Gc=function(A){return A.type!==31&&A.type!==4},Ei=function(A){var s=[],n=[];return A.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");s.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&s.push(n),s},MB=function(A,s){return s===11&&A.type===12||s===28&&A.type===29?!0:s===2&&A.type===3},fo=function(A){return A.type===17||A.type===15},as=function(A){return A.type===16||fo(A)},V2=function(A){return A.length>1?[A[0],A[1]]:[A[0]]},Os={type:17,number:0,flags:Ad},X0={type:16,number:50,flags:Ad},ro={type:16,number:100,flags:Ad},_u=function(A,s,n){var r=A[0],l=A[1];return[fa(r,s),fa(typeof l<"u"?l:r,n)]},fa=function(A,s){if(A.type===16)return A.number/100*s;if(ad(A))switch(A.unit){case"rem":case"em":return 16*A.number;case"px":default:return A.number}return A.number},z2="deg",q2="grad",G2="rad",J2="turn",Xh={name:"angle",parse:function(A,s){if(s.type===15)switch(s.unit){case z2:return Math.PI*s.number/180;case q2:return Math.PI/200*s.number;case G2:return s.number;case J2:return Math.PI*2*s.number}throw new Error("Unsupported angle type")}},X2=function(A){return A.type===15&&(A.unit===z2||A.unit===q2||A.unit===G2||A.unit===J2)},Y2=function(A){var s=A.filter(aa).map(function(n){return n.value}).join(" ");switch(s){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Os,Os];case"to top":case"bottom":return wr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Os,ro];case"to right":case"left":return wr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ro,ro];case"to bottom":case"top":return wr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ro,Os];case"to left":case"right":return wr(270)}return 0},wr=function(A){return Math.PI*A/180},uo={name:"color",parse:function(A,s){if(s.type===18){var n=OB[s.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+s.name+'"');return n(A,s.values)}if(s.type===5){if(s.value.length===3){var r=s.value.substring(0,1),l=s.value.substring(1,2),o=s.value.substring(2,3);return io(parseInt(r+r,16),parseInt(l+l,16),parseInt(o+o,16),1)}if(s.value.length===4){var r=s.value.substring(0,1),l=s.value.substring(1,2),o=s.value.substring(2,3),u=s.value.substring(3,4);return io(parseInt(r+r,16),parseInt(l+l,16),parseInt(o+o,16),parseInt(u+u,16)/255)}if(s.value.length===6){var r=s.value.substring(0,2),l=s.value.substring(2,4),o=s.value.substring(4,6);return io(parseInt(r,16),parseInt(l,16),parseInt(o,16),1)}if(s.value.length===8){var r=s.value.substring(0,2),l=s.value.substring(2,4),o=s.value.substring(4,6),u=s.value.substring(6,8);return io(parseInt(r,16),parseInt(l,16),parseInt(o,16),parseInt(u,16)/255)}}if(s.type===20){var d=dl[s.value.toUpperCase()];if(typeof d<"u")return d}return dl.TRANSPARENT}},ho=function(A){return(255&A)===0},Ss=function(A){var s=255&A,n=255&A>>8,r=255&A>>16,l=255&A>>24;return s<255?"rgba("+l+","+r+","+n+","+s/255+")":"rgb("+l+","+r+","+n+")"},io=function(A,s,n,r){return(A<<24|s<<16|n<<8|Math.round(r*255)<<0)>>>0},e1=function(A,s){if(A.type===17)return A.number;if(A.type===16){var n=s===3?1:255;return s===3?A.number/100*n:Math.round(A.number/100*n)}return 0},t1=function(A,s){var n=s.filter(Gc);if(n.length===3){var r=n.map(e1),l=r[0],o=r[1],u=r[2];return io(l,o,u,1)}if(n.length===4){var d=n.map(e1),l=d[0],o=d[1],u=d[2],h=d[3];return io(l,o,u,h)}return 0};function Hm(A,s,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(s-A)*n*6+A:n<1/2?s:n<2/3?(s-A)*6*(2/3-n)+A:A}var A1=function(A,s){var n=s.filter(Gc),r=n[0],l=n[1],o=n[2],u=n[3],d=(r.type===17?wr(r.number):Xh.parse(A,r))/(Math.PI*2),h=as(l)?l.number/100:0,m=as(o)?o.number/100:0,w=typeof u<"u"&&as(u)?fa(u,1):1;if(h===0)return io(m*255,m*255,m*255,1);var v=m<=.5?m*(h+1):m+h-m*h,B=m*2-v,x=Hm(B,v,d+1/3),C=Hm(B,v,d),N=Hm(B,v,d-1/3);return io(x*255,C*255,N*255,w)},OB={hsl:A1,hsla:A1,rgb:t1,rgba:t1},zu=function(A,s){return uo.parse(A,P2.create(s).parseComponentValue())},dl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},kB={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,s){return s.map(function(n){if(aa(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_B={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Yh=function(A,s){var n=uo.parse(A,s[0]),r=s[1];return r&&as(r)?{color:n,stop:r}:{color:n,stop:null}},a1=function(A,s){var n=A[0],r=A[A.length-1];n.stop===null&&(n.stop=Os),r.stop===null&&(r.stop=ro);for(var l=[],o=0,u=0;u<A.length;u++){var d=A[u].stop;if(d!==null){var h=fa(d,s);h>o?l.push(h):l.push(o),o=h}else l.push(null)}for(var m=null,u=0;u<l.length;u++){var w=l[u];if(w===null)m===null&&(m=u);else if(m!==null){for(var v=u-m,B=l[m-1],x=(w-B)/(v+1),C=1;C<=v;C++)l[m+C-1]=x*C;m=null}}return A.map(function(N,L){var F=N.color;return{color:F,stop:Math.max(Math.min(1,l[L]/s),0)}})},RB=function(A,s,n){var r=s/2,l=n/2,o=fa(A[0],s)-r,u=l-fa(A[1],n);return(Math.atan2(u,o)+Math.PI*2)%(Math.PI*2)},PB=function(A,s,n){var r=typeof A=="number"?A:RB(A,s,n),l=Math.abs(s*Math.sin(r))+Math.abs(n*Math.cos(r)),o=s/2,u=n/2,d=l/2,h=Math.sin(r-Math.PI/2)*d,m=Math.cos(r-Math.PI/2)*d;return[l,o-m,o+m,u-h,u+h]},zr=function(A,s){return Math.sqrt(A*A+s*s)},s1=function(A,s,n,r,l){var o=[[0,0],[0,s],[A,0],[A,s]];return o.reduce(function(u,d){var h=d[0],m=d[1],w=zr(n-h,r-m);return(l?w<u.optimumDistance:w>u.optimumDistance)?{optimumCorner:d,optimumDistance:w}:u},{optimumDistance:l?1/0:-1/0,optimumCorner:null}).optimumCorner},KB=function(A,s,n,r,l){var o=0,u=0;switch(A.size){case 0:A.shape===0?o=u=Math.min(Math.abs(s),Math.abs(s-r),Math.abs(n),Math.abs(n-l)):A.shape===1&&(o=Math.min(Math.abs(s),Math.abs(s-r)),u=Math.min(Math.abs(n),Math.abs(n-l)));break;case 2:if(A.shape===0)o=u=Math.min(zr(s,n),zr(s,n-l),zr(s-r,n),zr(s-r,n-l));else if(A.shape===1){var d=Math.min(Math.abs(n),Math.abs(n-l))/Math.min(Math.abs(s),Math.abs(s-r)),h=s1(r,l,s,n,!0),m=h[0],w=h[1];o=zr(m-s,(w-n)/d),u=d*o}break;case 1:A.shape===0?o=u=Math.max(Math.abs(s),Math.abs(s-r),Math.abs(n),Math.abs(n-l)):A.shape===1&&(o=Math.max(Math.abs(s),Math.abs(s-r)),u=Math.max(Math.abs(n),Math.abs(n-l)));break;case 3:if(A.shape===0)o=u=Math.max(zr(s,n),zr(s,n-l),zr(s-r,n),zr(s-r,n-l));else if(A.shape===1){var d=Math.max(Math.abs(n),Math.abs(n-l))/Math.max(Math.abs(s),Math.abs(s-r)),v=s1(r,l,s,n,!1),m=v[0],w=v[1];o=zr(m-s,(w-n)/d),u=d*o}break}return Array.isArray(A.size)&&(o=fa(A.size[0],r),u=A.size.length===2?fa(A.size[1],l):o),[o,u]},VB=function(A,s){var n=wr(180),r=[];return Ei(s).forEach(function(l,o){if(o===0){var u=l[0];if(u.type===20&&u.value==="to"){n=Y2(l);return}else if(X2(u)){n=Xh.parse(A,u);return}}var d=Yh(A,l);r.push(d)}),{angle:n,stops:r,type:1}},lh=function(A,s){var n=wr(180),r=[];return Ei(s).forEach(function(l,o){if(o===0){var u=l[0];if(u.type===20&&["top","left","right","bottom"].indexOf(u.value)!==-1){n=Y2(l);return}else if(X2(u)){n=(Xh.parse(A,u)+wr(270))%wr(360);return}}var d=Yh(A,l);r.push(d)}),{angle:n,stops:r,type:1}},zB=function(A,s){var n=wr(180),r=[],l=1,o=0,u=3,d=[];return Ei(s).forEach(function(h,m){var w=h[0];if(m===0){if(aa(w)&&w.value==="linear"){l=1;return}else if(aa(w)&&w.value==="radial"){l=2;return}}if(w.type===18){if(w.name==="from"){var v=uo.parse(A,w.values[0]);r.push({stop:Os,color:v})}else if(w.name==="to"){var v=uo.parse(A,w.values[0]);r.push({stop:ro,color:v})}else if(w.name==="color-stop"){var B=w.values.filter(Gc);if(B.length===2){var v=uo.parse(A,B[1]),x=B[0];Jc(x)&&r.push({stop:{type:16,number:x.number*100,flags:x.flags},color:v})}}}}),l===1?{angle:(n+wr(180))%wr(360),stops:r,type:l}:{size:u,shape:o,stops:r,position:d,type:l}},Z2="closest-side",W2="farthest-side",$2="closest-corner",ev="farthest-corner",tv="circle",Av="ellipse",av="cover",sv="contain",qB=function(A,s){var n=0,r=3,l=[],o=[];return Ei(s).forEach(function(u,d){var h=!0;if(d===0){var m=!1;h=u.reduce(function(v,B){if(m)if(aa(B))switch(B.value){case"center":return o.push(X0),v;case"top":case"left":return o.push(Os),v;case"right":case"bottom":return o.push(ro),v}else(as(B)||fo(B))&&o.push(B);else if(aa(B))switch(B.value){case tv:return n=0,!1;case Av:return n=1,!1;case"at":return m=!0,!1;case Z2:return r=0,!1;case av:case W2:return r=1,!1;case sv:case $2:return r=2,!1;case ev:return r=3,!1}else if(fo(B)||as(B))return Array.isArray(r)||(r=[]),r.push(B),!1;return v},h)}if(h){var w=Yh(A,u);l.push(w)}}),{size:r,shape:n,stops:l,position:o,type:2}},oh=function(A,s){var n=0,r=3,l=[],o=[];return Ei(s).forEach(function(u,d){var h=!0;if(d===0?h=u.reduce(function(w,v){if(aa(v))switch(v.value){case"center":return o.push(X0),!1;case"top":case"left":return o.push(Os),!1;case"right":case"bottom":return o.push(ro),!1}else if(as(v)||fo(v))return o.push(v),!1;return w},h):d===1&&(h=u.reduce(function(w,v){if(aa(v))switch(v.value){case tv:return n=0,!1;case Av:return n=1,!1;case sv:case Z2:return r=0,!1;case W2:return r=1,!1;case $2:return r=2,!1;case av:case ev:return r=3,!1}else if(fo(v)||as(v))return Array.isArray(r)||(r=[]),r.push(v),!1;return w},h)),h){var m=Yh(A,u);l.push(m)}}),{size:r,shape:n,stops:l,position:o,type:2}},GB=function(A){return A.type===1},JB=function(A){return A.type===2},Y0={name:"image",parse:function(A,s){if(s.type===22){var n={url:s.value,type:0};return A.cache.addImage(s.value),n}if(s.type===18){var r=nv[s.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+s.name+'"');return r(A,s.values)}throw new Error("Unsupported image type "+s.type)}};function XB(A){return!(A.type===20&&A.value==="none")&&(A.type!==18||!!nv[A.name])}var nv={"linear-gradient":VB,"-moz-linear-gradient":lh,"-ms-linear-gradient":lh,"-o-linear-gradient":lh,"-webkit-linear-gradient":lh,"radial-gradient":qB,"-moz-radial-gradient":oh,"-ms-radial-gradient":oh,"-o-radial-gradient":oh,"-webkit-radial-gradient":oh,"-webkit-gradient":zB},YB={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(A,s){if(s.length===0)return[];var n=s[0];return n.type===20&&n.value==="none"?[]:s.filter(function(r){return Gc(r)&&XB(r)}).map(function(r){return Y0.parse(A,r)})}},ZB={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,s){return s.map(function(n){if(aa(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},WB={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,s){return Ei(s).map(function(n){return n.filter(as)}).map(V2)}},$B={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,s){return Ei(s).map(function(n){return n.filter(aa).map(function(r){return r.value}).join(" ")}).map(ey)}},ey=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Rc;(function(A){A.AUTO="auto",A.CONTAIN="contain",A.COVER="cover"})(Rc||(Rc={}));var ty={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(A,s){return Ei(s).map(function(n){return n.filter(Ay)})}},Ay=function(A){return aa(A)||as(A)},Zh=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ay=Zh("top"),sy=Zh("right"),ny=Zh("bottom"),ry=Zh("left"),Wh=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(s,n){return V2(n.filter(as))}}},iy=Wh("top-left"),ly=Wh("top-right"),oy=Wh("bottom-right"),cy=Wh("bottom-left"),$h=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(s,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},uy=$h("top"),dy=$h("right"),hy=$h("bottom"),fy=$h("left"),ef=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(s,n){return ad(n)?n.number:0}}},my=ef("top"),py=ef("right"),gy=ef("bottom"),xy=ef("left"),vy={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},by={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,s){switch(s){case"rtl":return 1;case"ltr":default:return 0}}},wy={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,s){return s.filter(aa).reduce(function(n,r){return n|By(r.value)},0)}},By=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},yy={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,s){switch(s){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Cy={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,s){return s.type===20&&s.value==="normal"?0:s.type===17||s.type===15?s.number:0}},Ih;(function(A){A.NORMAL="normal",A.STRICT="strict"})(Ih||(Ih={}));var Ny={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,s){switch(s){case"strict":return Ih.STRICT;case"normal":default:return Ih.NORMAL}}},jy={name:"line-height",initialValue:"normal",prefix:!1,type:4},n1=function(A,s){return aa(A)&&A.value==="normal"?1.2*s:A.type===17?s*A.number:as(A)?fa(A,s):s},Fy={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,s){return s.type===20&&s.value==="none"?null:Y0.parse(A,s)}},Sy={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,s){switch(s){case"inside":return 0;case"outside":default:return 1}}},w0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,s){switch(s){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},tf=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},Qy=tf("top"),Uy=tf("right"),Ey=tf("bottom"),Iy=tf("left"),Ly={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,s){return s.filter(aa).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Dy={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,s){switch(s){case"break-word":return"break-word";case"normal":default:return"normal"}}},Af=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ty=Af("top"),Hy=Af("right"),My=Af("bottom"),Oy=Af("left"),ky={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,s){switch(s){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},_y={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,s){switch(s){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Ry={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,s){return s.length===1&&b0(s[0],"none")?[]:Ei(s).map(function(n){for(var r={color:dl.TRANSPARENT,offsetX:Os,offsetY:Os,blur:Os},l=0,o=0;o<n.length;o++){var u=n[o];fo(u)?(l===0?r.offsetX=u:l===1?r.offsetY=u:r.blur=u,l++):r.color=uo.parse(A,u)}return r})}},Py={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,s){switch(s){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ky={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,s){if(s.type===20&&s.value==="none")return null;if(s.type===18){var n=qy[s.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+s.name+'"');return n(s.values)}return null}},Vy=function(A){var s=A.filter(function(n){return n.type===17}).map(function(n){return n.number});return s.length===6?s:null},zy=function(A){var s=A.filter(function(h){return h.type===17}).map(function(h){return h.number}),n=s[0],r=s[1];s[2],s[3];var l=s[4],o=s[5];s[6],s[7],s[8],s[9],s[10],s[11];var u=s[12],d=s[13];return s[14],s[15],s.length===16?[n,r,l,o,u,d]:null},qy={matrix:Vy,matrix3d:zy},r1={type:16,number:50,flags:Ad},Gy=[r1,r1],Jy={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,s){var n=s.filter(as);return n.length!==2?Gy:[n[0],n[1]]}},Xy={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,s){switch(s){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},qu;(function(A){A.NORMAL="normal",A.BREAK_ALL="break-all",A.KEEP_ALL="keep-all"})(qu||(qu={}));var Yy={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,s){switch(s){case"break-all":return qu.BREAK_ALL;case"keep-all":return qu.KEEP_ALL;case"normal":default:return qu.NORMAL}}},Zy={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,s){if(s.type===20)return{auto:!0,order:0};if(Jc(s))return{auto:!1,order:s.number};throw new Error("Invalid z-index number parsed")}},rv={name:"time",parse:function(A,s){if(s.type===15)switch(s.unit.toLowerCase()){case"s":return 1e3*s.number;case"ms":return s.number}throw new Error("Unsupported time type")}},Wy={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,s){return Jc(s)?s.number:1}},$y={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},eC={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,s){return s.filter(aa).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},tC={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,s){var n=[],r=[];return s.forEach(function(l){switch(l.type){case 20:case 0:n.push(l.value);break;case 17:n.push(l.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(l){return l.indexOf(" ")===-1?l:"'"+l+"'"})}},AC={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},aC={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,s){if(Jc(s))return s.number;if(aa(s))switch(s.value){case"bold":return 700;case"normal":default:return 400}return 400}},sC={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,s){return s.filter(aa).map(function(n){return n.value})}},nC={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,s){switch(s){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ps=function(A,s){return(A&s)!==0},rC={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,s){if(s.length===0)return[];var n=s[0];return n.type===20&&n.value==="none"?[]:s}},iC={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,s){if(s.length===0)return null;var n=s[0];if(n.type===20&&n.value==="none")return null;for(var r=[],l=s.filter(K2),o=0;o<l.length;o++){var u=l[o],d=l[o+1];if(u.type===20){var h=d&&Jc(d)?d.number:1;r.push({counter:u.value,increment:h})}}return r}},lC={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,s){if(s.length===0)return[];for(var n=[],r=s.filter(K2),l=0;l<r.length;l++){var o=r[l],u=r[l+1];if(aa(o)&&o.value!=="none"){var d=u&&Jc(u)?u.number:0;n.push({counter:o.value,reset:d})}}return n}},oC={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(A,s){return s.filter(ad).map(function(n){return rv.parse(A,n)})}},cC={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,s){if(s.length===0)return null;var n=s[0];if(n.type===20&&n.value==="none")return null;var r=[],l=s.filter(HB);if(l.length%2!==0)return null;for(var o=0;o<l.length;o+=2){var u=l[o].value,d=l[o+1].value;r.push({open:u,close:d})}return r}},i1=function(A,s,n){if(!A)return"";var r=A[Math.min(s,A.length-1)];return r?n?r.open:r.close:""},uC={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,s){return s.length===1&&b0(s[0],"none")?[]:Ei(s).map(function(n){for(var r={color:255,offsetX:Os,offsetY:Os,blur:Os,spread:Os,inset:!1},l=0,o=0;o<n.length;o++){var u=n[o];b0(u,"inset")?r.inset=!0:fo(u)?(l===0?r.offsetX=u:l===1?r.offsetY=u:l===2?r.blur=u:r.spread=u,l++):r.color=uo.parse(A,u)}return r})}},dC={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,s){var n=[0,1,2],r=[];return s.filter(aa).forEach(function(l){switch(l.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(l){r.indexOf(l)===-1&&r.push(l)}),r}},hC={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fC={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,s){return ad(s)?s.number:0}},mC=(function(){function A(s,n){var r,l;this.animationDuration=It(s,oC,n.animationDuration),this.backgroundClip=It(s,kB,n.backgroundClip),this.backgroundColor=It(s,_B,n.backgroundColor),this.backgroundImage=It(s,YB,n.backgroundImage),this.backgroundOrigin=It(s,ZB,n.backgroundOrigin),this.backgroundPosition=It(s,WB,n.backgroundPosition),this.backgroundRepeat=It(s,$B,n.backgroundRepeat),this.backgroundSize=It(s,ty,n.backgroundSize),this.borderTopColor=It(s,ay,n.borderTopColor),this.borderRightColor=It(s,sy,n.borderRightColor),this.borderBottomColor=It(s,ny,n.borderBottomColor),this.borderLeftColor=It(s,ry,n.borderLeftColor),this.borderTopLeftRadius=It(s,iy,n.borderTopLeftRadius),this.borderTopRightRadius=It(s,ly,n.borderTopRightRadius),this.borderBottomRightRadius=It(s,oy,n.borderBottomRightRadius),this.borderBottomLeftRadius=It(s,cy,n.borderBottomLeftRadius),this.borderTopStyle=It(s,uy,n.borderTopStyle),this.borderRightStyle=It(s,dy,n.borderRightStyle),this.borderBottomStyle=It(s,hy,n.borderBottomStyle),this.borderLeftStyle=It(s,fy,n.borderLeftStyle),this.borderTopWidth=It(s,my,n.borderTopWidth),this.borderRightWidth=It(s,py,n.borderRightWidth),this.borderBottomWidth=It(s,gy,n.borderBottomWidth),this.borderLeftWidth=It(s,xy,n.borderLeftWidth),this.boxShadow=It(s,uC,n.boxShadow),this.color=It(s,vy,n.color),this.direction=It(s,by,n.direction),this.display=It(s,wy,n.display),this.float=It(s,yy,n.cssFloat),this.fontFamily=It(s,tC,n.fontFamily),this.fontSize=It(s,AC,n.fontSize),this.fontStyle=It(s,nC,n.fontStyle),this.fontVariant=It(s,sC,n.fontVariant),this.fontWeight=It(s,aC,n.fontWeight),this.letterSpacing=It(s,Cy,n.letterSpacing),this.lineBreak=It(s,Ny,n.lineBreak),this.lineHeight=It(s,jy,n.lineHeight),this.listStyleImage=It(s,Fy,n.listStyleImage),this.listStylePosition=It(s,Sy,n.listStylePosition),this.listStyleType=It(s,w0,n.listStyleType),this.marginTop=It(s,Qy,n.marginTop),this.marginRight=It(s,Uy,n.marginRight),this.marginBottom=It(s,Ey,n.marginBottom),this.marginLeft=It(s,Iy,n.marginLeft),this.opacity=It(s,Wy,n.opacity);var o=It(s,Ly,n.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=It(s,Dy,n.overflowWrap),this.paddingTop=It(s,Ty,n.paddingTop),this.paddingRight=It(s,Hy,n.paddingRight),this.paddingBottom=It(s,My,n.paddingBottom),this.paddingLeft=It(s,Oy,n.paddingLeft),this.paintOrder=It(s,dC,n.paintOrder),this.position=It(s,_y,n.position),this.textAlign=It(s,ky,n.textAlign),this.textDecorationColor=It(s,$y,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=It(s,eC,(l=n.textDecorationLine)!==null&&l!==void 0?l:n.textDecoration),this.textShadow=It(s,Ry,n.textShadow),this.textTransform=It(s,Py,n.textTransform),this.transform=It(s,Ky,n.transform),this.transformOrigin=It(s,Jy,n.transformOrigin),this.visibility=It(s,Xy,n.visibility),this.webkitTextStrokeColor=It(s,hC,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=It(s,fC,n.webkitTextStrokeWidth),this.wordBreak=It(s,Yy,n.wordBreak),this.zIndex=It(s,Zy,n.zIndex)}return A.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},A.prototype.isTransparent=function(){return ho(this.backgroundColor)},A.prototype.isTransformed=function(){return this.transform!==null},A.prototype.isPositioned=function(){return this.position!==0},A.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},A.prototype.isFloating=function(){return this.float!==0},A.prototype.isInlineLevel=function(){return ps(this.display,4)||ps(this.display,33554432)||ps(this.display,268435456)||ps(this.display,536870912)||ps(this.display,67108864)||ps(this.display,134217728)},A})(),pC=(function(){function A(s,n){this.content=It(s,rC,n.content),this.quotes=It(s,cC,n.quotes)}return A})(),l1=(function(){function A(s,n){this.counterIncrement=It(s,iC,n.counterIncrement),this.counterReset=It(s,lC,n.counterReset)}return A})(),It=function(A,s,n){var r=new R2,l=n!==null&&typeof n<"u"?n.toString():s.initialValue;r.write(l);var o=new P2(r.read());switch(s.type){case 2:var u=o.parseComponentValue();return s.parse(A,aa(u)?u.value:s.initialValue);case 0:return s.parse(A,o.parseComponentValue());case 1:return s.parse(A,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(s.format){case"angle":return Xh.parse(A,o.parseComponentValue());case"color":return uo.parse(A,o.parseComponentValue());case"image":return Y0.parse(A,o.parseComponentValue());case"length":var d=o.parseComponentValue();return fo(d)?d:Os;case"length-percentage":var h=o.parseComponentValue();return as(h)?h:Os;case"time":return rv.parse(A,o.parseComponentValue())}break}},gC="data-html2canvas-debug",xC=function(A){var s=A.getAttribute(gC);switch(s){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},B0=function(A,s){var n=xC(A);return n===1||s===n},Ii=(function(){function A(s,n){if(this.context=s,this.textNodes=[],this.elements=[],this.flags=0,B0(n,3))debugger;this.styles=new mC(s,window.getComputedStyle(n,null)),N0(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Gh(this.context,n),B0(n,4)&&(this.flags|=16)}return A})(),vC="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",o1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ru=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ch=0;ch<o1.length;ch++)Ru[o1.charCodeAt(ch)]=ch;var bC=function(A){var s=A.length*.75,n=A.length,r,l=0,o,u,d,h;A[A.length-1]==="="&&(s--,A[A.length-2]==="="&&s--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(s):new Array(s),w=Array.isArray(m)?m:new Uint8Array(m);for(r=0;r<n;r+=4)o=Ru[A.charCodeAt(r)],u=Ru[A.charCodeAt(r+1)],d=Ru[A.charCodeAt(r+2)],h=Ru[A.charCodeAt(r+3)],w[l++]=o<<2|u>>4,w[l++]=(u&15)<<4|d>>2,w[l++]=(d&3)<<6|h&63;return m},wC=function(A){for(var s=A.length,n=[],r=0;r<s;r+=2)n.push(A[r+1]<<8|A[r]);return n},BC=function(A){for(var s=A.length,n=[],r=0;r<s;r+=4)n.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return n},Po=5,Z0=11,Mm=2,yC=Z0-Po,iv=65536>>Po,CC=1<<Po,Om=CC-1,NC=1024>>Po,jC=iv+NC,FC=jC,SC=32,QC=FC+SC,UC=65536>>Z0,EC=1<<yC,IC=EC-1,c1=function(A,s,n){return A.slice?A.slice(s,n):new Uint16Array(Array.prototype.slice.call(A,s,n))},LC=function(A,s,n){return A.slice?A.slice(s,n):new Uint32Array(Array.prototype.slice.call(A,s,n))},DC=function(A,s){var n=bC(A),r=Array.isArray(n)?BC(n):new Uint32Array(n),l=Array.isArray(n)?wC(n):new Uint16Array(n),o=24,u=c1(l,o/2,r[4]/2),d=r[5]===2?c1(l,(o+r[4])/2):LC(r,Math.ceil((o+r[4])/4));return new TC(r[0],r[1],r[2],r[3],u,d)},TC=(function(){function A(s,n,r,l,o,u){this.initialValue=s,this.errorValue=n,this.highStart=r,this.highValueIndex=l,this.index=o,this.data=u}return A.prototype.get=function(s){var n;if(s>=0){if(s<55296||s>56319&&s<=65535)return n=this.index[s>>Po],n=(n<<Mm)+(s&Om),this.data[n];if(s<=65535)return n=this.index[iv+(s-55296>>Po)],n=(n<<Mm)+(s&Om),this.data[n];if(s<this.highStart)return n=QC-UC+(s>>Z0),n=this.index[n],n+=s>>Po&IC,n=this.index[n],n=(n<<Mm)+(s&Om),this.data[n];if(s<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A})(),u1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uh=0;uh<u1.length;uh++)HC[u1.charCodeAt(uh)]=uh;var MC=1,km=2,_m=3,d1=4,h1=5,OC=7,f1=8,Rm=9,Pm=10,m1=11,p1=12,g1=13,x1=14,Km=15,kC=function(A){for(var s=[],n=0,r=A.length;n<r;){var l=A.charCodeAt(n++);if(l>=55296&&l<=56319&&n<r){var o=A.charCodeAt(n++);(o&64512)===56320?s.push(((l&1023)<<10)+(o&1023)+65536):(s.push(l),n--)}else s.push(l)}return s},_C=function(){for(var A=[],s=0;s<arguments.length;s++)A[s]=arguments[s];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var n=A.length;if(!n)return"";for(var r=[],l=-1,o="";++l<n;){var u=A[l];u<=65535?r.push(u):(u-=65536,r.push((u>>10)+55296,u%1024+56320)),(l+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},RC=DC(vC),xr="",Vm="",PC=function(A){return RC.get(A)},KC=function(A,s,n){var r=n-2,l=s[r],o=s[n-1],u=s[n];if(o===km&&u===_m)return xr;if(o===km||o===_m||o===d1||u===km||u===_m||u===d1)return Vm;if(o===f1&&[f1,Rm,m1,p1].indexOf(u)!==-1||(o===m1||o===Rm)&&(u===Rm||u===Pm)||(o===p1||o===Pm)&&u===Pm||u===g1||u===h1||u===OC||o===MC)return xr;if(o===g1&&u===x1){for(;l===h1;)l=s[--r];if(l===x1)return xr}if(o===Km&&u===Km){for(var d=0;l===Km;)d++,l=s[--r];if(d%2===0)return xr}return Vm},VC=function(A){var s=kC(A),n=s.length,r=0,l=0,o=s.map(PC);return{next:function(){if(r>=n)return{done:!0,value:null};for(var u=xr;r<n&&(u=KC(s,o,++r))===xr;);if(u!==xr||r===n){var d=_C.apply(null,s.slice(l,r));return l=r,{value:d,done:!1}}return{done:!0,value:null}}}},zC=function(A){for(var s=VC(A),n=[],r;!(r=s.next()).done;)r.value&&n.push(r.value.slice());return n},qC=function(A){var s=123;if(A.createRange){var n=A.createRange();if(n.getBoundingClientRect){var r=A.createElement("boundtest");r.style.height=s+"px",r.style.display="block",A.body.appendChild(r),n.selectNode(r);var l=n.getBoundingClientRect(),o=Math.round(l.height);if(A.body.removeChild(r),o===s)return!0}}return!1},GC=function(A){var s=A.createElement("boundtest");s.style.width="50px",s.style.display="block",s.style.fontSize="12px",s.style.letterSpacing="0px",s.style.wordSpacing="0px",A.body.appendChild(s);var n=A.createRange();s.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=s.firstChild,l=Jh(r.data).map(function(h){return Ka(h)}),o=0,u={},d=l.every(function(h,m){n.setStart(r,o),n.setEnd(r,o+h.length);var w=n.getBoundingClientRect();o+=h.length;var v=w.x>u.x||w.y>u.y;return u=w,m===0?!0:v});return A.body.removeChild(s),d},JC=function(){return typeof new Image().crossOrigin<"u"},XC=function(){return typeof new XMLHttpRequest().responseType=="string"},YC=function(A){var s=new Image,n=A.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;s.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(s,0,0),n.toDataURL()}catch{return!1}return!0},v1=function(A){return A[0]===0&&A[1]===255&&A[2]===0&&A[3]===255},ZC=function(A){var s=A.createElement("canvas"),n=100;s.width=n,s.height=n;var r=s.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var l=new Image,o=s.toDataURL();l.src=o;var u=y0(n,n,0,0,l);return r.fillStyle="red",r.fillRect(0,0,n,n),b1(u).then(function(d){r.drawImage(d,0,0);var h=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var m=A.createElement("div");return m.style.backgroundImage="url("+o+")",m.style.height=n+"px",v1(h)?b1(y0(n,n,0,0,m)):Promise.reject(!1)}).then(function(d){return r.drawImage(d,0,0),v1(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},y0=function(A,s,n,r,l){var o="http://www.w3.org/2000/svg",u=document.createElementNS(o,"svg"),d=document.createElementNS(o,"foreignObject");return u.setAttributeNS(null,"width",A.toString()),u.setAttributeNS(null,"height",s.toString()),d.setAttributeNS(null,"width","100%"),d.setAttributeNS(null,"height","100%"),d.setAttributeNS(null,"x",n.toString()),d.setAttributeNS(null,"y",r.toString()),d.setAttributeNS(null,"externalResourcesRequired","true"),u.appendChild(d),d.appendChild(l),u},b1=function(A){return new Promise(function(s,n){var r=new Image;r.onload=function(){return s(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},Ms={get SUPPORT_RANGE_BOUNDS(){var A=qC(document);return Object.defineProperty(Ms,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=Ms.SUPPORT_RANGE_BOUNDS&&GC(document);return Object.defineProperty(Ms,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=YC(document);return Object.defineProperty(Ms,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A=typeof Array.from=="function"&&typeof window.fetch=="function"?ZC(document):Promise.resolve(!1);return Object.defineProperty(Ms,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=JC();return Object.defineProperty(Ms,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A=XC();return Object.defineProperty(Ms,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ms,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ms,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},Gu=(function(){function A(s,n){this.text=s,this.bounds=n}return A})(),WC=function(A,s,n,r){var l=tN(s,n),o=[],u=0;return l.forEach(function(d){if(n.textDecorationLine.length||d.trim().length>0)if(Ms.SUPPORT_RANGE_BOUNDS){var h=w1(r,u,d.length).getClientRects();if(h.length>1){var m=W0(d),w=0;m.forEach(function(B){o.push(new Gu(B,fl.fromDOMRectList(A,w1(r,w+u,B.length).getClientRects()))),w+=B.length})}else o.push(new Gu(d,fl.fromDOMRectList(A,h)))}else{var v=r.splitText(d.length);o.push(new Gu(d,$C(A,r))),r=v}else Ms.SUPPORT_RANGE_BOUNDS||(r=r.splitText(d.length));u+=d.length}),o},$C=function(A,s){var n=s.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(s.cloneNode(!0));var l=s.parentNode;if(l){l.replaceChild(r,s);var o=Gh(A,r);return r.firstChild&&l.replaceChild(r.firstChild,r),o}}return fl.EMPTY},w1=function(A,s,n){var r=A.ownerDocument;if(!r)throw new Error("Node has no owner document");var l=r.createRange();return l.setStart(A,s),l.setEnd(A,s+n),l},W0=function(A){if(Ms.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(s.segment(A)).map(function(n){return n.segment})}return zC(A)},eN=function(A,s){if(Ms.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(A)).map(function(r){return r.segment})}return aN(A,s)},tN=function(A,s){return s.letterSpacing!==0?W0(A):eN(A,s)},AN=[32,160,4961,65792,65793,4153,4241],aN=function(A,s){for(var n=Uw(A,{lineBreak:s.lineBreak,wordBreak:s.overflowWrap==="break-word"?"break-word":s.wordBreak}),r=[],l,o=function(){if(l.value){var u=l.value.slice(),d=Jh(u),h="";d.forEach(function(m){AN.indexOf(m)===-1?h+=Ka(m):(h.length&&r.push(h),r.push(Ka(m)),h="")}),h.length&&r.push(h)}};!(l=n.next()).done;)o();return r},sN=(function(){function A(s,n,r){this.text=nN(n.data,r.textTransform),this.textBounds=WC(s,this.text,r,n)}return A})(),nN=function(A,s){switch(s){case 1:return A.toLowerCase();case 3:return A.replace(rN,iN);case 2:return A.toUpperCase();default:return A}},rN=/(^|\s|:|-|\(|\))([a-z])/g,iN=function(A,s,n){return A.length>0?s+n.toUpperCase():A},lv=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;return l.src=r.currentSrc||r.src,l.intrinsicWidth=r.naturalWidth,l.intrinsicHeight=r.naturalHeight,l.context.cache.addImage(l.src),l}return s})(Ii),ov=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;return l.canvas=r,l.intrinsicWidth=r.width,l.intrinsicHeight=r.height,l}return s})(Ii),cv=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this,o=new XMLSerializer,u=Gh(n,r);return r.setAttribute("width",u.width+"px"),r.setAttribute("height",u.height+"px"),l.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(r)),l.intrinsicWidth=r.width.baseVal.value,l.intrinsicHeight=r.height.baseVal.value,l.context.cache.addImage(l.svg),l}return s})(Ii),uv=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;return l.value=r.value,l}return s})(Ii),C0=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;return l.start=r.start,l.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,l}return s})(Ii),lN=[{type:15,flags:0,unit:"px",number:3}],oN=[{type:16,flags:0,number:50}],cN=function(A){return A.width>A.height?new fl(A.left+(A.width-A.height)/2,A.top,A.height,A.height):A.width<A.height?new fl(A.left,A.top+(A.height-A.width)/2,A.width,A.width):A},uN=function(A){var s=A.type===dN?new Array(A.value.length+1).join(""):A.value;return s.length===0?A.placeholder||"":s},Lh="checkbox",Dh="radio",dN="password",B1=707406591,$0=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;switch(l.type=r.type.toLowerCase(),l.checked=r.checked,l.value=uN(r),(l.type===Lh||l.type===Dh)&&(l.styles.backgroundColor=3739148031,l.styles.borderTopColor=l.styles.borderRightColor=l.styles.borderBottomColor=l.styles.borderLeftColor=2779096575,l.styles.borderTopWidth=l.styles.borderRightWidth=l.styles.borderBottomWidth=l.styles.borderLeftWidth=1,l.styles.borderTopStyle=l.styles.borderRightStyle=l.styles.borderBottomStyle=l.styles.borderLeftStyle=1,l.styles.backgroundClip=[0],l.styles.backgroundOrigin=[0],l.bounds=cN(l.bounds)),l.type){case Lh:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=lN;break;case Dh:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=oN;break}return l}return s})(Ii),dv=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this,o=r.options[r.selectedIndex||0];return l.value=o&&o.text||"",l}return s})(Ii),hv=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;return l.value=r.value,l}return s})(Ii),fv=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;l.src=r.src,l.width=parseInt(r.width,10)||0,l.height=parseInt(r.height,10)||0,l.backgroundColor=l.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){l.tree=pv(n,r.contentWindow.document.documentElement);var o=r.contentWindow.document.documentElement?zu(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):dl.TRANSPARENT,u=r.contentWindow.document.body?zu(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):dl.TRANSPARENT;l.backgroundColor=ho(o)?ho(u)?l.styles.backgroundColor:u:o}}catch{}return l}return s})(Ii),hN=["OL","UL","MENU"],Ch=function(A,s,n,r){for(var l=s.firstChild,o=void 0;l;l=o)if(o=l.nextSibling,gv(l)&&l.data.trim().length>0)n.textNodes.push(new sN(A,l,n.styles));else if(kc(l))if(wv(l)&&l.assignedNodes)l.assignedNodes().forEach(function(d){return Ch(A,d,n,r)});else{var u=mv(A,l);u.styles.isVisible()&&(fN(l,u,r)?u.flags|=4:mN(u.styles)&&(u.flags|=2),hN.indexOf(l.tagName)!==-1&&(u.flags|=8),n.elements.push(u),l.slot,l.shadowRoot?Ch(A,l.shadowRoot,u,r):!Th(l)&&!xv(l)&&!Hh(l)&&Ch(A,l,u,r))}},mv=function(A,s){return j0(s)?new lv(A,s):vv(s)?new ov(A,s):xv(s)?new cv(A,s):pN(s)?new uv(A,s):gN(s)?new C0(A,s):xN(s)?new $0(A,s):Hh(s)?new dv(A,s):Th(s)?new hv(A,s):bv(s)?new fv(A,s):new Ii(A,s)},pv=function(A,s){var n=mv(A,s);return n.flags|=4,Ch(A,s,n,n),n},fN=function(A,s,n){return s.styles.isPositionedWithZIndex()||s.styles.opacity<1||s.styles.isTransformed()||ep(A)&&n.styles.isTransparent()},mN=function(A){return A.isPositioned()||A.isFloating()},gv=function(A){return A.nodeType===Node.TEXT_NODE},kc=function(A){return A.nodeType===Node.ELEMENT_NODE},N0=function(A){return kc(A)&&typeof A.style<"u"&&!Nh(A)},Nh=function(A){return typeof A.className=="object"},pN=function(A){return A.tagName==="LI"},gN=function(A){return A.tagName==="OL"},xN=function(A){return A.tagName==="INPUT"},vN=function(A){return A.tagName==="HTML"},xv=function(A){return A.tagName==="svg"},ep=function(A){return A.tagName==="BODY"},vv=function(A){return A.tagName==="CANVAS"},y1=function(A){return A.tagName==="VIDEO"},j0=function(A){return A.tagName==="IMG"},bv=function(A){return A.tagName==="IFRAME"},C1=function(A){return A.tagName==="STYLE"},bN=function(A){return A.tagName==="SCRIPT"},Th=function(A){return A.tagName==="TEXTAREA"},Hh=function(A){return A.tagName==="SELECT"},wv=function(A){return A.tagName==="SLOT"},N1=function(A){return A.tagName.indexOf("-")>0},wN=(function(){function A(){this.counters={}}return A.prototype.getCounterValue=function(s){var n=this.counters[s];return n&&n.length?n[n.length-1]:1},A.prototype.getCounterValues=function(s){var n=this.counters[s];return n||[]},A.prototype.pop=function(s){var n=this;s.forEach(function(r){return n.counters[r].pop()})},A.prototype.parse=function(s){var n=this,r=s.counterIncrement,l=s.counterReset,o=!0;r!==null&&r.forEach(function(d){var h=n.counters[d.counter];h&&d.increment!==0&&(o=!1,h.length||h.push(1),h[Math.max(0,h.length-1)]+=d.increment)});var u=[];return o&&l.forEach(function(d){var h=n.counters[d.counter];u.push(d.counter),h||(h=n.counters[d.counter]=[]),h.push(d.reset)}),u},A})(),j1={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},F1={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},BN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},yN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Uc=function(A,s,n,r,l,o){return A<s||A>n?Wu(A,l,o.length>0):r.integers.reduce(function(u,d,h){for(;A>=d;)A-=d,u+=r.values[h];return u},"")+o},Bv=function(A,s,n,r){var l="";do n||A--,l=r(A)+l,A/=s;while(A*s>=s);return l},Pa=function(A,s,n,r,l){var o=n-s+1;return(A<0?"-":"")+(Bv(Math.abs(A),o,r,function(u){return Ka(Math.floor(u%o)+s)})+l)},Do=function(A,s,n){n===void 0&&(n=". ");var r=s.length;return Bv(Math.abs(A),r,!1,function(l){return s[Math.floor(l%r)]})+n},Tc=1,Ao=2,ao=4,Pu=8,cl=function(A,s,n,r,l,o){if(A<-9999||A>9999)return Wu(A,4,l.length>0);var u=Math.abs(A),d=l;if(u===0)return s[0]+d;for(var h=0;u>0&&h<=4;h++){var m=u%10;m===0&&ps(o,Tc)&&d!==""?d=s[m]+d:m>1||m===1&&h===0||m===1&&h===1&&ps(o,Ao)||m===1&&h===1&&ps(o,ao)&&A>100||m===1&&h>1&&ps(o,Pu)?d=s[m]+(h>0?n[h-1]:"")+d:m===1&&h>0&&(d=n[h-1]+d),u=Math.floor(u/10)}return(A<0?r:"")+d},S1="",Q1="",U1="",zm="",Wu=function(A,s,n){var r=n?". ":"",l=n?"":"",o=n?", ":"",u=n?" ":"";switch(s){case 0:return""+u;case 1:return""+u;case 2:return""+u;case 5:var d=Pa(A,48,57,!0,r);return d.length<4?"0"+d:d;case 4:return Do(A,"",l);case 6:return Uc(A,1,3999,j1,3,r).toLowerCase();case 7:return Uc(A,1,3999,j1,3,r);case 8:return Pa(A,945,969,!1,r);case 9:return Pa(A,97,122,!1,r);case 10:return Pa(A,65,90,!1,r);case 11:return Pa(A,1632,1641,!0,r);case 12:case 49:return Uc(A,1,9999,F1,3,r);case 35:return Uc(A,1,9999,F1,3,r).toLowerCase();case 13:return Pa(A,2534,2543,!0,r);case 14:case 30:return Pa(A,6112,6121,!0,r);case 15:return Do(A,"",l);case 16:return Do(A,"",l);case 17:case 48:return cl(A,"",S1,"",l,Ao|ao|Pu);case 47:return cl(A,"",Q1,"",l,Tc|Ao|ao|Pu);case 42:return cl(A,"",S1,"",l,Ao|ao|Pu);case 41:return cl(A,"",Q1,"",l,Tc|Ao|ao|Pu);case 26:return cl(A,"","",U1,l,0);case 25:return cl(A,"","",U1,l,Tc|Ao|ao);case 31:return cl(A,"","",zm,o,Tc|Ao|ao);case 33:return cl(A,"","",zm,o,0);case 32:return cl(A,"","",zm,o,Tc|Ao|ao);case 18:return Pa(A,2406,2415,!0,r);case 20:return Uc(A,1,19999,yN,3,r);case 21:return Pa(A,2790,2799,!0,r);case 22:return Pa(A,2662,2671,!0,r);case 22:return Uc(A,1,10999,BN,3,r);case 23:return Do(A,"");case 24:return Do(A,"");case 27:return Pa(A,3302,3311,!0,r);case 28:return Do(A,"",l);case 29:return Do(A,"",l);case 34:return Pa(A,3792,3801,!0,r);case 37:return Pa(A,6160,6169,!0,r);case 38:return Pa(A,4160,4169,!0,r);case 39:return Pa(A,2918,2927,!0,r);case 40:return Pa(A,1776,1785,!0,r);case 43:return Pa(A,3046,3055,!0,r);case 44:return Pa(A,3174,3183,!0,r);case 45:return Pa(A,3664,3673,!0,r);case 46:return Pa(A,3872,3881,!0,r);case 3:default:return Pa(A,48,57,!0,r)}},yv="data-html2canvas-ignore",E1=(function(){function A(s,n,r){if(this.context=s,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new wN,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return A.prototype.toIFrame=function(s,n){var r=this,l=CN(s,n);if(!l.contentWindow)return Promise.reject("Unable to find iframe window");var o=s.defaultView.pageXOffset,u=s.defaultView.pageYOffset,d=l.contentWindow,h=d.document,m=FN(l).then(function(){return fn(r,void 0,void 0,function(){var w,v;return $s(this,function(B){switch(B.label){case 0:return this.scrolledElements.forEach(EN),d&&(d.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(d.scrollY!==n.top||d.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(d.scrollX-n.left,d.scrollY-n.top,0,0))),w=this.options.onclone,v=this.clonedReferenceElement,typeof v>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:h.fonts&&h.fonts.ready?[4,h.fonts.ready]:[3,2];case 1:B.sent(),B.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,jN(h)]:[3,4];case 3:B.sent(),B.label=4;case 4:return typeof w=="function"?[2,Promise.resolve().then(function(){return w(h,v)}).then(function(){return l})]:[2,l]}})})});return h.open(),h.write(QN(document.doctype)+"<html></html>"),UN(this.referenceElement.ownerDocument,o,u),h.replaceChild(h.adoptNode(this.documentElement),h.documentElement),h.close(),m},A.prototype.createElementClone=function(s){if(B0(s,2))debugger;if(vv(s))return this.createCanvasClone(s);if(y1(s))return this.createVideoClone(s);if(C1(s))return this.createStyleClone(s);var n=s.cloneNode(!1);return j0(n)&&(j0(s)&&s.currentSrc&&s.currentSrc!==s.src&&(n.src=s.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),N1(n)?this.createCustomElementClone(n):n},A.prototype.createCustomElementClone=function(s){var n=document.createElement("html2canvascustomelement");return qm(s.style,n),n},A.prototype.createStyleClone=function(s){try{var n=s.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(o,u){return u&&typeof u.cssText=="string"?o+u.cssText:o},""),l=s.cloneNode(!1);return l.textContent=r,l}}catch(o){if(this.context.logger.error("Unable to access cssRules property",o),o.name!=="SecurityError")throw o}return s.cloneNode(!1)},A.prototype.createCanvasClone=function(s){var n;if(this.options.inlineImages&&s.ownerDocument){var r=s.ownerDocument.createElement("img");try{return r.src=s.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",s)}}var l=s.cloneNode(!1);try{l.width=s.width,l.height=s.height;var o=s.getContext("2d"),u=l.getContext("2d");if(u)if(!this.options.allowTaint&&o)u.putImageData(o.getImageData(0,0,s.width,s.height),0,0);else{var d=(n=s.getContext("webgl2"))!==null&&n!==void 0?n:s.getContext("webgl");if(d){var h=d.getContextAttributes();(h==null?void 0:h.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",s)}u.drawImage(s,0,0)}return l}catch{this.context.logger.info("Unable to clone canvas as it is tainted",s)}return l},A.prototype.createVideoClone=function(s){var n=s.ownerDocument.createElement("canvas");n.width=s.offsetWidth,n.height=s.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(s,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",s)}var l=s.ownerDocument.createElement("canvas");return l.width=s.offsetWidth,l.height=s.offsetHeight,l},A.prototype.appendChildNode=function(s,n,r){(!kc(n)||!bN(n)&&!n.hasAttribute(yv)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!kc(n)||!C1(n))&&s.appendChild(this.cloneNode(n,r))},A.prototype.cloneChildNodes=function(s,n,r){for(var l=this,o=s.shadowRoot?s.shadowRoot.firstChild:s.firstChild;o;o=o.nextSibling)if(kc(o)&&wv(o)&&typeof o.assignedNodes=="function"){var u=o.assignedNodes();u.length&&u.forEach(function(d){return l.appendChildNode(n,d,r)})}else this.appendChildNode(n,o,r)},A.prototype.cloneNode=function(s,n){if(gv(s))return document.createTextNode(s.data);if(!s.ownerDocument)return s.cloneNode(!1);var r=s.ownerDocument.defaultView;if(r&&kc(s)&&(N0(s)||Nh(s))){var l=this.createElementClone(s);l.style.transitionProperty="none";var o=r.getComputedStyle(s),u=r.getComputedStyle(s,":before"),d=r.getComputedStyle(s,":after");this.referenceElement===s&&N0(l)&&(this.clonedReferenceElement=l),ep(l)&&DN(l);var h=this.counters.parse(new l1(this.context,o)),m=this.resolvePseudoContent(s,l,u,Ju.BEFORE);N1(s)&&(n=!0),y1(s)||this.cloneChildNodes(s,l,n),m&&l.insertBefore(m,l.firstChild);var w=this.resolvePseudoContent(s,l,d,Ju.AFTER);return w&&l.appendChild(w),this.counters.pop(h),(o&&(this.options.copyStyles||Nh(s))&&!bv(s)||n)&&qm(o,l),(s.scrollTop!==0||s.scrollLeft!==0)&&this.scrolledElements.push([l,s.scrollLeft,s.scrollTop]),(Th(s)||Hh(s))&&(Th(l)||Hh(l))&&(l.value=s.value),l}return s.cloneNode(!1)},A.prototype.resolvePseudoContent=function(s,n,r,l){var o=this;if(r){var u=r.content,d=n.ownerDocument;if(!(!d||!u||u==="none"||u==="-moz-alt-content"||r.display==="none")){this.counters.parse(new l1(this.context,r));var h=new pC(this.context,r),m=d.createElement("html2canvaspseudoelement");qm(r,m),h.content.forEach(function(v){if(v.type===0)m.appendChild(d.createTextNode(v.value));else if(v.type===22){var B=d.createElement("img");B.src=v.value,B.style.opacity="1",m.appendChild(B)}else if(v.type===18){if(v.name==="attr"){var x=v.values.filter(aa);x.length&&m.appendChild(d.createTextNode(s.getAttribute(x[0].value)||""))}else if(v.name==="counter"){var C=v.values.filter(Gc),N=C[0],L=C[1];if(N&&aa(N)){var F=o.counters.getCounterValue(N.value),Q=L&&aa(L)?w0.parse(o.context,L.value):3;m.appendChild(d.createTextNode(Wu(F,Q,!1)))}}else if(v.name==="counters"){var _=v.values.filter(Gc),N=_[0],te=_[1],L=_[2];if(N&&aa(N)){var O=o.counters.getCounterValues(N.value),k=L&&aa(L)?w0.parse(o.context,L.value):3,P=te&&te.type===0?te.value:"",E=O.map(function(T){return Wu(T,k,!1)}).join(P);m.appendChild(d.createTextNode(E))}}}else if(v.type===20)switch(v.value){case"open-quote":m.appendChild(d.createTextNode(i1(h.quotes,o.quoteDepth++,!0)));break;case"close-quote":m.appendChild(d.createTextNode(i1(h.quotes,--o.quoteDepth,!1)));break;default:m.appendChild(d.createTextNode(v.value))}}),m.className=F0+" "+S0;var w=l===Ju.BEFORE?" "+F0:" "+S0;return Nh(n)?n.className.baseValue+=w:n.className+=w,m}}},A.destroy=function(s){return s.parentNode?(s.parentNode.removeChild(s),!0):!1},A})(),Ju;(function(A){A[A.BEFORE=0]="BEFORE",A[A.AFTER=1]="AFTER"})(Ju||(Ju={}));var CN=function(A,s){var n=A.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=s.width.toString(),n.height=s.height.toString(),n.scrolling="no",n.setAttribute(yv,"true"),A.body.appendChild(n),n},NN=function(A){return new Promise(function(s){if(A.complete){s();return}if(!A.src){s();return}A.onload=s,A.onerror=s})},jN=function(A){return Promise.all([].slice.call(A.images,0).map(NN))},FN=function(A){return new Promise(function(s,n){var r=A.contentWindow;if(!r)return n("No window assigned for iframe");var l=r.document;r.onload=A.onload=function(){r.onload=A.onload=null;var o=setInterval(function(){l.body.childNodes.length>0&&l.readyState==="complete"&&(clearInterval(o),s(A))},50)}})},SN=["all","d","content"],qm=function(A,s){for(var n=A.length-1;n>=0;n--){var r=A.item(n);SN.indexOf(r)===-1&&s.style.setProperty(r,A.getPropertyValue(r))}return s},QN=function(A){var s="";return A&&(s+="<!DOCTYPE ",A.name&&(s+=A.name),A.internalSubset&&(s+=A.internalSubset),A.publicId&&(s+='"'+A.publicId+'"'),A.systemId&&(s+='"'+A.systemId+'"'),s+=">"),s},UN=function(A,s,n){A&&A.defaultView&&(s!==A.defaultView.pageXOffset||n!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(s,n)},EN=function(A){var s=A[0],n=A[1],r=A[2];s.scrollLeft=n,s.scrollTop=r},IN=":before",LN=":after",F0="___html2canvas___pseudoelement_before",S0="___html2canvas___pseudoelement_after",I1=`{
    content: "" !important;
    display: none !important;
}`,DN=function(A){TN(A,"."+F0+IN+I1+`
         .`+S0+LN+I1)},TN=function(A,s){var n=A.ownerDocument;if(n){var r=n.createElement("style");r.textContent=s,A.appendChild(r)}},Cv=(function(){function A(){}return A.getOrigin=function(s){var n=A._link;return n?(n.href=s,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},A.isSameOrigin=function(s){return A.getOrigin(s)===A._origin},A.setContext=function(s){A._link=s.document.createElement("a"),A._origin=A.getOrigin(s.location.href)},A._origin="about:blank",A})(),HN=(function(){function A(s,n){this.context=s,this._options=n,this._cache={}}return A.prototype.addImage=function(s){var n=Promise.resolve();return this.has(s)||(Jm(s)||_N(s))&&(this._cache[s]=this.loadImage(s)).catch(function(){}),n},A.prototype.match=function(s){return this._cache[s]},A.prototype.loadImage=function(s){return fn(this,void 0,void 0,function(){var n,r,l,o,u=this;return $s(this,function(d){switch(d.label){case 0:return n=Cv.isSameOrigin(s),r=!Gm(s)&&this._options.useCORS===!0&&Ms.SUPPORT_CORS_IMAGES&&!n,l=!Gm(s)&&!n&&!Jm(s)&&typeof this._options.proxy=="string"&&Ms.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!Gm(s)&&!Jm(s)&&!l&&!r?[2]:(o=s,l?[4,this.proxy(o)]:[3,2]);case 1:o=d.sent(),d.label=2;case 2:return this.context.logger.debug("Added image "+s.substring(0,256)),[4,new Promise(function(h,m){var w=new Image;w.onload=function(){return h(w)},w.onerror=m,(RN(o)||r)&&(w.crossOrigin="anonymous"),w.src=o,w.complete===!0&&setTimeout(function(){return h(w)},500),u._options.imageTimeout>0&&setTimeout(function(){return m("Timed out ("+u._options.imageTimeout+"ms) loading image")},u._options.imageTimeout)})];case 3:return[2,d.sent()]}})})},A.prototype.has=function(s){return typeof this._cache[s]<"u"},A.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},A.prototype.proxy=function(s){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var l=s.substring(0,256);return new Promise(function(o,u){var d=Ms.SUPPORT_RESPONSE_TYPE?"blob":"text",h=new XMLHttpRequest;h.onload=function(){if(h.status===200)if(d==="text")o(h.response);else{var v=new FileReader;v.addEventListener("load",function(){return o(v.result)},!1),v.addEventListener("error",function(B){return u(B)},!1),v.readAsDataURL(h.response)}else u("Failed to proxy resource "+l+" with status code "+h.status)},h.onerror=u;var m=r.indexOf("?")>-1?"&":"?";if(h.open("GET",""+r+m+"url="+encodeURIComponent(s)+"&responseType="+d),d!=="text"&&h instanceof XMLHttpRequest&&(h.responseType=d),n._options.imageTimeout){var w=n._options.imageTimeout;h.timeout=w,h.ontimeout=function(){return u("Timed out ("+w+"ms) proxying "+l)}}h.send()})},A})(),MN=/^data:image\/svg\+xml/i,ON=/^data:image\/.*;base64,/i,kN=/^data:image\/.*/i,_N=function(A){return Ms.SUPPORT_SVG_DRAWING||!PN(A)},Gm=function(A){return kN.test(A)},RN=function(A){return ON.test(A)},Jm=function(A){return A.substr(0,4)==="blob"},PN=function(A){return A.substr(-3).toLowerCase()==="svg"||MN.test(A)},Et=(function(){function A(s,n){this.type=0,this.x=s,this.y=n}return A.prototype.add=function(s,n){return new A(this.x+s,this.y+n)},A})(),Ec=function(A,s,n){return new Et(A.x+(s.x-A.x)*n,A.y+(s.y-A.y)*n)},dh=(function(){function A(s,n,r,l){this.type=1,this.start=s,this.startControl=n,this.endControl=r,this.end=l}return A.prototype.subdivide=function(s,n){var r=Ec(this.start,this.startControl,s),l=Ec(this.startControl,this.endControl,s),o=Ec(this.endControl,this.end,s),u=Ec(r,l,s),d=Ec(l,o,s),h=Ec(u,d,s);return n?new A(this.start,r,u,h):new A(h,d,o,this.end)},A.prototype.add=function(s,n){return new A(this.start.add(s,n),this.startControl.add(s,n),this.endControl.add(s,n),this.end.add(s,n))},A.prototype.reverse=function(){return new A(this.end,this.endControl,this.startControl,this.start)},A})(),vr=function(A){return A.type===1},KN=(function(){function A(s){var n=s.styles,r=s.bounds,l=_u(n.borderTopLeftRadius,r.width,r.height),o=l[0],u=l[1],d=_u(n.borderTopRightRadius,r.width,r.height),h=d[0],m=d[1],w=_u(n.borderBottomRightRadius,r.width,r.height),v=w[0],B=w[1],x=_u(n.borderBottomLeftRadius,r.width,r.height),C=x[0],N=x[1],L=[];L.push((o+h)/r.width),L.push((C+v)/r.width),L.push((u+N)/r.height),L.push((m+B)/r.height);var F=Math.max.apply(Math,L);F>1&&(o/=F,u/=F,h/=F,m/=F,v/=F,B/=F,C/=F,N/=F);var Q=r.width-h,_=r.height-B,te=r.width-v,O=r.height-N,k=n.borderTopWidth,P=n.borderRightWidth,E=n.borderBottomWidth,D=n.borderLeftWidth,G=fa(n.paddingTop,s.bounds.width),T=fa(n.paddingRight,s.bounds.width),R=fa(n.paddingBottom,s.bounds.width),V=fa(n.paddingLeft,s.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||u>0?ja(r.left+D/3,r.top+k/3,o-D/3,u-k/3,PA.TOP_LEFT):new Et(r.left+D/3,r.top+k/3),this.topRightBorderDoubleOuterBox=o>0||u>0?ja(r.left+Q,r.top+k/3,h-P/3,m-k/3,PA.TOP_RIGHT):new Et(r.left+r.width-P/3,r.top+k/3),this.bottomRightBorderDoubleOuterBox=v>0||B>0?ja(r.left+te,r.top+_,v-P/3,B-E/3,PA.BOTTOM_RIGHT):new Et(r.left+r.width-P/3,r.top+r.height-E/3),this.bottomLeftBorderDoubleOuterBox=C>0||N>0?ja(r.left+D/3,r.top+O,C-D/3,N-E/3,PA.BOTTOM_LEFT):new Et(r.left+D/3,r.top+r.height-E/3),this.topLeftBorderDoubleInnerBox=o>0||u>0?ja(r.left+D*2/3,r.top+k*2/3,o-D*2/3,u-k*2/3,PA.TOP_LEFT):new Et(r.left+D*2/3,r.top+k*2/3),this.topRightBorderDoubleInnerBox=o>0||u>0?ja(r.left+Q,r.top+k*2/3,h-P*2/3,m-k*2/3,PA.TOP_RIGHT):new Et(r.left+r.width-P*2/3,r.top+k*2/3),this.bottomRightBorderDoubleInnerBox=v>0||B>0?ja(r.left+te,r.top+_,v-P*2/3,B-E*2/3,PA.BOTTOM_RIGHT):new Et(r.left+r.width-P*2/3,r.top+r.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=C>0||N>0?ja(r.left+D*2/3,r.top+O,C-D*2/3,N-E*2/3,PA.BOTTOM_LEFT):new Et(r.left+D*2/3,r.top+r.height-E*2/3),this.topLeftBorderStroke=o>0||u>0?ja(r.left+D/2,r.top+k/2,o-D/2,u-k/2,PA.TOP_LEFT):new Et(r.left+D/2,r.top+k/2),this.topRightBorderStroke=o>0||u>0?ja(r.left+Q,r.top+k/2,h-P/2,m-k/2,PA.TOP_RIGHT):new Et(r.left+r.width-P/2,r.top+k/2),this.bottomRightBorderStroke=v>0||B>0?ja(r.left+te,r.top+_,v-P/2,B-E/2,PA.BOTTOM_RIGHT):new Et(r.left+r.width-P/2,r.top+r.height-E/2),this.bottomLeftBorderStroke=C>0||N>0?ja(r.left+D/2,r.top+O,C-D/2,N-E/2,PA.BOTTOM_LEFT):new Et(r.left+D/2,r.top+r.height-E/2),this.topLeftBorderBox=o>0||u>0?ja(r.left,r.top,o,u,PA.TOP_LEFT):new Et(r.left,r.top),this.topRightBorderBox=h>0||m>0?ja(r.left+Q,r.top,h,m,PA.TOP_RIGHT):new Et(r.left+r.width,r.top),this.bottomRightBorderBox=v>0||B>0?ja(r.left+te,r.top+_,v,B,PA.BOTTOM_RIGHT):new Et(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=C>0||N>0?ja(r.left,r.top+O,C,N,PA.BOTTOM_LEFT):new Et(r.left,r.top+r.height),this.topLeftPaddingBox=o>0||u>0?ja(r.left+D,r.top+k,Math.max(0,o-D),Math.max(0,u-k),PA.TOP_LEFT):new Et(r.left+D,r.top+k),this.topRightPaddingBox=h>0||m>0?ja(r.left+Math.min(Q,r.width-P),r.top+k,Q>r.width+P?0:Math.max(0,h-P),Math.max(0,m-k),PA.TOP_RIGHT):new Et(r.left+r.width-P,r.top+k),this.bottomRightPaddingBox=v>0||B>0?ja(r.left+Math.min(te,r.width-D),r.top+Math.min(_,r.height-E),Math.max(0,v-P),Math.max(0,B-E),PA.BOTTOM_RIGHT):new Et(r.left+r.width-P,r.top+r.height-E),this.bottomLeftPaddingBox=C>0||N>0?ja(r.left+D,r.top+Math.min(O,r.height-E),Math.max(0,C-D),Math.max(0,N-E),PA.BOTTOM_LEFT):new Et(r.left+D,r.top+r.height-E),this.topLeftContentBox=o>0||u>0?ja(r.left+D+V,r.top+k+G,Math.max(0,o-(D+V)),Math.max(0,u-(k+G)),PA.TOP_LEFT):new Et(r.left+D+V,r.top+k+G),this.topRightContentBox=h>0||m>0?ja(r.left+Math.min(Q,r.width+D+V),r.top+k+G,Q>r.width+D+V?0:h-D+V,m-(k+G),PA.TOP_RIGHT):new Et(r.left+r.width-(P+T),r.top+k+G),this.bottomRightContentBox=v>0||B>0?ja(r.left+Math.min(te,r.width-(D+V)),r.top+Math.min(_,r.height+k+G),Math.max(0,v-(P+T)),B-(E+R),PA.BOTTOM_RIGHT):new Et(r.left+r.width-(P+T),r.top+r.height-(E+R)),this.bottomLeftContentBox=C>0||N>0?ja(r.left+D+V,r.top+O,Math.max(0,C-(D+V)),N-(E+R),PA.BOTTOM_LEFT):new Et(r.left+D+V,r.top+r.height-(E+R))}return A})(),PA;(function(A){A[A.TOP_LEFT=0]="TOP_LEFT",A[A.TOP_RIGHT=1]="TOP_RIGHT",A[A.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",A[A.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(PA||(PA={}));var ja=function(A,s,n,r,l){var o=4*((Math.sqrt(2)-1)/3),u=n*o,d=r*o,h=A+n,m=s+r;switch(l){case PA.TOP_LEFT:return new dh(new Et(A,m),new Et(A,m-d),new Et(h-u,s),new Et(h,s));case PA.TOP_RIGHT:return new dh(new Et(A,s),new Et(A+u,s),new Et(h,m-d),new Et(h,m));case PA.BOTTOM_RIGHT:return new dh(new Et(h,s),new Et(h,s+d),new Et(A+u,m),new Et(A,m));case PA.BOTTOM_LEFT:default:return new dh(new Et(h,m),new Et(h-u,m),new Et(A,s+d),new Et(A,s))}},Mh=function(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]},VN=function(A){return[A.topLeftContentBox,A.topRightContentBox,A.bottomRightContentBox,A.bottomLeftContentBox]},Oh=function(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]},zN=(function(){function A(s,n,r){this.offsetX=s,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return A})(),hh=(function(){function A(s,n){this.path=s,this.target=n,this.type=1}return A})(),qN=(function(){function A(s){this.opacity=s,this.type=2,this.target=6}return A})(),GN=function(A){return A.type===0},Nv=function(A){return A.type===1},JN=function(A){return A.type===2},L1=function(A,s){return A.length===s.length?A.some(function(n,r){return n===s[r]}):!1},XN=function(A,s,n,r,l){return A.map(function(o,u){switch(u){case 0:return o.add(s,n);case 1:return o.add(s+r,n);case 2:return o.add(s+r,n+l);case 3:return o.add(s,n+l)}return o})},jv=(function(){function A(s){this.element=s,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return A})(),Fv=(function(){function A(s,n){if(this.container=s,this.parent=n,this.effects=[],this.curves=new KN(this.container),this.container.styles.opacity<1&&this.effects.push(new qN(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,l=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new zN(r,l,o))}if(this.container.styles.overflowX!==0){var u=Mh(this.curves),d=Oh(this.curves);L1(u,d)?this.effects.push(new hh(u,6)):(this.effects.push(new hh(u,2)),this.effects.push(new hh(d,4)))}}return A.prototype.getEffects=function(s){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,l=this.effects.slice(0);r;){var o=r.effects.filter(function(h){return!Nv(h)});if(n||r.container.styles.position!==0||!r.parent){if(l.unshift.apply(l,o),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var u=Mh(r.curves),d=Oh(r.curves);L1(u,d)||l.unshift(new hh(d,6))}}else l.unshift.apply(l,o);r=r.parent}return l.filter(function(h){return ps(h.target,s)})},A})(),Q0=function(A,s,n,r){A.container.elements.forEach(function(l){var o=ps(l.flags,4),u=ps(l.flags,2),d=new Fv(l,A);ps(l.styles.display,2048)&&r.push(d);var h=ps(l.flags,8)?[]:r;if(o||u){var m=o||l.styles.isPositioned()?n:s,w=new jv(d);if(l.styles.isPositioned()||l.styles.opacity<1||l.styles.isTransformed()){var v=l.styles.zIndex.order;if(v<0){var B=0;m.negativeZIndex.some(function(C,N){return v>C.element.container.styles.zIndex.order?(B=N,!1):B>0}),m.negativeZIndex.splice(B,0,w)}else if(v>0){var x=0;m.positiveZIndex.some(function(C,N){return v>=C.element.container.styles.zIndex.order?(x=N+1,!1):x>0}),m.positiveZIndex.splice(x,0,w)}else m.zeroOrAutoZIndexOrTransformedOrOpacity.push(w)}else l.styles.isFloating()?m.nonPositionedFloats.push(w):m.nonPositionedInlineLevel.push(w);Q0(d,w,o?w:n,h)}else l.styles.isInlineLevel()?s.inlineLevel.push(d):s.nonInlineLevel.push(d),Q0(d,s,n,h);ps(l.flags,8)&&Sv(l,h)})},Sv=function(A,s){for(var n=A instanceof C0?A.start:1,r=A instanceof C0?A.reversed:!1,l=0;l<s.length;l++){var o=s[l];o.container instanceof uv&&typeof o.container.value=="number"&&o.container.value!==0&&(n=o.container.value),o.listValue=Wu(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},YN=function(A){var s=new Fv(A,null),n=new jv(s),r=[];return Q0(s,n,n,r),Sv(s.container,r),n},D1=function(A,s){switch(s){case 0:return Br(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return Br(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return Br(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);case 3:default:return Br(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}},ZN=function(A,s){switch(s){case 0:return Br(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return Br(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return Br(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);case 3:default:return Br(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}},WN=function(A,s){switch(s){case 0:return Br(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return Br(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return Br(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);case 3:default:return Br(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}},$N=function(A,s){switch(s){case 0:return fh(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return fh(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return fh(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);case 3:default:return fh(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}},fh=function(A,s){var n=[];return vr(A)?n.push(A.subdivide(.5,!1)):n.push(A),vr(s)?n.push(s.subdivide(.5,!0)):n.push(s),n},Br=function(A,s,n,r){var l=[];return vr(A)?l.push(A.subdivide(.5,!1)):l.push(A),vr(n)?l.push(n.subdivide(.5,!0)):l.push(n),vr(r)?l.push(r.subdivide(.5,!0).reverse()):l.push(r),vr(s)?l.push(s.subdivide(.5,!1).reverse()):l.push(s),l},Qv=function(A){var s=A.bounds,n=A.styles;return s.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},kh=function(A){var s=A.styles,n=A.bounds,r=fa(s.paddingLeft,n.width),l=fa(s.paddingRight,n.width),o=fa(s.paddingTop,n.width),u=fa(s.paddingBottom,n.width);return n.add(r+s.borderLeftWidth,o+s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth+r+l),-(s.borderTopWidth+s.borderBottomWidth+o+u))},e4=function(A,s){return A===0?s.bounds:A===2?kh(s):Qv(s)},t4=function(A,s){return A===0?s.bounds:A===2?kh(s):Qv(s)},Xm=function(A,s,n){var r=e4(Hc(A.styles.backgroundOrigin,s),A),l=t4(Hc(A.styles.backgroundClip,s),A),o=A4(Hc(A.styles.backgroundSize,s),n,r),u=o[0],d=o[1],h=_u(Hc(A.styles.backgroundPosition,s),r.width-u,r.height-d),m=a4(Hc(A.styles.backgroundRepeat,s),h,o,r,l),w=Math.round(r.left+h[0]),v=Math.round(r.top+h[1]);return[m,w,v,u,d]},Ic=function(A){return aa(A)&&A.value===Rc.AUTO},mh=function(A){return typeof A=="number"},A4=function(A,s,n){var r=s[0],l=s[1],o=s[2],u=A[0],d=A[1];if(!u)return[0,0];if(as(u)&&d&&as(d))return[fa(u,n.width),fa(d,n.height)];var h=mh(o);if(aa(u)&&(u.value===Rc.CONTAIN||u.value===Rc.COVER)){if(mh(o)){var m=n.width/n.height;return m<o!=(u.value===Rc.COVER)?[n.width,n.width/o]:[n.height*o,n.height]}return[n.width,n.height]}var w=mh(r),v=mh(l),B=w||v;if(Ic(u)&&(!d||Ic(d))){if(w&&v)return[r,l];if(!h&&!B)return[n.width,n.height];if(B&&h){var x=w?r:l*o,C=v?l:r/o;return[x,C]}var N=w?r:n.width,L=v?l:n.height;return[N,L]}if(h){var F=0,Q=0;return as(u)?F=fa(u,n.width):as(d)&&(Q=fa(d,n.height)),Ic(u)?F=Q*o:(!d||Ic(d))&&(Q=F/o),[F,Q]}var _=null,te=null;if(as(u)?_=fa(u,n.width):d&&as(d)&&(te=fa(d,n.height)),_!==null&&(!d||Ic(d))&&(te=w&&v?_/r*l:n.height),te!==null&&Ic(u)&&(_=w&&v?te/l*r:n.width),_!==null&&te!==null)return[_,te];throw new Error("Unable to calculate background-size for element")},Hc=function(A,s){var n=A[s];return typeof n>"u"?A[0]:n},a4=function(A,s,n,r,l){var o=s[0],u=s[1],d=n[0],h=n[1];switch(A){case 2:return[new Et(Math.round(r.left),Math.round(r.top+u)),new Et(Math.round(r.left+r.width),Math.round(r.top+u)),new Et(Math.round(r.left+r.width),Math.round(h+r.top+u)),new Et(Math.round(r.left),Math.round(h+r.top+u))];case 3:return[new Et(Math.round(r.left+o),Math.round(r.top)),new Et(Math.round(r.left+o+d),Math.round(r.top)),new Et(Math.round(r.left+o+d),Math.round(r.height+r.top)),new Et(Math.round(r.left+o),Math.round(r.height+r.top))];case 1:return[new Et(Math.round(r.left+o),Math.round(r.top+u)),new Et(Math.round(r.left+o+d),Math.round(r.top+u)),new Et(Math.round(r.left+o+d),Math.round(r.top+u+h)),new Et(Math.round(r.left+o),Math.round(r.top+u+h))];default:return[new Et(Math.round(l.left),Math.round(l.top)),new Et(Math.round(l.left+l.width),Math.round(l.top)),new Et(Math.round(l.left+l.width),Math.round(l.height+l.top)),new Et(Math.round(l.left),Math.round(l.height+l.top))]}},s4="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",T1="Hidden Text",n4=(function(){function A(s){this._data={},this._document=s}return A.prototype.parseMetrics=function(s,n){var r=this._document.createElement("div"),l=this._document.createElement("img"),o=this._document.createElement("span"),u=this._document.body;r.style.visibility="hidden",r.style.fontFamily=s,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",u.appendChild(r),l.src=s4,l.width=1,l.height=1,l.style.margin="0",l.style.padding="0",l.style.verticalAlign="baseline",o.style.fontFamily=s,o.style.fontSize=n,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(T1)),r.appendChild(o),r.appendChild(l);var d=l.offsetTop-o.offsetTop+2;r.removeChild(o),r.appendChild(this._document.createTextNode(T1)),r.style.lineHeight="normal",l.style.verticalAlign="super";var h=l.offsetTop-r.offsetTop+2;return u.removeChild(r),{baseline:d,middle:h}},A.prototype.getMetrics=function(s,n){var r=s+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(s,n)),this._data[r]},A})(),Uv=(function(){function A(s,n){this.context=s,this.options=n}return A})(),r4=1e4,i4=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;return l._activeEffects=[],l.canvas=r.canvas?r.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),r.canvas||(l.canvas.width=Math.floor(r.width*r.scale),l.canvas.height=Math.floor(r.height*r.scale),l.canvas.style.width=r.width+"px",l.canvas.style.height=r.height+"px"),l.fontMetrics=new n4(document),l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-r.x,-r.y),l.ctx.textBaseline="bottom",l._activeEffects=[],l.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),l}return s.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(l){return r.applyEffect(l)})},s.prototype.applyEffect=function(n){this.ctx.save(),JN(n)&&(this.ctx.globalAlpha=n.opacity),GN(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),Nv(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},s.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},s.prototype.renderStack=function(n){return fn(this,void 0,void 0,function(){var r;return $s(this,function(l){switch(l.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},s.prototype.renderNode=function(n){return fn(this,void 0,void 0,function(){return $s(this,function(r){switch(r.label){case 0:if(ps(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},s.prototype.renderTextWithLetterSpacing=function(n,r,l){var o=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+l);else{var u=W0(n.text);u.reduce(function(d,h){return o.ctx.fillText(h,d,n.bounds.top+l),d+o.ctx.measureText(h).width},n.bounds.left)}},s.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(u){return u==="normal"||u==="small-caps"}).join(""),l=d4(n.fontFamily).join(", "),o=ad(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,o,l].join(" "),l,o]},s.prototype.renderTextNode=function(n,r){return fn(this,void 0,void 0,function(){var l,o,u,d,h,m,w,v,B=this;return $s(this,function(x){return l=this.createFontStyle(r),o=l[0],u=l[1],d=l[2],this.ctx.font=o,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",h=this.fontMetrics.getMetrics(u,d),m=h.baseline,w=h.middle,v=r.paintOrder,n.textBounds.forEach(function(C){v.forEach(function(N){switch(N){case 0:B.ctx.fillStyle=Ss(r.color),B.renderTextWithLetterSpacing(C,r.letterSpacing,m);var L=r.textShadow;L.length&&C.text.trim().length&&(L.slice(0).reverse().forEach(function(F){B.ctx.shadowColor=Ss(F.color),B.ctx.shadowOffsetX=F.offsetX.number*B.options.scale,B.ctx.shadowOffsetY=F.offsetY.number*B.options.scale,B.ctx.shadowBlur=F.blur.number,B.renderTextWithLetterSpacing(C,r.letterSpacing,m)}),B.ctx.shadowColor="",B.ctx.shadowOffsetX=0,B.ctx.shadowOffsetY=0,B.ctx.shadowBlur=0),r.textDecorationLine.length&&(B.ctx.fillStyle=Ss(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(F){switch(F){case 1:B.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top+m),C.bounds.width,1);break;case 2:B.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top),C.bounds.width,1);break;case 3:B.ctx.fillRect(C.bounds.left,Math.ceil(C.bounds.top+w),C.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&C.text.trim().length&&(B.ctx.strokeStyle=Ss(r.webkitTextStrokeColor),B.ctx.lineWidth=r.webkitTextStrokeWidth,B.ctx.lineJoin=window.chrome?"miter":"round",B.ctx.strokeText(C.text,C.bounds.left,C.bounds.top+m)),B.ctx.strokeStyle="",B.ctx.lineWidth=0,B.ctx.lineJoin="miter";break}})}),[2]})})},s.prototype.renderReplacedElement=function(n,r,l){if(l&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var o=kh(n),u=Oh(r);this.path(u),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(l,0,0,n.intrinsicWidth,n.intrinsicHeight,o.left,o.top,o.width,o.height),this.ctx.restore()}},s.prototype.renderNodeContent=function(n){return fn(this,void 0,void 0,function(){var r,l,o,u,d,h,Q,Q,m,w,v,B,te,x,C,O,N,L,F,Q,_,te,O;return $s(this,function(k){switch(k.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,l=n.curves,o=r.styles,u=0,d=r.textNodes,k.label=1;case 1:return u<d.length?(h=d[u],[4,this.renderTextNode(h,o)]):[3,4];case 2:k.sent(),k.label=3;case 3:return u++,[3,1];case 4:if(!(r instanceof lv))return[3,8];k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return Q=k.sent(),this.renderReplacedElement(r,l,Q),[3,8];case 7:return k.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof ov&&this.renderReplacedElement(r,l,r.canvas),!(r instanceof cv))return[3,12];k.label=9;case 9:return k.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return Q=k.sent(),this.renderReplacedElement(r,l,Q),[3,12];case 11:return k.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof fv&&r.tree?(m=new s(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,m.render(r.tree)]):[3,14];case 13:w=k.sent(),r.width&&r.height&&this.ctx.drawImage(w,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),k.label=14;case 14:if(r instanceof $0&&(v=Math.min(r.bounds.width,r.bounds.height),r.type===Lh?r.checked&&(this.ctx.save(),this.path([new Et(r.bounds.left+v*.39363,r.bounds.top+v*.79),new Et(r.bounds.left+v*.16,r.bounds.top+v*.5549),new Et(r.bounds.left+v*.27347,r.bounds.top+v*.44071),new Et(r.bounds.left+v*.39694,r.bounds.top+v*.5649),new Et(r.bounds.left+v*.72983,r.bounds.top+v*.23),new Et(r.bounds.left+v*.84,r.bounds.top+v*.34085),new Et(r.bounds.left+v*.39363,r.bounds.top+v*.79)]),this.ctx.fillStyle=Ss(B1),this.ctx.fill(),this.ctx.restore()):r.type===Dh&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+v/2,r.bounds.top+v/2,v/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ss(B1),this.ctx.fill(),this.ctx.restore())),l4(r)&&r.value.length){switch(B=this.createFontStyle(o),te=B[0],x=B[1],C=this.fontMetrics.getMetrics(te,x).baseline,this.ctx.font=te,this.ctx.fillStyle=Ss(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=c4(r.styles.textAlign),O=kh(r),N=0,r.styles.textAlign){case 1:N+=O.width/2;break;case 2:N+=O.width;break}L=O.add(N,0,0,-O.height/2+1),this.ctx.save(),this.path([new Et(O.left,O.top),new Et(O.left+O.width,O.top),new Et(O.left+O.width,O.top+O.height),new Et(O.left,O.top+O.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Gu(r.value,L),o.letterSpacing,C),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ps(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(F=r.styles.listStyleImage,F.type!==0)return[3,18];Q=void 0,_=F.url,k.label=15;case 15:return k.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return Q=k.sent(),this.ctx.drawImage(Q,r.bounds.left-(Q.width+10),r.bounds.top),[3,18];case 17:return k.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(te=this.createFontStyle(o)[0],this.ctx.font=te,this.ctx.fillStyle=Ss(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",O=new fl(r.bounds.left,r.bounds.top+fa(r.styles.paddingTop,r.bounds.width),r.bounds.width,n1(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Gu(n.listValue,O),o.letterSpacing,n1(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),k.label=20;case 20:return[2]}})})},s.prototype.renderStackContent=function(n){return fn(this,void 0,void 0,function(){var r,l,F,o,u,F,d,h,F,m,w,F,v,B,F,x,C,F,N,L,F;return $s(this,function(Q){switch(Q.label){case 0:if(ps(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:Q.sent(),r=0,l=n.negativeZIndex,Q.label=2;case 2:return r<l.length?(F=l[r],[4,this.renderStack(F)]):[3,5];case 3:Q.sent(),Q.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:Q.sent(),o=0,u=n.nonInlineLevel,Q.label=7;case 7:return o<u.length?(F=u[o],[4,this.renderNode(F)]):[3,10];case 8:Q.sent(),Q.label=9;case 9:return o++,[3,7];case 10:d=0,h=n.nonPositionedFloats,Q.label=11;case 11:return d<h.length?(F=h[d],[4,this.renderStack(F)]):[3,14];case 12:Q.sent(),Q.label=13;case 13:return d++,[3,11];case 14:m=0,w=n.nonPositionedInlineLevel,Q.label=15;case 15:return m<w.length?(F=w[m],[4,this.renderStack(F)]):[3,18];case 16:Q.sent(),Q.label=17;case 17:return m++,[3,15];case 18:v=0,B=n.inlineLevel,Q.label=19;case 19:return v<B.length?(F=B[v],[4,this.renderNode(F)]):[3,22];case 20:Q.sent(),Q.label=21;case 21:return v++,[3,19];case 22:x=0,C=n.zeroOrAutoZIndexOrTransformedOrOpacity,Q.label=23;case 23:return x<C.length?(F=C[x],[4,this.renderStack(F)]):[3,26];case 24:Q.sent(),Q.label=25;case 25:return x++,[3,23];case 26:N=0,L=n.positiveZIndex,Q.label=27;case 27:return N<L.length?(F=L[N],[4,this.renderStack(F)]):[3,30];case 28:Q.sent(),Q.label=29;case 29:return N++,[3,27];case 30:return[2]}})})},s.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},s.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},s.prototype.formatPath=function(n){var r=this;n.forEach(function(l,o){var u=vr(l)?l.start:l;o===0?r.ctx.moveTo(u.x,u.y):r.ctx.lineTo(u.x,u.y),vr(l)&&r.ctx.bezierCurveTo(l.startControl.x,l.startControl.y,l.endControl.x,l.endControl.y,l.end.x,l.end.y)})},s.prototype.renderRepeat=function(n,r,l,o){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(l,o),this.ctx.fill(),this.ctx.translate(-l,-o)},s.prototype.resizeImage=function(n,r,l){var o;if(n.width===r&&n.height===l)return n;var u=(o=this.canvas.ownerDocument)!==null&&o!==void 0?o:document,d=u.createElement("canvas");d.width=Math.max(1,r),d.height=Math.max(1,l);var h=d.getContext("2d");return h.drawImage(n,0,0,n.width,n.height,0,0,r,l),d},s.prototype.renderBackgroundImage=function(n){return fn(this,void 0,void 0,function(){var r,l,o,u,d,h;return $s(this,function(m){switch(m.label){case 0:r=n.styles.backgroundImage.length-1,l=function(w){var v,B,x,G,S,M,V,Z,E,C,G,S,M,V,Z,N,L,F,Q,_,te,O,k,P,E,D,G,T,R,V,Z,ue,S,M,Y,le,de,J,U,X,ee,re;return $s(this,function(fe){switch(fe.label){case 0:if(w.type!==0)return[3,5];v=void 0,B=w.url,fe.label=1;case 1:return fe.trys.push([1,3,,4]),[4,o.context.cache.match(B)];case 2:return v=fe.sent(),[3,4];case 3:return fe.sent(),o.context.logger.error("Error loading background-image "+B),[3,4];case 4:return v&&(x=Xm(n,r,[v.width,v.height,v.width/v.height]),G=x[0],S=x[1],M=x[2],V=x[3],Z=x[4],E=o.ctx.createPattern(o.resizeImage(v,V,Z),"repeat"),o.renderRepeat(G,E,S,M)),[3,6];case 5:GB(w)?(C=Xm(n,r,[null,null,null]),G=C[0],S=C[1],M=C[2],V=C[3],Z=C[4],N=PB(w.angle,V,Z),L=N[0],F=N[1],Q=N[2],_=N[3],te=N[4],O=document.createElement("canvas"),O.width=V,O.height=Z,k=O.getContext("2d"),P=k.createLinearGradient(F,_,Q,te),a1(w.stops,L).forEach(function(ve){return P.addColorStop(ve.stop,Ss(ve.color))}),k.fillStyle=P,k.fillRect(0,0,V,Z),V>0&&Z>0&&(E=o.ctx.createPattern(O,"repeat"),o.renderRepeat(G,E,S,M))):JB(w)&&(D=Xm(n,r,[null,null,null]),G=D[0],T=D[1],R=D[2],V=D[3],Z=D[4],ue=w.position.length===0?[X0]:w.position,S=fa(ue[0],V),M=fa(ue[ue.length-1],Z),Y=KB(w,S,M,V,Z),le=Y[0],de=Y[1],le>0&&de>0&&(J=o.ctx.createRadialGradient(T+S,R+M,0,T+S,R+M,le),a1(w.stops,le*2).forEach(function(ve){return J.addColorStop(ve.stop,Ss(ve.color))}),o.path(G),o.ctx.fillStyle=J,le!==de?(U=n.bounds.left+.5*n.bounds.width,X=n.bounds.top+.5*n.bounds.height,ee=de/le,re=1/ee,o.ctx.save(),o.ctx.translate(U,X),o.ctx.transform(1,0,0,ee,0,0),o.ctx.translate(-U,-X),o.ctx.fillRect(T,re*(R-X)+X,V,Z*re),o.ctx.restore()):o.ctx.fill())),fe.label=6;case 6:return r--,[2]}})},o=this,u=0,d=n.styles.backgroundImage.slice(0).reverse(),m.label=1;case 1:return u<d.length?(h=d[u],[5,l(h)]):[3,4];case 2:m.sent(),m.label=3;case 3:return u++,[3,1];case 4:return[2]}})})},s.prototype.renderSolidBorder=function(n,r,l){return fn(this,void 0,void 0,function(){return $s(this,function(o){return this.path(D1(l,r)),this.ctx.fillStyle=Ss(n),this.ctx.fill(),[2]})})},s.prototype.renderDoubleBorder=function(n,r,l,o){return fn(this,void 0,void 0,function(){var u,d;return $s(this,function(h){switch(h.label){case 0:return r<3?[4,this.renderSolidBorder(n,l,o)]:[3,2];case 1:return h.sent(),[2];case 2:return u=ZN(o,l),this.path(u),this.ctx.fillStyle=Ss(n),this.ctx.fill(),d=WN(o,l),this.path(d),this.ctx.fill(),[2]}})})},s.prototype.renderNodeBackgroundAndBorders=function(n){return fn(this,void 0,void 0,function(){var r,l,o,u,d,h,m,w,v=this;return $s(this,function(B){switch(B.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,l=!ho(r.backgroundColor)||r.backgroundImage.length,o=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],u=o4(Hc(r.backgroundClip,0),n.curves),l||r.boxShadow.length?(this.ctx.save(),this.path(u),this.ctx.clip(),ho(r.backgroundColor)||(this.ctx.fillStyle=Ss(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:B.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(x){v.ctx.save();var C=Mh(n.curves),N=x.inset?0:r4,L=XN(C,-N+(x.inset?1:-1)*x.spread.number,(x.inset?1:-1)*x.spread.number,x.spread.number*(x.inset?-2:2),x.spread.number*(x.inset?-2:2));x.inset?(v.path(C),v.ctx.clip(),v.mask(L)):(v.mask(C),v.ctx.clip(),v.path(L)),v.ctx.shadowOffsetX=x.offsetX.number+N,v.ctx.shadowOffsetY=x.offsetY.number,v.ctx.shadowColor=Ss(x.color),v.ctx.shadowBlur=x.blur.number,v.ctx.fillStyle=x.inset?Ss(x.color):"rgba(0,0,0,1)",v.ctx.fill(),v.ctx.restore()}),B.label=2;case 2:d=0,h=0,m=o,B.label=3;case 3:return h<m.length?(w=m[h],w.style!==0&&!ho(w.color)&&w.width>0?w.style!==2?[3,5]:[4,this.renderDashedDottedBorder(w.color,w.width,d,n.curves,2)]:[3,11]):[3,13];case 4:return B.sent(),[3,11];case 5:return w.style!==3?[3,7]:[4,this.renderDashedDottedBorder(w.color,w.width,d,n.curves,3)];case 6:return B.sent(),[3,11];case 7:return w.style!==4?[3,9]:[4,this.renderDoubleBorder(w.color,w.width,d,n.curves)];case 8:return B.sent(),[3,11];case 9:return[4,this.renderSolidBorder(w.color,d,n.curves)];case 10:B.sent(),B.label=11;case 11:d++,B.label=12;case 12:return h++,[3,3];case 13:return[2]}})})},s.prototype.renderDashedDottedBorder=function(n,r,l,o,u){return fn(this,void 0,void 0,function(){var d,h,m,w,v,B,x,C,N,L,F,Q,_,te,O,k,O,k;return $s(this,function(P){return this.ctx.save(),d=$N(o,l),h=D1(o,l),u===2&&(this.path(h),this.ctx.clip()),vr(h[0])?(m=h[0].start.x,w=h[0].start.y):(m=h[0].x,w=h[0].y),vr(h[1])?(v=h[1].end.x,B=h[1].end.y):(v=h[1].x,B=h[1].y),l===0||l===2?x=Math.abs(m-v):x=Math.abs(w-B),this.ctx.beginPath(),u===3?this.formatPath(d):this.formatPath(h.slice(0,2)),C=r<3?r*3:r*2,N=r<3?r*2:r,u===3&&(C=r,N=r),L=!0,x<=C*2?L=!1:x<=C*2+N?(F=x/(2*C+N),C*=F,N*=F):(Q=Math.floor((x+N)/(C+N)),_=(x-Q*C)/(Q-1),te=(x-(Q+1)*C)/Q,N=te<=0||Math.abs(N-_)<Math.abs(N-te)?_:te),L&&(u===3?this.ctx.setLineDash([0,C+N]):this.ctx.setLineDash([C,N])),u===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Ss(n),this.ctx.stroke(),this.ctx.setLineDash([]),u===2&&(vr(h[0])&&(O=h[3],k=h[0],this.ctx.beginPath(),this.formatPath([new Et(O.end.x,O.end.y),new Et(k.start.x,k.start.y)]),this.ctx.stroke()),vr(h[1])&&(O=h[1],k=h[2],this.ctx.beginPath(),this.formatPath([new Et(O.end.x,O.end.y),new Et(k.start.x,k.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},s.prototype.render=function(n){return fn(this,void 0,void 0,function(){var r;return $s(this,function(l){switch(l.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ss(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=YN(n),[4,this.renderStack(r)];case 1:return l.sent(),this.applyEffects([]),[2,this.canvas]}})})},s})(Uv),l4=function(A){return A instanceof hv||A instanceof dv?!0:A instanceof $0&&A.type!==Dh&&A.type!==Lh},o4=function(A,s){switch(A){case 0:return Mh(s);case 2:return VN(s);case 1:default:return Oh(s)}},c4=function(A){switch(A){case 1:return"center";case 2:return"right";case 0:default:return"left"}},u4=["-apple-system","system-ui"],d4=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter(function(s){return u4.indexOf(s)===-1}):A},h4=(function(A){Gr(s,A);function s(n,r){var l=A.call(this,n,r)||this;return l.canvas=r.canvas?r.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),l.options=r,l.canvas.width=Math.floor(r.width*r.scale),l.canvas.height=Math.floor(r.height*r.scale),l.canvas.style.width=r.width+"px",l.canvas.style.height=r.height+"px",l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-r.x,-r.y),l.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),l}return s.prototype.render=function(n){return fn(this,void 0,void 0,function(){var r,l;return $s(this,function(o){switch(o.label){case 0:return r=y0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,f4(r)];case 1:return l=o.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ss(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(l,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},s})(Uv),f4=function(A){return new Promise(function(s,n){var r=new Image;r.onload=function(){s(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},m4=(function(){function A(s){var n=s.id,r=s.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return A.prototype.debug=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Gd([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},A.prototype.getTime=function(){return Date.now()-this.start},A.prototype.info=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Gd([this.id,this.getTime()+"ms"],s))},A.prototype.warn=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Gd([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},A.prototype.error=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Gd([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},A.instances={},A})(),p4=(function(){function A(s,n){var r;this.windowBounds=n,this.instanceName="#"+A.instanceCount++,this.logger=new m4({id:this.instanceName,enabled:s.logging}),this.cache=(r=s.cache)!==null&&r!==void 0?r:new HN(this,s)}return A.instanceCount=1,A})(),tp=function(A,s){return s===void 0&&(s={}),g4(A,s)};typeof window<"u"&&Cv.setContext(window);var g4=function(A,s){return fn(void 0,void 0,void 0,function(){var n,r,l,o,u,d,h,m,w,v,B,x,C,N,L,F,Q,_,te,O,P,k,P,E,D,G,T,R,V,Z,ue,S,M,Y,le,de,J,U,X,ee;return $s(this,function(re){switch(re.label){case 0:if(!A||typeof A!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=A.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return l={allowTaint:(E=s.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(D=s.imageTimeout)!==null&&D!==void 0?D:15e3,proxy:s.proxy,useCORS:(G=s.useCORS)!==null&&G!==void 0?G:!1},o=l0({logging:(T=s.logging)!==null&&T!==void 0?T:!0,cache:s.cache},l),u={windowWidth:(R=s.windowWidth)!==null&&R!==void 0?R:r.innerWidth,windowHeight:(V=s.windowHeight)!==null&&V!==void 0?V:r.innerHeight,scrollX:(Z=s.scrollX)!==null&&Z!==void 0?Z:r.pageXOffset,scrollY:(ue=s.scrollY)!==null&&ue!==void 0?ue:r.pageYOffset},d=new fl(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),h=new p4(o,d),m=(S=s.foreignObjectRendering)!==null&&S!==void 0?S:!1,w={allowTaint:(M=s.allowTaint)!==null&&M!==void 0?M:!1,onclone:s.onclone,ignoreElements:s.ignoreElements,inlineImages:m,copyStyles:m},h.logger.debug("Starting document clone with size "+d.width+"x"+d.height+" scrolled to "+-d.left+","+-d.top),v=new E1(h,A,w),B=v.clonedReferenceElement,B?[4,v.toIFrame(n,d)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=re.sent(),C=ep(B)||vN(B)?Xb(B.ownerDocument):Gh(h,B),N=C.width,L=C.height,F=C.left,Q=C.top,_=x4(h,B,s.backgroundColor),te={canvas:s.canvas,backgroundColor:_,scale:(le=(Y=s.scale)!==null&&Y!==void 0?Y:r.devicePixelRatio)!==null&&le!==void 0?le:1,x:((de=s.x)!==null&&de!==void 0?de:0)+F,y:((J=s.y)!==null&&J!==void 0?J:0)+Q,width:(U=s.width)!==null&&U!==void 0?U:Math.ceil(N),height:(X=s.height)!==null&&X!==void 0?X:Math.ceil(L)},m?(h.logger.debug("Document cloned, using foreign object rendering"),P=new h4(h,te),[4,P.render(B)]):[3,3];case 2:return O=re.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+F+","+Q+" with size "+N+"x"+L+" using computed rendering"),h.logger.debug("Starting DOM parsing"),k=pv(h,B),_===k.styles.backgroundColor&&(k.styles.backgroundColor=dl.TRANSPARENT),h.logger.debug("Starting renderer for element at "+te.x+","+te.y+" with size "+te.width+"x"+te.height),P=new i4(h,te),[4,P.render(k)];case 4:O=re.sent(),re.label=5;case 5:return(!((ee=s.removeContainer)!==null&&ee!==void 0)||ee)&&(E1.destroy(x)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,O]}})})},x4=function(A,s,n){var r=s.ownerDocument,l=r.documentElement?zu(A,getComputedStyle(r.documentElement).backgroundColor):dl.TRANSPARENT,o=r.body?zu(A,getComputedStyle(r.body).backgroundColor):dl.TRANSPARENT,u=typeof n=="string"?zu(A,n):n===null?dl.TRANSPARENT:4294967295;return s===r.documentElement?ho(l)?ho(o)?u:o:l:u};const v4=Object.freeze(Object.defineProperty({__proto__:null,default:tp},Symbol.toStringTag,{value:"Module"})),b4="modulepreload",w4=function(A){return"/"+A},H1={},U0=function(s,n,r){let l=Promise.resolve();if(n&&n.length>0){let u=function(m){return Promise.all(m.map(w=>Promise.resolve(w).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));l=u(n.map(m=>{if(m=w4(m),m in H1)return;H1[m]=!0;const w=m.endsWith(".css"),v=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const B=document.createElement("link");if(B.rel=w?"stylesheet":b4,w||(B.as="script"),B.crossOrigin="",B.href=m,h&&B.setAttribute("nonce",h),document.head.appendChild(B),w)return new Promise((x,C)=>{B.addEventListener("load",x),B.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return l.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return s().catch(o)})};function XA(A){"@babel/helpers - typeof";return XA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},XA(A)}var tn=Uint8Array,$n=Uint16Array,Ap=Int32Array,af=new tn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sf=new tn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E0=new tn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ev=function(A,s){for(var n=new $n(31),r=0;r<31;++r)n[r]=s+=1<<A[r-1];for(var l=new Ap(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)l[o]=o-n[r]<<5|r;return{b:n,r:l}},Iv=Ev(af,2),Lv=Iv.b,I0=Iv.r;Lv[28]=258,I0[258]=28;var Dv=Ev(sf,0),B4=Dv.b,M1=Dv.r,L0=new $n(32768);for(var va=0;va<32768;++va){var eo=(va&43690)>>1|(va&21845)<<1;eo=(eo&52428)>>2|(eo&13107)<<2,eo=(eo&61680)>>4|(eo&3855)<<4,L0[va]=((eo&65280)>>8|(eo&255)<<8)>>1}var Ui=(function(A,s,n){for(var r=A.length,l=0,o=new $n(s);l<r;++l)A[l]&&++o[A[l]-1];var u=new $n(s);for(l=1;l<s;++l)u[l]=u[l-1]+o[l-1]<<1;var d;if(n){d=new $n(1<<s);var h=15-s;for(l=0;l<r;++l)if(A[l])for(var m=l<<4|A[l],w=s-A[l],v=u[A[l]-1]++<<w,B=v|(1<<w)-1;v<=B;++v)d[L0[v]>>h]=m}else for(d=new $n(r),l=0;l<r;++l)A[l]&&(d[l]=L0[u[A[l]-1]++]>>15-A[l]);return d}),mo=new tn(288);for(var va=0;va<144;++va)mo[va]=8;for(var va=144;va<256;++va)mo[va]=9;for(var va=256;va<280;++va)mo[va]=7;for(var va=280;va<288;++va)mo[va]=8;var $u=new tn(32);for(var va=0;va<32;++va)$u[va]=5;var y4=Ui(mo,9,0),C4=Ui(mo,9,1),N4=Ui($u,5,0),j4=Ui($u,5,1),Ym=function(A){for(var s=A[0],n=1;n<A.length;++n)A[n]>s&&(s=A[n]);return s},Kr=function(A,s,n){var r=s/8|0;return(A[r]|A[r+1]<<8)>>(s&7)&n},Zm=function(A,s){var n=s/8|0;return(A[n]|A[n+1]<<8|A[n+2]<<16)>>(s&7)},ap=function(A){return(A+7)/8|0},Tv=function(A,s,n){return(n==null||n>A.length)&&(n=A.length),new tn(A.subarray(s,n))},F4=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],qr=function(A,s,n){var r=new Error(s||F4[A]);if(r.code=A,Error.captureStackTrace&&Error.captureStackTrace(r,qr),!n)throw r;return r},S4=function(A,s,n,r){var l=A.length,o=0;if(!l||s.f&&!s.l)return n||new tn(0);var u=!n,d=u||s.i!=2,h=s.i;u&&(n=new tn(l*3));var m=function(_e){var $e=n.length;if(_e>$e){var Ue=new tn(Math.max($e*2,_e));Ue.set(n),n=Ue}},w=s.f||0,v=s.p||0,B=s.b||0,x=s.l,C=s.d,N=s.m,L=s.n,F=l*8;do{if(!x){w=Kr(A,v,1);var Q=Kr(A,v+1,3);if(v+=3,Q)if(Q==1)x=C4,C=j4,N=9,L=5;else if(Q==2){var k=Kr(A,v,31)+257,P=Kr(A,v+10,15)+4,E=k+Kr(A,v+5,31)+1;v+=14;for(var D=new tn(E),G=new tn(19),T=0;T<P;++T)G[E0[T]]=Kr(A,v+T*3,7);v+=P*3;for(var R=Ym(G),V=(1<<R)-1,Z=Ui(G,R,1),T=0;T<E;){var ue=Z[Kr(A,v,V)];v+=ue&15;var _=ue>>4;if(_<16)D[T++]=_;else{var S=0,M=0;for(_==16?(M=3+Kr(A,v,3),v+=2,S=D[T-1]):_==17?(M=3+Kr(A,v,7),v+=3):_==18&&(M=11+Kr(A,v,127),v+=7);M--;)D[T++]=S}}var Y=D.subarray(0,k),le=D.subarray(k);N=Ym(Y),L=Ym(le),x=Ui(Y,N,1),C=Ui(le,L,1)}else qr(1);else{var _=ap(v)+4,te=A[_-4]|A[_-3]<<8,O=_+te;if(O>l){h&&qr(0);break}d&&m(B+te),n.set(A.subarray(_,O),B),s.b=B+=te,s.p=v=O*8,s.f=w;continue}if(v>F){h&&qr(0);break}}d&&m(B+131072);for(var de=(1<<N)-1,J=(1<<L)-1,U=v;;U=v){var S=x[Zm(A,v)&de],X=S>>4;if(v+=S&15,v>F){h&&qr(0);break}if(S||qr(2),X<256)n[B++]=X;else if(X==256){U=v,x=null;break}else{var ee=X-254;if(X>264){var T=X-257,re=af[T];ee=Kr(A,v,(1<<re)-1)+Lv[T],v+=re}var fe=C[Zm(A,v)&J],ve=fe>>4;fe||qr(3),v+=fe&15;var le=B4[ve];if(ve>3){var re=sf[ve];le+=Zm(A,v)&(1<<re)-1,v+=re}if(v>F){h&&qr(0);break}d&&m(B+131072);var xe=B+ee;if(B<le){var Ce=o-le,st=Math.min(le,xe);for(Ce+B<0&&qr(3);B<st;++B)n[B]=r[Ce+B]}for(;B<xe;++B)n[B]=n[B-le]}}s.l=x,s.p=U,s.b=B,s.f=w,x&&(w=1,s.m=N,s.d=C,s.n=L)}while(!w);return B!=n.length&&u?Tv(n,0,B):n.subarray(0,B)},ul=function(A,s,n){n<<=s&7;var r=s/8|0;A[r]|=n,A[r+1]|=n>>8},Lu=function(A,s,n){n<<=s&7;var r=s/8|0;A[r]|=n,A[r+1]|=n>>8,A[r+2]|=n>>16},Wm=function(A,s){for(var n=[],r=0;r<A.length;++r)A[r]&&n.push({s:r,f:A[r]});var l=n.length,o=n.slice();if(!l)return{t:Mv,l:0};if(l==1){var u=new tn(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(O,k){return O.f-k.f}),n.push({s:-1,f:25001});var d=n[0],h=n[1],m=0,w=1,v=2;for(n[0]={s:-1,f:d.f+h.f,l:d,r:h};w!=l-1;)d=n[n[m].f<n[v].f?m++:v++],h=n[m!=w&&n[m].f<n[v].f?m++:v++],n[w++]={s:-1,f:d.f+h.f,l:d,r:h};for(var B=o[0].s,r=1;r<l;++r)o[r].s>B&&(B=o[r].s);var x=new $n(B+1),C=D0(n[w-1],x,0);if(C>s){var r=0,N=0,L=C-s,F=1<<L;for(o.sort(function(k,P){return x[P.s]-x[k.s]||k.f-P.f});r<l;++r){var Q=o[r].s;if(x[Q]>s)N+=F-(1<<C-x[Q]),x[Q]=s;else break}for(N>>=L;N>0;){var _=o[r].s;x[_]<s?N-=1<<s-x[_]++-1:++r}for(;r>=0&&N;--r){var te=o[r].s;x[te]==s&&(--x[te],++N)}C=s}return{t:new tn(x),l:C}},D0=function(A,s,n){return A.s==-1?Math.max(D0(A.l,s,n+1),D0(A.r,s,n+1)):s[A.s]=n},O1=function(A){for(var s=A.length;s&&!A[--s];);for(var n=new $n(++s),r=0,l=A[0],o=1,u=function(h){n[r++]=h},d=1;d<=s;++d)if(A[d]==l&&d!=s)++o;else{if(!l&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(l),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(l);o=1,l=A[d]}return{c:n.subarray(0,r),n:s}},Du=function(A,s){for(var n=0,r=0;r<s.length;++r)n+=A[r]*s[r];return n},Hv=function(A,s,n){var r=n.length,l=ap(s+2);A[l]=r&255,A[l+1]=r>>8,A[l+2]=A[l]^255,A[l+3]=A[l+1]^255;for(var o=0;o<r;++o)A[l+o+4]=n[o];return(l+4+r)*8},k1=function(A,s,n,r,l,o,u,d,h,m,w){ul(s,w++,n),++l[256];for(var v=Wm(l,15),B=v.t,x=v.l,C=Wm(o,15),N=C.t,L=C.l,F=O1(B),Q=F.c,_=F.n,te=O1(N),O=te.c,k=te.n,P=new $n(19),E=0;E<Q.length;++E)++P[Q[E]&31];for(var E=0;E<O.length;++E)++P[O[E]&31];for(var D=Wm(P,7),G=D.t,T=D.l,R=19;R>4&&!G[E0[R-1]];--R);var V=m+5<<3,Z=Du(l,mo)+Du(o,$u)+u,ue=Du(l,B)+Du(o,N)+u+14+3*R+Du(P,G)+2*P[16]+3*P[17]+7*P[18];if(h>=0&&V<=Z&&V<=ue)return Hv(s,w,A.subarray(h,h+m));var S,M,Y,le;if(ul(s,w,1+(ue<Z)),w+=2,ue<Z){S=Ui(B,x,0),M=B,Y=Ui(N,L,0),le=N;var de=Ui(G,T,0);ul(s,w,_-257),ul(s,w+5,k-1),ul(s,w+10,R-4),w+=14;for(var E=0;E<R;++E)ul(s,w+3*E,G[E0[E]]);w+=3*R;for(var J=[Q,O],U=0;U<2;++U)for(var X=J[U],E=0;E<X.length;++E){var ee=X[E]&31;ul(s,w,de[ee]),w+=G[ee],ee>15&&(ul(s,w,X[E]>>5&127),w+=X[E]>>12)}}else S=y4,M=mo,Y=N4,le=$u;for(var E=0;E<d;++E){var re=r[E];if(re>255){var ee=re>>18&31;Lu(s,w,S[ee+257]),w+=M[ee+257],ee>7&&(ul(s,w,re>>23&31),w+=af[ee]);var fe=re&31;Lu(s,w,Y[fe]),w+=le[fe],fe>3&&(Lu(s,w,re>>5&8191),w+=sf[fe])}else Lu(s,w,S[re]),w+=M[re]}return Lu(s,w,S[256]),w+M[256]},Q4=new Ap([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Mv=new tn(0),U4=function(A,s,n,r,l,o){var u=o.z||A.length,d=new tn(r+u+5*(1+Math.ceil(u/7e3))+l),h=d.subarray(r,d.length-l),m=o.l,w=(o.r||0)&7;if(s){w&&(h[0]=o.r>>3);for(var v=Q4[s-1],B=v>>13,x=v&8191,C=(1<<n)-1,N=o.p||new $n(32768),L=o.h||new $n(C+1),F=Math.ceil(n/3),Q=2*F,_=function(At){return(A[At]^A[At+1]<<F^A[At+2]<<Q)&C},te=new Ap(25e3),O=new $n(288),k=new $n(32),P=0,E=0,D=o.i||0,G=0,T=o.w||0,R=0;D+2<u;++D){var V=_(D),Z=D&32767,ue=L[V];if(N[Z]=ue,L[V]=Z,T<=D){var S=u-D;if((P>7e3||G>24576)&&(S>423||!m)){w=k1(A,h,0,te,O,k,E,G,R,D-R,w),G=P=E=0,R=D;for(var M=0;M<286;++M)O[M]=0;for(var M=0;M<30;++M)k[M]=0}var Y=2,le=0,de=x,J=Z-ue&32767;if(S>2&&V==_(D-J))for(var U=Math.min(B,S)-1,X=Math.min(32767,D),ee=Math.min(258,S);J<=X&&--de&&Z!=ue;){if(A[D+Y]==A[D+Y-J]){for(var re=0;re<ee&&A[D+re]==A[D+re-J];++re);if(re>Y){if(Y=re,le=J,re>U)break;for(var fe=Math.min(J,re-2),ve=0,M=0;M<fe;++M){var xe=D-J+M&32767,Ce=N[xe],st=xe-Ce&32767;st>ve&&(ve=st,ue=xe)}}}Z=ue,ue=N[Z],J+=Z-ue&32767}if(le){te[G++]=268435456|I0[Y]<<18|M1[le];var _e=I0[Y]&31,$e=M1[le]&31;E+=af[_e]+sf[$e],++O[257+_e],++k[$e],T=D+Y,++P}else te[G++]=A[D],++O[A[D]]}}for(D=Math.max(D,T);D<u;++D)te[G++]=A[D],++O[A[D]];w=k1(A,h,m,te,O,k,E,G,R,D-R,w),m||(o.r=w&7|h[w/8|0]<<3,w-=7,o.h=L,o.p=N,o.i=D,o.w=T)}else{for(var D=o.w||0;D<u+m;D+=65535){var Ue=D+65535;Ue>=u&&(h[w/8|0]=m,Ue=u),w=Hv(h,w+1,A.subarray(D,Ue))}o.i=u}return Tv(d,0,r+ap(w)+l)},Ov=function(){var A=1,s=0;return{p:function(n){for(var r=A,l=s,o=n.length|0,u=0;u!=o;){for(var d=Math.min(u+2655,o);u<d;++u)l+=r+=n[u];r=(r&65535)+15*(r>>16),l=(l&65535)+15*(l>>16)}A=r,s=l},d:function(){return A%=65521,s%=65521,(A&255)<<24|(A&65280)<<8|(s&255)<<8|s>>8}}},E4=function(A,s,n,r,l){if(!l&&(l={l:1},s.dictionary)){var o=s.dictionary.subarray(-32768),u=new tn(o.length+A.length);u.set(o),u.set(A,o.length),A=u,l.w=o.length}return U4(A,s.level==null?6:s.level,s.mem==null?l.l?Math.ceil(Math.max(8,Math.min(13,Math.log(A.length)))*1.5):20:12+s.mem,n,r,l)},kv=function(A,s,n){for(;n;++s)A[s]=n,n>>>=8},I4=function(A,s){var n=s.level,r=n==0?0:n<6?1:n==9?3:2;if(A[0]=120,A[1]=r<<6|(s.dictionary&&32),A[1]|=31-(A[0]<<8|A[1])%31,s.dictionary){var l=Ov();l.p(s.dictionary),kv(A,2,l.d())}},L4=function(A,s){return((A[0]&15)!=8||A[0]>>4>7||(A[0]<<8|A[1])%31)&&qr(6,"invalid zlib data"),(A[1]>>5&1)==1&&qr(6,"invalid zlib data: "+(A[1]&32?"need":"unexpected")+" dictionary"),(A[1]>>3&4)+2};function T0(A,s){s||(s={});var n=Ov();n.p(A);var r=E4(A,s,s.dictionary?6:2,4);return I4(r,s),kv(r,r.length-4,n.d()),r}function D4(A,s){return S4(A.subarray(L4(A),-4),{i:2},s,s)}var T4=typeof TextDecoder<"u"&&new TextDecoder,H4=0;try{T4.decode(Mv,{stream:!0}),H4=1}catch{}var tA=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function $m(){tA.console&&typeof tA.console.log=="function"&&tA.console.log.apply(tA.console,arguments)}var la={log:$m,warn:function(A){tA.console&&(typeof tA.console.warn=="function"?tA.console.warn.apply(tA.console,arguments):$m.call(null,arguments))},error:function(A){tA.console&&(typeof tA.console.error=="function"?tA.console.error.apply(tA.console,arguments):$m(A))}};function e0(A,s,n){var r=new XMLHttpRequest;r.open("GET",A),r.responseType="blob",r.onload=function(){Ho(r.response,s,n)},r.onerror=function(){la.error("could not download file")},r.send()}function _1(A){var s=new XMLHttpRequest;s.open("HEAD",A,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function ph(A){try{A.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),A.dispatchEvent(s)}}var Xu,H0,Ho=tA.saveAs||((typeof window>"u"?"undefined":XA(window))!=="object"||window!==tA?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(A,s,n){var r=tA.URL||tA.webkitURL,l=document.createElement("a");s=s||A.name||"download",l.download=s,l.rel="noopener",typeof A=="string"?(l.href=A,l.origin!==location.origin?_1(l.href)?e0(A,s,n):ph(l,l.target="_blank"):ph(l)):(l.href=r.createObjectURL(A),setTimeout((function(){r.revokeObjectURL(l.href)}),4e4),setTimeout((function(){ph(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(A,s,n){if(s=s||A.name||"download",typeof A=="string")if(_1(A))e0(A,s,n);else{var r=document.createElement("a");r.href=A,r.target="_blank",setTimeout((function(){ph(r)}))}else navigator.msSaveOrOpenBlob((function(l,o){return o===void 0?o={autoBom:!1}:XA(o)!=="object"&&(la.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l})(A,n),s)}:function(A,s,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof A=="string")return e0(A,s,n);var l=A.type==="application/octet-stream",o=/constructor/i.test(tA.HTMLElement)||tA.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||l&&o)&&(typeof FileReader>"u"?"undefined":XA(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var w=d.result;w=u?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=w:location=w,r=null},d.readAsDataURL(A)}else{var h=tA.URL||tA.webkitURL,m=h.createObjectURL(A);r?r.location=m:location.href=m,r=null,setTimeout((function(){h.revokeObjectURL(m)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _v(A){var s;A=A||"",this.ok=!1,A.charAt(0)=="#"&&(A=A.substr(1,6)),A={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[A=(A=A.replace(/ /g,"")).toLowerCase()]||A;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],r=0;r<n.length;r++){var l=n[r].re,o=n[r].process,u=l.exec(A);u&&(s=o(u),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),m=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),m.length==1&&(m="0"+m),"#"+d+h+m}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function t0(A,s){var n=A[0],r=A[1],l=A[2],o=A[3];n=Xs(n,r,l,o,s[0],7,-680876936),o=Xs(o,n,r,l,s[1],12,-389564586),l=Xs(l,o,n,r,s[2],17,606105819),r=Xs(r,l,o,n,s[3],22,-1044525330),n=Xs(n,r,l,o,s[4],7,-176418897),o=Xs(o,n,r,l,s[5],12,1200080426),l=Xs(l,o,n,r,s[6],17,-1473231341),r=Xs(r,l,o,n,s[7],22,-45705983),n=Xs(n,r,l,o,s[8],7,1770035416),o=Xs(o,n,r,l,s[9],12,-1958414417),l=Xs(l,o,n,r,s[10],17,-42063),r=Xs(r,l,o,n,s[11],22,-1990404162),n=Xs(n,r,l,o,s[12],7,1804603682),o=Xs(o,n,r,l,s[13],12,-40341101),l=Xs(l,o,n,r,s[14],17,-1502002290),n=Ys(n,r=Xs(r,l,o,n,s[15],22,1236535329),l,o,s[1],5,-165796510),o=Ys(o,n,r,l,s[6],9,-1069501632),l=Ys(l,o,n,r,s[11],14,643717713),r=Ys(r,l,o,n,s[0],20,-373897302),n=Ys(n,r,l,o,s[5],5,-701558691),o=Ys(o,n,r,l,s[10],9,38016083),l=Ys(l,o,n,r,s[15],14,-660478335),r=Ys(r,l,o,n,s[4],20,-405537848),n=Ys(n,r,l,o,s[9],5,568446438),o=Ys(o,n,r,l,s[14],9,-1019803690),l=Ys(l,o,n,r,s[3],14,-187363961),r=Ys(r,l,o,n,s[8],20,1163531501),n=Ys(n,r,l,o,s[13],5,-1444681467),o=Ys(o,n,r,l,s[2],9,-51403784),l=Ys(l,o,n,r,s[7],14,1735328473),n=Zs(n,r=Ys(r,l,o,n,s[12],20,-1926607734),l,o,s[5],4,-378558),o=Zs(o,n,r,l,s[8],11,-2022574463),l=Zs(l,o,n,r,s[11],16,1839030562),r=Zs(r,l,o,n,s[14],23,-35309556),n=Zs(n,r,l,o,s[1],4,-1530992060),o=Zs(o,n,r,l,s[4],11,1272893353),l=Zs(l,o,n,r,s[7],16,-155497632),r=Zs(r,l,o,n,s[10],23,-1094730640),n=Zs(n,r,l,o,s[13],4,681279174),o=Zs(o,n,r,l,s[0],11,-358537222),l=Zs(l,o,n,r,s[3],16,-722521979),r=Zs(r,l,o,n,s[6],23,76029189),n=Zs(n,r,l,o,s[9],4,-640364487),o=Zs(o,n,r,l,s[12],11,-421815835),l=Zs(l,o,n,r,s[15],16,530742520),n=Ws(n,r=Zs(r,l,o,n,s[2],23,-995338651),l,o,s[0],6,-198630844),o=Ws(o,n,r,l,s[7],10,1126891415),l=Ws(l,o,n,r,s[14],15,-1416354905),r=Ws(r,l,o,n,s[5],21,-57434055),n=Ws(n,r,l,o,s[12],6,1700485571),o=Ws(o,n,r,l,s[3],10,-1894986606),l=Ws(l,o,n,r,s[10],15,-1051523),r=Ws(r,l,o,n,s[1],21,-2054922799),n=Ws(n,r,l,o,s[8],6,1873313359),o=Ws(o,n,r,l,s[15],10,-30611744),l=Ws(l,o,n,r,s[6],15,-1560198380),r=Ws(r,l,o,n,s[13],21,1309151649),n=Ws(n,r,l,o,s[4],6,-145523070),o=Ws(o,n,r,l,s[11],10,-1120210379),l=Ws(l,o,n,r,s[2],15,718787259),r=Ws(r,l,o,n,s[9],21,-343485551),A[0]=lo(n,A[0]),A[1]=lo(r,A[1]),A[2]=lo(l,A[2]),A[3]=lo(o,A[3])}function nf(A,s,n,r,l,o){return s=lo(lo(s,A),lo(r,o)),lo(s<<l|s>>>32-l,n)}function Xs(A,s,n,r,l,o,u){return nf(s&n|~s&r,A,s,l,o,u)}function Ys(A,s,n,r,l,o,u){return nf(s&r|n&~r,A,s,l,o,u)}function Zs(A,s,n,r,l,o,u){return nf(s^n^r,A,s,l,o,u)}function Ws(A,s,n,r,l,o,u){return nf(n^(s|~r),A,s,l,o,u)}function Rv(A){var s,n=A.length,r=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=A.length;s+=64)t0(r,M4(A.substring(s-64,s)));A=A.substring(s-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<A.length;s++)l[s>>2]|=A.charCodeAt(s)<<(s%4<<3);if(l[s>>2]|=128<<(s%4<<3),s>55)for(t0(r,l),s=0;s<16;s++)l[s]=0;return l[14]=8*n,t0(r,l),r}function M4(A){var s,n=[];for(s=0;s<64;s+=4)n[s>>2]=A.charCodeAt(s)+(A.charCodeAt(s+1)<<8)+(A.charCodeAt(s+2)<<16)+(A.charCodeAt(s+3)<<24);return n}Xu=tA.atob.bind(tA),H0=tA.btoa.bind(tA);var R1="0123456789abcdef".split("");function O4(A){for(var s="",n=0;n<4;n++)s+=R1[A>>8*n+4&15]+R1[A>>8*n&15];return s}function k4(A){return String.fromCharCode((255&A)>>0,(65280&A)>>8,(16711680&A)>>16,(4278190080&A)>>24)}function M0(A){return Rv(A).map(k4).join("")}var _4=(function(A){for(var s=0;s<A.length;s++)A[s]=O4(A[s]);return A.join("")})(Rv("hello"))!="5d41402abc4b2a76b9719d911017c592";function lo(A,s){if(_4){var n=(65535&A)+(65535&s);return(A>>16)+(s>>16)+(n>>16)<<16|65535&n}return A+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function O0(A,s){var n,r,l,o;if(A!==n){for(var u=(l=A,o=1+(256/A.length>>0),new Array(o+1).join(l)),d=[],h=0;h<256;h++)d[h]=h;var m=0;for(h=0;h<256;h++){var w=d[h];m=(m+w+u.charCodeAt(h))%256,d[h]=d[m],d[m]=w}n=A,r=d}else d=r;var v=s.length,B=0,x=0,C="";for(h=0;h<v;h++)x=(x+(w=d[B=(B+1)%256]))%256,d[B]=d[x],d[x]=w,u=d[(d[B]+d[x])%256],C+=String.fromCharCode(s.charCodeAt(h)^u);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var P1={print:4,modify:8,copy:16,"annot-forms":32};function Mc(A,s,n,r){this.v=1,this.r=2;var l=192;A.forEach((function(d){if(P1.perm!==void 0)throw new Error("Invalid permission: "+d);l+=P1[d]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(s+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^l)),this.encryptionKey=M0(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=O0(this.encryptionKey,this.padding)}function Oc(A){if(/[^\u0000-\u00ff]/.test(A))throw new Error("Invalid PDF Name Object: "+A+", Only accept ASCII characters.");for(var s="",n=A.length,r=0;r<n;r++){var l=A.charCodeAt(r);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?s+="#"+("0"+l.toString(16)).slice(-2):s+=A[r]}return s}function K1(A){if(XA(A)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(n,r,l){if(l=l||!1,typeof n!="string"||typeof r!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(n)||(s[n]={});var o=Math.random().toString(35);return s[n][o]=[r,!!l],o},this.unsubscribe=function(n){for(var r in s)if(s[r][n])return delete s[r][n],Object.keys(s[r]).length===0&&delete s[r],!0;return!1},this.publish=function(n){if(s.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),l=[];for(var o in s[n]){var u=s[n][o];try{u[0].apply(A,r)}catch(d){tA.console&&la.error("jsPDF PubSub Error",d.message,d)}u[1]&&l.push(o)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function _h(A){if(!(this instanceof _h))return new _h(A);var s="opacity,stroke-opacity".split(",");for(var n in A)A.hasOwnProperty(n)&&s.indexOf(n)>=0&&(this[n]=A[n]);this.id="",this.objectNumber=-1}function Pv(A,s){this.gState=A,this.matrix=s,this.id="",this.objectNumber=-1}function Oo(A,s,n,r,l){if(!(this instanceof Oo))return new Oo(A,s,n,r,l);this.type=A==="axial"?2:3,this.coords=s,this.colors=n,Pv.call(this,r,l)}function _c(A,s,n,r,l){if(!(this instanceof _c))return new _c(A,s,n,r,l);this.boundingBox=A,this.xStep=s,this.yStep=n,this.stream="",this.cloneIndex=0,Pv.call(this,r,l)}function $t(A){var s,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],l=arguments[2],o=arguments[3],u=[],d=1,h=16,m="S",w=null;XA(A=A||{})==="object"&&(n=A.orientation,r=A.unit||r,l=A.format||l,o=A.compress||A.compressPdf||o,(w=A.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),d=typeof A.userUnit=="number"?Math.abs(A.userUnit):1,A.precision!==void 0&&(s=A.precision),A.floatPrecision!==void 0&&(h=A.floatPrecision),m=A.defaultPathOperation||"S"),u=A.filters||(o===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var v=A.putOnlyUsedFonts||!1,B={},x={internal:{},__private__:{}};x.__private__.PubSub=K1;var C="1.3",N=x.__private__.getPdfVersion=function(){return C};x.__private__.setPdfVersion=function(y){C=y};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return L};var F=x.__private__.getPageFormat=function(y){return L[y]};l=l||"a4";var Q={COMPAT:"compat",ADVANCED:"advanced"},_=Q.COMPAT;function te(){this.saveGraphicsState(),K(new Ot(Oe,0,0,-Oe,0,ni()*Oe).toString()+" cm"),this.setFontSize(this.getFontSize()/Oe),m="n",_=Q.ADVANCED}function O(){this.restoreGraphicsState(),m="S",_=Q.COMPAT}var k=x.__private__.combineFontStyleAndFontWeight=function(y,q){if(y=="bold"&&q=="normal"||y=="bold"&&q==400||y=="normal"&&q=="italic"||y=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(y=q==400||q==="normal"?y==="italic"?"italic":"normal":q!=700&&q!=="bold"||y!=="normal"?(q==700?"bold":q)+""+y:"bold"),y};x.advancedAPI=function(y){var q=_===Q.COMPAT;return q&&te.call(this),typeof y!="function"||(y(this),q&&O.call(this)),this},x.compatAPI=function(y){var q=_===Q.ADVANCED;return q&&O.call(this),typeof y!="function"||(y(this),q&&te.call(this)),this},x.isAdvancedAPI=function(){return _===Q.ADVANCED};var P,E=function(y){if(_!==Q.ADVANCED)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=x.roundToPrecision=x.__private__.roundToPrecision=function(y,q){var pe=s||q;if(isNaN(y)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(pe).replace(/0+$/,"")};P=x.hpf=x.__private__.hpf=typeof h=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return D(y,h)}:h==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return D(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return D(y,16)};var G=x.f2=x.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return D(y,2)},T=x.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return D(y,3)},R=x.scale=x.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return _===Q.COMPAT?y*Oe:_===Q.ADVANCED?y:void 0},V=function(y){return _===Q.COMPAT?ni()-y:_===Q.ADVANCED?y:void 0},Z=function(y){return R(V(y))};x.__private__.setPrecision=x.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(s=parseInt(y,10))};var ue,S="00000000000000000000000000000000",M=x.__private__.getFileId=function(){return S},Y=x.__private__.setFileId=function(y){return S=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():S.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),w!==null&&(WA=new Mc(w.userPermissions,w.userPassword,w.ownerPassword,S)),S};x.setFileId=function(y){return Y(y),this},x.getFileId=function(){return M()};var le=x.__private__.convertDateToPDFDate=function(y){var q=y.getTimezoneOffset(),pe=q<0?"+":"-",je=Math.floor(Math.abs(q/60)),ke=Math.abs(q%60),tt=[pe,ee(je),"'",ee(ke),"'"].join("");return["D:",y.getFullYear(),ee(y.getMonth()+1),ee(y.getDate()),ee(y.getHours()),ee(y.getMinutes()),ee(y.getSeconds()),tt].join("")},de=x.__private__.convertPDFDateToDate=function(y){var q=parseInt(y.substr(2,4),10),pe=parseInt(y.substr(6,2),10)-1,je=parseInt(y.substr(8,2),10),ke=parseInt(y.substr(10,2),10),tt=parseInt(y.substr(12,2),10),pt=parseInt(y.substr(14,2),10);return new Date(q,pe,je,ke,tt,pt,0)},J=x.__private__.setCreationDate=function(y){var q;if(y===void 0&&(y=new Date),y instanceof Date)q=le(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=y}return ue=q},U=x.__private__.getCreationDate=function(y){var q=ue;return y==="jsDate"&&(q=de(ue)),q};x.setCreationDate=function(y){return J(y),this},x.getCreationDate=function(y){return U(y)};var X,ee=x.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},re=x.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},fe=0,ve=[],xe=[],Ce=0,st=[],_e=[],$e=!1,Ue=xe,At=function(){fe=0,Ce=0,xe=[],ve=[],st=[],Ze=SA(),et=SA()};x.__private__.setCustomOutputDestination=function(y){$e=!0,Ue=y};var Le=function(y){$e||(Ue=y)};x.__private__.resetCustomOutputDestination=function(){$e=!1,Ue=xe};var K=x.__private__.out=function(y){return y=y.toString(),Ce+=y.length+1,Ue.push(y),Ue},Ge=x.__private__.write=function(y){return K(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},Ye=x.__private__.getArrayBuffer=function(y){for(var q=y.length,pe=new ArrayBuffer(q),je=new Uint8Array(pe);q--;)je[q]=y.charCodeAt(q);return pe},ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return ie};var Ne=A.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(y){return Ne=_===Q.ADVANCED?y/Oe:y,this};var Te,qe=x.__private__.getFontSize=x.getFontSize=function(){return _===Q.COMPAT?Ne:Ne*Oe},ot=A.R2L||!1;x.__private__.setR2L=x.setR2L=function(y){return ot=y,this},x.__private__.getR2L=x.getR2L=function(){return ot};var xt,Ct=x.__private__.setZoomMode=function(y){var q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))Te=y;else if(isNaN(y)){if(q.indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');Te=y}else Te=parseInt(y,10)};x.__private__.getZoomMode=function(){return Te};var Tt,Yt=x.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');xt=y};x.__private__.getPageMode=function(){return xt};var Pt=x.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');Tt=y};x.__private__.getLayoutMode=function(){return Tt},x.__private__.setDisplayMode=x.setDisplayMode=function(y,q,pe){return Ct(y),Pt(q),Yt(pe),this};var jt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(y){if(Object.keys(jt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return jt[y]},x.__private__.getDocumentProperties=function(){return jt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(y){for(var q in jt)jt.hasOwnProperty(q)&&y[q]&&(jt[q]=y[q]);return this},x.__private__.setDocumentProperty=function(y,q){if(Object.keys(jt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return jt[y]=q};var Qt,Oe,yt,mt,wt,Ft={},Fe={},vt=[],ft={},gt={},Jt={},MA={},VA=null,uA=0,Kt=[],lA=new K1(x),An=A.hotfixes||[],oa={},Ea={},Ia=[],Ot=function y(q,pe,je,ke,tt,pt){if(!(this instanceof y))return new y(q,pe,je,ke,tt,pt);isNaN(q)&&(q=1),isNaN(pe)&&(pe=0),isNaN(je)&&(je=0),isNaN(ke)&&(ke=1),isNaN(tt)&&(tt=0),isNaN(pt)&&(pt=0),this._matrix=[q,pe,je,ke,tt,pt]};Object.defineProperty(Ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(Ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(Ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(Ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(Ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(Ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(Ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(Ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(Ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(Ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(Ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(Ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(Ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ot.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(y)},Ot.prototype.multiply=function(y){var q=y.sx*this.sx+y.shy*this.shx,pe=y.sx*this.shy+y.shy*this.sy,je=y.shx*this.sx+y.sy*this.shx,ke=y.shx*this.shy+y.sy*this.sy,tt=y.tx*this.sx+y.ty*this.shx+this.tx,pt=y.tx*this.shy+y.ty*this.sy+this.ty;return new Ot(q,pe,je,ke,tt,pt)},Ot.prototype.decompose=function(){var y=this.sx,q=this.shy,pe=this.shx,je=this.sy,ke=this.tx,tt=this.ty,pt=Math.sqrt(y*y+q*q),Ut=(y/=pt)*pe+(q/=pt)*je;pe-=y*Ut,je-=q*Ut;var kt=Math.sqrt(pe*pe+je*je);return Ut/=kt,y*(je/=kt)<q*(pe/=kt)&&(y=-y,q=-q,Ut=-Ut,pt=-pt),{scale:new Ot(pt,0,0,kt,0,0),translate:new Ot(1,0,0,1,ke,tt),rotate:new Ot(y,q,-q,y,0,0),skew:new Ot(1,0,Ut,1,0,0)}},Ot.prototype.toString=function(y){return this.join(" ")},Ot.prototype.inversed=function(){var y=this.sx,q=this.shy,pe=this.shx,je=this.sy,ke=this.tx,tt=this.ty,pt=1/(y*je-q*pe),Ut=je*pt,kt=-q*pt,aA=-pe*pt,eA=y*pt;return new Ot(Ut,kt,aA,eA,-Ut*ke-aA*tt,-kt*ke-eA*tt)},Ot.prototype.applyToPoint=function(y){var q=y.x*this.sx+y.y*this.shx+this.tx,pe=y.x*this.shy+y.y*this.sy+this.ty;return new dA(q,pe)},Ot.prototype.applyToRectangle=function(y){var q=this.applyToPoint(y),pe=this.applyToPoint(new dA(y.x+y.w,y.y+y.h));return new BA(q.x,q.y,pe.x-q.x,pe.y-q.y)},Ot.prototype.clone=function(){var y=this.sx,q=this.shy,pe=this.shx,je=this.sy,ke=this.tx,tt=this.ty;return new Ot(y,q,pe,je,ke,tt)},x.Matrix=Ot;var gs=x.matrixMult=function(y,q){return q.multiply(y)},ns=new Ot(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=ns;var La=function(y,q){if(!gt[y]){var pe=(q instanceof Oo?"Sh":"P")+(Object.keys(ft).length+1).toString(10);q.id=pe,gt[y]=pe,ft[pe]=q,lA.publish("addPattern",q)}};x.ShadingPattern=Oo,x.TilingPattern=_c,x.addShadingPattern=function(y,q){return E("addShadingPattern()"),La(y,q),this},x.beginTilingPattern=function(y){E("beginTilingPattern()"),Vs(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},x.endTilingPattern=function(y,q){E("endTilingPattern()"),q.stream=_e[X].join(`
`),La(y,q),lA.publish("endTilingPattern",q),Ia.pop().restore()};var YA=x.__private__.newObject=function(){var y=SA();return Xt(y,!0),y},SA=x.__private__.newObjectDeferred=function(){return fe++,ve[fe]=function(){return Ce},fe},Xt=function(y,q){return q=typeof q=="boolean"&&q,ve[y]=Ce,q&&K(y+" 0 obj"),y},me=x.__private__.newAdditionalObject=function(){var y={objId:SA(),content:""};return st.push(y),y},Ze=SA(),et=SA(),rt=x.__private__.decodeColorString=function(y){var q=y.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length===5&&(q[4]==="k"||q[4]==="K")&&(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var pe=parseFloat(q[0]);q=[pe,pe,pe,"r"]}for(var je="#",ke=0;ke<3;ke++)je+=("0"+Math.floor(255*parseFloat(q[ke])).toString(16)).slice(-2);return je},Xe=x.__private__.encodeColorString=function(y){var q;typeof y=="string"&&(y={ch1:y});var pe=y.ch1,je=y.ch2,ke=y.ch3,tt=y.ch4,pt=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var Ut=new _v(pe);if(Ut.ok)pe=Ut.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var kt=parseInt(pe.substr(1),16);pe=kt>>16&255,je=kt>>8&255,ke=255&kt}if(je===void 0||tt===void 0&&pe===je&&je===ke)if(typeof pe=="string")q=pe+" "+pt[0];else switch(y.precision){case 2:q=G(pe/255)+" "+pt[0];break;case 3:default:q=T(pe/255)+" "+pt[0]}else if(tt===void 0||XA(tt)==="object"){if(tt&&!isNaN(tt.a)&&tt.a===0)return q=["1.","1.","1.",pt[1]].join(" ");if(typeof pe=="string")q=[pe,je,ke,pt[1]].join(" ");else switch(y.precision){case 2:q=[G(pe/255),G(je/255),G(ke/255),pt[1]].join(" ");break;default:case 3:q=[T(pe/255),T(je/255),T(ke/255),pt[1]].join(" ")}}else if(typeof pe=="string")q=[pe,je,ke,tt,pt[2]].join(" ");else switch(y.precision){case 2:q=[G(pe),G(je),G(ke),G(tt),pt[2]].join(" ");break;case 3:default:q=[T(pe),T(je),T(ke),T(tt),pt[2]].join(" ")}return q},_t=x.__private__.getFilters=function(){return u},Vt=x.__private__.putStream=function(y){var q=(y=y||{}).data||"",pe=y.filters||_t(),je=y.alreadyAppliedFilters||[],ke=y.addLength1||!1,tt=q.length,pt=y.objectId,Ut=function(os){return os};if(w!==null&&pt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Ut=WA.encryptor(pt,0));var kt={};pe===!0&&(pe=["FlateEncode"]);var aA=y.additionalKeyValues||[],eA=(kt=$t.API.processDataByFilters!==void 0?$t.API.processDataByFilters(q,pe):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(je)?je.join(" "):je.toString());if(kt.data.length!==0&&(aA.push({key:"Length",value:kt.data.length}),ke===!0&&aA.push({key:"Length1",value:tt})),eA.length!=0)if(eA.split("/").length-1==1)aA.push({key:"Filter",value:eA});else{aA.push({key:"Filter",value:"["+eA+"]"});for(var yA=0;yA<aA.length;yA+=1)if(aA[yA].key==="DecodeParms"){for(var ua=[],pa=0;pa<kt.reverseChain.split("/").length-1;pa+=1)ua.push("null");ua.push(aA[yA].value),aA[yA].value="["+ua.join(" ")+"]"}}K("<<");for(var Sa=0;Sa<aA.length;Sa++)K("/"+aA[Sa].key+" "+aA[Sa].value);K(">>"),kt.data.length!==0&&(K("stream"),K(Ut(kt.data)),K("endstream"))},zt=x.__private__.putPage=function(y){var q=y.number,pe=y.data,je=y.objId,ke=y.contentsObjId;Xt(je,!0),K("<</Type /Page"),K("/Parent "+y.rootDictionaryObjId+" 0 R"),K("/Resources "+y.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(P(y.mediaBox.bottomLeftX))+" "+parseFloat(P(y.mediaBox.bottomLeftY))+" "+P(y.mediaBox.topRightX)+" "+P(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&K("/CropBox ["+P(y.cropBox.bottomLeftX)+" "+P(y.cropBox.bottomLeftY)+" "+P(y.cropBox.topRightX)+" "+P(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&K("/BleedBox ["+P(y.bleedBox.bottomLeftX)+" "+P(y.bleedBox.bottomLeftY)+" "+P(y.bleedBox.topRightX)+" "+P(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&K("/TrimBox ["+P(y.trimBox.bottomLeftX)+" "+P(y.trimBox.bottomLeftY)+" "+P(y.trimBox.topRightX)+" "+P(y.trimBox.topRightY)+"]"),y.artBox!==null&&K("/ArtBox ["+P(y.artBox.bottomLeftX)+" "+P(y.artBox.bottomLeftY)+" "+P(y.artBox.topRightX)+" "+P(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&K("/UserUnit "+y.userUnit),lA.publish("putPage",{objId:je,pageContext:Kt[q],pageNumber:q,page:pe}),K("/Contents "+ke+" 0 R"),K(">>"),K("endobj");var tt=pe.join(`
`);return _===Q.ADVANCED&&(tt+=`
Q`),Xt(ke,!0),Vt({data:tt,filters:_t(),objectId:ke}),K("endobj"),je},gA=x.__private__.putPages=function(){var y,q,pe=[];for(y=1;y<=uA;y++)Kt[y].objId=SA(),Kt[y].contentsObjId=SA();for(y=1;y<=uA;y++)pe.push(zt({number:y,data:_e[y],objId:Kt[y].objId,contentsObjId:Kt[y].contentsObjId,mediaBox:Kt[y].mediaBox,cropBox:Kt[y].cropBox,bleedBox:Kt[y].bleedBox,trimBox:Kt[y].trimBox,artBox:Kt[y].artBox,userUnit:Kt[y].userUnit,rootDictionaryObjId:Ze,resourceDictionaryObjId:et}));Xt(Ze,!0),K("<</Type /Pages");var je="/Kids [";for(q=0;q<uA;q++)je+=pe[q]+" 0 R ";K(je+"]"),K("/Count "+uA),K(">>"),K("endobj"),lA.publish("postPutPages")},RA=function(y){lA.publish("putFont",{font:y,out:K,newObject:YA,putStream:Vt}),y.isAlreadyPutted!==!0&&(y.objectNumber=YA(),K("<<"),K("/Type /Font"),K("/BaseFont /"+Oc(y.postScriptName)),K("/Subtype /Type1"),typeof y.encoding=="string"&&K("/Encoding /"+y.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},Da=function(){for(var y in Ft)Ft.hasOwnProperty(y)&&(v===!1||v===!0&&B.hasOwnProperty(y))&&RA(Ft[y])},zA=function(y){y.objectNumber=YA();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[P(y.x),P(y.y),P(y.x+y.width),P(y.y+y.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var pe=y.pages[1].join(`
`);Vt({data:pe,additionalKeyValues:q,objectId:y.objectNumber}),K("endobj")},Fa=function(){for(var y in oa)oa.hasOwnProperty(y)&&zA(oa[y])},ma=function(y,q){var pe,je=[],ke=1/(q-1);for(pe=0;pe<1;pe+=ke)je.push(pe);if(je.push(1),y[0].offset!=0){var tt={offset:0,color:y[0].color};y.unshift(tt)}if(y[y.length-1].offset!=1){var pt={offset:1,color:y[y.length-1].color};y.push(pt)}for(var Ut="",kt=0,aA=0;aA<je.length;aA++){for(pe=je[aA];pe>y[kt+1].offset;)kt++;var eA=y[kt].offset,yA=(pe-eA)/(y[kt+1].offset-eA),ua=y[kt].color,pa=y[kt+1].color;Ut+=re(Math.round((1-yA)*ua[0]+yA*pa[0]).toString(16))+re(Math.round((1-yA)*ua[1]+yA*pa[1]).toString(16))+re(Math.round((1-yA)*ua[2]+yA*pa[2]).toString(16))}return Ut.trim()},rs=function(y,q){q||(q=21);var pe=YA(),je=ma(y.colors,q),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+q+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Vt({data:je,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),K("endobj"),y.objectNumber=YA(),K("<< /ShadingType "+y.type),K("/ColorSpace /DeviceRGB");var tt="/Coords ["+P(parseFloat(y.coords[0]))+" "+P(parseFloat(y.coords[1]))+" ";y.type===2?tt+=P(parseFloat(y.coords[2]))+" "+P(parseFloat(y.coords[3])):tt+=P(parseFloat(y.coords[2]))+" "+P(parseFloat(y.coords[3]))+" "+P(parseFloat(y.coords[4]))+" "+P(parseFloat(y.coords[5])),K(tt+="]"),y.matrix&&K("/Matrix ["+y.matrix.toString()+"]"),K("/Function "+pe+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},ca=function(y,q){var pe=SA(),je=YA();q.push({resourcesOid:pe,objectOid:je}),y.objectNumber=je;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+y.boundingBox.map(P).join(" ")+"]"}),ke.push({key:"XStep",value:P(y.xStep)}),ke.push({key:"YStep",value:P(y.yStep)}),ke.push({key:"Resources",value:pe+" 0 R"}),y.matrix&&ke.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),Vt({data:y.stream,additionalKeyValues:ke,objectId:y.objectNumber}),K("endobj")},Us=function(y){var q;for(q in ft)ft.hasOwnProperty(q)&&(ft[q]instanceof Oo?rs(ft[q]):ft[q]instanceof _c&&ca(ft[q],y))},tr=function(y){for(var q in y.objectNumber=YA(),K("<<"),y)switch(q){case"opacity":K("/ca "+G(y[q]));break;case"stroke-opacity":K("/CA "+G(y[q]))}K(">>"),K("endobj")},kn=function(){var y;for(y in Jt)Jt.hasOwnProperty(y)&&tr(Jt[y])},mn=function(){for(var y in K("/XObject <<"),oa)oa.hasOwnProperty(y)&&oa[y].objectNumber>=0&&K("/"+y+" "+oa[y].objectNumber+" 0 R");lA.publish("putXobjectDict"),K(">>")},go=function(){WA.oid=YA(),K("<<"),K("/Filter /Standard"),K("/V "+WA.v),K("/R "+WA.r),K("/U <"+WA.toHexString(WA.U)+">"),K("/O <"+WA.toHexString(WA.O)+">"),K("/P "+WA.P),K(">>"),K("endobj")},Di=function(){for(var y in K("/Font <<"),Ft)Ft.hasOwnProperty(y)&&(v===!1||v===!0&&B.hasOwnProperty(y))&&K("/"+y+" "+Ft[y].objectNumber+" 0 R");K(">>")},ml=function(){if(Object.keys(ft).length>0){for(var y in K("/Shading <<"),ft)ft.hasOwnProperty(y)&&ft[y]instanceof Oo&&ft[y].objectNumber>=0&&K("/"+y+" "+ft[y].objectNumber+" 0 R");lA.publish("putShadingPatternDict"),K(">>")}},Yr=function(y){if(Object.keys(ft).length>0){for(var q in K("/Pattern <<"),ft)ft.hasOwnProperty(q)&&ft[q]instanceof x.TilingPattern&&ft[q].objectNumber>=0&&ft[q].objectNumber<y&&K("/"+q+" "+ft[q].objectNumber+" 0 R");lA.publish("putTilingPatternDict"),K(">>")}},Zr=function(){if(Object.keys(Jt).length>0){var y;for(y in K("/ExtGState <<"),Jt)Jt.hasOwnProperty(y)&&Jt[y].objectNumber>=0&&K("/"+y+" "+Jt[y].objectNumber+" 0 R");lA.publish("putGStateDict"),K(">>")}},ZA=function(y){Xt(y.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Di(),ml(),Yr(y.objectOid),Zr(),mn(),K(">>"),K("endobj")},_s=function(){var y=[];Da(),kn(),Fa(),Us(y),lA.publish("putResources"),y.forEach(ZA),ZA({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),lA.publish("postPutResources")},is=function(){lA.publish("putAdditionalObjects");for(var y=0;y<st.length;y++){var q=st[y];Xt(q.objId,!0),K(q.content),K("endobj")}lA.publish("postPutAdditionalObjects")},Ti=function(y){Fe[y.fontName]=Fe[y.fontName]||{},Fe[y.fontName][y.fontStyle]=y.id},Hi=function(y,q,pe,je,ke){var tt={id:"F"+(Object.keys(Ft).length+1).toString(10),postScriptName:y,fontName:q,fontStyle:pe,encoding:je,isStandardFont:ke||!1,metadata:{}};return lA.publish("addFont",{font:tt,instance:this}),Ft[tt.id]=tt,Ti(tt),tt.id},Mi=function(y){for(var q=0,pe=ie.length;q<pe;q++){var je=Hi.call(this,y[q][0],y[q][1],y[q][2],ie[q][3],!0);v===!1&&(B[je]=!0);var ke=y[q][0].split("-");Ti({id:je,fontName:ke[0],fontStyle:ke[1]||""})}lA.publish("addFonts",{fonts:Ft,dictionary:Fe})},Rs=function(y){return y.foo=function(){try{return y.apply(this,arguments)}catch(je){var q=je.stack||"";~q.indexOf(" at ")&&(q=q.split(" at ")[1]);var pe="Error in function "+q.split(`
`)[0].split("<")[0]+": "+je.message;if(!tA.console)throw new Error(pe);tA.console.error(pe,je),tA.alert&&alert(pe)}},y.foo.bar=y,y.foo},pn=function(y,q){var pe,je,ke,tt,pt,Ut,kt,aA,eA;if(ke=(q=q||{}).sourceEncoding||"Unicode",pt=q.outputEncoding,(q.autoencode||pt)&&Ft[Qt].metadata&&Ft[Qt].metadata[ke]&&Ft[Qt].metadata[ke].encoding&&(tt=Ft[Qt].metadata[ke].encoding,!pt&&Ft[Qt].encoding&&(pt=Ft[Qt].encoding),!pt&&tt.codePages&&(pt=tt.codePages[0]),typeof pt=="string"&&(pt=tt[pt]),pt)){for(kt=!1,Ut=[],pe=0,je=y.length;pe<je;pe++)(aA=pt[y.charCodeAt(pe)])?Ut.push(String.fromCharCode(aA)):Ut.push(y[pe]),Ut[pe].charCodeAt(0)>>8&&(kt=!0);y=Ut.join("")}for(pe=y.length;kt===void 0&&pe!==0;)y.charCodeAt(pe-1)>>8&&(kt=!0),pe--;if(!kt)return y;for(Ut=q.noBOM?[]:[254,255],pe=0,je=y.length;pe<je;pe++){if((eA=(aA=y.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ut.push(eA),Ut.push(aA-(eA<<8))}return String.fromCharCode.apply(void 0,Ut)},ls=x.__private__.pdfEscape=x.pdfEscape=function(y,q){return pn(y,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ga=x.__private__.beginPage=function(y){_e[++uA]=[],Kt[uA]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},$r(uA),Le(_e[X])},Wr=function(y,q){var pe,je,ke;switch(n=q||n,typeof y=="string"&&(pe=F(y.toLowerCase()),Array.isArray(pe)&&(je=pe[0],ke=pe[1])),Array.isArray(y)&&(je=y[0]*Oe,ke=y[1]*Oe),isNaN(je)&&(je=l[0],ke=l[1]),(je>14400||ke>14400)&&(la.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),je=Math.min(14400,je),ke=Math.min(14400,ke)),l=[je,ke],n.substr(0,1)){case"l":ke>je&&(l=[ke,je]);break;case"p":je>ke&&(l=[ke,je])}Ga(l),vs(Ta),K(nn),He!==0&&K(He+" J"),ct!==0&&K(ct+" j"),lA.publish("addPage",{pageNumber:uA})},pl=function(y){y>0&&y<=uA&&(_e.splice(y,1),Kt.splice(y,1),uA--,X>uA&&(X=uA),this.setPage(X))},$r=function(y){y>0&&y<=uA&&(X=y)},Ar=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return _e.length-1},Oi=function(y,q,pe){var je,ke=void 0;return pe=pe||{},y=y!==void 0?y:Ft[Qt].fontName,q=q!==void 0?q:Ft[Qt].fontStyle,je=y.toLowerCase(),Fe[je]!==void 0&&Fe[je][q]!==void 0?ke=Fe[je][q]:Fe[y]!==void 0&&Fe[y][q]!==void 0?ke=Fe[y][q]:pe.disableWarning===!1&&la.warn("Unable to look up font label for font '"+y+"', '"+q+"'. Refer to getFontList() for available fonts."),ke||pe.noFallback||(ke=Fe.times[q])==null&&(ke=Fe.times.normal),ke},gl=x.__private__.putInfo=function(){var y=YA(),q=function(je){return je};for(var pe in w!==null&&(q=WA.encryptor(y,0)),K("<<"),K("/Producer ("+ls(q("jsPDF "+$t.version))+")"),jt)jt.hasOwnProperty(pe)&&jt[pe]&&K("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+ls(q(jt[pe]))+")");K("/CreationDate ("+ls(q(ue))+")"),K(">>"),K("endobj")},gn=x.__private__.putCatalog=function(y){var q=(y=y||{}).rootDictionaryObjId||Ze;switch(YA(),K("<<"),K("/Type /Catalog"),K("/Pages "+q+" 0 R"),Te||(Te="fullwidth"),Te){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+Te;pe.substr(pe.length-1)==="%"&&(Te=parseInt(Te)/100),typeof Te=="number"&&K("/OpenAction [3 0 R /XYZ null null "+G(Te)+"]")}switch(Tt||(Tt="continuous"),Tt){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}xt&&K("/PageMode /"+xt),lA.publish("putCatalog"),K(">>"),K("endobj")},xo=x.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(fe+1)),K("/Root "+fe+" 0 R"),K("/Info "+(fe-1)+" 0 R"),w!==null&&K("/Encrypt "+WA.oid+" 0 R"),K("/ID [ <"+S+"> <"+S+"> ]"),K(">>")},xl=x.__private__.putHeader=function(){K("%PDF-"+C),K("%")},vl=x.__private__.putXRef=function(){var y="0000000000";K("xref"),K("0 "+(fe+1)),K("0000000000 65535 f ");for(var q=1;q<=fe;q++)typeof ve[q]=="function"?K((y+ve[q]()).slice(-10)+" 00000 n "):ve[q]!==void 0?K((y+ve[q]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},an=x.__private__.buildDocument=function(){At(),Le(xe),lA.publish("buildDocument"),xl(),gA(),is(),_s(),w!==null&&go(),gl(),gn();var y=Ce;return vl(),xo(),K("startxref"),K(""+y),K("%%EOF"),Le(_e[X]),xe.join(`
`)},ei=x.__private__.getBlob=function(y){return new Blob([Ye(y)],{type:"application/pdf"})},ti=x.output=x.__private__.output=Rs((function(y,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",y){case void 0:return an();case"save":x.save(q.filename);break;case"arraybuffer":return Ye(an());case"blob":return ei(an());case"bloburi":case"bloburl":if(tA.URL!==void 0&&typeof tA.URL.createObjectURL=="function")return tA.URL&&tA.URL.createObjectURL(ei(an()))||void 0;la.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",je=an();try{pe=H0(je)}catch{pe=H0(unescape(encodeURIComponent(je)))}return"data:application/pdf;filename="+q.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tA)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",tt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(ke=q.pdfObjectUrl,tt="");var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+tt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Ut=tA.open();return Ut!==null&&Ut.document.write(pt),Ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tA)==="[object Window]"){var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',aA=tA.open();if(aA!==null){aA.document.write(kt);var eA=this;aA.document.documentElement.querySelector("#pdfViewer").onload=function(){aA.document.title=q.filename,aA.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(eA.output("bloburl"))}}return aA}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tA)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yA='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',ua=tA.open();if(ua!==null&&(ua.document.write(yA),ua.document.title=q.filename),ua||typeof safari>"u")return ua;break;case"datauri":case"dataurl":return tA.document.location.href=this.output("datauristring",q);default:return null}})),Cr=function(y){return Array.isArray(An)===!0&&An.indexOf(y)>-1};switch(r){case"pt":Oe=1;break;case"mm":Oe=72/25.4;break;case"cm":Oe=72/2.54;break;case"in":Oe=72;break;case"px":Oe=Cr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Oe=12;break;case"ex":Oe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Oe=r}var WA=null;J(),Y();var ki=function(y){return w!==null?WA.encryptor(y,0):function(q){return q}},Ai=x.__private__.getPageInfo=x.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Kt[y].objId,pageNumber:y,pageContext:Kt[y]}},Gt=x.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in Kt)if(Kt[q].objId===y)break;return Ai(q)},_n=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Kt[X].objId,pageNumber:X,pageContext:Kt[X]}};x.addPage=function(){return Wr.apply(this,arguments),this},x.setPage=function(){return $r.apply(this,arguments),Le.call(this,_e[X]),this},x.insertPage=function(y){return this.addPage(),this.movePage(X,y),this},x.movePage=function(y,q){var pe,je;if(y>q){pe=_e[y],je=Kt[y];for(var ke=y;ke>q;ke--)_e[ke]=_e[ke-1],Kt[ke]=Kt[ke-1];_e[q]=pe,Kt[q]=je,this.setPage(q)}else if(y<q){pe=_e[y],je=Kt[y];for(var tt=y;tt<q;tt++)_e[tt]=_e[tt+1],Kt[tt]=Kt[tt+1];_e[q]=pe,Kt[q]=je,this.setPage(q)}return this},x.deletePage=function(){return pl.apply(this,arguments),this},x.__private__.text=x.text=function(y,q,pe,je,ke){var tt,pt,Ut,kt,aA,eA,yA,ua,pa,Sa=(je=je||{}).scope||this;if(typeof y=="number"&&typeof q=="number"&&(typeof pe=="string"||Array.isArray(pe))){var os=pe;pe=q,q=y,y=os}if(arguments[3]instanceof Ot?(E("The transform parameter of text() with a Matrix value"),pa=ke):(Ut=arguments[4],kt=arguments[5],XA(yA=arguments[3])==="object"&&yA!==null||(typeof Ut=="string"&&(kt=Ut,Ut=null),typeof yA=="string"&&(kt=yA,yA=null),typeof yA=="number"&&(Ut=yA,yA=null),je={flags:yA,angle:Ut,align:kt})),isNaN(q)||isNaN(pe)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return Sa;var _a="",bs=!1,rn=typeof je.lineHeightFactor=="number"?je.lineHeightFactor:rr,lr=Sa.internal.scaleFactor;function zo(mA){return mA=mA.split("	").join(Array(je.TabLen||9).join(" ")),ls(mA,yA)}function Bl(mA){for(var OA,EA=mA.concat(),da=[],Gn=EA.length;Gn--;)typeof(OA=EA.shift())=="string"?da.push(OA):Array.isArray(mA)&&(OA.length===1||OA[1]===void 0&&OA[2]===void 0)?da.push(OA[0]):da.push([OA[0],OA[1],OA[2]]);return da}function yl(mA,OA){var EA;if(typeof mA=="string")EA=OA(mA)[0];else if(Array.isArray(mA)){for(var da,Gn,di=mA.concat(),Lr=[],Ul=di.length;Ul--;)typeof(da=di.shift())=="string"?Lr.push(OA(da)[0]):Array.isArray(da)&&typeof da[0]=="string"&&(Gn=OA(da[0],da[1],da[2]),Lr.push([Gn[0],Gn[1],Gn[2]]));EA=Lr}return EA}var or=!1,Sr=!0;if(typeof y=="string")or=!0;else if(Array.isArray(y)){var bo=y.concat();pt=[];for(var Qr,Xa=bo.length;Xa--;)(typeof(Qr=bo.shift())!="string"||Array.isArray(Qr)&&typeof Qr[0]!="string")&&(Sr=!1);or=Sr}if(or===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var Ki=Ne/Sa.internal.scaleFactor,ri=Ki*(rn-1);switch(je.baseline){case"bottom":pe-=ri;break;case"top":pe+=Ki-ri;break;case"hanging":pe+=Ki-2*ri;break;case"middle":pe+=Ki/2-ri}if((eA=je.maxWidth||0)>0&&(typeof y=="string"?y=Sa.splitTextToSize(y,eA):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce((function(mA,OA){return mA.concat(Sa.splitTextToSize(OA,eA))}),[]))),tt={text:y,x:q,y:pe,options:je,mutex:{pdfEscape:ls,activeFontKey:Qt,fonts:Ft,activeFontSize:Ne}},lA.publish("preProcessText",tt),y=tt.text,Ut=(je=tt.options).angle,!(pa instanceof Ot)&&Ut&&typeof Ut=="number"){Ut*=Math.PI/180,je.rotationDirection===0&&(Ut=-Ut),_===Q.ADVANCED&&(Ut=-Ut);var ii=Math.cos(Ut),Cl=Math.sin(Ut);pa=new Ot(ii,Cl,-Cl,ii,0,0)}else Ut&&Ut instanceof Ot&&(pa=Ut);_!==Q.ADVANCED||pa||(pa=ns),(aA=je.charSpace||oe)!==void 0&&(_a+=P(R(aA))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ua=je.horizontalScale)!==void 0&&(_a+=P(100*ua)+` Tz
`),je.lang;var Is=-1,qo=je.renderingMode!==void 0?je.renderingMode:je.stroke,wo=Sa.internal.getCurrentPageInfo().pageContext;switch(qo){case 0:case!1:case"fill":Is=0;break;case 1:case!0:case"stroke":Is=1;break;case 2:case"fillThenStroke":Is=2;break;case 3:case"invisible":Is=3;break;case 4:case"fillAndAddForClipping":Is=4;break;case 5:case"strokeAndAddPathForClipping":Is=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Is=6;break;case 7:case"addToPathForClipping":Is=7}var Go=wo.usedRenderingMode!==void 0?wo.usedRenderingMode:-1;Is!==-1?_a+=Is+` Tr
`:Go!==-1&&(_a+=`0 Tr
`),Is!==-1&&(wo.usedRenderingMode=Is),kt=je.align||"left";var bn,Nl=Ne*rn,Jo=Sa.internal.pageSize.getWidth(),ws=Ft[Qt];aA=je.charSpace||oe,eA=je.maxWidth||0,yA=Object.assign({autoencode:!0,noBOM:!0},je.flags);var wn=[],li=function(mA){return Sa.getStringUnitWidth(mA,{font:ws,charSpace:aA,fontSize:Ne,doKerning:!1})*Ne/lr};if(Object.prototype.toString.call(y)==="[object Array]"){var Ls;pt=Bl(y),kt!=="left"&&(bn=pt.map(li));var Bs,Ur=0;if(kt==="right"){q-=bn[0],y=[],Xa=pt.length;for(var Kn=0;Kn<Xa;Kn++)Kn===0?(Bs=Rt(q),Ls=oA(pe)):(Bs=R(Ur-bn[Kn]),Ls=-Nl),y.push([pt[Kn],Bs,Ls]),Ur=bn[Kn]}else if(kt==="center"){q-=bn[0]/2,y=[],Xa=pt.length;for(var Er=0;Er<Xa;Er++)Er===0?(Bs=Rt(q),Ls=oA(pe)):(Bs=R((Ur-bn[Er])/2),Ls=-Nl),y.push([pt[Er],Bs,Ls]),Ur=bn[Er]}else if(kt==="left"){y=[],Xa=pt.length;for(var Vn=0;Vn<Xa;Vn++)y.push(pt[Vn])}else if(kt==="justify"&&ws.encoding==="Identity-H"){y=[],Xa=pt.length,eA=eA!==0?eA:Jo;for(var zn=0,sa=0;sa<Xa;sa++)if(Ls=sa===0?oA(pe):-Nl,Bs=sa===0?Rt(q):zn,sa<Xa-1){var Vi=R((eA-bn[sa])/(pt[sa].split(" ").length-1)),ys=pt[sa].split(" ");y.push([ys[0]+" ",Bs,Ls]),zn=0;for(var Ya=1;Ya<ys.length;Ya++){var qn=(li(ys[Ya-1]+" "+ys[Ya])-li(ys[Ya]))*lr+Vi;Ya==ys.length-1?y.push([ys[Ya],qn,0]):y.push([ys[Ya]+" ",qn,0]),zn-=qn}}else y.push([pt[sa],Bs,Ls]);y.push(["",zn,0])}else{if(kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],Xa=pt.length,eA=eA!==0?eA:Jo,sa=0;sa<Xa;sa++)Ls=sa===0?oA(pe):-Nl,Bs=sa===0?Rt(q):0,sa<Xa-1?wn.push(P(R((eA-bn[sa])/(pt[sa].split(" ").length-1)))):wn.push(0),y.push([pt[sa],Bs,Ls])}}var jl=typeof je.R2L=="boolean"?je.R2L:ot;jl===!0&&(y=yl(y,(function(mA,OA,EA){return[mA.split("").reverse().join(""),OA,EA]}))),tt={text:y,x:q,y:pe,options:je,mutex:{pdfEscape:ls,activeFontKey:Qt,fonts:Ft,activeFontSize:Ne}},lA.publish("postProcessText",tt),y=tt.text,bs=tt.mutex.isHex||!1;var Fl=Ft[Qt].encoding;Fl!=="WinAnsiEncoding"&&Fl!=="StandardEncoding"||(y=yl(y,(function(mA,OA,EA){return[zo(mA),OA,EA]}))),pt=Bl(y),y=[];for(var ln,oi,Ir,ci=0,Sl=1,zi=Array.isArray(pt[0])?Sl:ci,ui="",Ql=function(mA,OA,EA){var da="";return EA instanceof Ot?(EA=typeof je.angle=="number"?gs(EA,new Ot(1,0,0,1,mA,OA)):gs(new Ot(1,0,0,1,mA,OA),EA),_===Q.ADVANCED&&(EA=gs(new Ot(1,0,0,-1,0,0),EA)),da=EA.join(" ")+` Tm
`):da=P(mA)+" "+P(OA)+` Td
`,da},on=0;on<pt.length;on++){switch(ui="",zi){case Sl:Ir=(bs?"<":"(")+pt[on][0]+(bs?">":")"),ln=parseFloat(pt[on][1]),oi=parseFloat(pt[on][2]);break;case ci:Ir=(bs?"<":"(")+pt[on]+(bs?">":")"),ln=Rt(q),oi=oA(pe)}wn!==void 0&&wn[on]!==void 0&&(ui=wn[on]+` Tw
`),on===0?y.push(ui+Ql(ln,oi,pa)+Ir):zi===ci?y.push(ui+Ir):zi===Sl&&y.push(ui+Ql(ln,oi,pa)+Ir)}y=zi===ci?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var zs=`BT
/`;return zs+=Qt+" "+Ne+` Tf
`,zs+=P(Ne*rn)+` TL
`,zs+=ge+`
`,zs+=_a,zs+=y,K(zs+="ET"),B[Qt]=!0,Sa};var bl=x.__private__.clip=x.clip=function(y){return K(y==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return bl("evenodd")},x.__private__.discardPath=x.discardPath=function(){return K("n"),this};var Es=x.__private__.isValidStyle=function(y){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(q=!0),q};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(y){return Es(y)&&(m=y),this};var _i=x.__private__.getStyle=x.getStyle=function(y){var q=m;switch(y){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=y}return q},ar=x.close=function(){return K("h"),this};x.stroke=function(){return K("S"),this},x.fill=function(y){return xs("f",y),this},x.fillEvenOdd=function(y){return xs("f*",y),this},x.fillStroke=function(y){return xs("B",y),this},x.fillStrokeEvenOdd=function(y){return xs("B*",y),this};var xs=function(y,q){XA(q)==="object"?xn(q,y):K(y)},Nr=function(y){y===null||_===Q.ADVANCED&&y===void 0||(y=_i(y),K(y))};function jr(y,q,pe,je,ke){var tt=new _c(q||this.boundingBox,pe||this.xStep,je||this.yStep,this.gState,ke||this.matrix);tt.stream=this.stream;var pt=y+"$$"+this.cloneIndex+++"$$";return La(pt,tt),tt}var xn=function(y,q){var pe=gt[y.key],je=ft[pe];if(je instanceof Oo)K("q"),K(Ri(q)),je.gState&&x.setGState(je.gState),K(y.matrix.toString()+" cm"),K("/"+pe+" sh"),K("Q");else if(je instanceof _c){var ke=new Ot(1,0,0,-1,0,ni());y.matrix&&(ke=ke.multiply(y.matrix||ns),pe=jr.call(je,y.key,y.boundingBox,y.xStep,y.yStep,ke).id),K("q"),K("/Pattern cs"),K("/"+pe+" scn"),je.gState&&x.setGState(je.gState),K(q),K("Q")}},Ri=function(y){switch(y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},sr=x.moveTo=function(y,q){return K(P(R(y))+" "+P(Z(q))+" m"),this},nr=x.lineTo=function(y,q){return K(P(R(y))+" "+P(Z(q))+" l"),this},sn=x.curveTo=function(y,q,pe,je,ke,tt){return K([P(R(y)),P(Z(q)),P(R(pe)),P(Z(je)),P(R(ke)),P(Z(tt)),"c"].join(" ")),this};x.__private__.line=x.line=function(y,q,pe,je,ke){if(isNaN(y)||isNaN(q)||isNaN(pe)||isNaN(je)||!Es(ke))throw new Error("Invalid arguments passed to jsPDF.line");return _===Q.COMPAT?this.lines([[pe-y,je-q]],y,q,[1,1],ke||"S"):this.lines([[pe-y,je-q]],y,q,[1,1]).stroke()},x.__private__.lines=x.lines=function(y,q,pe,je,ke,tt){var pt,Ut,kt,aA,eA,yA,ua,pa,Sa,os,_a,bs;if(typeof y=="number"&&(bs=pe,pe=q,q=y,y=bs),je=je||[1,1],tt=tt||!1,isNaN(q)||isNaN(pe)||!Array.isArray(y)||!Array.isArray(je)||!Es(ke)||typeof tt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(sr(q,pe),pt=je[0],Ut=je[1],aA=y.length,os=q,_a=pe,kt=0;kt<aA;kt++)(eA=y[kt]).length===2?(os=eA[0]*pt+os,_a=eA[1]*Ut+_a,nr(os,_a)):(yA=eA[0]*pt+os,ua=eA[1]*Ut+_a,pa=eA[2]*pt+os,Sa=eA[3]*Ut+_a,os=eA[4]*pt+os,_a=eA[5]*Ut+_a,sn(yA,ua,pa,Sa,os,_a));return tt&&ar(),Nr(ke),this},x.path=function(y){for(var q=0;q<y.length;q++){var pe=y[q],je=pe.c;switch(pe.op){case"m":sr(je[0],je[1]);break;case"l":nr(je[0],je[1]);break;case"c":sn.apply(this,je);break;case"h":ar()}}return this},x.__private__.rect=x.rect=function(y,q,pe,je,ke){if(isNaN(y)||isNaN(q)||isNaN(pe)||isNaN(je)||!Es(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return _===Q.COMPAT&&(je=-je),K([P(R(y)),P(Z(q)),P(R(pe)),P(R(je)),"re"].join(" ")),Nr(ke),this},x.__private__.triangle=x.triangle=function(y,q,pe,je,ke,tt,pt){if(isNaN(y)||isNaN(q)||isNaN(pe)||isNaN(je)||isNaN(ke)||isNaN(tt)||!Es(pt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-y,je-q],[ke-pe,tt-je],[y-ke,q-tt]],y,q,[1,1],pt,!0),this},x.__private__.roundedRect=x.roundedRect=function(y,q,pe,je,ke,tt,pt){if(isNaN(y)||isNaN(q)||isNaN(pe)||isNaN(je)||isNaN(ke)||isNaN(tt)||!Es(pt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ut=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*pe),tt=Math.min(tt,.5*je),this.lines([[pe-2*ke,0],[ke*Ut,0,ke,tt-tt*Ut,ke,tt],[0,je-2*tt],[0,tt*Ut,-ke*Ut,tt,-ke,tt],[2*ke-pe,0],[-ke*Ut,0,-ke,-tt*Ut,-ke,-tt],[0,2*tt-je],[0,-tt*Ut,ke*Ut,-tt,ke,-tt]],y+ke,q,[1,1],pt,!0),this},x.__private__.ellipse=x.ellipse=function(y,q,pe,je,ke){if(isNaN(y)||isNaN(q)||isNaN(pe)||isNaN(je)||!Es(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var tt=4/3*(Math.SQRT2-1)*pe,pt=4/3*(Math.SQRT2-1)*je;return sr(y+pe,q),sn(y+pe,q-pt,y+tt,q-je,y,q-je),sn(y-tt,q-je,y-pe,q-pt,y-pe,q),sn(y-pe,q+pt,y-tt,q+je,y,q+je),sn(y+tt,q+je,y+pe,q+pt,y+pe,q),Nr(ke),this},x.__private__.circle=x.circle=function(y,q,pe,je){if(isNaN(y)||isNaN(q)||isNaN(pe)||!Es(je))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,q,pe,pe,je)},x.setFont=function(y,q,pe){return pe&&(q=k(q,pe)),Qt=Oi(y,q,{disableWarning:!1}),this};var ai=x.__private__.getFont=x.getFont=function(){return Ft[Oi.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var y,q,pe={};for(y in Fe)if(Fe.hasOwnProperty(y))for(q in pe[y]=[],Fe[y])Fe[y].hasOwnProperty(q)&&pe[y].push(q);return pe},x.addFont=function(y,q,pe,je,ke){var tt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&tt.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&tt.indexOf(arguments[3])==-1&&(pe=k(pe,je)),ke=ke||"Identity-H",Hi.call(this,y,q,pe,ke)};var rr,Ta=A.lineWidth||.200025,Ps=x.__private__.getLineWidth=x.getLineWidth=function(){return Ta},vs=x.__private__.setLineWidth=x.setLineWidth=function(y){return Ta=y,K(P(R(y))+" w"),this};x.__private__.setLineDash=$t.API.setLineDash=$t.API.setLineDashPattern=function(y,q){if(y=y||[],q=q||0,isNaN(q)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map((function(pe){return P(R(pe))})).join(" "),q=P(R(q)),K("["+y+"] "+q+" d"),this};var Rn=x.__private__.getLineHeight=x.getLineHeight=function(){return Ne*rr};x.__private__.getLineHeight=x.getLineHeight=function(){return Ne*rr};var Pi=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(rr=y),this},Fr=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return rr};Pi(A.lineHeight);var Rt=x.__private__.getHorizontalCoordinate=function(y){return R(y)},oA=x.__private__.getVerticalCoordinate=function(y){return _===Q.ADVANCED?y:Kt[X].mediaBox.topRightY-Kt[X].mediaBox.bottomLeftY-R(y)},Ks=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(y){return P(Rt(y))},vn=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(y){return P(oA(y))},nn=A.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return rt(nn)},x.__private__.setStrokeColor=x.setDrawColor=function(y,q,pe,je){return nn=Xe({ch1:y,ch2:q,ch3:pe,ch4:je,pdfColorType:"draw",precision:2}),K(nn),this};var si=A.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return rt(si)},x.__private__.setFillColor=x.setFillColor=function(y,q,pe,je){return si=Xe({ch1:y,ch2:q,ch3:pe,ch4:je,pdfColorType:"fill",precision:2}),K(si),this};var ge=A.textColor||"0 g",Be=x.__private__.getTextColor=x.getTextColor=function(){return rt(ge)};x.__private__.setTextColor=x.setTextColor=function(y,q,pe,je){return ge=Xe({ch1:y,ch2:q,ch3:pe,ch4:je,pdfColorType:"text",precision:3}),this};var oe=A.charSpace,ye=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(oe||0)};x.__private__.setCharSpace=x.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return oe=y,this};var He=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(y){var q=x.CapJoinStyles[y];if(q===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return He=q,K(q+" J"),this};var ct=0;x.__private__.setLineJoin=x.setLineJoin=function(y){var q=x.CapJoinStyles[y];if(q===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ct=q,K(q+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(P(R(y))+" M"),this},x.GState=_h,x.setGState=function(y){(y=typeof y=="string"?Jt[MA[y]]:St(null,y)).equals(VA)||(K("/"+y.id+" gs"),VA=y)};var St=function(y,q){if(!y||!MA[y]){var pe=!1;for(var je in Jt)if(Jt.hasOwnProperty(je)&&Jt[je].equals(q)){pe=!0;break}if(pe)q=Jt[je];else{var ke="GS"+(Object.keys(Jt).length+1).toString(10);Jt[ke]=q,q.id=ke}return y&&(MA[y]=q.id),lA.publish("addGState",q),q}};x.addGState=function(y,q){return St(y,q),this},x.saveGraphicsState=function(){return K("q"),vt.push({key:Qt,size:Ne,color:ge}),this},x.restoreGraphicsState=function(){K("Q");var y=vt.pop();return Qt=y.key,Ne=y.size,ge=y.color,VA=null,this},x.setCurrentTransformationMatrix=function(y){return K(y.toString()+" cm"),this},x.comment=function(y){return K("#"+y),this};var dA=function(y,q){var pe=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(tt){isNaN(tt)||(pe=parseFloat(tt))}});var je=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return je},set:function(tt){isNaN(tt)||(je=parseFloat(tt))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(tt){ke=tt.toString()}}),this},BA=function(y,q,pe,je){dA.call(this,y,q),this.type="rect";var ke=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(pt){isNaN(pt)||(ke=parseFloat(pt))}});var tt=je||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return tt},set:function(pt){isNaN(pt)||(tt=parseFloat(pt))}}),this},Ha=function(){this.page=uA,this.currentPage=X,this.pages=_e.slice(0),this.pagesContext=Kt.slice(0),this.x=yt,this.y=mt,this.matrix=wt,this.width=ir(X),this.height=ni(X),this.outputDestination=Ue,this.id="",this.objectNumber=-1};Ha.prototype.restore=function(){uA=this.page,X=this.currentPage,Kt=this.pagesContext,_e=this.pages,yt=this.x,mt=this.y,wt=this.matrix,vo(X,this.width),wl(X,this.height),Ue=this.outputDestination};var Vs=function(y,q,pe,je,ke){Ia.push(new Ha),uA=X=0,_e=[],yt=y,mt=q,wt=ke,Ga([pe,je])},Ja=function(y){if(Ea[y])Ia.pop().restore();else{var q=new Ha,pe="Xo"+(Object.keys(oa).length+1).toString(10);q.id=pe,Ea[y]=pe,oa[pe]=q,lA.publish("addFormObject",q),Ia.pop().restore()}};for(var Pn in x.beginFormObject=function(y,q,pe,je,ke){return Vs(y,q,pe,je,ke),this},x.endFormObject=function(y){return Ja(y),this},x.doFormObject=function(y,q){var pe=oa[Ea[y]];return K("q"),K(q.toString()+" cm"),K("/"+pe.id+" Do"),K("Q"),this},x.getFormObject=function(y){var q=oa[Ea[y]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},x.save=function(y,q){return y=y||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(Ho(ei(an()),y),typeof Ho.unload=="function"&&tA.setTimeout&&setTimeout(Ho.unload,911),this):new Promise((function(pe,je){try{var ke=Ho(ei(an()),y);typeof Ho.unload=="function"&&tA.setTimeout&&setTimeout(Ho.unload,911),pe(ke)}catch(tt){je(tt.message)}}))},$t.API)$t.API.hasOwnProperty(Pn)&&(Pn==="events"&&$t.API.events.length?(function(y,q){var pe,je,ke;for(ke=q.length-1;ke!==-1;ke--)pe=q[ke][0],je=q[ke][1],y.subscribe.apply(y,[pe].concat(typeof je=="function"?[je]:je))})(lA,$t.API.events):x[Pn]=$t.API[Pn]);var ir=x.getPageWidth=function(y){return(Kt[y=y||X].mediaBox.topRightX-Kt[y].mediaBox.bottomLeftX)/Oe},vo=x.setPageWidth=function(y,q){Kt[y].mediaBox.topRightX=q*Oe+Kt[y].mediaBox.bottomLeftX},ni=x.getPageHeight=function(y){return(Kt[y=y||X].mediaBox.topRightY-Kt[y].mediaBox.bottomLeftY)/Oe},wl=x.setPageHeight=function(y,q){Kt[y].mediaBox.topRightY=q*Oe+Kt[y].mediaBox.bottomLeftY};return x.internal={pdfEscape:ls,getStyle:_i,getFont:ai,getFontSize:qe,getCharSpace:ye,getTextColor:Be,getLineHeight:Rn,getLineHeightFactor:Fr,getLineWidth:Ps,write:Ge,getHorizontalCoordinate:Rt,getVerticalCoordinate:oA,getCoordinateString:Ks,getVerticalCoordinateString:vn,collections:{},newObject:YA,newAdditionalObject:me,newObjectDeferred:SA,newObjectDeferredBegin:Xt,getFilters:_t,putStream:Vt,events:lA,scaleFactor:Oe,pageSize:{getWidth:function(){return ir(X)},setWidth:function(y){vo(X,y)},getHeight:function(){return ni(X)},setHeight:function(y){wl(X,y)}},encryptionOptions:w,encryption:WA,getEncryptor:ki,output:ti,getNumberOfPages:Ar,pages:_e,out:K,f2:G,f3:T,getPageInfo:Ai,getPageInfoByObjId:Gt,getCurrentPageInfo:_n,getPDFVersion:N,Point:dA,Rectangle:BA,Matrix:Ot,hasHotfix:Cr},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return ir(X)},set:function(y){vo(X,y)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ni(X)},set:function(y){wl(X,y)},enumerable:!0,configurable:!0}),Mi.call(x,ie),Qt="F1",Wr(l,n),lA.publish("initialized"),x}Mc.prototype.lsbFirstWord=function(A){return String.fromCharCode(A>>0&255,A>>8&255,A>>16&255,A>>24&255)},Mc.prototype.toHexString=function(A){return A.split("").map((function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Mc.prototype.hexToBytes=function(A){for(var s=[],n=0;n<A.length;n+=2)s.push(String.fromCharCode(parseInt(A.substr(n,2),16)));return s.join("")},Mc.prototype.processOwnerPassword=function(A,s){return O0(M0(s).substr(0,5),A)},Mc.prototype.encryptor=function(A,s){var n=M0(this.encryptionKey+String.fromCharCode(255&A,A>>8&255,A>>16&255,255&s,s>>8&255)).substr(0,10);return function(r){return O0(n,r)}},_h.prototype.equals=function(A){var s,n="id,objectNumber,equals";if(!A||XA(A)!==XA(this))return!1;var r=0;for(s in this)if(!(n.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!A.hasOwnProperty(s)||this[s]!==A[s])return!1;r++}for(s in A)A.hasOwnProperty(s)&&n.indexOf(s)<0&&r--;return r===0},$t.API={events:[]},$t.version="2.5.2";var ka=$t.API,sp=1,Vo=function(A){return A.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lc=function(A){return A.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},iA=function(A){return A.toFixed(2)},to=function(A){return A.toFixed(5)};ka.__acroform__={};var On=function(A,s){A.prototype=Object.create(s.prototype),A.prototype.constructor=A},V1=function(A){return A*sp},Fi=function(A){var s=new Vv,n=Dt.internal.getHeight(A)||0,r=Dt.internal.getWidth(A)||0;return s.BBox=[0,0,Number(iA(r)),Number(iA(n))],s},R4=ka.__acroform__.setBit=function(A,s){if(A=A||0,s=s||0,isNaN(A)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return A|=1<<s},P4=ka.__acroform__.clearBit=function(A,s){if(A=A||0,s=s||0,isNaN(A)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return A&=~(1<<s)},K4=ka.__acroform__.getBit=function(A,s){if(isNaN(A)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(A&1<<s)==0?0:1},Va=ka.__acroform__.getBitForPdf=function(A,s){if(isNaN(A)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return K4(A,s-1)},za=ka.__acroform__.setBitForPdf=function(A,s){if(isNaN(A)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return R4(A,s-1)},qa=ka.__acroform__.clearBitForPdf=function(A,s){if(isNaN(A)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return P4(A,s-1)},V4=ka.__acroform__.calculateCoordinates=function(A,s){var n=s.internal.getHorizontalCoordinate,r=s.internal.getVerticalCoordinate,l=A[0],o=A[1],u=A[2],d=A[3],h={};return h.lowerLeft_X=n(l)||0,h.lowerLeft_Y=r(o+d)||0,h.upperRight_X=n(l+u)||0,h.upperRight_Y=r(o)||0,[Number(iA(h.lowerLeft_X)),Number(iA(h.lowerLeft_Y)),Number(iA(h.upperRight_X)),Number(iA(h.upperRight_Y))]},z4=function(A){if(A.appearanceStreamContent)return A.appearanceStreamContent;if(A.V||A.DV){var s=[],n=A._V||A.DV,r=k0(A,n),l=A.scope.internal.getFont(A.fontName,A.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(A.scope.__private__.encodeColorString(A.color)),s.push("/"+l+" "+iA(r.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(r.text),s.push("ET"),s.push("Q"),s.push("EMC");var o=Fi(A);return o.scope=A.scope,o.stream=s.join(`
`),o}},k0=function(A,s){var n=A.fontSize===0?A.maxFontSize:A.fontSize,r={text:"",fontSize:""},l=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");l=A.multiline?l.map((function(T){return T.split(`
`)})):l.map((function(T){return[T]}));var o=n,u=Dt.internal.getHeight(A)||0;u=u<0?-u:u;var d=Dt.internal.getWidth(A)||0;d=d<0?-d:d;var h=function(T,R,V){if(T+1<l.length){var Z=R+" "+l[T+1][0];return gh(Z,A,V).width<=d-4}return!1};o++;e:for(;o>0;){s="",o--;var m,w,v=gh("3",A,o).height,B=A.multiline?u-o:(u-v)/2,x=B+=2,C=0,N=0,L=0;if(o<=0){s=`(...) Tj
`,s+="% Width of Text: "+gh(s,A,o=12).width+", FieldWidth:"+d+`
`;break}for(var F="",Q=0,_=0;_<l.length;_++)if(l.hasOwnProperty(_)){var te=!1;if(l[_].length!==1&&L!==l[_].length-1){if((v+2)*(Q+2)+2>u)continue e;F+=l[_][L],te=!0,N=_,_--}else{F=(F+=l[_][L]+" ").substr(F.length-1)==" "?F.substr(0,F.length-1):F;var O=parseInt(_),k=h(O,F,o),P=_>=l.length-1;if(k&&!P){F+=" ",L=0;continue}if(k||P){if(P)N=O;else if(A.multiline&&(v+2)*(Q+2)+2>u)continue e}else{if(!A.multiline||(v+2)*(Q+2)+2>u)continue e;N=O}}for(var E="",D=C;D<=N;D++){var G=l[D];if(A.multiline){if(D===N){E+=G[L]+" ",L=(L+1)%G.length;continue}if(D===C){E+=G[G.length-1]+" ";continue}}E+=G[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,w=gh(E,A,o).width,A.textAlign){case"right":m=d-w-2;break;case"center":m=(d-w)/2;break;case"left":default:m=2}s+=iA(m)+" "+iA(x)+` Td
`,s+="("+Vo(E)+`) Tj
`,s+=-iA(m)+` 0 Td
`,x=-(o+2),w=0,C=te?N:N+1,Q++,F=""}break}return r.text=s,r.fontSize=o,r},gh=function(A,s,n){var r=s.scope.internal.getFont(s.fontName,s.fontStyle),l=s.scope.getStringUnitWidth(A,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:s.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:l}},q4={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},G4=function(A,s){var n={type:"reference",object:A};s.internal.getPageInfo(A.page).pageContext.annotations.find((function(r){return r.type===n.type&&r.object===n.object}))===void 0&&s.internal.getPageInfo(A.page).pageContext.annotations.push(n)},J4=function(A,s){for(var n in A)if(A.hasOwnProperty(n)){var r=n,l=A[n];s.internal.newObjectDeferredBegin(l.objId,!0),XA(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete A[r]}},X4=function(A,s){if(s.scope=A,A.internal!==void 0&&(A.internal.acroformPlugin===void 0||A.internal.acroformPlugin.isInitialized===!1)){if(Jr.FieldNum=0,A.internal.acroformPlugin=JSON.parse(JSON.stringify(q4)),A.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");sp=A.internal.scaleFactor,A.internal.acroformPlugin.acroFormDictionaryRoot=new zv,A.internal.acroformPlugin.acroFormDictionaryRoot.scope=A,A.internal.acroformPlugin.acroFormDictionaryRoot._eventID=A.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(A)})),A.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in r)if(r.hasOwnProperty(l)){var o=r[l];o.objId=void 0,o.hasAnnotation&&G4(o,n)}})(A)})),A.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(A)})),A.internal.events.subscribe("postPutPages",(function(n){(function(r,l){var o=!r;for(var u in r||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var d=r[u],h=[],m=d.Rect;if(d.Rect&&(d.Rect=V4(d.Rect,l)),l.internal.newObjectDeferredBegin(d.objId,!0),d.DA=Dt.createDefaultAppearanceStream(d),XA(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=m,d.hasAppearanceStream&&!d.appearanceStreamContent){var w=z4(d);h.push({key:"AP",value:"<</N "+w+">>"}),l.internal.acroformPlugin.xForms.push(w)}if(d.appearanceStreamContent){var v="";for(var B in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(B)){var x=d.appearanceStreamContent[B];if(v+="/"+B+" ",v+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var C=x[u];typeof C=="function"&&(C=C.call(l,d)),v+="/"+u+" "+C+" ",l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C)}}else typeof(C=x)=="function"&&(C=C.call(l,d)),v+="/"+u+" "+C,l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C);v+=">>"}h.push({key:"AP",value:`<<
`+v+">>"})}l.internal.putStream({additionalKeyValues:h,objectId:d.objId}),l.internal.out("endobj")}o&&J4(l.internal.acroformPlugin.xForms,l)})(n,A)})),A.internal.acroformPlugin.isInitialized=!0}},Kv=ka.__acroform__.arrayToPdfArray=function(A,s,n){var r=function(u){return u};if(Array.isArray(A)){for(var l="[",o=0;o<A.length;o++)switch(o!==0&&(l+=" "),XA(A[o])){case"boolean":case"number":case"object":l+=A[o].toString();break;case"string":A[o].substr(0,1)!=="/"?(s!==void 0&&n&&(r=n.internal.getEncryptor(s)),l+="("+Vo(r(A[o].toString()))+")"):l+=A[o].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},A0=function(A,s,n){var r=function(l){return l};return s!==void 0&&n&&(r=n.internal.getEncryptor(s)),(A=A||"").toString(),A="("+Vo(r(A))+")"},Si=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(A){this._objId=A}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Si.prototype.toString=function(){return this.objId+" 0 R"},Si.prototype.putStream=function(){var A=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:A,objectId:this.objId}),this.scope.internal.out("endobj")},Si.prototype.getKeyValueListForStream=function(){var A=[],s=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var n in s)if(Object.getOwnPropertyDescriptor(this,s[n]).configurable===!1){var r=s[n],l=this[r];l&&(Array.isArray(l)?A.push({key:r,value:Kv(l,this.objId,this.scope)}):l instanceof Si?(l.scope=this.scope,A.push({key:r,value:l.objId+" 0 R"})):typeof l!="function"&&A.push({key:r,value:l}))}return A};var Vv=function(){Si.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var A,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){A=n.trim()},get:function(){return A||null}})};On(Vv,Si);var zv=function(){Si.call(this);var A,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(A){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Vo(n(A))+")"}},set:function(n){A=n}})};On(zv,Si);var Jr=function A(){Si.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute F supplied.');s=F}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Va(s,3)},set:function(F){F?this.F=za(s,3):this.F=qa(s,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute Ff supplied.');n=F}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(F){r=F!==void 0?F:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(F){r[0]=F}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(F){r[1]=F}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(F){r[2]=F}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(F){r[3]=F}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(F){switch(F){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=F;break;default:throw new Error('Invalid value "'+F+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Rh)return;o="FieldObject"+A.FieldNum++}var F=function(Q){return Q};return this.scope&&(F=this.scope.internal.getEncryptor(this.objId)),"("+Vo(F(o))+")"},set:function(F){o=F.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(F){o=F}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(F){u=F}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(F){d=F}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(F){h=F}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/sp:m},set:function(F){m=F}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(F){w=F}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Rh||this instanceof Ko))return A0(v,this.objId,this.scope)},set:function(F){F=F.toString(),v=F}});var B=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(B)return this instanceof Qs?B:A0(B,this.objId,this.scope)},set:function(F){F=F.toString(),B=this instanceof Qs?F:F.substr(0,1)==="("?Lc(F.substr(1,F.length-2)):Lc(F)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qs?Lc(B.substr(1,B.length-1)):B},set:function(F){F=F.toString(),B=this instanceof Qs?"/"+F:F}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(F){this.V=F}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Qs?x:A0(x,this.objId,this.scope)},set:function(F){F=F.toString(),x=this instanceof Qs?F:F.substr(0,1)==="("?Lc(F.substr(1,F.length-2)):Lc(F)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qs?Lc(x.substr(1,x.length-1)):x},set:function(F){F=F.toString(),x=this instanceof Qs?"/"+F:F}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(F){F=!!F,N=F}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(F){C=F}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,1)},set:function(F){F?this.Ff=za(this.Ff,1):this.Ff=qa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,2)},set:function(F){F?this.Ff=za(this.Ff,2):this.Ff=qa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,3)},set:function(F){F?this.Ff=za(this.Ff,3):this.Ff=qa(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(F){if([0,1,2].indexOf(F)===-1)throw new Error('Invalid value "'+F+'" for attribute Q supplied.');L=F}}),Object.defineProperty(this,"textAlign",{get:function(){var F;switch(L){case 0:default:F="left";break;case 1:F="center";break;case 2:F="right"}return F},configurable:!0,enumerable:!0,set:function(F){switch(F){case"right":case 2:L=2;break;case"center":case 1:L=1;break;case"left":case 0:default:L=0}}})};On(Jr,Si);var Pc=function(){Jr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var A=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return A},set:function(n){A=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return A},set:function(n){A=n}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Kv(s,this.objId,this.scope)},set:function(n){var r,l;l=[],typeof(r=n)=="string"&&(l=(function(o,u,d){d||(d=1);for(var h,m=[];h=u.exec(o);)m.push(h[d]);return m})(r,/\((.*?)\)/g)),s=l}}),this.getOptions=function(){return s},this.setOptions=function(n){s=n,this.sort&&s.sort()},this.addOption=function(n){n=(n=n||"").toString(),s.push(n),this.sort&&s.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();s.indexOf(n)!==-1&&(s.splice(s.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,18)},set:function(n){n?this.Ff=za(this.Ff,18):this.Ff=qa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=za(this.Ff,19):this.Ff=qa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,20)},set:function(n){n?(this.Ff=za(this.Ff,20),s.sort()):this.Ff=qa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,22)},set:function(n){n?this.Ff=za(this.Ff,22):this.Ff=qa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,23)},set:function(n){n?this.Ff=za(this.Ff,23):this.Ff=qa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,27)},set:function(n){n?this.Ff=za(this.Ff,27):this.Ff=qa(this.Ff,27)}}),this.hasAppearanceStream=!1};On(Pc,Jr);var Kc=function(){Pc.call(this),this.fontName="helvetica",this.combo=!1};On(Kc,Pc);var Vc=function(){Kc.call(this),this.combo=!0};On(Vc,Kc);var jh=function(){Vc.call(this),this.edit=!0};On(jh,Vc);var Qs=function(){Jr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,15)},set:function(n){n?this.Ff=za(this.Ff,15):this.Ff=qa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,16)},set:function(n){n?this.Ff=za(this.Ff,16):this.Ff=qa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,17)},set:function(n){n?this.Ff=za(this.Ff,17):this.Ff=qa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,26)},set:function(n){n?this.Ff=za(this.Ff,26):this.Ff=qa(this.Ff,26)}});var A,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var r,l=[];for(r in l.push("<<"),s)l.push("/"+r+" ("+Vo(n(s[r]))+")");return l.push(">>"),l.join(`
`)}},set:function(n){XA(n)==="object"&&(s=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(n){typeof n=="string"&&(s.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return A},set:function(n){A=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return A.substr(1,A.length-1)},set:function(n){A="/"+n}})};On(Qs,Jr);var Fh=function(){Qs.call(this),this.pushButton=!0};On(Fh,Qs);var zc=function(){Qs.call(this),this.radio=!0,this.pushButton=!1;var A=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return A},set:function(s){A=s!==void 0?s:[]}})};On(zc,Qs);var Rh=function(){var A,s;Jr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return A},set:function(l){A=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(l){s=l}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(d){return d};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),r)u.push("/"+o+" ("+Vo(l(r[o]))+")");return u.push(">>"),u.join(`
`)},set:function(l){XA(l)==="object"&&(r=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(l){typeof l=="string"&&(r.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(l){n=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(l){n="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};On(Rh,Jr),zc.prototype.setAppearance=function(A){if(!("createAppearanceStream"in A)||!("getCA"in A))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var n=this.Kids[s];n.appearanceStreamContent=A.createAppearanceStream(n.optionName),n.caption=A.getCA()}},zc.prototype.createOption=function(A){var s=new Rh;return s.Parent=this,s.optionName=A,this.Kids.push(s),Y4.call(this.scope,s),s};var Sh=function(){Qs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dt.CheckBox.createAppearanceStream()};On(Sh,Qs);var Ko=function(){Jr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,13)},set:function(s){s?this.Ff=za(this.Ff,13):this.Ff=qa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,21)},set:function(s){s?this.Ff=za(this.Ff,21):this.Ff=qa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,23)},set:function(s){s?this.Ff=za(this.Ff,23):this.Ff=qa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,24)},set:function(s){s?this.Ff=za(this.Ff,24):this.Ff=qa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,25)},set:function(s){s?this.Ff=za(this.Ff,25):this.Ff=qa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,26)},set:function(s){s?this.Ff=za(this.Ff,26):this.Ff=qa(this.Ff,26)}});var A=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return A},set:function(s){A=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return A},set:function(s){Number.isInteger(s)&&(A=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};On(Ko,Jr);var Qh=function(){Ko.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Va(this.Ff,14)},set:function(A){A?this.Ff=za(this.Ff,14):this.Ff=qa(this.Ff,14)}}),this.password=!0};On(Qh,Ko);var Dt={CheckBox:{createAppearanceStream:function(){return{N:{On:Dt.CheckBox.YesNormal},D:{On:Dt.CheckBox.YesPushDown,Off:Dt.CheckBox.OffPushDown}}},YesPushDown:function(A){var s=Fi(A);s.scope=A.scope;var n=[],r=A.scope.internal.getFont(A.fontName,A.fontStyle).id,l=A.scope.__private__.encodeColorString(A.color),o=k0(A,A.caption);return n.push("0.749023 g"),n.push("0 0 "+iA(Dt.internal.getWidth(A))+" "+iA(Dt.internal.getHeight(A))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+iA(o.fontSize)+" Tf "+l),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),s.stream=n.join(`
`),s},YesNormal:function(A){var s=Fi(A);s.scope=A.scope;var n=A.scope.internal.getFont(A.fontName,A.fontStyle).id,r=A.scope.__private__.encodeColorString(A.color),l=[],o=Dt.internal.getHeight(A),u=Dt.internal.getWidth(A),d=k0(A,A.caption);return l.push("1 g"),l.push("0 0 "+iA(u)+" "+iA(o)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+iA(u-1)+" "+iA(o-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+n+" "+iA(d.fontSize)+" Tf "+r),l.push(d.text),l.push("ET"),l.push("Q"),s.stream=l.join(`
`),s},OffPushDown:function(A){var s=Fi(A);s.scope=A.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+iA(Dt.internal.getWidth(A))+" "+iA(Dt.internal.getHeight(A))+" re"),n.push("f"),s.stream=n.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(A){var s={D:{Off:Dt.RadioButton.Circle.OffPushDown},N:{}};return s.N[A]=Dt.RadioButton.Circle.YesNormal,s.D[A]=Dt.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(A){var s=Fi(A);s.scope=A.scope;var n=[],r=Dt.internal.getWidth(A)<=Dt.internal.getHeight(A)?Dt.internal.getWidth(A)/4:Dt.internal.getHeight(A)/4;r=Number((.9*r).toFixed(5));var l=Dt.internal.Bezier_C,o=Number((r*l).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+to(Dt.internal.getWidth(A)/2)+" "+to(Dt.internal.getHeight(A)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s},YesPushDown:function(A){var s=Fi(A);s.scope=A.scope;var n=[],r=Dt.internal.getWidth(A)<=Dt.internal.getHeight(A)?Dt.internal.getWidth(A)/4:Dt.internal.getHeight(A)/4;r=Number((.9*r).toFixed(5));var l=Number((2*r).toFixed(5)),o=Number((l*Dt.internal.Bezier_C).toFixed(5)),u=Number((r*Dt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+to(Dt.internal.getWidth(A)/2)+" "+to(Dt.internal.getHeight(A)/2)+" cm"),n.push(l+" 0 m"),n.push(l+" "+o+" "+o+" "+l+" 0 "+l+" c"),n.push("-"+o+" "+l+" -"+l+" "+o+" -"+l+" 0 c"),n.push("-"+l+" -"+o+" -"+o+" -"+l+" 0 -"+l+" c"),n.push(o+" -"+l+" "+l+" -"+o+" "+l+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+to(Dt.internal.getWidth(A)/2)+" "+to(Dt.internal.getHeight(A)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s},OffPushDown:function(A){var s=Fi(A);s.scope=A.scope;var n=[],r=Dt.internal.getWidth(A)<=Dt.internal.getHeight(A)?Dt.internal.getWidth(A)/4:Dt.internal.getHeight(A)/4;r=Number((.9*r).toFixed(5));var l=Number((2*r).toFixed(5)),o=Number((l*Dt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+to(Dt.internal.getWidth(A)/2)+" "+to(Dt.internal.getHeight(A)/2)+" cm"),n.push(l+" 0 m"),n.push(l+" "+o+" "+o+" "+l+" 0 "+l+" c"),n.push("-"+o+" "+l+" -"+l+" "+o+" -"+l+" 0 c"),n.push("-"+l+" -"+o+" -"+o+" -"+l+" 0 -"+l+" c"),n.push(o+" -"+l+" "+l+" -"+o+" "+l+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s}},Cross:{createAppearanceStream:function(A){var s={D:{Off:Dt.RadioButton.Cross.OffPushDown},N:{}};return s.N[A]=Dt.RadioButton.Cross.YesNormal,s.D[A]=Dt.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(A){var s=Fi(A);s.scope=A.scope;var n=[],r=Dt.internal.calculateCross(A);return n.push("q"),n.push("1 1 "+iA(Dt.internal.getWidth(A)-2)+" "+iA(Dt.internal.getHeight(A)-2)+" re"),n.push("W"),n.push("n"),n.push(iA(r.x1.x)+" "+iA(r.x1.y)+" m"),n.push(iA(r.x2.x)+" "+iA(r.x2.y)+" l"),n.push(iA(r.x4.x)+" "+iA(r.x4.y)+" m"),n.push(iA(r.x3.x)+" "+iA(r.x3.y)+" l"),n.push("s"),n.push("Q"),s.stream=n.join(`
`),s},YesPushDown:function(A){var s=Fi(A);s.scope=A.scope;var n=Dt.internal.calculateCross(A),r=[];return r.push("0.749023 g"),r.push("0 0 "+iA(Dt.internal.getWidth(A))+" "+iA(Dt.internal.getHeight(A))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+iA(Dt.internal.getWidth(A)-2)+" "+iA(Dt.internal.getHeight(A)-2)+" re"),r.push("W"),r.push("n"),r.push(iA(n.x1.x)+" "+iA(n.x1.y)+" m"),r.push(iA(n.x2.x)+" "+iA(n.x2.y)+" l"),r.push(iA(n.x4.x)+" "+iA(n.x4.y)+" m"),r.push(iA(n.x3.x)+" "+iA(n.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(A){var s=Fi(A);s.scope=A.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+iA(Dt.internal.getWidth(A))+" "+iA(Dt.internal.getHeight(A))+" re"),n.push("f"),s.stream=n.join(`
`),s}}},createDefaultAppearanceStream:function(A){var s=A.scope.internal.getFont(A.fontName,A.fontStyle).id,n=A.scope.__private__.encodeColorString(A.color);return"/"+s+" "+A.fontSize+" Tf "+n}};Dt.internal={Bezier_C:.551915024494,calculateCross:function(A){var s=Dt.internal.getWidth(A),n=Dt.internal.getHeight(A),r=Math.min(s,n);return{x1:{x:(s-r)/2,y:(n-r)/2+r},x2:{x:(s-r)/2+r,y:(n-r)/2},x3:{x:(s-r)/2,y:(n-r)/2},x4:{x:(s-r)/2+r,y:(n-r)/2+r}}}},Dt.internal.getWidth=function(A){var s=0;return XA(A)==="object"&&(s=V1(A.Rect[2])),s},Dt.internal.getHeight=function(A){var s=0;return XA(A)==="object"&&(s=V1(A.Rect[3])),s};var Y4=ka.addField=function(A){if(X4(this,A),!(A instanceof Jr))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=A).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),A.page=A.scope.internal.getCurrentPageInfo().pageNumber,this};ka.AcroFormChoiceField=Pc,ka.AcroFormListBox=Kc,ka.AcroFormComboBox=Vc,ka.AcroFormEditBox=jh,ka.AcroFormButton=Qs,ka.AcroFormPushButton=Fh,ka.AcroFormRadioButton=zc,ka.AcroFormCheckBox=Sh,ka.AcroFormTextField=Ko,ka.AcroFormPasswordField=Qh,ka.AcroFormAppearance=Dt,ka.AcroForm={ChoiceField:Pc,ListBox:Kc,ComboBox:Vc,EditBox:jh,Button:Qs,PushButton:Fh,RadioButton:zc,CheckBox:Sh,TextField:Ko,PasswordField:Qh,Appearance:Dt},$t.AcroForm={ChoiceField:Pc,ListBox:Kc,ComboBox:Vc,EditBox:jh,Button:Qs,PushButton:Fh,RadioButton:zc,CheckBox:Sh,TextField:Ko,PasswordField:Qh,Appearance:Dt};$t.AcroForm;function qv(A){return A.reduce((function(s,n,r){return s[n]=r,s}),{})}(function(A){A.__addimage__={};var s="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=A.__addimage__.getImageFileTypeByImageData=function(T,R){var V,Z,ue,S,M,Y=s;if((R=R||s)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(k(T))for(M in n)for(ue=n[M],V=0;V<ue.length;V+=1){for(S=!0,Z=0;Z<ue[V].length;Z+=1)if(ue[V][Z]!==void 0&&ue[V][Z]!==T[Z]){S=!1;break}if(S===!0){Y=M;break}}else for(M in n)for(ue=n[M],V=0;V<ue.length;V+=1){for(S=!0,Z=0;Z<ue[V].length;Z+=1)if(ue[V][Z]!==void 0&&ue[V][Z]!==T.charCodeAt(Z)){S=!1;break}if(S===!0){Y=M;break}}return Y===s&&R!==s&&(Y=R),Y},l=function T(R){for(var V=this.internal.write,Z=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var S=[];if(S.push({key:"Type",value:"/XObject"}),S.push({key:"Subtype",value:"/Image"}),S.push({key:"Width",value:R.width}),S.push({key:"Height",value:R.height}),R.colorSpace===L.INDEXED?S.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(S.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===L.DEVICE_CMYK&&S.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),S.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&S.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var M="",Y=0,le=R.transparency.length;Y<le;Y++)M+=R.transparency[Y]+" "+R.transparency[Y]+" ";S.push({key:"Mask",value:"["+M+"]"})}R.sMask!==void 0&&S.push({key:"SMask",value:R.objectId+1+" 0 R"});var de=R.filter!==void 0?["/"+R.filter]:void 0;if(Z({data:R.data,additionalKeyValues:S,alreadyAppliedFilters:de,objectId:R.objectId}),V("endobj"),"sMask"in R&&R.sMask!==void 0){var J="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,U={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:J,data:R.sMask};"filter"in R&&(U.filter=R.filter),T.call(this,U)}if(R.colorSpace===L.INDEXED){var X=this.internal.newObject();Z({data:E(new Uint8Array(R.palette)),objectId:X}),V("endobj")}},o=function(){var T=this.internal.collections.addImage_images;for(var R in T)l.call(this,T[R])},u=function(){var T,R=this.internal.collections.addImage_images,V=this.internal.write;for(var Z in R)V("/I"+(T=R[Z]).index,T.objectId,"0","R")},d=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",u))},h=function(){var T=this.internal.collections.addImage_images;return d.call(this),T},m=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(T){return typeof A["process"+T.toUpperCase()]=="function"},v=function(T){return XA(T)==="object"&&T.nodeType===1},B=function(T,R){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var V=""+T.getAttribute("src");if(V.indexOf("data:image/")===0)return Xu(unescape(V).split("base64,").pop());var Z=A.loadFile(V,!0);if(Z!==void 0)return Z}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var ue;switch(R){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;case"JPEG":case"JPG":default:ue="image/jpeg"}return Xu(T.toDataURL(ue,1).split("base64,").pop())}},x=function(T){var R=this.internal.collections.addImage_images;if(R){for(var V in R)if(T===R[V].alias)return R[V]}},C=function(T,R,V){return T||R||(T=-96,R=-96),T<0&&(T=-1*V.width*72/T/this.internal.scaleFactor),R<0&&(R=-1*V.height*72/R/this.internal.scaleFactor),T===0&&(T=R*V.width/V.height),R===0&&(R=T*V.height/V.width),[T,R]},N=function(T,R,V,Z,ue,S){var M=C.call(this,V,Z,ue),Y=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,de=h.call(this);if(V=M[0],Z=M[1],de[ue.index]=ue,S){S*=Math.PI/180;var J=Math.cos(S),U=Math.sin(S),X=function(re){return re.toFixed(4)},ee=[X(J),X(U),X(-1*U),X(J),0,0,"cm"]}this.internal.write("q"),S?(this.internal.write([1,"0","0",1,Y(T),le(R+Z),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([Y(V),"0","0",Y(Z),"0","0","cm"].join(" "))):this.internal.write([Y(V),"0","0",Y(Z),Y(T),le(R+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},L=A.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};A.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=A.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Q=A.__addimage__.sHashCode=function(T){var R,V,Z=0;if(typeof T=="string")for(V=T.length,R=0;R<V;R++)Z=(Z<<5)-Z+T.charCodeAt(R),Z|=0;else if(k(T))for(V=T.byteLength/2,R=0;R<V;R++)Z=(Z<<5)-Z+T[R],Z|=0;return Z},_=A.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var R=!0;return T.length===0&&(R=!1),T.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(R=!1),R},te=A.__addimage__.extractImageFromDataUrl=function(T){var R=(T=T||"").split("base64,"),V=null;if(R.length===2){var Z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(R[0]);Array.isArray(Z)&&(V={mimeType:Z[1],charset:Z[2],data:R[1]})}return V},O=A.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};A.__addimage__.isArrayBuffer=function(T){return O()&&T instanceof ArrayBuffer};var k=A.__addimage__.isArrayBufferView=function(T){return O()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},P=A.__addimage__.binaryStringToUint8Array=function(T){for(var R=T.length,V=new Uint8Array(R),Z=0;Z<R;Z++)V[Z]=T.charCodeAt(Z);return V},E=A.__addimage__.arrayBufferToBinaryString=function(T){for(var R="",V=k(T)?T:new Uint8Array(T),Z=0;Z<V.length;Z+=8192)R+=String.fromCharCode.apply(null,V.subarray(Z,Z+8192));return R};A.addImage=function(){var T,R,V,Z,ue,S,M,Y,le;if(typeof arguments[1]=="number"?(R=s,V=arguments[1],Z=arguments[2],ue=arguments[3],S=arguments[4],M=arguments[5],Y=arguments[6],le=arguments[7]):(R=arguments[1],V=arguments[2],Z=arguments[3],ue=arguments[4],S=arguments[5],M=arguments[6],Y=arguments[7],le=arguments[8]),XA(T=arguments[0])==="object"&&!v(T)&&"imageData"in T){var de=T;T=de.imageData,R=de.format||R||s,V=de.x||V||0,Z=de.y||Z||0,ue=de.w||de.width||ue,S=de.h||de.height||S,M=de.alias||M,Y=de.compression||Y,le=de.rotation||de.angle||le}var J=this.internal.getFilters();if(Y===void 0&&J.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(V)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var U=D.call(this,T,R,M,Y);return N.call(this,V,Z,ue,S,U,le),this};var D=function(T,R,V,Z){var ue,S,M;if(typeof T=="string"&&r(T)===s){T=unescape(T);var Y=G(T,!1);(Y!==""||(Y=A.loadFile(T,!0))!==void 0)&&(T=Y)}if(v(T)&&(T=B(T,R)),R=r(T,R),!w(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((M=V)==null||M.length===0)&&(V=(function(le){return typeof le=="string"||k(le)?Q(le):k(le.data)?Q(le.data):null})(T)),(ue=x.call(this,V))||(O()&&(T instanceof Uint8Array||R==="RGBA"||(S=T,T=P(T))),ue=this["process"+R.toUpperCase()](T,m.call(this),V,(function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in A.image_compression?le:F.NONE})(Z),S)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},G=A.__addimage__.convertBase64ToBinaryString=function(T,R){var V;R=typeof R!="boolean"||R;var Z,ue="";if(typeof T=="string"){Z=(V=te(T))!==null?V.data:T;try{ue=Xu(Z)}catch(S){if(R)throw _(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+S.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ue};A.getImageProperties=function(T){var R,V,Z="";if(v(T)&&(T=B(T)),typeof T=="string"&&r(T)===s&&((Z=G(T,!1))===""&&(Z=A.loadFile(T)||""),T=Z),V=r(T),!w(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!O()||T instanceof Uint8Array||(T=P(T)),!(R=this["process"+V.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=V,R}})($t.API),(function(A){var s=function(n){if(n!==void 0&&n!="")return!0};$t.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),A.events.push(["putPage",function(n){for(var r,l,o,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(n.objId),m=n.pageContext.annotations,w=!1,v=0;v<m.length&&!w;v++)switch((r=m[v]).type){case"link":(s(r.options.url)||s(r.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var B=0;B<m.length;B++){r=m[B];var x=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),F=this.internal.getEncryptor(N.objId),Q=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(l="/Rect ["+u(r.bounds.x)+" "+d(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y)+"] ")+"/Contents ("+x(F(r.contents))+")",o+=" /Popup "+L.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+x(F(Q))+") >>",N.content=o;var _=N.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+u(r.bounds.x+30)+" "+d(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+d(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(o+=" /Open true"),o+=" >>",L.content=o,this.internal.write(N.objId,"0 R",L.objId,"0 R");break;case"freetext":l="/Rect ["+u(r.bounds.x)+" "+d(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y+r.bounds.h)+"] ";var te=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+x(C(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+te+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var O=this.annotations._nameMap[r.options.name];r.options.pageNumber=O.page,r.options.top=O.y}else r.options.top||(r.options.top=0);if(l="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+x(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var k=d(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+k+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),A.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},A.link=function(n,r,l,o,u){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(n),y:m(r),w:h(n+l),h:m(r+o)},options:u,type:"link"})},A.textWithLink=function(n,r,l,o){var u,d,h=this.getTextWidth(n),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var w=this.splitTextToSize(n,d).length;u=Math.ceil(m*w)}else d=h,u=m;return this.text(n,r,l,o),l+=.2*m,o.align==="center"&&(r-=h/2),o.align==="right"&&(r-=h),this.link(r,l-m,d,u,o),h},A.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})($t.API),(function(A){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];A.__arabicParser__={};var o=A.__arabicParser__.isInArabicSubstitutionA=function(N){return s[N.charCodeAt(0)]!==void 0},u=A.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},d=A.__arabicParser__.isArabicEndLetter=function(N){return u(N)&&o(N)&&s[N.charCodeAt(0)].length<=2},h=A.__arabicParser__.isArabicAlfLetter=function(N){return u(N)&&l.indexOf(N.charCodeAt(0))>=0};A.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return u(N)&&o(N)&&s[N.charCodeAt(0)].length>=1};var m=A.__arabicParser__.arabicLetterHasFinalForm=function(N){return u(N)&&o(N)&&s[N.charCodeAt(0)].length>=2};A.__arabicParser__.arabicLetterHasInitialForm=function(N){return u(N)&&o(N)&&s[N.charCodeAt(0)].length>=3};var w=A.__arabicParser__.arabicLetterHasMedialForm=function(N){return u(N)&&o(N)&&s[N.charCodeAt(0)].length==4},v=A.__arabicParser__.resolveLigatures=function(N){var L=0,F=n,Q="",_=0;for(L=0;L<N.length;L+=1)F[N.charCodeAt(L)]!==void 0?(_++,typeof(F=F[N.charCodeAt(L)])=="number"&&(Q+=String.fromCharCode(F),F=n,_=0),L===N.length-1&&(F=n,Q+=N.charAt(L-(_-1)),L-=_-1,_=0)):(F=n,Q+=N.charAt(L-_),L-=_,_=0);return Q};A.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&r[N.charCodeAt(0)]!==void 0};var B=A.__arabicParser__.getCorrectForm=function(N,L,F){return u(N)?o(N)===!1?-1:!m(N)||!u(L)&&!u(F)||!u(F)&&d(L)||d(N)&&!u(L)||d(N)&&h(L)||d(N)&&d(L)?0:w(N)&&u(L)&&!d(L)&&u(F)&&m(F)?3:d(N)||!u(F)?1:2:-1},x=function(N){var L=0,F=0,Q=0,_="",te="",O="",k=(N=N||"").split("\\s+"),P=[];for(L=0;L<k.length;L+=1){for(P.push(""),F=0;F<k[L].length;F+=1)_=k[L][F],te=k[L][F-1],O=k[L][F+1],u(_)?(Q=B(_,te,O),P[L]+=Q!==-1?String.fromCharCode(s[_.charCodeAt(0)][Q]):_):P[L]+=_;P[L]=v(P[L])}return P.join(" ")},C=A.__arabicParser__.processArabic=A.processArabic=function(){var N,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,F=[];if(Array.isArray(L)){var Q=0;for(F=[],Q=0;Q<L.length;Q+=1)Array.isArray(L[Q])?F.push([x(L[Q][0]),L[Q][1],L[Q][2]]):F.push([x(L[Q])]);N=F}else N=x(L);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};A.events.push(["preProcessText",C])})($t.API),$t.API.autoPrint=function(A){var s;switch((A=A||{}).variant=A.variant||"non-conform",A.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+s+" 0 R")}))}return this},(function(A){var s=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(d){n=d}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(d){l=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(n,r){var l;if((n=n||"2d")!=="2d")return null;for(l in r)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=r[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},A.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])})($t.API),(function(A){var s={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(N){w=N}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(N){v=N}});var B=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return B},set:function(N){B=N}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(N){x=N}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(N){C=N}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},A.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},A.getTextDimensions=function(h,m){r.call(this);var w=(m=m||{}).fontSize||this.getFontSize(),v=m.font||this.getFont(),B=m.scaleFactor||this.internal.scaleFactor,x=0,C=0,N=0,L=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var F=m.maxWidth;F>0?typeof h=="string"?h=this.splitTextToSize(h,F):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce((function(_,te){return _.concat(L.splitTextToSize(te,F))}),[])):h=Array.isArray(h)?h:[h];for(var Q=0;Q<h.length;Q++)x<(N=this.getStringUnitWidth(h[Q],{font:v})*w)&&(x=N);return x!==0&&(C=h.length),{w:x/=B,h:Math.max((C*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/B,0)}},A.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=A.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var m=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,v=this.internal.__cell__.margins||s,B=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===h.lineNumber?(h.x=(m.x||0)+(m.width||0),h.y=m.y||0):m.y+m.height+h.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=v.top,x&&B&&(this.printHeaderRow(h.lineNumber,!0),h.y+=B[0].height)):h.y=m.y+m.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,n===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-w,h.y+w,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+w,{align:"center",baseline:"top",maxWidth:h.width-w-w}):this.text(h.text,h.x+w,h.y+w,{align:"left",baseline:"top",maxWidth:h.width-w-w})),this.internal.__cell__.lastCell=h,this};A.table=function(h,m,w,v,B){if(r.call(this),!w)throw new Error("No data for PDF table.");var x,C,N,L,F=[],Q=[],_=[],te={},O={},k=[],P=[],E=(B=B||{}).autoSize||!1,D=B.printHeaders!==!1,G=B.css&&B.css["font-size"]!==void 0?16*B.css["font-size"]:B.fontSize||12,T=B.margins||Object.assign({width:this.getPageWidth()},s),R=typeof B.padding=="number"?B.padding:3,V=B.headerBackgroundColor||"#c8c8c8",Z=B.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=Z,this.setFontSize(G),v==null)Q=F=Object.keys(w[0]),_=F.map((function(){return"left"}));else if(Array.isArray(v)&&XA(v[0])==="object")for(F=v.map((function(de){return de.name})),Q=v.map((function(de){return de.prompt||de.name||""})),_=v.map((function(de){return de.align||"left"})),x=0;x<v.length;x+=1)O[v[x].name]=v[x].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(Q=F=v,_=F.map((function(){return"left"})));if(E||Array.isArray(v)&&typeof v[0]=="string")for(x=0;x<F.length;x+=1){for(te[L=F[x]]=w.map((function(de){return de[L]})),this.setFont(void 0,"bold"),k.push(this.getTextDimensions(Q[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=te[L],this.setFont(void 0,"normal"),N=0;N<C.length;N+=1)k.push(this.getTextDimensions(C[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[L]=Math.max.apply(null,k)+R+R,k=[]}if(D){var ue={};for(x=0;x<F.length;x+=1)ue[F[x]]={},ue[F[x]].text=Q[x],ue[F[x]].align=_[x];var S=d.call(this,ue,O);P=F.map((function(de){return new o(h,m,O[de],S,ue[de].text,void 0,ue[de].align)})),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var M=v.reduce((function(de,J){return de[J.name]=J.align,de}),{});for(x=0;x<w.length;x+=1){"rowStart"in B&&B.rowStart instanceof Function&&B.rowStart({row:x,data:w[x]},this);var Y=d.call(this,w[x],O);for(N=0;N<F.length;N+=1){var le=w[x][F[N]];"cellStart"in B&&B.cellStart instanceof Function&&B.cellStart({row:x,col:N,data:le},this),u.call(this,new o(h,m,O[F[N]],Y,le,x+2,M[F[N]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=m,this};var d=function(h,m){var w=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,B=this.internal.scaleFactor;return Object.keys(h).map((function(x){var C=h[x];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,m[x]-w-w)}),this).map((function(x){return this.getLineHeightFactor()*x.length*v/B+w+w}),this).reduce((function(x,C){return Math.max(x,C)}),0)};A.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},A.printHeaderRow=function(h,m){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var B=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){w=this.internal.__cell__.tableHeaderRow[x].clone(),m&&(w.y=this.internal.__cell__.margins.top||0,B.push(w)),w.lineNumber=h;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,w),this.setTextColor(C)}B.length>0&&this.setTableHeaderRow(B),this.setFont(void 0,"normal"),n=!1}})($t.API);var Gv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Jv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_0=qv(Jv),Xv=[100,200,300,400,500,600,700,800,900],Z4=qv(Xv);function R0(A){var s=A.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return Gv[o=o||"normal"]?o:"normal"})(A.style),r=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(A.weight),l=(function(o){return typeof _0[o=o||"normal"]=="number"?o:"normal"})(A.stretch);return{family:s,style:n,weight:r,stretch:l,src:A.src||[],ref:A.ref||{name:s,style:[l,n,r].join(" ")}}}function z1(A,s,n,r){var l;for(l=n;l>=0&&l<s.length;l+=r)if(A[s[l]])return A[s[l]];for(l=n;l>=0&&l<s.length;l-=r)if(A[s[l]])return A[s[l]]}var W4={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},q1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function G1(A){return[A.stretch,A.style,A.weight,A.family].join(" ")}function $4(A,s,n){for(var r=(n=n||{}).defaultFontFamily||"times",l=Object.assign({},W4,n.genericFontFamilies||{}),o=null,u=null,d=0;d<s.length;++d)if(l[(o=R0(s[d])).family]&&(o.family=l[o.family]),A.hasOwnProperty(o.family)){u=A[o.family];break}if(!(u=u||A[r]))throw new Error("Could not find a font-family for the rule '"+G1(o)+"' and default family '"+r+"'.");if(u=(function(h,m){if(m[h])return m[h];var w=_0[h],v=w<=_0.normal?-1:1,B=z1(m,Jv,w,v);if(!B)throw new Error("Could not find a matching font-stretch value for "+h);return B})(o.stretch,u),u=(function(h,m){if(m[h])return m[h];for(var w=Gv[h],v=0;v<w.length;++v)if(m[w[v]])return m[w[v]];throw new Error("Could not find a matching font-style for "+h)})(o.style,u),!(u=(function(h,m){if(m[h])return m[h];if(h===400&&m[500])return m[500];if(h===500&&m[400])return m[400];var w=Z4[h],v=z1(m,Xv,w,h<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+h);return v})(o.weight,u)))throw new Error("Failed to resolve a font for the rule '"+G1(o)+"'.");return u}function J1(A){return A.trimLeft()}function ej(A,s){for(var n=0;n<A.length;){if(A.charAt(n)===s)return[A.substring(0,n),A.substring(n+1)];n+=1}return null}function tj(A){var s=A.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],A.substring(s[0].length)]}var xh,X1,Y1,a0=["times"];(function(A){var s,n,r,l,o,u,d,h,m,w=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new h,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new u,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new u,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};A.events.push(["initialized",function(){this.context2d=new v(this),s=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,m=new w}]);var v=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=U;Object.defineProperty(this,"pdf",{get:function(){return X}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(Le){ee=!!Le}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Le){re=!!Le}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(Le){isNaN(Le)||(fe=Le)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(Le){isNaN(Le)||(ve=Le)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Le){var K;typeof Le=="number"?K=[Le,Le,Le,Le]:((K=new Array(4))[0]=Le[0],K[1]=Le.length>=2?Le[1]:K[0],K[2]=Le.length>=3?Le[2]:K[0],K[3]=Le.length>=4?Le[3]:K[1]),m.margin=K}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Le){xe=Le}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(Le){Ce=Le}});var st=[];Object.defineProperty(this,"pageBreaks",{get:function(){return st},set:function(Le){st=Le}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Le){Le instanceof w&&(m=Le)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Le){m.path=Le}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(Le){_e=Le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Le){var K;K=B(Le),this.ctx.fillStyle=K.style,this.ctx.isFillTransparent=K.a===0,this.ctx.fillOpacity=K.a,this.pdf.setFillColor(K.r,K.g,K.b,{a:K.a}),this.pdf.setTextColor(K.r,K.g,K.b,{a:K.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Le){var K=B(Le);this.ctx.strokeStyle=K.style,this.ctx.isStrokeTransparent=K.a===0,this.ctx.strokeOpacity=K.a,K.a===0?this.pdf.setDrawColor(255,255,255):(K.a,this.pdf.setDrawColor(K.r,K.g,K.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Le){["butt","round","square"].indexOf(Le)!==-1&&(this.ctx.lineCap=Le,this.pdf.setLineCap(Le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Le){isNaN(Le)||(this.ctx.lineWidth=Le,this.pdf.setLineWidth(Le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Le){["bevel","round","miter"].indexOf(Le)!==-1&&(this.ctx.lineJoin=Le,this.pdf.setLineJoin(Le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Le){isNaN(Le)||(this.ctx.miterLimit=Le,this.pdf.setMiterLimit(Le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Le){this.ctx.textBaseline=Le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Le){["right","end","center","left","start"].indexOf(Le)!==-1&&(this.ctx.textAlign=Le)}});var $e=null;function Ue(Le,K){if($e===null){var Ge=(function(Ye){var ie=[];return Object.keys(Ye).forEach((function(Ne){Ye[Ne].forEach((function(Te){var qe=null;switch(Te){case"bold":qe={family:Ne,weight:"bold"};break;case"italic":qe={family:Ne,style:"italic"};break;case"bolditalic":qe={family:Ne,weight:"bold",style:"italic"};break;case"":case"normal":qe={family:Ne}}qe!==null&&(qe.ref={name:Ne,style:Te},ie.push(qe))}))})),ie})(Le.getFontList());$e=(function(Ye){for(var ie={},Ne=0;Ne<Ye.length;++Ne){var Te=R0(Ye[Ne]),qe=Te.family,ot=Te.stretch,xt=Te.style,Ct=Te.weight;ie[qe]=ie[qe]||{},ie[qe][ot]=ie[qe][ot]||{},ie[qe][ot][xt]=ie[qe][ot][xt]||{},ie[qe][ot][xt][Ct]=Te}return ie})(Ge.concat(K))}return $e}var At=null;Object.defineProperty(this,"fontFaces",{get:function(){return At},set:function(Le){$e=null,At=Le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Le){var K;if(this.ctx.font=Le,(K=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Le))!==null){var Ge=K[1],Ye=(K[2],K[3]),ie=K[4],Ne=(K[5],K[6]),Te=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ie)[2];ie=Math.floor(Te==="px"?parseFloat(ie)*this.pdf.internal.scaleFactor:Te==="em"?parseFloat(ie)*this.pdf.getFontSize():parseFloat(ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ie);var qe=(function(jt){var Qt,Oe,yt=[],mt=jt.trim();if(mt==="")return a0;if(mt in q1)return[q1[mt]];for(;mt!=="";){switch(Oe=null,Qt=(mt=J1(mt)).charAt(0)){case'"':case"'":Oe=ej(mt.substring(1),Qt);break;default:Oe=tj(mt)}if(Oe===null||(yt.push(Oe[0]),(mt=J1(Oe[1]))!==""&&mt.charAt(0)!==","))return a0;mt=mt.replace(/^,/,"")}return yt})(Ne);if(this.fontFaces){var ot=$4(Ue(this.pdf,this.fontFaces),qe.map((function(jt){return{family:jt,stretch:"normal",weight:Ye,style:Ge}})));this.pdf.setFont(ot.ref.name,ot.ref.style)}else{var xt="";(Ye==="bold"||parseInt(Ye,10)>=700||Ge==="bold")&&(xt="bold"),Ge==="italic"&&(xt+="italic"),xt.length===0&&(xt="normal");for(var Ct="",Tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Yt=0;Yt<qe.length;Yt++){if(this.pdf.internal.getFont(qe[Yt],xt,{noFallback:!0,disableWarning:!0})!==void 0){Ct=qe[Yt];break}if(xt==="bolditalic"&&this.pdf.internal.getFont(qe[Yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ct=qe[Yt],xt="bold";else if(this.pdf.internal.getFont(qe[Yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ct=qe[Yt],xt="normal";break}}if(Ct===""){for(var Pt=0;Pt<qe.length;Pt++)if(Tt[qe[Pt]]){Ct=Tt[qe[Pt]];break}}Ct=Ct===""?"Times":Ct,this.pdf.setFont(Ct,xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Le){this.ctx.globalCompositeOperation=Le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Le){this.ctx.globalAlpha=Le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Le){this.ctx.lineDashOffset=Le,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Le){this.ctx.lineDash=Le,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Le){this.ctx.ignoreClearRect=!!Le}})};v.prototype.setLineDash=function(U){this.lineDash=U},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){te.call(this,"fill",!1)},v.prototype.stroke=function(){te.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(U,X){if(isNaN(U)||isNaN(X))throw la.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new u(U,X));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new u(U,X)},v.prototype.closePath=function(){var U=new u(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&XA(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){U=new u(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(U.x,U.y)},v.prototype.lineTo=function(U,X){if(isNaN(U)||isNaN(X))throw la.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new u(U,X));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new u(ee.x,ee.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),te.call(this,null,!0)},v.prototype.quadraticCurveTo=function(U,X,ee,re){if(isNaN(ee)||isNaN(re)||isNaN(U)||isNaN(X))throw la.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new u(ee,re)),ve=this.ctx.transform.applyToPoint(new u(U,X));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new u(fe.x,fe.y)},v.prototype.bezierCurveTo=function(U,X,ee,re,fe,ve){if(isNaN(fe)||isNaN(ve)||isNaN(U)||isNaN(X)||isNaN(ee)||isNaN(re))throw la.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new u(fe,ve)),Ce=this.ctx.transform.applyToPoint(new u(U,X)),st=this.ctx.transform.applyToPoint(new u(ee,re));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:st.x,y2:st.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new u(xe.x,xe.y)},v.prototype.arc=function(U,X,ee,re,fe,ve){if(isNaN(U)||isNaN(X)||isNaN(ee)||isNaN(re)||isNaN(fe))throw la.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new u(U,X));U=xe.x,X=xe.y;var Ce=this.ctx.transform.applyToPoint(new u(0,ee)),st=this.ctx.transform.applyToPoint(new u(0,0));ee=Math.sqrt(Math.pow(Ce.x-st.x,2)+Math.pow(Ce.y-st.y,2))}Math.abs(fe-re)>=2*Math.PI&&(re=0,fe=2*Math.PI),this.path.push({type:"arc",x:U,y:X,radius:ee,startAngle:re,endAngle:fe,counterclockwise:ve})},v.prototype.arcTo=function(U,X,ee,re,fe){throw new Error("arcTo not implemented.")},v.prototype.rect=function(U,X,ee,re){if(isNaN(U)||isNaN(X)||isNaN(ee)||isNaN(re))throw la.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,X),this.lineTo(U+ee,X),this.lineTo(U+ee,X+re),this.lineTo(U,X+re),this.lineTo(U,X),this.lineTo(U+ee,X),this.lineTo(U,X)},v.prototype.fillRect=function(U,X,ee,re){if(isNaN(U)||isNaN(X)||isNaN(ee)||isNaN(re))throw la.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,X,ee,re),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},v.prototype.strokeRect=function(U,X,ee,re){if(isNaN(U)||isNaN(X)||isNaN(ee)||isNaN(re))throw la.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(U,X,ee,re),this.stroke())},v.prototype.clearRect=function(U,X,ee,re){if(isNaN(U)||isNaN(X)||isNaN(ee)||isNaN(re))throw la.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,X,ee,re))},v.prototype.save=function(U){U=typeof U!="boolean"||U;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},v.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(X),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var B=function(U){var X,ee,re,fe;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))X=0,ee=0,re=0,fe=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(ve!==null)X=parseInt(ve[1]),ee=parseInt(ve[2]),re=parseInt(ve[3]),fe=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)X=parseInt(ve[1]),ee=parseInt(ve[2]),re=parseInt(ve[3]),fe=parseFloat(ve[4]);else{if(fe=1,typeof U=="string"&&U.charAt(0)!=="#"){var xe=new _v(U);U=xe.ok?xe.toHex():"#000000"}U.length===4?(X=U.substring(1,2),X+=X,ee=U.substring(2,3),ee+=ee,re=U.substring(3,4),re+=re):(X=U.substring(1,3),ee=U.substring(3,5),re=U.substring(5,7)),X=parseInt(X,16),ee=parseInt(ee,16),re=parseInt(re,16)}}return{r:X,g:ee,b:re,a:fe,style:U}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(U,X,ee,re){if(isNaN(X)||isNaN(ee)||typeof U!="string")throw la.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!x.call(this)){var fe=Y(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;R.call(this,{text:U,x:X,y:ee,scale:ve,angle:fe,align:this.textAlign,maxWidth:re})}},v.prototype.strokeText=function(U,X,ee,re){if(isNaN(X)||isNaN(ee)||typeof U!="string")throw la.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){re=isNaN(re)?void 0:re;var fe=Y(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;R.call(this,{text:U,x:X,y:ee,scale:ve,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:re})}},v.prototype.measureText=function(U){if(typeof U!="string")throw la.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,ee=this.pdf.internal.scaleFactor,re=X.internal.getFontSize(),fe=X.getStringUnitWidth(U)*re/X.internal.scaleFactor,ve=function(xe){var Ce=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this};return new ve({width:fe*=Math.round(96*ee/72*1e4)/1e4})},v.prototype.scale=function(U,X){if(isNaN(U)||isNaN(X))throw la.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new h(U,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},v.prototype.rotate=function(U){if(isNaN(U))throw la.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new h(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},v.prototype.translate=function(U,X){if(isNaN(U)||isNaN(X))throw la.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new h(1,0,0,1,U,X);this.ctx.transform=this.ctx.transform.multiply(ee)},v.prototype.transform=function(U,X,ee,re,fe,ve){if(isNaN(U)||isNaN(X)||isNaN(ee)||isNaN(re)||isNaN(fe)||isNaN(ve))throw la.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new h(U,X,ee,re,fe,ve);this.ctx.transform=this.ctx.transform.multiply(xe)},v.prototype.setTransform=function(U,X,ee,re,fe,ve){U=isNaN(U)?1:U,X=isNaN(X)?0:X,ee=isNaN(ee)?0:ee,re=isNaN(re)?1:re,fe=isNaN(fe)?0:fe,ve=isNaN(ve)?0:ve,this.ctx.transform=new h(U,X,ee,re,fe,ve)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(U,X,ee,re,fe,ve,xe,Ce,st){var _e=this.pdf.getImageProperties(U),$e=1,Ue=1,At=1,Le=1;re!==void 0&&Ce!==void 0&&(At=Ce/re,Le=st/fe,$e=_e.width/re*Ce/re,Ue=_e.height/fe*st/fe),ve===void 0&&(ve=X,xe=ee,X=0,ee=0),re!==void 0&&Ce===void 0&&(Ce=re,st=fe),re===void 0&&Ce===void 0&&(Ce=_e.width,st=_e.height);for(var K,Ge=this.ctx.transform.decompose(),Ye=Y(Ge.rotate.shx),ie=new h,Ne=(ie=(ie=(ie=ie.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new d(ve-X*At,xe-ee*Le,re*$e,fe*Ue)),Te=L.call(this,Ne),qe=[],ot=0;ot<Te.length;ot+=1)qe.indexOf(Te[ot])===-1&&qe.push(Te[ot]);if(_(qe),this.autoPaging)for(var xt=qe[0],Ct=qe[qe.length-1],Tt=xt;Tt<Ct+1;Tt++){this.pdf.setPage(Tt);var Yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=Tt===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=Tt===1?0:jt+(Tt-2)*Qt;if(this.ctx.clip_path.length!==0){var yt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(K,this.posX+this.margin[3],-Oe+Pt+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=yt}var mt=JSON.parse(JSON.stringify(Ne));mt=Q([mt],this.posX+this.margin[3],-Oe+Pt+this.ctx.prevPageLastElemOffset)[0];var wt=(Tt>xt||Tt<Ct)&&N.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,Qt,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,Ye),wt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(U,"JPEG",Ne.x,Ne.y,Ne.w,Ne.h,null,null,Ye)};var L=function(U,X,ee){var re=[];X=X||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":re.push(Math.floor((U.y+fe)/ee)+1);break;case"arc":re.push(Math.floor((U.y+fe-U.radius)/ee)+1),re.push(Math.floor((U.y+fe+U.radius)/ee)+1);break;case"qct":var ve=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);re.push(Math.floor((ve.y+fe)/ee)+1),re.push(Math.floor((ve.y+ve.h+fe)/ee)+1);break;case"bct":var xe=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);re.push(Math.floor((xe.y+fe)/ee)+1),re.push(Math.floor((xe.y+xe.h+fe)/ee)+1);break;case"rect":re.push(Math.floor((U.y+fe)/ee)+1),re.push(Math.floor((U.y+U.h+fe)/ee)+1)}for(var Ce=0;Ce<re.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<re[Ce];)F.call(this);return re},F=function(){var U=this.fillStyle,X=this.strokeStyle,ee=this.font,re=this.lineCap,fe=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=X,this.font=ee,this.lineCap=re,this.lineWidth=fe,this.lineJoin=ve},Q=function(U,X,ee){for(var re=0;re<U.length;re++)switch(U[re].type){case"bct":U[re].x2+=X,U[re].y2+=ee;case"qct":U[re].x1+=X,U[re].y1+=ee;case"mt":case"lt":case"arc":default:U[re].x+=X,U[re].y+=ee}return U},_=function(U){return U.sort((function(X,ee){return X-ee}))},te=function(U,X){for(var ee,re,fe=this.fillStyle,ve=this.strokeStyle,xe=this.lineCap,Ce=this.lineWidth,st=Math.abs(Ce*this.ctx.transform.scaleX),_e=this.lineJoin,$e=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),At=[],Le=0;Le<Ue.length;Le++)if(Ue[Le].x!==void 0)for(var K=L.call(this,Ue[Le]),Ge=0;Ge<K.length;Ge+=1)At.indexOf(K[Ge])===-1&&At.push(K[Ge]);for(var Ye=0;Ye<At.length;Ye++)for(;this.pdf.internal.getNumberOfPages()<At[Ye];)F.call(this);if(_(At),this.autoPaging)for(var ie=At[0],Ne=At[At.length-1],Te=ie;Te<Ne+1;Te++){this.pdf.setPage(Te),this.fillStyle=fe,this.strokeStyle=ve,this.lineCap=xe,this.lineWidth=st,this.lineJoin=_e;var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Te===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Tt=Te===1?0:xt+(Te-2)*Ct;if(this.ctx.clip_path.length!==0){var Yt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(ee,this.posX+this.margin[3],-Tt+ot+this.ctx.prevPageLastElemOffset),O.call(this,U,!0),this.path=Yt}if(re=JSON.parse(JSON.stringify($e)),this.path=Q(re,this.posX+this.margin[3],-Tt+ot+this.ctx.prevPageLastElemOffset),X===!1||Te===0){var Pt=(Te>ie||Te<Ne)&&N.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,Ct,null).clip().discardPath()),O.call(this,U,X),Pt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=st,O.call(this,U,X),this.lineWidth=Ce;this.path=$e},O=function(U,X){if((U!=="stroke"||X||!C.call(this))&&(U==="stroke"||X||!x.call(this))){for(var ee,re,fe=[],ve=this.path,xe=0;xe<ve.length;xe++){var Ce=ve[xe];switch(Ce.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:Ce,deltas:[],abs:[]});break;case"lt":var st=fe.length;if(ve[xe-1]&&!isNaN(ve[xe-1].x)&&(ee=[Ce.x-ve[xe-1].x,Ce.y-ve[xe-1].y],st>0)){for(;st>=0;st--)if(fe[st-1].close!==!0&&fe[st-1].begin!==!0){fe[st-1].deltas.push(ee),fe[st-1].abs.push(Ce);break}}break;case"bct":ee=[Ce.x1-ve[xe-1].x,Ce.y1-ve[xe-1].y,Ce.x2-ve[xe-1].x,Ce.y2-ve[xe-1].y,Ce.x-ve[xe-1].x,Ce.y-ve[xe-1].y],fe[fe.length-1].deltas.push(ee);break;case"qct":var _e=ve[xe-1].x+2/3*(Ce.x1-ve[xe-1].x),$e=ve[xe-1].y+2/3*(Ce.y1-ve[xe-1].y),Ue=Ce.x+2/3*(Ce.x1-Ce.x),At=Ce.y+2/3*(Ce.y1-Ce.y),Le=Ce.x,K=Ce.y;ee=[_e-ve[xe-1].x,$e-ve[xe-1].y,Ue-ve[xe-1].x,At-ve[xe-1].y,Le-ve[xe-1].x,K-ve[xe-1].y],fe[fe.length-1].deltas.push(ee);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(Ce)}}re=X?null:U==="stroke"?"stroke":"fill";for(var Ge=!1,Ye=0;Ye<fe.length;Ye++)if(fe[Ye].arc)for(var ie=fe[Ye].abs,Ne=0;Ne<ie.length;Ne++){var Te=ie[Ne];Te.type==="arc"?E.call(this,Te.x,Te.y,Te.radius,Te.startAngle,Te.endAngle,Te.counterclockwise,void 0,X,!Ge):V.call(this,Te.x,Te.y),Ge=!0}else if(fe[Ye].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(fe[Ye].begin!==!0){var qe=fe[Ye].start.x,ot=fe[Ye].start.y;Z.call(this,fe[Ye].deltas,qe,ot),Ge=!0}re&&D.call(this,re),X&&G.call(this)}},k=function(U){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-ee;case"top":return U+X-ee;case"hanging":return U+X-2*ee;case"middle":return U+X/2-ee;case"ideographic":return U;case"alphabetic":default:return U}},P=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(X,ee){this.colorStops.push([X,ee])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(U,X,ee,re,fe,ve,xe,Ce,st){for(var _e=S.call(this,ee,re,fe,ve),$e=0;$e<_e.length;$e++){var Ue=_e[$e];$e===0&&(st?T.call(this,Ue.x1+U,Ue.y1+X):V.call(this,Ue.x1+U,Ue.y1+X)),ue.call(this,U,X,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}Ce?G.call(this):D.call(this,xe)},D=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(U,X){this.pdf.internal.out(n(U)+" "+r(X)+" m")},R=function(U){var X;switch(U.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var ee=this.pdf.getTextDimensions(U.text),re=k.call(this,U.y),fe=P.call(this,re)-ee.h,ve=this.ctx.transform.applyToPoint(new u(U.x,re)),xe=this.ctx.transform.decompose(),Ce=new h;Ce=(Ce=(Ce=Ce.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var st,_e,$e,Ue=this.ctx.transform.applyToRectangle(new d(U.x,re,ee.w,ee.h)),At=Ce.applyToRectangle(new d(U.x,fe,ee.w,ee.h)),Le=L.call(this,At),K=[],Ge=0;Ge<Le.length;Ge+=1)K.indexOf(Le[Ge])===-1&&K.push(Le[Ge]);if(_(K),this.autoPaging)for(var Ye=K[0],ie=K[K.length-1],Ne=Ye;Ne<ie+1;Ne++){this.pdf.setPage(Ne);var Te=Ne===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[2],xt=ot-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],Tt=Ct-this.margin[3],Yt=Ne===1?0:qe+(Ne-2)*xt;if(this.ctx.clip_path.length!==0){var Pt=this.path;st=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(st,this.posX+this.margin[3],-1*Yt+Te),O.call(this,"fill",!0),this.path=Pt}var jt=Q([JSON.parse(JSON.stringify(At))],this.posX+this.margin[3],-Yt+Te+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*U.scale),$e=this.lineWidth,this.lineWidth=$e*U.scale);var Qt=this.autoPaging!=="text";if(Qt||jt.y+jt.h<=ot){if(Qt||jt.y>=Te&&jt.x<=Ct){var Oe=Qt?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||Ct-jt.x)[0],yt=Q([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-Yt+Te+this.ctx.prevPageLastElemOffset)[0],mt=Qt&&(Ne>Ye||Ne<ie)&&N.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,xt,null).clip().discardPath()),this.pdf.text(Oe,yt.x,yt.y,{angle:U.angle,align:X,renderingMode:U.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else jt.y<ot&&(this.ctx.prevPageLastElemOffset+=ot-jt.y);U.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=$e)}else U.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*U.scale),$e=this.lineWidth,this.lineWidth=$e*U.scale),this.pdf.text(U.text,ve.x+this.posX,ve.y+this.posY,{angle:U.angle,align:X,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=$e)},V=function(U,X,ee,re){ee=ee||0,re=re||0,this.pdf.internal.out(n(U+ee)+" "+r(X+re)+" l")},Z=function(U,X,ee){return this.pdf.lines(U,X,ee,null,null)},ue=function(U,X,ee,re,fe,ve,xe,Ce){this.pdf.internal.out([s(l(ee+U)),s(o(re+X)),s(l(fe+U)),s(o(ve+X)),s(l(xe+U)),s(o(Ce+X)),"c"].join(" "))},S=function(U,X,ee,re){for(var fe=2*Math.PI,ve=Math.PI/2;X>ee;)X-=fe;var xe=Math.abs(ee-X);xe<fe&&re&&(xe=fe-xe);for(var Ce=[],st=re?-1:1,_e=X;xe>1e-5;){var $e=_e+st*Math.min(xe,ve);Ce.push(M.call(this,U,_e,$e)),xe-=Math.abs($e-_e),_e=$e}return Ce},M=function(U,X,ee){var re=(ee-X)/2,fe=U*Math.cos(re),ve=U*Math.sin(re),xe=fe,Ce=-ve,st=xe*xe+Ce*Ce,_e=st+xe*fe+Ce*ve,$e=4/3*(Math.sqrt(2*st*_e)-_e)/(xe*ve-Ce*fe),Ue=xe-$e*Ce,At=Ce+$e*xe,Le=Ue,K=-At,Ge=re+X,Ye=Math.cos(Ge),ie=Math.sin(Ge);return{x1:U*Math.cos(X),y1:U*Math.sin(X),x2:Ue*Ye-At*ie,y2:Ue*ie+At*Ye,x3:Le*Ye-K*ie,y3:Le*ie+K*Ye,x4:U*Math.cos(ee),y4:U*Math.sin(ee)}},Y=function(U){return 180*U/Math.PI},le=function(U,X,ee,re,fe,ve){var xe=U+.5*(ee-U),Ce=X+.5*(re-X),st=fe+.5*(ee-fe),_e=ve+.5*(re-ve),$e=Math.min(U,fe,xe,st),Ue=Math.max(U,fe,xe,st),At=Math.min(X,ve,Ce,_e),Le=Math.max(X,ve,Ce,_e);return new d($e,At,Ue-$e,Le-At)},de=function(U,X,ee,re,fe,ve,xe,Ce){var st,_e,$e,Ue,At,Le,K,Ge,Ye,ie,Ne,Te,qe,ot,xt=ee-U,Ct=re-X,Tt=fe-ee,Yt=ve-re,Pt=xe-fe,jt=Ce-ve;for(_e=0;_e<41;_e++)Ye=(K=($e=U+(st=_e/40)*xt)+st*((At=ee+st*Tt)-$e))+st*(At+st*(fe+st*Pt-At)-K),ie=(Ge=(Ue=X+st*Ct)+st*((Le=re+st*Yt)-Ue))+st*(Le+st*(ve+st*jt-Le)-Ge),_e==0?(Ne=Ye,Te=ie,qe=Ye,ot=ie):(Ne=Math.min(Ne,Ye),Te=Math.min(Te,ie),qe=Math.max(qe,Ye),ot=Math.max(ot,ie));return new d(Math.round(Ne),Math.round(Te),Math.round(qe-Ne),Math.round(ot-Te))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,X,ee=(U=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:X}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})($t.API),(function(A){var s=function(o){var u,d,h,m,w,v,B,x,C,N;for(d=[],h=0,m=(o+=u="\0\0\0\0".slice(o.length%4||4)).length;m>h;h+=4)(w=(o.charCodeAt(h)<<24)+(o.charCodeAt(h+1)<<16)+(o.charCodeAt(h+2)<<8)+o.charCodeAt(h+3))!==0?(v=(w=((w=((w=((w=(w-(N=w%85))/85)-(C=w%85))/85)-(x=w%85))/85)-(B=w%85))/85)%85,d.push(v+33,B+33,x+33,C+33,N+33)):d.push(122);return(function(L,F){for(var Q=F;Q>0;Q--)L.pop()})(d,u.length),String.fromCharCode.apply(String,d)+"~>"},n=function(o){var u,d,h,m,w,v=String,B="length",x=255,C="charCodeAt",N="slice",L="replace";for(o[N](-2),o=o[N](0,-2)[L](/\s/g,"")[L]("z","!!!!!"),h=[],m=0,w=(o+=u="uuuuu"[N](o[B]%5||5))[B];w>m;m+=5)d=52200625*(o[C](m)-33)+614125*(o[C](m+1)-33)+7225*(o[C](m+2)-33)+85*(o[C](m+3)-33)+(o[C](m+4)-33),h.push(x&d>>24,x&d>>16,x&d>>8,x&d);return(function(F,Q){for(var _=Q;_>0;_--)F.pop()})(h,u[B]),v.fromCharCode.apply(v,h)},r=function(o){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),u.test(o)===!1)return"";for(var d="",h=0;h<o.length;h+=2)d+=String.fromCharCode("0x"+(o[h]+o[h+1]));return d},l=function(o){for(var u=new Uint8Array(o.length),d=o.length;d--;)u[d]=o.charCodeAt(d);return o=(u=T0(u)).reduce((function(h,m){return h+String.fromCharCode(m)}),"")};A.processDataByFilters=function(o,u){var d=0,h=o||"",m=[];for(typeof(u=u||[])=="string"&&(u=[u]),d=0;d<u.length;d+=1)switch(u[d]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=s(h),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=r(h),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map((function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)})).join("")+">",m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=l(h),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[d]+'" is not implemented')}return{data:h,reverseChain:m.reverse().join(" ")}}})($t.API),(function(A){A.loadFile=function(s,n,r){return(function(l,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=(function(h,m,w){var v=new XMLHttpRequest,B=0,x=function(C){var N=C.length,L=[],F=String.fromCharCode;for(B=0;B<N;B+=1)L.push(F(255&C.charCodeAt(B)));return L.join("")};if(v.open("GET",h,!m),v.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(v.onload=function(){v.status===200?w(x(this.responseText)):w(void 0)}),v.send(null),m&&v.status===200)return x(v.responseText)})(l,o,u)}catch{}return d})(s,n,r)},A.loadImageFile=A.loadFile})($t.API),(function(A){function s(){return(tA.html2canvas?Promise.resolve(tA.html2canvas):U0(()=>Promise.resolve().then(()=>v4),void 0)).catch((function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))})).then((function(u){return u.default?u.default:u}))}function n(){return(tA.DOMPurify?Promise.resolve(tA.DOMPurify):U0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(u){return Promise.reject(new Error("Could not load dompurify: "+u))})).then((function(u){return u.default?u.default:u}))}var r=function(u){var d=XA(u);return d==="undefined"?"undefined":d==="string"||u instanceof String?"string":d==="number"||u instanceof Number?"number":d==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":d==="object"?"object":"unknown"},l=function(u,d){var h=document.createElement(u);for(var m in d.className&&(h.className=d.className),d.innerHTML&&d.dompurify&&(h.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)h.style[m]=d.style[m];return h},o=function u(d){var h=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),m=u.convert(Promise.resolve(),h);return m=(m=m.setProgress(1,u,1,[u])).set(d)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(u,d){return u.__proto__=d||o.prototype,u},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(u,d){return this.then((function(){switch(d=d||(function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u)){case"string":return this.then(n).then((function(h){return this.set({src:l("div",{innerHTML:u,dompurify:h})})}));case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=(function h(m,w){for(var v=m.nodeType===3?document.createTextNode(m.nodeValue):m.cloneNode(!1),B=m.firstChild;B;B=B.nextSibling)w!==!0&&B.nodeType===1&&B.nodeName==="SCRIPT"||v.appendChild(h(B,w));return m.nodeType===1&&(m.nodeName==="CANVAS"?(v.width=m.width,v.height=m.height,v.getContext("2d").drawImage(m,0,0)):m.nodeName!=="TEXTAREA"&&m.nodeName!=="SELECT"||(v.value=m.value),v.addEventListener("load",(function(){v.scrollTop=m.scrollTop,v.scrollLeft=m.scrollLeft}),!0)),v})(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(s).then((function(d){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,d(this.prop.container,h)})).then((function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(s).then((function(d){var h=this.opt.jsPDF,m=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=m,m)for(var B=0;B<m.length;++B){var x=m[B],C=x.src.find((function(N){return N.format==="truetype"}));C&&h.addFont(C.url,x.ref.name,x.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,h.context2d.save(!0),d(this.prop.container,v)})).then((function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(u,d,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(u,d):this.outputPdf(u,d)},o.prototype.outputPdf=function(u,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(u,d)}))},o.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}}))},o.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(u){if(r(u)!=="object")return this;var d=Object.keys(u||{}).map((function(h){if(h in o.template.prop)return function(){this.prop[h]=u[h]};switch(h){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[h]=u[h]}}}),this);return this.then((function(){return this.thenList(d)}))},o.prototype.get=function(u,d){return this.then((function(){var h=u in o.template.prop?this.prop[u]:this.opt[u];return d?d(h):h}))},o.prototype.setMargin=function(u){return this.then((function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u})).then(this.setPageSize)},o.prototype.setPageSize=function(u){function d(h,m){return Math.floor(h*m/72*96)}return this.then((function(){(u=u||$t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:d(u.inner.width,u.k),height:d(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u}))},o.prototype.setProgress=function(u,d,h,m){return u!=null&&(this.progress.val=u),d!=null&&(this.progress.state=d),h!=null&&(this.progress.n=h),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(u,d,h,m){return this.setProgress(u?this.progress.val+u:null,d||null,h?this.progress.n+h:null,m?this.progress.stack.concat(m):null)},o.prototype.then=function(u,d){var h=this;return this.thenCore(u,d,(function(m,w){return h.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,(function(v){return h.updateProgress(null,m),v})).then(m,w).then((function(v){return h.updateProgress(1),v}))}))},o.prototype.thenCore=function(u,d,h){h=h||Promise.prototype.then,u&&(u=u.bind(this)),d&&(d=d.bind(this));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),w=h.call(m,u,d);return o.convert(w,this.__proto__)},o.prototype.thenExternal=function(u,d){return Promise.prototype.then.call(this,u,d)},o.prototype.thenList=function(u){var d=this;return u.forEach((function(h){d=d.thenCore(h)})),d},o.prototype.catch=function(u){u&&(u=u.bind(this));var d=Promise.prototype.catch.call(this,u);return o.convert(d,this)},o.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},o.prototype.error=function(u){return this.then((function(){throw new Error(u)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,$t.getPageSize=function(u,d,h){if(XA(u)==="object"){var m=u;u=m.orientation,d=m.unit||d,h=m.format||h}d=d||"mm",h=h||"a4",u=(""+(u||"P")).toLowerCase();var w,v=(""+h).toLowerCase(),B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+d}var x,C=0,N=0;if(B.hasOwnProperty(v))C=B[v][1]/w,N=B[v][0]/w;else try{C=h[1],N=h[0]}catch{throw new Error("Invalid format: "+h)}if(u==="p"||u==="portrait")u="p",N>C&&(x=N,N=C,C=x);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",C>N&&(x=N,N=C,C=x)}return{width:N,height:C,unit:d,k:w,orientation:u}},A.html=function(u,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(R0):null;var h=new o(d);return d.worker?h:h.from(u).doCallback()}})($t.API),$t.API.addJS=function(A){return Y1=A,this.internal.events.subscribe("postPutResources",(function(){xh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),X1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Y1+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){xh!==void 0&&X1!==void 0&&this.internal.out("/Names <</JavaScript "+xh+" 0 R>>")})),this},(function(A){var s;A.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=n.outline.render().split(/\r\n/),o=0;o<l.length;o++){var u=l[o],d=r.exec(u);if(d!=null){var h=d[1];n.internal.newObjectDeferredBegin(h,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,w=[];for(o=0;o<m;o++){var v=n.internal.newObject();w.push(v);var B=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+B.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<w.length;o++)n.internal.write("(page_"+(o+1)+")"+w[o]+" 0 R");n.internal.write(" ] >>","endobj"),s=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),A.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+s+" 0 R"))}]),A.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,l,o){var u={title:l,options:o,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var l=0;l<r.children.length;l++)this.genIds_r(r.children[l])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var u=r.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var h=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var m=0;m<r.children.length;m++)this.renderItems(r.children[m])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,l){for(var o=0;o<l.children.length;o++)r.count++,this.count_r(r,l.children[o]);return r.count}}])})($t.API),(function(A){var s=[192,193,194,195,196,197,198,199];A.processJPEG=function(n,r,l,o,u,d){var h,m=this.decode.DCT_DECODE,w=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(h=(function(v){for(var B,x=256*v.charCodeAt(4)+v.charCodeAt(5),C=v.length,N={width:0,height:0,numcomponents:1},L=4;L<C;L+=2){if(L+=x,s.indexOf(v.charCodeAt(L+1))!==-1){B=256*v.charCodeAt(L+5)+v.charCodeAt(L+6),N={width:256*v.charCodeAt(L+7)+v.charCodeAt(L+8),height:B,numcomponents:v.charCodeAt(L+9)};break}x=256*v.charCodeAt(L+2)+v.charCodeAt(L+3)}return N})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}w={data:n,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:m,index:r,alias:l}}return w}})($t.API);var Dc,vh,Z1,W1,$1,Aj=(function(){var A,s,n;function r(o){var u,d,h,m,w,v,B,x,C,N,L,F,Q,_;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(u=this.readUInt32(),C=(function(){var te,O;for(O=[],te=0;te<4;++te)O.push(String.fromCharCode(this.data[this.pos++]));return O}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),m=this.readUInt16()||100,v.delay=1e3*w/m,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,u-=4),o=(v!=null?v.data:void 0)||this.imgData,F=0;0<=u?F<u:F>u;0<=u?++F:--F)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(u),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((N=h-this.transparency.indexed.length)>0)for(Q=0;0<=N?Q<N:Q>N;0<=N?++Q:--Q)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":B=(L=this.read(u)).indexOf(0),x=String.fromCharCode.apply(String,L.slice(0,B)),this.text[x]=String.fromCharCode.apply(String,L.slice(B+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,d=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*d,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var u,d;for(d=[],u=0;0<=o?u<o:u>o;0<=o?++u:--u)d.push(this.data[this.pos++]);return d},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var u=this.pixelBitlength/8,d=new Uint8Array(this.width*this.height*u),h=0,m=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function w(v,B,x,C){var N,L,F,Q,_,te,O,k,P,E,D,G,T,R,V,Z,ue,S,M,Y,le,de=Math.ceil((m.width-v)/x),J=Math.ceil((m.height-B)/C),U=m.width==de&&m.height==J;for(R=u*de,G=U?d:new Uint8Array(R*J),te=o.length,T=0,L=0;T<J&&h<te;){switch(o[h++]){case 0:for(Q=ue=0;ue<R;Q=ue+=1)G[L++]=o[h++];break;case 1:for(Q=S=0;S<R;Q=S+=1)N=o[h++],_=Q<u?0:G[L-u],G[L++]=(N+_)%256;break;case 2:for(Q=M=0;M<R;Q=M+=1)N=o[h++],F=(Q-Q%u)/u,V=T&&G[(T-1)*R+F*u+Q%u],G[L++]=(V+N)%256;break;case 3:for(Q=Y=0;Y<R;Q=Y+=1)N=o[h++],F=(Q-Q%u)/u,_=Q<u?0:G[L-u],V=T&&G[(T-1)*R+F*u+Q%u],G[L++]=(N+Math.floor((_+V)/2))%256;break;case 4:for(Q=le=0;le<R;Q=le+=1)N=o[h++],F=(Q-Q%u)/u,_=Q<u?0:G[L-u],T===0?V=Z=0:(V=G[(T-1)*R+F*u+Q%u],Z=F&&G[(T-1)*R+(F-1)*u+Q%u]),O=_+V-Z,k=Math.abs(O-_),E=Math.abs(O-V),D=Math.abs(O-Z),P=k<=E&&k<=D?_:E<=D?V:Z,G[L++]=(N+P)%256;break;default:throw new Error("Invalid filter algorithm: "+o[h-1])}if(!U){var X=((B+T*C)*m.width+v)*u,ee=T*R;for(Q=0;Q<de;Q+=1){for(var re=0;re<u;re+=1)d[X++]=G[ee++];X+=(x-1)*u}}T++}}return o=D4(o),m.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),d},r.prototype.decodePalette=function(){var o,u,d,h,m,w,v,B,x;for(d=this.palette,w=this.transparency.indexed||[],m=new Uint8Array((w.length||0)+d.length),h=0,o=0,u=v=0,B=d.length;v<B;u=v+=3)m[h++]=d[u],m[h++]=d[u+1],m[h++]=d[u+2],m[h++]=(x=w[o++])!=null?x:255;return m},r.prototype.copyToImageData=function(o,u){var d,h,m,w,v,B,x,C,N,L,F;if(h=this.colors,N=null,d=this.hasAlphaChannel,this.palette.length&&(N=(F=this._decodedPalette)!=null?F:this._decodedPalette=this.decodePalette(),h=4,d=!0),C=(m=o.data||o).length,v=N||u,w=B=0,h===1)for(;w<C;)x=N?4*u[w/4]:B,L=v[x++],m[w++]=L,m[w++]=L,m[w++]=L,m[w++]=d?v[x++]:255,B=x;else for(;w<C;)x=N?4*u[w/4]:B,m[w++]=v[x++],m[w++]=v[x++],m[w++]=v[x++],m[w++]=d?v[x++]:255,B=x},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var l=function(){if(Object.prototype.toString.call(tA)==="[object Window]"){try{s=tA.document.createElement("canvas"),n=s.getContext("2d")}catch{return!1}return!0}return!1};return l(),A=function(o){var u;if(l()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(u=new Image).src=s.toDataURL(),u;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var u,d,h,m,w,v,B,x;if(this.animation){for(x=[],d=w=0,v=(B=this.animation.frames).length;w<v;d=++w)u=B[d],h=o.createImageData(u.width,u.height),m=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(h,m),u.imageData=h,x.push(u.image=A(h));return x}},r.prototype.renderFrame=function(o,u){var d,h,m;return d=(h=this.animation.frames)[u],m=h[u-1],u===0&&o.clearRect(0,0,this.width,this.height),(m!=null?m.disposeOp:void 0)===1?o.clearRect(m.xOffset,m.yOffset,m.width,m.height):(m!=null?m.disposeOp:void 0)===2&&o.putImageData(m.imageData,m.xOffset,m.yOffset),d.blendOp===0&&o.clearRect(d.xOffset,d.yOffset,d.width,d.height),o.drawImage(d.image,d.xOffset,d.yOffset)},r.prototype.animate=function(o){var u,d,h,m,w,v,B=this;return d=0,v=this.animation,m=v.numFrames,h=v.frames,w=v.numPlays,(u=function(){var x,C;if(x=d++%m,C=h[x],B.renderFrame(o,x),m>1&&d/m<w)return B.animation._timeout=setTimeout(u,C.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var u,d;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,u=o.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(d=u.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),u.putImageData(d,0,0))},r})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function aj(A){var s=0;if(A[s++]!==71||A[s++]!==73||A[s++]!==70||A[s++]!==56||(A[s++]+1&253)!=56||A[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=A[s++]|A[s++]<<8,r=A[s++]|A[s++]<<8,l=A[s++],o=l>>7,u=1<<(7&l)+1;A[s++],A[s++];var d=null,h=null;o&&(d=s,h=u,s+=3*u);var m=!0,w=[],v=0,B=null,x=0,C=null;for(this.width=n,this.height=r;m&&s<A.length;)switch(A[s++]){case 33:switch(A[s++]){case 255:if(A[s]!==11||A[s+1]==78&&A[s+2]==69&&A[s+3]==84&&A[s+4]==83&&A[s+5]==67&&A[s+6]==65&&A[s+7]==80&&A[s+8]==69&&A[s+9]==50&&A[s+10]==46&&A[s+11]==48&&A[s+12]==3&&A[s+13]==1&&A[s+16]==0)s+=14,C=A[s++]|A[s++]<<8,s++;else for(s+=12;;){if(!((T=A[s++])>=0))throw Error("Invalid block size");if(T===0)break;s+=T}break;case 249:if(A[s++]!==4||A[s+4]!==0)throw new Error("Invalid graphics extension block.");var N=A[s++];v=A[s++]|A[s++]<<8,B=A[s++],(1&N)==0&&(B=null),x=N>>2&7,s++;break;case 254:for(;;){if(!((T=A[s++])>=0))throw Error("Invalid block size");if(T===0)break;s+=T}break;default:throw new Error("Unknown graphic control label: 0x"+A[s-1].toString(16))}break;case 44:var L=A[s++]|A[s++]<<8,F=A[s++]|A[s++]<<8,Q=A[s++]|A[s++]<<8,_=A[s++]|A[s++]<<8,te=A[s++],O=te>>6&1,k=1<<(7&te)+1,P=d,E=h,D=!1;te>>7&&(D=!0,P=s,E=k,s+=3*k);var G=s;for(s++;;){var T;if(!((T=A[s++])>=0))throw Error("Invalid block size");if(T===0)break;s+=T}w.push({x:L,y:F,width:Q,height:_,has_local_palette:D,palette_offset:P,palette_size:E,data_offset:G,data_length:s-G,transparent_index:B,interlaced:!!O,delay:v,disposal:x});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+A[s-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return C},this.frameInfo=function(R){if(R<0||R>=w.length)throw new Error("Frame index out of range.");return w[R]},this.decodeAndBlitFrameBGRA=function(R,V){var Z=this.frameInfo(R),ue=Z.width*Z.height,S=new Uint8Array(ue);e2(A,Z.data_offset,S,ue);var M=Z.palette_offset,Y=Z.transparent_index;Y===null&&(Y=256);var le=Z.width,de=n-le,J=le,U=4*(Z.y*n+Z.x),X=4*((Z.y+Z.height)*n+Z.x),ee=U,re=4*de;Z.interlaced===!0&&(re+=4*n*7);for(var fe=8,ve=0,xe=S.length;ve<xe;++ve){var Ce=S[ve];if(J===0&&(J=le,(ee+=re)>=X&&(re=4*de+4*n*(fe-1),ee=U+(le+de)*(fe<<1),fe>>=1)),Ce===Y)ee+=4;else{var st=A[M+3*Ce],_e=A[M+3*Ce+1],$e=A[M+3*Ce+2];V[ee++]=$e,V[ee++]=_e,V[ee++]=st,V[ee++]=255}--J}},this.decodeAndBlitFrameRGBA=function(R,V){var Z=this.frameInfo(R),ue=Z.width*Z.height,S=new Uint8Array(ue);e2(A,Z.data_offset,S,ue);var M=Z.palette_offset,Y=Z.transparent_index;Y===null&&(Y=256);var le=Z.width,de=n-le,J=le,U=4*(Z.y*n+Z.x),X=4*((Z.y+Z.height)*n+Z.x),ee=U,re=4*de;Z.interlaced===!0&&(re+=4*n*7);for(var fe=8,ve=0,xe=S.length;ve<xe;++ve){var Ce=S[ve];if(J===0&&(J=le,(ee+=re)>=X&&(re=4*de+4*n*(fe-1),ee=U+(le+de)*(fe<<1),fe>>=1)),Ce===Y)ee+=4;else{var st=A[M+3*Ce],_e=A[M+3*Ce+1],$e=A[M+3*Ce+2];V[ee++]=st,V[ee++]=_e,V[ee++]=$e,V[ee++]=255}--J}}}function e2(A,s,n,r){for(var l=A[s++],o=1<<l,u=o+1,d=u+1,h=l+1,m=(1<<h)-1,w=0,v=0,B=0,x=A[s++],C=new Int32Array(4096),N=null;;){for(;w<16&&x!==0;)v|=A[s++]<<w,w+=8,x===1?x=A[s++]:--x;if(w<h)break;var L=v&m;if(v>>=h,w-=h,L!==o){if(L===u)break;for(var F=L<d?L:N,Q=0,_=F;_>o;)_=C[_]>>8,++Q;var te=_;if(B+Q+(F!==L?1:0)>r)return void la.log("Warning, gif stream longer than expected.");n[B++]=te;var O=B+=Q;for(F!==L&&(n[B++]=te),_=F;Q--;)_=C[_],n[--O]=255&_,_>>=8;N!==null&&d<4096&&(C[d++]=N<<8|te,d>=m+1&&h<12&&(++h,m=m<<1|1)),N=L}else d=u+1,m=(1<<(h=l+1))-1,N=null}return B!==r&&la.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function s0(A){var s,n,r,l,o,u=Math.floor,d=new Array(64),h=new Array(64),m=new Array(64),w=new Array(64),v=new Array(65535),B=new Array(65535),x=new Array(64),C=new Array(64),N=[],L=0,F=7,Q=new Array(64),_=new Array(64),te=new Array(64),O=new Array(256),k=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function S(U,X){for(var ee=0,re=0,fe=new Array,ve=1;ve<=16;ve++){for(var xe=1;xe<=U[ve];xe++)fe[X[re]]=[],fe[X[re]][0]=ee,fe[X[re]][1]=ve,re++,ee++;ee*=2}return fe}function M(U){for(var X=U[0],ee=U[1]-1;ee>=0;)X&1<<ee&&(L|=1<<F),ee--,--F<0&&(L==255?(Y(255),Y(0)):Y(L),F=7,L=0)}function Y(U){N.push(U)}function le(U){Y(U>>8&255),Y(255&U)}function de(U,X,ee,re,fe){for(var ve,xe=fe[0],Ce=fe[240],st=(function(ie,Ne){var Te,qe,ot,xt,Ct,Tt,Yt,Pt,jt,Qt,Oe=0;for(jt=0;jt<8;++jt){Te=ie[Oe],qe=ie[Oe+1],ot=ie[Oe+2],xt=ie[Oe+3],Ct=ie[Oe+4],Tt=ie[Oe+5],Yt=ie[Oe+6];var yt=Te+(Pt=ie[Oe+7]),mt=Te-Pt,wt=qe+Yt,Ft=qe-Yt,Fe=ot+Tt,vt=ot-Tt,ft=xt+Ct,gt=xt-Ct,Jt=yt+ft,MA=yt-ft,VA=wt+Fe,uA=wt-Fe;ie[Oe]=Jt+VA,ie[Oe+4]=Jt-VA;var Kt=.707106781*(uA+MA);ie[Oe+2]=MA+Kt,ie[Oe+6]=MA-Kt;var lA=.382683433*((Jt=gt+vt)-(uA=Ft+mt)),An=.5411961*Jt+lA,oa=1.306562965*uA+lA,Ea=.707106781*(VA=vt+Ft),Ia=mt+Ea,Ot=mt-Ea;ie[Oe+5]=Ot+An,ie[Oe+3]=Ot-An,ie[Oe+1]=Ia+oa,ie[Oe+7]=Ia-oa,Oe+=8}for(Oe=0,jt=0;jt<8;++jt){Te=ie[Oe],qe=ie[Oe+8],ot=ie[Oe+16],xt=ie[Oe+24],Ct=ie[Oe+32],Tt=ie[Oe+40],Yt=ie[Oe+48];var gs=Te+(Pt=ie[Oe+56]),ns=Te-Pt,La=qe+Yt,YA=qe-Yt,SA=ot+Tt,Xt=ot-Tt,me=xt+Ct,Ze=xt-Ct,et=gs+me,rt=gs-me,Xe=La+SA,_t=La-SA;ie[Oe]=et+Xe,ie[Oe+32]=et-Xe;var Vt=.707106781*(_t+rt);ie[Oe+16]=rt+Vt,ie[Oe+48]=rt-Vt;var zt=.382683433*((et=Ze+Xt)-(_t=YA+ns)),gA=.5411961*et+zt,RA=1.306562965*_t+zt,Da=.707106781*(Xe=Xt+YA),zA=ns+Da,Fa=ns-Da;ie[Oe+40]=Fa+gA,ie[Oe+24]=Fa-gA,ie[Oe+8]=zA+RA,ie[Oe+56]=zA-RA,Oe++}for(jt=0;jt<64;++jt)Qt=ie[jt]*Ne[jt],x[jt]=Qt>0?Qt+.5|0:Qt-.5|0;return x})(U,X),_e=0;_e<64;++_e)C[P[_e]]=st[_e];var $e=C[0]-ee;ee=C[0],$e==0?M(re[0]):(M(re[B[ve=32767+$e]]),M(v[ve]));for(var Ue=63;Ue>0&&C[Ue]==0;)Ue--;if(Ue==0)return M(xe),ee;for(var At,Le=1;Le<=Ue;){for(var K=Le;C[Le]==0&&Le<=Ue;)++Le;var Ge=Le-K;if(Ge>=16){At=Ge>>4;for(var Ye=1;Ye<=At;++Ye)M(Ce);Ge&=15}ve=32767+C[Le],M(fe[(Ge<<4)+B[ve]]),M(v[ve]),Le++}return Ue!=63&&M(xe),ee}function J(U){U=Math.min(Math.max(U,1),100),o!=U&&((function(X){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var fe=u((ee[re]*X+50)/100);fe=Math.min(Math.max(fe,1),255),d[P[re]]=fe}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var Ce=u((ve[xe]*X+50)/100);Ce=Math.min(Math.max(Ce,1),255),h[P[xe]]=Ce}for(var st=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,$e=0;$e<8;$e++)for(var Ue=0;Ue<8;Ue++)m[_e]=1/(d[P[_e]]*st[$e]*st[Ue]*8),w[_e]=1/(h[P[_e]]*st[$e]*st[Ue]*8),_e++})(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),o=U)}this.encode=function(U,X){X&&J(X),N=new Array,L=0,F=7,le(65496),le(65504),le(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),le(1),le(1),Y(0),Y(0),(function(){le(65499),le(132),Y(0);for(var qe=0;qe<64;qe++)Y(d[qe]);Y(1);for(var ot=0;ot<64;ot++)Y(h[ot])})(),(function(qe,ot){le(65472),le(17),Y(8),le(ot),le(qe),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)})(U.width,U.height),(function(){le(65476),le(418),Y(0);for(var qe=0;qe<16;qe++)Y(E[qe+1]);for(var ot=0;ot<=11;ot++)Y(D[ot]);Y(16);for(var xt=0;xt<16;xt++)Y(G[xt+1]);for(var Ct=0;Ct<=161;Ct++)Y(T[Ct]);Y(1);for(var Tt=0;Tt<16;Tt++)Y(R[Tt+1]);for(var Yt=0;Yt<=11;Yt++)Y(V[Yt]);Y(17);for(var Pt=0;Pt<16;Pt++)Y(Z[Pt+1]);for(var jt=0;jt<=161;jt++)Y(ue[jt])})(),le(65498),le(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var ee=0,re=0,fe=0;L=0,F=7,this.encode.displayName="_encode_";for(var ve,xe,Ce,st,_e,$e,Ue,At,Le,K=U.data,Ge=U.width,Ye=U.height,ie=4*Ge,Ne=0;Ne<Ye;){for(ve=0;ve<ie;){for(_e=ie*Ne+ve,Ue=-1,At=0,Le=0;Le<64;Le++)$e=_e+(At=Le>>3)*ie+(Ue=4*(7&Le)),Ne+At>=Ye&&($e-=ie*(Ne+1+At-Ye)),ve+Ue>=ie&&($e-=ve+Ue-ie+4),xe=K[$e++],Ce=K[$e++],st=K[$e++],Q[Le]=(k[xe]+k[Ce+256>>0]+k[st+512>>0]>>16)-128,_[Le]=(k[xe+768>>0]+k[Ce+1024>>0]+k[st+1280>>0]>>16)-128,te[Le]=(k[xe+1280>>0]+k[Ce+1536>>0]+k[st+1792>>0]>>16)-128;ee=de(Q,m,ee,s,r),re=de(_,w,re,n,l),fe=de(te,w,fe,n,l),ve+=32}Ne+=8}if(F>=0){var Te=[];Te[1]=F+1,Te[0]=(1<<F+1)-1,M(Te)}return le(65497),new Uint8Array(N)},A=A||50,(function(){for(var U=String.fromCharCode,X=0;X<256;X++)O[X]=U(X)})(),s=S(E,D),n=S(R,V),r=S(G,T),l=S(Z,ue),(function(){for(var U=1,X=2,ee=1;ee<=15;ee++){for(var re=U;re<X;re++)B[32767+re]=ee,v[32767+re]=[],v[32767+re][1]=ee,v[32767+re][0]=re;for(var fe=-(X-1);fe<=-U;fe++)B[32767+fe]=ee,v[32767+fe]=[],v[32767+fe][1]=ee,v[32767+fe][0]=X-1+fe;U<<=1,X<<=1}})(),(function(){for(var U=0;U<256;U++)k[U]=19595*U,k[U+256>>0]=38470*U,k[U+512>>0]=7471*U+32768,k[U+768>>0]=-11059*U,k[U+1024>>0]=-21709*U,k[U+1280>>0]=32768*U+8421375,k[U+1536>>0]=-27439*U,k[U+1792>>0]=-5329*U})(),J(A)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Vr(A,s){if(this.pos=0,this.buffer=A,this.datav=new DataView(A.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function t2(A){function s(E){if(!E)throw Error("assert :P")}function n(E,D,G){for(var T=0;4>T;T++)if(E[D+T]!=G.charCodeAt(T))return!0;return!1}function r(E,D,G,T,R){for(var V=0;V<R;V++)E[D+V]=G[T+V]}function l(E,D,G,T){for(var R=0;R<T;R++)E[D+R]=G}function o(E){return new Int32Array(E)}function u(E,D){for(var G=[],T=0;T<E;T++)G.push(new D);return G}function d(E,D){var G=[];return(function T(R,V,Z){for(var ue=Z[V],S=0;S<ue&&(R.push(Z.length>V+1?[]:new D),!(Z.length<V+1));S++)T(R[S],V+1,Z)})(G,0,E),G}var h=function(){var E=this;function D(f,g){for(var j=1<<g-1>>>0;f&j;)j>>>=1;return j?(f&j-1)+j:f}function G(f,g,j,I,z){s(!(I%j));do f[g+(I-=j)]=z;while(0<I)}function T(f,g,j,I,z){if(s(2328>=z),512>=z)var W=o(512);else if((W=o(z))==null)return 0;return(function($,Ae,ne,ce,Se,Pe){var Re,De,ut=Ae,We=1<<ne,Qe=o(16),Ie=o(16);for(s(Se!=0),s(ce!=null),s($!=null),s(0<ne),De=0;De<Se;++De){if(15<ce[De])return 0;++Qe[ce[De]]}if(Qe[0]==Se)return 0;for(Ie[1]=0,Re=1;15>Re;++Re){if(Qe[Re]>1<<Re)return 0;Ie[Re+1]=Ie[Re]+Qe[Re]}for(De=0;De<Se;++De)Re=ce[De],0<ce[De]&&(Pe[Ie[Re]++]=De);if(Ie[15]==1)return(ce=new R).g=0,ce.value=Pe[0],G($,ut,1,We,ce),We;var it,ht=-1,nt=We-1,Nt=0,bt=1,Mt=1,Bt=1<<ne;for(De=0,Re=1,Se=2;Re<=ne;++Re,Se<<=1){if(bt+=Mt<<=1,0>(Mt-=Qe[Re]))return 0;for(;0<Qe[Re];--Qe[Re])(ce=new R).g=Re,ce.value=Pe[De++],G($,ut+Nt,Se,Bt,ce),Nt=D(Nt,Re)}for(Re=ne+1,Se=2;15>=Re;++Re,Se<<=1){if(bt+=Mt<<=1,0>(Mt-=Qe[Re]))return 0;for(;0<Qe[Re];--Qe[Re]){if(ce=new R,(Nt&nt)!=ht){for(ut+=Bt,it=1<<(ht=Re)-ne;15>ht&&!(0>=(it-=Qe[ht]));)++ht,it<<=1;We+=Bt=1<<(it=ht-ne),$[Ae+(ht=Nt&nt)].g=it+ne,$[Ae+ht].value=ut-Ae-ht}ce.g=Re-ne,ce.value=Pe[De++],G($,ut+(Nt>>ne),Se,Bt,ce),Nt=D(Nt,Re)}}return bt!=2*Ie[15]-1?0:We})(f,g,j,I,z,W)}function R(){this.value=this.g=0}function V(){this.value=this.g=0}function Z(){this.G=u(5,R),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Xa,V)}function ue(f,g,j,I){s(f!=null),s(g!=null),s(2147483648>I),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=g,f.pa=j,f.Jd=g,f.Yc=j+I,f.Zc=4<=I?j+I-4+1:j,ve(f)}function S(f,g){for(var j=0;0<g--;)j|=Ce(f,128)<<g;return j}function M(f,g){var j=S(f,g);return xe(f)?-j:j}function Y(f,g,j,I){var z,W=0;for(s(f!=null),s(g!=null),s(4294967288>I),f.Sb=I,f.Ra=0,f.u=0,f.h=0,4<I&&(I=4),z=0;z<I;++z)W+=g[j+z]<<8*z;f.Ra=W,f.bb=I,f.oa=g,f.pa=j}function le(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<ii-8>>>0,++f.bb,f.u-=8;ee(f)&&(f.h=1,f.u=0)}function de(f,g){if(s(0<=g),!f.h&&g<=ri){var j=X(f)&Ki[g];return f.u+=g,le(f),j}return f.h=1,f.u=0}function J(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(f){return f.Ra>>>(f.u&ii-1)>>>0}function ee(f){return s(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>ii}function re(f,g){f.u=g,f.h=ee(f)}function fe(f){f.u>=Cl&&(s(f.u>=Cl),le(f))}function ve(f){s(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(s(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function xe(f){return S(f,1)}function Ce(f,g){var j=f.Ca;0>f.b&&ve(f);var I=f.b,z=j*g>>>8,W=(f.I>>>I>z)+0;for(W?(j-=z,f.I-=z+1<<I>>>0):j=z+1,I=j,z=0;256<=I;)z+=8,I>>=8;return I=7^z+Is[I],f.b-=I,f.Ca=(j<<I)-1,W}function st(f,g,j){f[g+0]=j>>24&255,f[g+1]=j>>16&255,f[g+2]=j>>8&255,f[g+3]=j>>0&255}function _e(f,g){return f[g+0]<<0|f[g+1]<<8}function $e(f,g){return _e(f,g)|f[g+2]<<16}function Ue(f,g){return _e(f,g)|_e(f,g+2)<<16}function At(f,g){var j=1<<g;return s(f!=null),s(0<g),f.X=o(j),f.X==null?0:(f.Mb=32-g,f.Xa=g,1)}function Le(f,g){s(f!=null),s(g!=null),s(f.Xa==g.Xa),r(g.X,0,f.X,0,1<<g.Xa)}function K(){this.X=[],this.Xa=this.Mb=0}function Ge(f,g,j,I){s(j!=null),s(I!=null);var z=j[0],W=I[0];return z==0&&(z=(f*W+g/2)/g),W==0&&(W=(g*z+f/2)/f),0>=z||0>=W?0:(j[0]=z,I[0]=W,1)}function Ye(f,g){return f+(1<<g)-1>>>g}function ie(f,g){return((4278255360&f)+(4278255360&g)>>>0&4278255360)+((16711935&f)+(16711935&g)>>>0&16711935)>>>0}function Ne(f,g){E[g]=function(j,I,z,W,$,Ae,ne){var ce;for(ce=0;ce<$;++ce){var Se=E[f](Ae[ne+ce-1],z,W+ce);Ae[ne+ce]=ie(j[I+ce],Se)}}}function Te(){this.ud=this.hd=this.jd=0}function qe(f,g){return((4278124286&(f^g))>>>1)+(f&g)>>>0}function ot(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function xt(f,g){return ot(f+(f-g+.5>>1))}function Ct(f,g,j){return Math.abs(g-j)-Math.abs(f-j)}function Tt(f,g,j,I,z,W,$){for(I=W[$-1],j=0;j<z;++j)W[$+j]=I=ie(f[g+j],I)}function Yt(f,g,j,I,z){var W;for(W=0;W<j;++W){var $=f[g+W],Ae=$>>8&255,ne=16711935&(ne=(ne=16711935&$)+((Ae<<16)+Ae));I[z+W]=(4278255360&$)+ne>>>0}}function Pt(f,g){g.jd=f>>0&255,g.hd=f>>8&255,g.ud=f>>16&255}function jt(f,g,j,I,z,W){var $;for($=0;$<I;++$){var Ae=g[j+$],ne=Ae>>>8,ce=Ae,Se=255&(Se=(Se=Ae>>>16)+((f.jd<<24>>24)*(ne<<24>>24)>>>5));ce=255&(ce=(ce=ce+((f.hd<<24>>24)*(ne<<24>>24)>>>5))+((f.ud<<24>>24)*(Se<<24>>24)>>>5)),z[W+$]=(4278255360&Ae)+(Se<<16)+ce}}function Qt(f,g,j,I,z){E[g]=function(W,$,Ae,ne,ce,Se,Pe,Re,De){for(ne=Pe;ne<Re;++ne)for(Pe=0;Pe<De;++Pe)ce[Se++]=z(Ae[I(W[$++])])},E[f]=function(W,$,Ae,ne,ce,Se,Pe){var Re=8>>W.b,De=W.Ea,ut=W.K[0],We=W.w;if(8>Re)for(W=(1<<W.b)-1,We=(1<<Re)-1;$<Ae;++$){var Qe,Ie=0;for(Qe=0;Qe<De;++Qe)Qe&W||(Ie=I(ne[ce++])),Se[Pe++]=z(ut[Ie&We]),Ie>>=Re}else E["VP8LMapColor"+j](ne,ce,ut,We,Se,Pe,$,Ae,De)}}function Oe(f,g,j,I,z){for(j=g+j;g<j;){var W=f[g++];I[z++]=W>>16&255,I[z++]=W>>8&255,I[z++]=W>>0&255}}function yt(f,g,j,I,z){for(j=g+j;g<j;){var W=f[g++];I[z++]=W>>16&255,I[z++]=W>>8&255,I[z++]=W>>0&255,I[z++]=W>>24&255}}function mt(f,g,j,I,z){for(j=g+j;g<j;){var W=($=f[g++])>>16&240|$>>12&15,$=$>>0&240|$>>28&15;I[z++]=W,I[z++]=$}}function wt(f,g,j,I,z){for(j=g+j;g<j;){var W=($=f[g++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;I[z++]=W,I[z++]=$}}function Ft(f,g,j,I,z){for(j=g+j;g<j;){var W=f[g++];I[z++]=W>>0&255,I[z++]=W>>8&255,I[z++]=W>>16&255}}function Fe(f,g,j,I,z,W){if(W==0)for(j=g+j;g<j;)st(I,((W=f[g++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),z+=32;else r(I,z,f,g,j)}function vt(f,g){E[g][0]=E[f+"0"],E[g][1]=E[f+"1"],E[g][2]=E[f+"2"],E[g][3]=E[f+"3"],E[g][4]=E[f+"4"],E[g][5]=E[f+"5"],E[g][6]=E[f+"6"],E[g][7]=E[f+"7"],E[g][8]=E[f+"8"],E[g][9]=E[f+"9"],E[g][10]=E[f+"10"],E[g][11]=E[f+"11"],E[g][12]=E[f+"12"],E[g][13]=E[f+"13"],E[g][14]=E[f+"0"],E[g][15]=E[f+"0"]}function ft(f){return f==Co||f==Zo||f==Il||f==Wo}function gt(){this.eb=[],this.size=this.A=this.fb=0}function Jt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function MA(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gt,this.f.kb=new Jt,this.sd=null}function VA(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function uA(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Kt(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function lA(f,g){var j=f.T,I=g.ba.f.RGBA,z=I.eb,W=I.fb+f.ka*I.A,$=ds[g.ba.S],Ae=f.y,ne=f.O,ce=f.f,Se=f.N,Pe=f.ea,Re=f.W,De=g.cc,ut=g.dc,We=g.Mc,Qe=g.Nc,Ie=f.ka,it=f.ka+f.T,ht=f.U,nt=ht+1>>1;for(Ie==0?$(Ae,ne,null,null,ce,Se,Pe,Re,ce,Se,Pe,Re,z,W,null,null,ht):($(g.ec,g.fc,Ae,ne,De,ut,We,Qe,ce,Se,Pe,Re,z,W-I.A,z,W,ht),++j);Ie+2<it;Ie+=2)De=ce,ut=Se,We=Pe,Qe=Re,Se+=f.Rc,Re+=f.Rc,W+=2*I.A,$(Ae,(ne+=2*f.fa)-f.fa,Ae,ne,De,ut,We,Qe,ce,Se,Pe,Re,z,W-I.A,z,W,ht);return ne+=f.fa,f.j+it<f.o?(r(g.ec,g.fc,Ae,ne,ht),r(g.cc,g.dc,ce,Se,nt),r(g.Mc,g.Nc,Pe,Re,nt),j--):1&it||$(Ae,ne,null,null,ce,Se,Pe,Re,ce,Se,Pe,Re,z,W+I.A,null,null,ht),j}function An(f,g,j){var I=f.F,z=[f.J];if(I!=null){var W=f.U,$=g.ba.S,Ae=$==yo||$==Il;g=g.ba.f.RGBA;var ne=[0],ce=f.ka;ne[0]=f.T,f.Kb&&(ce==0?--ne[0]:(--ce,z[0]-=f.width),f.j+f.ka+f.T==f.o&&(ne[0]=f.o-f.j-ce));var Se=g.eb;ce=g.fb+ce*g.A,f=OA(I,z[0],f.width,W,ne,Se,ce+(Ae?0:3),g.A),s(j==ne),f&&ft($)&&zs(Se,ce,Ae,W,ne,g.A)}return 0}function oa(f){var g=f.ma,j=g.ba.S,I=11>j,z=j==Ns||j==Bn||j==yo||j==El||j==12||ft(j);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Sr(g.Oa,f,z?11:12))return 0;if(z&&ft(j)&&pt(),f.da)alert("todo:use_scaling");else{if(I){if(g.Ib=Kt,f.Kb){if(j=f.U+1>>1,g.memory=o(f.U+2*j),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+f.U,g.Mc=g.cc,g.Nc=g.dc+j,g.Ib=lA,pt()}}else alert("todo:EmitYUV");z&&(g.Jb=An,I&&ke())}if(I&&!vi){for(f=0;256>f;++f)hs[f]=89858*(f-128)+Tl>>Sn,rf[f]=-22014*(f-128)+Tl,rd[f]=-45773*(f-128),ac[f]=113618*(f-128)+Tl>>Sn;for(f=Ji;f<xi;++f)g=76283*(f-16)+Tl>>Sn,lf[f-Ji]=rn(g,255),of[f-Ji]=rn(g+8>>4,15);vi=1}return 1}function Ea(f){var g=f.ma,j=f.U,I=f.T;return s(!(1&f.ka)),0>=j||0>=I?0:(j=g.Ib(f,g),g.Jb!=null&&g.Jb(f,g,j),g.Dc+=j,1)}function Ia(f){f.ma.memory=null}function Ot(f,g,j,I){return de(f,8)!=47?0:(g[0]=de(f,14)+1,j[0]=de(f,14)+1,I[0]=de(f,1),de(f,3)!=0?0:!f.h)}function gs(f,g){if(4>f)return f+1;var j=f-2>>1;return(2+(1&f)<<j)+de(g,j)+1}function ns(f,g){return 120<g?g-120:1<=(j=((j=Cn[g-1])>>4)*f+(8-(15&j)))?j:1;var j}function La(f,g,j){var I=X(j),z=f[g+=255&I].g-8;return 0<z&&(re(j,j.u+8),I=X(j),g+=f[g].value,g+=I&(1<<z)-1),re(j,j.u+f[g].g),f[g].value}function YA(f,g,j){return j.g+=f.g,j.value+=f.value<<g>>>0,s(8>=j.g),f.g}function SA(f,g,j){var I=f.xc;return s((g=I==0?0:f.vc[f.md*(j>>I)+(g>>I)])<f.Wb),f.Ya[g]}function Xt(f,g,j,I){var z=f.ab,W=f.c*g,$=f.C;g=$+g;var Ae=j,ne=I;for(I=f.Ta,j=f.Ua;0<z--;){var ce=f.gc[z],Se=$,Pe=g,Re=Ae,De=ne,ut=(ne=I,Ae=j,ce.Ea);switch(s(Se<Pe),s(Pe<=ce.nc),ce.hc){case 2:Go(Re,De,(Pe-Se)*ut,ne,Ae);break;case 0:var We=Se,Qe=Pe,Ie=ne,it=Ae,ht=(Bt=ce).Ea;We==0&&(qo(Re,De,null,null,1,Ie,it),Tt(Re,De+1,0,0,ht-1,Ie,it+1),De+=ht,it+=ht,++We);for(var nt=1<<Bt.b,Nt=nt-1,bt=Ye(ht,Bt.b),Mt=Bt.K,Bt=Bt.w+(We>>Bt.b)*bt;We<Qe;){var IA=Mt,vA=Bt,CA=1;for(wo(Re,De,Ie,it-ht,1,Ie,it);CA<ht;){var nA=(CA&~Nt)+nt;nA>ht&&(nA=ht),(0,wn[IA[vA++]>>8&15])(Re,De+ +CA,Ie,it+CA-ht,nA-CA,Ie,it+CA),CA=nA}De+=ht,it+=ht,++We&Nt||(Bt+=bt)}Pe!=ce.nc&&r(ne,Ae-ut,ne,Ae+(Pe-Se-1)*ut,ut);break;case 1:for(ut=Re,Qe=De,ht=(Re=ce.Ea)-(it=Re&~(Ie=(De=1<<ce.b)-1)),We=Ye(Re,ce.b),nt=ce.K,ce=ce.w+(Se>>ce.b)*We;Se<Pe;){for(Nt=nt,bt=ce,Mt=new Te,Bt=Qe+it,IA=Qe+Re;Qe<Bt;)Pt(Nt[bt++],Mt),li(Mt,ut,Qe,De,ne,Ae),Qe+=De,Ae+=De;Qe<IA&&(Pt(Nt[bt++],Mt),li(Mt,ut,Qe,ht,ne,Ae),Qe+=ht,Ae+=ht),++Se&Ie||(ce+=We)}break;case 3:if(Re==ne&&De==Ae&&0<ce.b){for(Qe=ne,Re=ut=Ae+(Pe-Se)*ut-(it=(Pe-Se)*Ye(ce.Ea,ce.b)),De=ne,Ie=Ae,We=[],it=(ht=it)-1;0<=it;--it)We[it]=De[Ie+it];for(it=ht-1;0<=it;--it)Qe[Re+it]=We[it];bn(ce,Se,Pe,ne,ut,ne,Ae)}else bn(ce,Se,Pe,Re,De,ne,Ae)}Ae=I,ne=j}ne!=j&&r(I,j,Ae,ne,W)}function me(f,g){var j=f.V,I=f.Ba+f.c*f.C,z=g-f.C;if(s(g<=f.l.o),s(16>=z),0<z){var W=f.l,$=f.Ta,Ae=f.Ua,ne=W.width;if(Xt(f,z,j,I),z=Ae=[Ae],s((j=f.C)<(I=g)),s(W.v<W.va),I>W.o&&(I=W.o),j<W.j){var ce=W.j-j;j=W.j,z[0]+=ce*ne}if(j>=I?j=0:(z[0]+=4*W.v,W.ka=j-W.j,W.U=W.va-W.v,W.T=I-j,j=1),j){if(Ae=Ae[0],11>(j=f.ca).S){var Se=j.f.RGBA,Pe=(I=j.S,z=W.U,W=W.T,ce=Se.eb,Se.A),Re=W;for(Se=Se.fb+f.Ma*Se.A;0<Re--;){var De=$,ut=Ae,We=z,Qe=ce,Ie=Se;switch(I){case Xo:Ls(De,ut,We,Qe,Ie);break;case Ns:Bs(De,ut,We,Qe,Ie);break;case Co:Bs(De,ut,We,Qe,Ie),zs(Qe,Ie,0,We,1,0);break;case Yo:Er(De,ut,We,Qe,Ie);break;case Bn:Fe(De,ut,We,Qe,Ie,1);break;case Zo:Fe(De,ut,We,Qe,Ie,1),zs(Qe,Ie,0,We,1,0);break;case yo:Fe(De,ut,We,Qe,Ie,0);break;case Il:Fe(De,ut,We,Qe,Ie,0),zs(Qe,Ie,1,We,1,0);break;case El:Ur(De,ut,We,Qe,Ie);break;case Wo:Ur(De,ut,We,Qe,Ie),mA(Qe,Ie,We,1,0);break;case hi:Kn(De,ut,We,Qe,Ie);break;default:s(0)}Ae+=ne,Se+=Pe}f.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");s(f.Ma<=j.height)}}f.C=g,s(f.C<=f.i)}function Ze(f){var g;if(0<f.ua)return 0;for(g=0;g<f.Wb;++g){var j=f.Ya[g].G,I=f.Ya[g].H;if(0<j[1][I[1]+0].g||0<j[2][I[2]+0].g||0<j[3][I[3]+0].g)return 0}return 1}function et(f,g,j,I,z,W){if(f.Z!=0){var $=f.qd,Ae=f.rd;for(s(Tr[f.Z]!=null);g<j;++g)Tr[f.Z]($,Ae,I,z,I,z,W),$=I,Ae=z,z+=W;f.qd=$,f.rd=Ae}}function rt(f,g){var j=f.l.ma,I=j.Z==0||j.Z==1?f.l.j:f.C;if(I=f.C<I?I:f.C,s(g<=f.l.o),g>I){var z=f.l.width,W=j.ca,$=j.tb+z*I,Ae=f.V,ne=f.Ba+f.c*I,ce=f.gc;s(f.ab==1),s(ce[0].hc==3),Jo(ce[0],I,g,Ae,ne,W,$),et(j,I,g,W,$,z)}f.C=f.Ma=g}function Xe(f,g,j,I,z,W,$){var Ae=f.$/I,ne=f.$%I,ce=f.m,Se=f.s,Pe=j+f.$,Re=Pe;z=j+I*z;var De=j+I*W,ut=280+Se.ua,We=f.Pb?Ae:16777216,Qe=0<Se.ua?Se.Wa:null,Ie=Se.wc,it=Pe<De?SA(Se,ne,Ae):null;s(f.C<W),s(De<=z);var ht=!1;e:for(;;){for(;ht||Pe<De;){var nt=0;if(Ae>=We){var Nt=Pe-j;s((We=f).Pb),We.wd=We.m,We.xd=Nt,0<We.s.ua&&Le(We.s.Wa,We.s.vb),We=Ae+fi}if(ne&Ie||(it=SA(Se,ne,Ae)),s(it!=null),it.Qb&&(g[Pe]=it.qb,ht=!0),!ht)if(fe(ce),it.jc){nt=ce,Nt=g;var bt=Pe,Mt=it.pd[X(nt)&Xa-1];s(it.jc),256>Mt.g?(re(nt,nt.u+Mt.g),Nt[bt]=Mt.value,nt=0):(re(nt,nt.u+Mt.g-256),s(256<=Mt.value),nt=Mt.value),nt==0&&(ht=!0)}else nt=La(it.G[0],it.H[0],ce);if(ce.h)break;if(ht||256>nt){if(!ht)if(it.nd)g[Pe]=(it.qb|nt<<8)>>>0;else{if(fe(ce),ht=La(it.G[1],it.H[1],ce),fe(ce),Nt=La(it.G[2],it.H[2],ce),bt=La(it.G[3],it.H[3],ce),ce.h)break;g[Pe]=(bt<<24|ht<<16|nt<<8|Nt)>>>0}if(ht=!1,++Pe,++ne>=I&&(ne=0,++Ae,$!=null&&Ae<=W&&!(Ae%16)&&$(f,Ae),Qe!=null))for(;Re<Pe;)nt=g[Re++],Qe.X[(506832829*nt&4294967295)>>>Qe.Mb]=nt}else if(280>nt){if(nt=gs(nt-256,ce),Nt=La(it.G[4],it.H[4],ce),fe(ce),Nt=ns(I,Nt=gs(Nt,ce)),ce.h)break;if(Pe-j<Nt||z-Pe<nt)break e;for(bt=0;bt<nt;++bt)g[Pe+bt]=g[Pe+bt-Nt];for(Pe+=nt,ne+=nt;ne>=I;)ne-=I,++Ae,$!=null&&Ae<=W&&!(Ae%16)&&$(f,Ae);if(s(Pe<=z),ne&Ie&&(it=SA(Se,ne,Ae)),Qe!=null)for(;Re<Pe;)nt=g[Re++],Qe.X[(506832829*nt&4294967295)>>>Qe.Mb]=nt}else{if(!(nt<ut))break e;for(ht=nt-280,s(Qe!=null);Re<Pe;)nt=g[Re++],Qe.X[(506832829*nt&4294967295)>>>Qe.Mb]=nt;nt=Pe,s(!(ht>>>(Nt=Qe).Xa)),g[nt]=Nt.X[ht],ht=!0}ht||s(ce.h==ee(ce))}if(f.Pb&&ce.h&&Pe<z)s(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Le(f.s.vb,f.s.Wa);else{if(ce.h)break e;$!=null&&$(f,Ae>W?W:Ae),f.a=0,f.$=Pe-j}return 1}return f.a=3,0}function _t(f){s(f!=null),f.vc=null,f.yc=null,f.Ya=null;var g=f.Wa;g!=null&&(g.X=null),f.vb=null,s(f!=null)}function Vt(){var f=new Ja;return f==null?null:(f.a=0,f.xb=Yc,vt("Predictor","VP8LPredictors"),vt("Predictor","VP8LPredictors_C"),vt("PredictorAdd","VP8LPredictorsAdd"),vt("PredictorAdd","VP8LPredictorsAdd_C"),Go=Yt,li=jt,Ls=Oe,Bs=yt,Ur=mt,Kn=wt,Er=Ft,E.VP8LMapColor32b=Nl,E.VP8LMapColor8b=ws,f)}function zt(f,g,j,I,z){var W=1,$=[f],Ae=[g],ne=I.m,ce=I.s,Se=null,Pe=0;e:for(;;){if(j)for(;W&&de(ne,1);){var Re=$,De=Ae,ut=I,We=1,Qe=ut.m,Ie=ut.gc[ut.ab],it=de(Qe,2);if(ut.Oc&1<<it)W=0;else{switch(ut.Oc|=1<<it,Ie.hc=it,Ie.Ea=Re[0],Ie.nc=De[0],Ie.K=[null],++ut.ab,s(4>=ut.ab),it){case 0:case 1:Ie.b=de(Qe,3)+2,We=zt(Ye(Ie.Ea,Ie.b),Ye(Ie.nc,Ie.b),0,ut,Ie.K),Ie.K=Ie.K[0];break;case 3:var ht,nt=de(Qe,8)+1,Nt=16<nt?0:4<nt?1:2<nt?2:3;if(Re[0]=Ye(Ie.Ea,Nt),Ie.b=Nt,ht=We=zt(nt,1,0,ut,Ie.K)){var bt,Mt=nt,Bt=Ie,IA=1<<(8>>Bt.b),vA=o(IA);if(vA==null)ht=0;else{var CA=Bt.K[0],nA=Bt.w;for(vA[0]=Bt.K[0][0],bt=1;bt<1*Mt;++bt)vA[bt]=ie(CA[nA+bt],vA[bt-1]);for(;bt<4*IA;++bt)vA[bt]=0;Bt.K[0]=null,Bt.K[0]=vA,ht=1}}We=ht;break;case 2:break;default:s(0)}W=We}}if($=$[0],Ae=Ae[0],W&&de(ne,1)&&!(W=1<=(Pe=de(ne,4))&&11>=Pe)){I.a=3;break e}var kA;if(kA=W)t:{var LA,Zt,qA,Za=I,wa=$,js=Ae,QA=Pe,fs=j,qs=Za.m,Ra=Za.s,Ba=[null],Wa=1,un=0,Qn=Nn[QA];A:for(;;){if(fs&&de(qs,1)){var Ma=de(qs,3)+2,Ua=Ye(wa,Ma),$a=Ye(js,Ma),dn=Ua*$a;if(!zt(Ua,$a,0,Za,Ba))break A;for(Ba=Ba[0],Ra.xc=Ma,LA=0;LA<dn;++LA){var ur=Ba[LA]>>8&65535;Ba[LA]=ur,ur>=Wa&&(Wa=ur+1)}}if(qs.h)break A;for(Zt=0;5>Zt;++Zt){var ga=qi[Zt];!Zt&&0<QA&&(ga+=1<<QA),un<ga&&(un=ga)}var dr=u(Wa*Qn,R),Gs=Wa,ya=u(Gs,Z);if(ya==null)var Xi=null;else s(65536>=Gs),Xi=ya;var hn=o(un);if(Xi==null||hn==null||dr==null){Za.a=1;break A}var sA=dr;for(LA=qA=0;LA<Wa;++LA){var hA=Xi[LA],ra=hA.G,Hr=hA.H,Yi=0,hr=1,So=0;for(Zt=0;5>Zt;++Zt){ga=qi[Zt],ra[Zt]=sA,Hr[Zt]=qA,!Zt&&0<QA&&(ga+=1<<QA);s:{var bi,wi=ga,nc=Za,$A=hn,Wc=sA,$c=qA,rc=0,Mr=nc.m,cf=de(Mr,1);if(l($A,0,0,wi),cf){var eu=de(Mr,1)+1,tu=de(Mr,1),ic=de(Mr,tu==0?1:8);$A[ic]=1,eu==2&&($A[ic=de(Mr,8)]=1);var es=1}else{var Ca=o(19),Qo=de(Mr,4)+4;if(19<Qo){nc.a=3;var Bi=0;break s}for(bi=0;bi<Qo;++bi)Ca[No[bi]]=de(Mr,3);var Ml=void 0,Zi=void 0,fr=nc,lc=Ca,Ol=wi,oc=$A,cc=0,Or=fr.m,Au=8,au=u(128,R);a:for(;T(au,0,7,lc,19);){if(de(Or,1)){var id=2+2*de(Or,3);if((Ml=2+de(Or,id))>Ol)break a}else Ml=Ol;for(Zi=0;Zi<Ol&&Ml--;){fe(Or);var su=au[0+(127&X(Or))];re(Or,Or.u+su.g);var yi=su.value;if(16>yi)oc[Zi++]=yi,yi!=0&&(Au=yi);else{var ld=yi==16,od=yi-16,cd=Ll[od],nu=de(Or,yn[od])+cd;if(Zi+nu>Ol)break a;for(var ud=ld?Au:0;0<nu--;)oc[Zi++]=ud}}cc=1;break a}cc||(fr.a=3),es=cc}(es=es&&!Mr.h)&&(rc=T(Wc,$c,8,$A,wi)),es&&rc!=0?Bi=rc:(nc.a=3,Bi=0)}if(Bi==0)break A;if(hr&&$o[Zt]==1&&(hr=sA[qA].g==0),Yi+=sA[qA].g,qA+=Bi,3>=Zt){var Wi,uc=hn[0];for(Wi=1;Wi<ga;++Wi)hn[Wi]>uc&&(uc=hn[Wi]);So+=uc}}if(hA.nd=hr,hA.Qb=0,hr&&(hA.qb=(ra[3][Hr[3]+0].value<<24|ra[1][Hr[1]+0].value<<16|ra[2][Hr[2]+0].value)>>>0,Yi==0&&256>ra[0][Hr[0]+0].value&&(hA.Qb=1,hA.qb+=ra[0][Hr[0]+0].value<<8)),hA.jc=!hA.Qb&&6>So,hA.jc){var Uo,mr=hA;for(Uo=0;Uo<Xa;++Uo){var kr=Uo,_r=mr.pd[kr],dc=mr.G[0][mr.H[0]+kr];256<=dc.value?(_r.g=dc.g+256,_r.value=dc.value):(_r.g=0,_r.value=0,kr>>=YA(dc,8,_r),kr>>=YA(mr.G[1][mr.H[1]+kr],16,_r),kr>>=YA(mr.G[2][mr.H[2]+kr],0,_r),YA(mr.G[3][mr.H[3]+kr],24,_r))}}}Ra.vc=Ba,Ra.Wb=Wa,Ra.Ya=Xi,Ra.yc=dr,kA=1;break t}kA=0}if(!(W=kA)){I.a=3;break e}if(0<Pe){if(ce.ua=1<<Pe,!At(ce.Wa,Pe)){I.a=1,W=0;break e}}else ce.ua=0;var hc=I,$i=$,dd=Ae,kl=hc.s,_l=kl.xc;if(hc.c=$i,hc.i=dd,kl.md=Ye($i,_l),kl.wc=_l==0?-1:(1<<_l)-1,j){I.xb=mi;break e}if((Se=o($*Ae))==null){I.a=1,W=0;break e}W=(W=Xe(I,Se,0,$,Ae,Ae,null))&&!ne.h;break e}return W?(z!=null?z[0]=Se:(s(Se==null),s(j)),I.$=0,j||_t(ce)):_t(ce),W}function gA(f,g){var j=f.c*f.i,I=j+g+16*g;return s(f.c<=g),f.V=o(I),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+j+g,1)}function RA(f,g){var j=f.C,I=g-j,z=f.V,W=f.Ba+f.c*j;for(s(g<=f.l.o);0<I;){var $=16<I?16:I,Ae=f.l.ma,ne=f.l.width,ce=ne*$,Se=Ae.ca,Pe=Ae.tb+ne*j,Re=f.Ta,De=f.Ua;Xt(f,$,z,W),EA(Re,De,Se,Pe,ce),et(Ae,j,j+$,Se,Pe,ne),I-=$,z+=$*f.c,j+=$}s(j==g),f.C=f.Ma=g}function Da(){this.ub=this.yd=this.td=this.Rb=0}function zA(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fa(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ma(){this.Yb=(function(){var f=[];return(function g(j,I,z){for(var W=z[I],$=0;$<W&&(j.push(z.length>I+1?[]:0),!(z.length<I+1));$++)g(j[$],I+1,z)})(f,0,[3,11]),f})()}function rs(){this.jb=o(3),this.Wc=d([4,8],ma),this.Xc=d([4,17],ma)}function ca(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Us(){this.ld=this.La=this.dd=this.tc=0}function tr(){this.Na=this.la=0}function kn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function mn(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function go(){this.uc=this.M=this.Nb=0,this.wa=Array(new Us),this.Y=0,this.ya=Array(new mn),this.aa=0,this.l=new Yr}function Di(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ml(){this.cb=this.a=0,this.sc="",this.m=new J,this.Od=new Da,this.Kc=new zA,this.ed=new ca,this.Qa=new Fa,this.Ic=this.$c=this.Aa=0,this.D=new go,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,J),this.ia=0,this.pb=u(4,kn),this.Pa=new rs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Di),this.Hd=0,this.rb=Array(new tr),this.sb=0,this.wa=Array(new Us),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new mn),this.L=this.aa=0,this.gd=d([4,2],Us),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Zr(){var f=new ml;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,cn||(cn=Ti)),f}function ZA(f,g,j){return f.a==0&&(f.a=g,f.sc=j,f.cb=0),0}function _s(f,g,j){return 3<=j&&f[g+0]==157&&f[g+1]==1&&f[g+2]==42}function is(f,g){if(f==null)return 0;if(f.a=0,f.sc="OK",g==null)return ZA(f,2,"null VP8Io passed to VP8GetHeaders()");var j=g.data,I=g.w,z=g.ha;if(4>z)return ZA(f,7,"Truncated header.");var W=j[I+0]|j[I+1]<<8|j[I+2]<<16,$=f.Od;if($.Rb=!(1&W),$.td=W>>1&7,$.yd=W>>4&1,$.ub=W>>5,3<$.td)return ZA(f,3,"Incorrect keyframe parameters.");if(!$.yd)return ZA(f,4,"Frame not displayable.");I+=3,z-=3;var Ae=f.Kc;if($.Rb){if(7>z)return ZA(f,7,"cannot parse picture header");if(!_s(j,I,z))return ZA(f,3,"Bad code word");Ae.c=16383&(j[I+4]<<8|j[I+3]),Ae.Td=j[I+4]>>6,Ae.i=16383&(j[I+6]<<8|j[I+5]),Ae.Ud=j[I+6]>>6,I+=7,z-=7,f.za=Ae.c+15>>4,f.Ub=Ae.i+15>>4,g.width=Ae.c,g.height=Ae.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,l((W=f.Pa).jb,0,255,W.jb.length),s((W=f.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,l(W.Zb,0,0,W.Zb.length),l(W.Lb,0,0,W.Lb)}if($.ub>z)return ZA(f,7,"bad partition length");ue(W=f.m,j,I,$.ub),I+=$.ub,z-=$.ub,$.Rb&&(Ae.Ld=xe(W),Ae.Kd=xe(W)),Ae=f.Qa;var ne,ce=f.Pa;if(s(W!=null),s(Ae!=null),Ae.Cb=xe(W),Ae.Cb){if(Ae.Bb=xe(W),xe(W)){for(Ae.Fb=xe(W),ne=0;4>ne;++ne)Ae.Zb[ne]=xe(W)?M(W,7):0;for(ne=0;4>ne;++ne)Ae.Lb[ne]=xe(W)?M(W,6):0}if(Ae.Bb)for(ne=0;3>ne;++ne)ce.jb[ne]=xe(W)?S(W,8):255}else Ae.Bb=0;if(W.Ka)return ZA(f,3,"cannot parse segment header");if((Ae=f.ed).zd=xe(W),Ae.Tb=S(W,6),Ae.wb=S(W,3),Ae.Pc=xe(W),Ae.Pc&&xe(W)){for(ce=0;4>ce;++ce)xe(W)&&(Ae.vd[ce]=M(W,6));for(ce=0;4>ce;++ce)xe(W)&&(Ae.od[ce]=M(W,6))}if(f.L=Ae.Tb==0?0:Ae.zd?1:2,W.Ka)return ZA(f,3,"cannot parse filter header");var Se=z;if(z=ne=I,I=ne+Se,Ae=Se,f.Xb=(1<<S(f.m,2))-1,Se<3*(ce=f.Xb))j=7;else{for(ne+=3*ce,Ae-=3*ce,Se=0;Se<ce;++Se){var Pe=j[z+0]|j[z+1]<<8|j[z+2]<<16;Pe>Ae&&(Pe=Ae),ue(f.Jc[+Se],j,ne,Pe),ne+=Pe,Ae-=Pe,z+=3}ue(f.Jc[+ce],j,ne,Ae),j=ne<I?0:5}if(j!=0)return ZA(f,j,"cannot parse partitions");for(j=S(ne=f.m,7),z=xe(ne)?M(ne,4):0,I=xe(ne)?M(ne,4):0,Ae=xe(ne)?M(ne,4):0,ce=xe(ne)?M(ne,4):0,ne=xe(ne)?M(ne,4):0,Se=f.Qa,Pe=0;4>Pe;++Pe){if(Se.Cb){var Re=Se.Zb[Pe];Se.Fb||(Re+=j)}else{if(0<Pe){f.pb[Pe]=f.pb[0];continue}Re=j}var De=f.pb[Pe];De.Sc[0]=jn[rn(Re+z,127)],De.Sc[1]=Fn[rn(Re+0,127)],De.Eb[0]=2*jn[rn(Re+I,127)],De.Eb[1]=101581*Fn[rn(Re+Ae,127)]>>16,8>De.Eb[1]&&(De.Eb[1]=8),De.Qc[0]=jn[rn(Re+ce,117)],De.Qc[1]=Fn[rn(Re+ne,127)],De.lc=Re+ne}if(!$.Rb)return ZA(f,4,"Not a key frame.");for(xe(W),$=f.Pa,j=0;4>j;++j){for(z=0;8>z;++z)for(I=0;3>I;++I)for(Ae=0;11>Ae;++Ae)ce=Ce(W,na[j][z][I][Ae])?S(W,8):nd[j][z][I][Ae],$.Wc[j][z].Yb[I][Ae]=ce;for(z=0;17>z;++z)$.Xc[j][z]=$.Wc[j][xA[z]]}return f.kc=xe(W),f.kc&&(f.Bd=S(W,8)),f.cb=1}function Ti(f,g,j,I,z,W,$){var Ae=g[z].Yb[j];for(j=0;16>z;++z){if(!Ce(f,Ae[j+0]))return z;for(;!Ce(f,Ae[j+1]);)if(Ae=g[++z].Yb[0],j=0,z==16)return 16;var ne=g[z+1].Yb;if(Ce(f,Ae[j+2])){var ce=f,Se=0;if(Ce(ce,(Re=Ae)[(Pe=j)+3]))if(Ce(ce,Re[Pe+6])){for(Ae=0,Pe=2*(Se=Ce(ce,Re[Pe+8]))+(Re=Ce(ce,Re[Pe+9+Se])),Se=0,Re=sd[Pe];Re[Ae];++Ae)Se+=Se+Ce(ce,Re[Ae]);Se+=3+(8<<Pe)}else Ce(ce,Re[Pe+7])?(Se=7+2*Ce(ce,165),Se+=Ce(ce,145)):Se=5+Ce(ce,159);else Se=Ce(ce,Re[Pe+4])?3+Ce(ce,Re[Pe+5]):2;Ae=ne[2]}else Se=1,Ae=ne[1];ne=$+Xc[z],0>(ce=f).b&&ve(ce);var Pe,Re=ce.b,De=(Pe=ce.Ca>>1)-(ce.I>>Re)>>31;--ce.b,ce.Ca+=De,ce.Ca|=1,ce.I-=(Pe+1&De)<<Re,W[ne]=((Se^De)-De)*I[(0<z)+0]}return 16}function Hi(f){var g=f.rb[f.sb-1];g.la=0,g.Na=0,l(f.zc,0,0,f.zc.length),f.ja=0}function Mi(f,g){if(f==null)return 0;if(g==null)return ZA(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!is(f,g))return 0;if(s(f.cb),g.ac==null||g.ac(g)){g.ob&&(f.L=0);var j=Hl[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=g.v-j>>4,f.zb=g.j-j>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=g.o+15+j>>4,f.Hb=g.va+15+j>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var I=f.ed;for(j=0;4>j;++j){var z;if(f.Qa.Cb){var W=f.Qa.Lb[j];f.Qa.Fb||(W+=I.Tb)}else W=I.Tb;for(z=0;1>=z;++z){var $=f.gd[j][z],Ae=W;if(I.Pc&&(Ae+=I.vd[0],z&&(Ae+=I.od[0])),0<(Ae=0>Ae?0:63<Ae?63:Ae)){var ne=Ae;0<I.wb&&(ne=4<I.wb?ne>>2:ne>>1)>9-I.wb&&(ne=9-I.wb),1>ne&&(ne=1),$.dd=ne,$.tc=2*Ae+ne,$.ld=40<=Ae?2:15<=Ae?1:0}else $.tc=0;$.La=z}}}j=0}else ZA(f,6,"Frame setup failed"),j=f.a;if(j=j==0){if(j){f.$c=0,0<f.Aa||(f.Ic=Fo);e:{j=f.Ic,I=4*(ne=f.za);var ce=32*ne,Se=ne+1,Pe=0<f.L?ne*(0<f.Aa?2:1):0,Re=(f.Aa==2?2:1)*ne;if(($=I+832+(z=3*(16*j+Hl[f.L])/2*ce)+(W=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=$)j=0;else{if($>f.Vb){if(f.Vb=0,f.Ec=o($),f.Fc=0,f.Ec==null){j=ZA(f,1,"no memory during frame initialization.");break e}f.Vb=$}$=f.Ec,Ae=f.Fc,f.Ac=$,f.Bc=Ae,Ae+=I,f.Gd=u(ce,Di),f.Hd=0,f.rb=u(Se+1,tr),f.sb=1,f.wa=Pe?u(Pe,Us):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=ne),s(!0),f.oc=$,f.pc=Ae,Ae+=832,f.ya=u(Re,mn),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=ne),f.R=16*ne,f.B=8*ne,ne=(ce=Hl[f.L])*f.R,ce=ce/2*f.B,f.sa=$,f.ta=Ae+ne,f.qa=f.sa,f.ra=f.ta+16*j*f.R+ce,f.Ha=f.qa,f.Ia=f.ra+8*j*f.B+ce,f.$c=0,Ae+=z,f.mb=W?$:null,f.nb=W?Ae:null,s(Ae+W<=f.Fc+f.Vb),Hi(f),l(f.Ac,f.Bc,0,I),j=1}}if(j){if(g.ka=0,g.y=f.sa,g.O=f.ta,g.f=f.qa,g.N=f.ra,g.ea=f.Ha,g.Vd=f.Ia,g.fa=f.R,g.Rc=f.B,g.F=null,g.J=0,!Ul){for(j=-255;255>=j;++j)da[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)Gn[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)di[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)Lr[255+j]=0>j?0:255<j?255:j;Ul=1}Vn=gl,zn=pl,Vi=$r,ys=Ar,Ya=Oi,sa=Wr,qn=si,jl=ge,Fl=ye,ln=He,oi=Be,Ir=oe,ci=ct,Sl=St,zi=Fr,ui=Rt,Ql=oA,on=Ks,ba[0]=Es,ba[1]=xo,ba[2]=_n,ba[3]=bl,ba[4]=_i,ba[5]=xs,ba[6]=ar,ba[7]=Nr,ba[8]=xn,ba[9]=jr,Ds[0]=Cr,Ds[1]=vl,Ds[2]=an,Ds[3]=ei,Ds[4]=WA,Ds[5]=ki,Ds[6]=Ai,Jn[0]=sn,Jn[1]=xl,Jn[2]=Ri,Jn[3]=sr,Jn[4]=rr,Jn[5]=ai,Jn[6]=Ta,j=1}else j=0}j&&(j=(function(De,ut){for(De.M=0;De.M<De.Va;++De.M){var We,Qe=De.Jc[De.M&De.Xb],Ie=De.m,it=De;for(We=0;We<it.za;++We){var ht=Ie,nt=it,Nt=nt.Ac,bt=nt.Bc+4*We,Mt=nt.zc,Bt=nt.ya[nt.aa+We];if(nt.Qa.Bb?Bt.$b=Ce(ht,nt.Pa.jb[0])?2+Ce(ht,nt.Pa.jb[2]):Ce(ht,nt.Pa.jb[1]):Bt.$b=0,nt.kc&&(Bt.Ad=Ce(ht,nt.Bd)),Bt.Za=!Ce(ht,145)+0,Bt.Za){var IA=Bt.Ob,vA=0;for(nt=0;4>nt;++nt){var CA,nA=Mt[0+nt];for(CA=0;4>CA;++CA){nA=us[Nt[bt+CA]][nA];for(var kA=ec[Ce(ht,nA[0])];0<kA;)kA=ec[2*kA+Ce(ht,nA[kA])];nA=-kA,Nt[bt+CA]=nA}r(IA,vA,Nt,bt,4),vA+=4,Mt[0+nt]=nA}}else nA=Ce(ht,156)?Ce(ht,128)?1:3:Ce(ht,163)?2:0,Bt.Ob[0]=nA,l(Nt,bt,nA,4),l(Mt,0,nA,4);Bt.Dd=Ce(ht,142)?Ce(ht,114)?Ce(ht,183)?1:3:2:0}if(it.m.Ka)return ZA(De,7,"Premature end-of-partition0 encountered.");for(;De.ja<De.za;++De.ja){if(it=Qe,ht=(Ie=De).rb[Ie.sb-1],Nt=Ie.rb[Ie.sb+Ie.ja],We=Ie.ya[Ie.aa+Ie.ja],bt=Ie.kc?We.Ad:0)ht.la=Nt.la=0,We.Za||(ht.Na=Nt.Na=0),We.Hc=0,We.Gc=0,We.ia=0;else{var LA,Zt;if(ht=Nt,Nt=it,bt=Ie.Pa.Xc,Mt=Ie.ya[Ie.aa+Ie.ja],Bt=Ie.pb[Mt.$b],nt=Mt.ad,IA=0,vA=Ie.rb[Ie.sb-1],nA=CA=0,l(nt,IA,0,384),Mt.Za)var qA=0,Za=bt[3];else{kA=o(16);var wa=ht.Na+vA.Na;if(wa=cn(Nt,bt[1],wa,Bt.Eb,0,kA,0),ht.Na=vA.Na=(0<wa)+0,1<wa)Vn(kA,0,nt,IA);else{var js=kA[0]+3>>3;for(kA=0;256>kA;kA+=16)nt[IA+kA]=js}qA=1,Za=bt[0]}var QA=15&ht.la,fs=15&vA.la;for(kA=0;4>kA;++kA){var qs=1&fs;for(js=Zt=0;4>js;++js)QA=QA>>1|(qs=(wa=cn(Nt,Za,wa=qs+(1&QA),Bt.Sc,qA,nt,IA))>qA)<<7,Zt=Zt<<2|(3<wa?3:1<wa?2:nt[IA+0]!=0),IA+=16;QA>>=4,fs=fs>>1|qs<<7,CA=(CA<<8|Zt)>>>0}for(Za=QA,qA=fs>>4,LA=0;4>LA;LA+=2){for(Zt=0,QA=ht.la>>4+LA,fs=vA.la>>4+LA,kA=0;2>kA;++kA){for(qs=1&fs,js=0;2>js;++js)wa=qs+(1&QA),QA=QA>>1|(qs=0<(wa=cn(Nt,bt[2],wa,Bt.Qc,0,nt,IA)))<<3,Zt=Zt<<2|(3<wa?3:1<wa?2:nt[IA+0]!=0),IA+=16;QA>>=2,fs=fs>>1|qs<<5}nA|=Zt<<4*LA,Za|=QA<<4<<LA,qA|=(240&fs)<<LA}ht.la=Za,vA.la=qA,Mt.Hc=CA,Mt.Gc=nA,Mt.ia=43690&nA?0:Bt.ia,bt=!(CA|nA)}if(0<Ie.L&&(Ie.wa[Ie.Y+Ie.ja]=Ie.gd[We.$b][We.Za],Ie.wa[Ie.Y+Ie.ja].La|=!bt),it.Ka)return ZA(De,7,"Premature end-of-file encountered.")}if(Hi(De),Ie=ut,it=1,We=(Qe=De).D,ht=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(We.M=Qe.M,We.uc=ht,yl(Qe,We),it=1,We=(Zt=Qe.D).Nb,ht=(nA=Hl[Qe.L])*Qe.R,Nt=nA/2*Qe.B,kA=16*We*Qe.R,js=8*We*Qe.B,bt=Qe.sa,Mt=Qe.ta-ht+kA,Bt=Qe.qa,nt=Qe.ra-Nt+js,IA=Qe.Ha,vA=Qe.Ia-Nt+js,fs=(QA=Zt.M)==0,CA=QA>=Qe.Va-1,Qe.Aa==2&&yl(Qe,Zt),Zt.uc)for(qs=(wa=Qe).D.M,s(wa.D.uc),Zt=wa.yb;Zt<wa.Hb;++Zt){qA=Zt,Za=qs;var Ra=(Ba=(ga=wa).D).Nb;LA=ga.R;var Ba=Ba.wa[Ba.Y+qA],Wa=ga.sa,un=ga.ta+16*Ra*LA+16*qA,Qn=Ba.dd,Ma=Ba.tc;if(Ma!=0)if(s(3<=Ma),ga.L==1)0<qA&&ui(Wa,un,LA,Ma+4),Ba.La&&on(Wa,un,LA,Ma),0<Za&&zi(Wa,un,LA,Ma+4),Ba.La&&Ql(Wa,un,LA,Ma);else{var Ua=ga.B,$a=ga.qa,dn=ga.ra+8*Ra*Ua+8*qA,ur=ga.Ha,ga=ga.Ia+8*Ra*Ua+8*qA;Ra=Ba.ld,0<qA&&(jl(Wa,un,LA,Ma+4,Qn,Ra),ln($a,dn,ur,ga,Ua,Ma+4,Qn,Ra)),Ba.La&&(Ir(Wa,un,LA,Ma,Qn,Ra),Sl($a,dn,ur,ga,Ua,Ma,Qn,Ra)),0<Za&&(qn(Wa,un,LA,Ma+4,Qn,Ra),Fl($a,dn,ur,ga,Ua,Ma+4,Qn,Ra)),Ba.La&&(oi(Wa,un,LA,Ma,Qn,Ra),ci($a,dn,ur,ga,Ua,Ma,Qn,Ra))}}if(Qe.ia&&alert("todo:DitherRow"),Ie.put!=null){if(Zt=16*QA,QA=16*(QA+1),fs?(Ie.y=Qe.sa,Ie.O=Qe.ta+kA,Ie.f=Qe.qa,Ie.N=Qe.ra+js,Ie.ea=Qe.Ha,Ie.W=Qe.Ia+js):(Zt-=nA,Ie.y=bt,Ie.O=Mt,Ie.f=Bt,Ie.N=nt,Ie.ea=IA,Ie.W=vA),CA||(QA-=nA),QA>Ie.o&&(QA=Ie.o),Ie.F=null,Ie.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Zt<QA&&(Ie.J=wl(Qe,Ie,Zt,QA-Zt),Ie.F=Qe.mb,Ie.F==null&&Ie.F.length==0)){it=ZA(Qe,3,"Could not decode alpha data.");break e}Zt<Ie.j&&(nA=Ie.j-Zt,Zt=Ie.j,s(!(1&nA)),Ie.O+=Qe.R*nA,Ie.N+=Qe.B*(nA>>1),Ie.W+=Qe.B*(nA>>1),Ie.F!=null&&(Ie.J+=Ie.width*nA)),Zt<QA&&(Ie.O+=Ie.v,Ie.N+=Ie.v>>1,Ie.W+=Ie.v>>1,Ie.F!=null&&(Ie.J+=Ie.v),Ie.ka=Zt-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=QA-Zt,it=Ie.put(Ie))}We+1!=Qe.Ic||CA||(r(Qe.sa,Qe.ta-ht,bt,Mt+16*Qe.R,ht),r(Qe.qa,Qe.ra-Nt,Bt,nt+8*Qe.B,Nt),r(Qe.Ha,Qe.Ia-Nt,IA,vA+8*Qe.B,Nt))}if(!it)return ZA(De,6,"Output aborted.")}return 1})(f,g)),g.bc!=null&&g.bc(g),j&=1}return j?(f.cb=0,j):0}function Rs(f,g,j,I,z){z=f[g+j+32*I]+(z>>3),f[g+j+32*I]=-256&z?0>z?0:255:z}function pn(f,g,j,I,z,W){Rs(f,g,0,j,I+z),Rs(f,g,1,j,I+W),Rs(f,g,2,j,I-W),Rs(f,g,3,j,I-z)}function ls(f){return(20091*f>>16)+f}function Ga(f,g,j,I){var z,W=0,$=o(16);for(z=0;4>z;++z){var Ae=f[g+0]+f[g+8],ne=f[g+0]-f[g+8],ce=(35468*f[g+4]>>16)-ls(f[g+12]),Se=ls(f[g+4])+(35468*f[g+12]>>16);$[W+0]=Ae+Se,$[W+1]=ne+ce,$[W+2]=ne-ce,$[W+3]=Ae-Se,W+=4,g++}for(z=W=0;4>z;++z)Ae=(f=$[W+0]+4)+$[W+8],ne=f-$[W+8],ce=(35468*$[W+4]>>16)-ls($[W+12]),Rs(j,I,0,0,Ae+(Se=ls($[W+4])+(35468*$[W+12]>>16))),Rs(j,I,1,0,ne+ce),Rs(j,I,2,0,ne-ce),Rs(j,I,3,0,Ae-Se),W++,I+=32}function Wr(f,g,j,I){var z=f[g+0]+4,W=35468*f[g+4]>>16,$=ls(f[g+4]),Ae=35468*f[g+1]>>16;pn(j,I,0,z+$,f=ls(f[g+1]),Ae),pn(j,I,1,z+W,f,Ae),pn(j,I,2,z-W,f,Ae),pn(j,I,3,z-$,f,Ae)}function pl(f,g,j,I,z){Ga(f,g,j,I),z&&Ga(f,g+16,j,I+4)}function $r(f,g,j,I){zn(f,g+0,j,I,1),zn(f,g+32,j,I+128,1)}function Ar(f,g,j,I){var z;for(f=f[g+0]+4,z=0;4>z;++z)for(g=0;4>g;++g)Rs(j,I,g,z,f)}function Oi(f,g,j,I){f[g+0]&&ys(f,g+0,j,I),f[g+16]&&ys(f,g+16,j,I+4),f[g+32]&&ys(f,g+32,j,I+128),f[g+48]&&ys(f,g+48,j,I+128+4)}function gl(f,g,j,I){var z,W=o(16);for(z=0;4>z;++z){var $=f[g+0+z]+f[g+12+z],Ae=f[g+4+z]+f[g+8+z],ne=f[g+4+z]-f[g+8+z],ce=f[g+0+z]-f[g+12+z];W[0+z]=$+Ae,W[8+z]=$-Ae,W[4+z]=ce+ne,W[12+z]=ce-ne}for(z=0;4>z;++z)$=(f=W[0+4*z]+3)+W[3+4*z],Ae=W[1+4*z]+W[2+4*z],ne=W[1+4*z]-W[2+4*z],ce=f-W[3+4*z],j[I+0]=$+Ae>>3,j[I+16]=ce+ne>>3,j[I+32]=$-Ae>>3,j[I+48]=ce-ne>>3,I+=64}function gn(f,g,j){var I,z=g-32,W=Cs,$=255-f[z-1];for(I=0;I<j;++I){var Ae,ne=W,ce=$+f[g-1];for(Ae=0;Ae<j;++Ae)f[g+Ae]=ne[ce+f[z+Ae]];g+=32}}function xo(f,g){gn(f,g,4)}function xl(f,g){gn(f,g,8)}function vl(f,g){gn(f,g,16)}function an(f,g){var j;for(j=0;16>j;++j)r(f,g+32*j,f,g-32,16)}function ei(f,g){var j;for(j=16;0<j;--j)l(f,g,f[g-1],16),g+=32}function ti(f,g,j){var I;for(I=0;16>I;++I)l(g,j+32*I,f,16)}function Cr(f,g){var j,I=16;for(j=0;16>j;++j)I+=f[g-1+32*j]+f[g+j-32];ti(I>>5,f,g)}function WA(f,g){var j,I=8;for(j=0;16>j;++j)I+=f[g-1+32*j];ti(I>>4,f,g)}function ki(f,g){var j,I=8;for(j=0;16>j;++j)I+=f[g+j-32];ti(I>>4,f,g)}function Ai(f,g){ti(128,f,g)}function Gt(f,g,j){return f+2*g+j+2>>2}function _n(f,g){var j,I=g-32;for(I=new Uint8Array([Gt(f[I-1],f[I+0],f[I+1]),Gt(f[I+0],f[I+1],f[I+2]),Gt(f[I+1],f[I+2],f[I+3]),Gt(f[I+2],f[I+3],f[I+4])]),j=0;4>j;++j)r(f,g+32*j,I,0,I.length)}function bl(f,g){var j=f[g-1],I=f[g-1+32],z=f[g-1+64],W=f[g-1+96];st(f,g+0,16843009*Gt(f[g-1-32],j,I)),st(f,g+32,16843009*Gt(j,I,z)),st(f,g+64,16843009*Gt(I,z,W)),st(f,g+96,16843009*Gt(z,W,W))}function Es(f,g){var j,I=4;for(j=0;4>j;++j)I+=f[g+j-32]+f[g-1+32*j];for(I>>=3,j=0;4>j;++j)l(f,g+32*j,I,4)}function _i(f,g){var j=f[g-1+0],I=f[g-1+32],z=f[g-1+64],W=f[g-1-32],$=f[g+0-32],Ae=f[g+1-32],ne=f[g+2-32],ce=f[g+3-32];f[g+0+96]=Gt(I,z,f[g-1+96]),f[g+1+96]=f[g+0+64]=Gt(j,I,z),f[g+2+96]=f[g+1+64]=f[g+0+32]=Gt(W,j,I),f[g+3+96]=f[g+2+64]=f[g+1+32]=f[g+0+0]=Gt($,W,j),f[g+3+64]=f[g+2+32]=f[g+1+0]=Gt(Ae,$,W),f[g+3+32]=f[g+2+0]=Gt(ne,Ae,$),f[g+3+0]=Gt(ce,ne,Ae)}function ar(f,g){var j=f[g+1-32],I=f[g+2-32],z=f[g+3-32],W=f[g+4-32],$=f[g+5-32],Ae=f[g+6-32],ne=f[g+7-32];f[g+0+0]=Gt(f[g+0-32],j,I),f[g+1+0]=f[g+0+32]=Gt(j,I,z),f[g+2+0]=f[g+1+32]=f[g+0+64]=Gt(I,z,W),f[g+3+0]=f[g+2+32]=f[g+1+64]=f[g+0+96]=Gt(z,W,$),f[g+3+32]=f[g+2+64]=f[g+1+96]=Gt(W,$,Ae),f[g+3+64]=f[g+2+96]=Gt($,Ae,ne),f[g+3+96]=Gt(Ae,ne,ne)}function xs(f,g){var j=f[g-1+0],I=f[g-1+32],z=f[g-1+64],W=f[g-1-32],$=f[g+0-32],Ae=f[g+1-32],ne=f[g+2-32],ce=f[g+3-32];f[g+0+0]=f[g+1+64]=W+$+1>>1,f[g+1+0]=f[g+2+64]=$+Ae+1>>1,f[g+2+0]=f[g+3+64]=Ae+ne+1>>1,f[g+3+0]=ne+ce+1>>1,f[g+0+96]=Gt(z,I,j),f[g+0+64]=Gt(I,j,W),f[g+0+32]=f[g+1+96]=Gt(j,W,$),f[g+1+32]=f[g+2+96]=Gt(W,$,Ae),f[g+2+32]=f[g+3+96]=Gt($,Ae,ne),f[g+3+32]=Gt(Ae,ne,ce)}function Nr(f,g){var j=f[g+0-32],I=f[g+1-32],z=f[g+2-32],W=f[g+3-32],$=f[g+4-32],Ae=f[g+5-32],ne=f[g+6-32],ce=f[g+7-32];f[g+0+0]=j+I+1>>1,f[g+1+0]=f[g+0+64]=I+z+1>>1,f[g+2+0]=f[g+1+64]=z+W+1>>1,f[g+3+0]=f[g+2+64]=W+$+1>>1,f[g+0+32]=Gt(j,I,z),f[g+1+32]=f[g+0+96]=Gt(I,z,W),f[g+2+32]=f[g+1+96]=Gt(z,W,$),f[g+3+32]=f[g+2+96]=Gt(W,$,Ae),f[g+3+64]=Gt($,Ae,ne),f[g+3+96]=Gt(Ae,ne,ce)}function jr(f,g){var j=f[g-1+0],I=f[g-1+32],z=f[g-1+64],W=f[g-1+96];f[g+0+0]=j+I+1>>1,f[g+2+0]=f[g+0+32]=I+z+1>>1,f[g+2+32]=f[g+0+64]=z+W+1>>1,f[g+1+0]=Gt(j,I,z),f[g+3+0]=f[g+1+32]=Gt(I,z,W),f[g+3+32]=f[g+1+64]=Gt(z,W,W),f[g+3+64]=f[g+2+64]=f[g+0+96]=f[g+1+96]=f[g+2+96]=f[g+3+96]=W}function xn(f,g){var j=f[g-1+0],I=f[g-1+32],z=f[g-1+64],W=f[g-1+96],$=f[g-1-32],Ae=f[g+0-32],ne=f[g+1-32],ce=f[g+2-32];f[g+0+0]=f[g+2+32]=j+$+1>>1,f[g+0+32]=f[g+2+64]=I+j+1>>1,f[g+0+64]=f[g+2+96]=z+I+1>>1,f[g+0+96]=W+z+1>>1,f[g+3+0]=Gt(Ae,ne,ce),f[g+2+0]=Gt($,Ae,ne),f[g+1+0]=f[g+3+32]=Gt(j,$,Ae),f[g+1+32]=f[g+3+64]=Gt(I,j,$),f[g+1+64]=f[g+3+96]=Gt(z,I,j),f[g+1+96]=Gt(W,z,I)}function Ri(f,g){var j;for(j=0;8>j;++j)r(f,g+32*j,f,g-32,8)}function sr(f,g){var j;for(j=0;8>j;++j)l(f,g,f[g-1],8),g+=32}function nr(f,g,j){var I;for(I=0;8>I;++I)l(g,j+32*I,f,8)}function sn(f,g){var j,I=8;for(j=0;8>j;++j)I+=f[g+j-32]+f[g-1+32*j];nr(I>>4,f,g)}function ai(f,g){var j,I=4;for(j=0;8>j;++j)I+=f[g+j-32];nr(I>>3,f,g)}function rr(f,g){var j,I=4;for(j=0;8>j;++j)I+=f[g-1+32*j];nr(I>>3,f,g)}function Ta(f,g){nr(128,f,g)}function Ps(f,g,j){var I=f[g-j],z=f[g+0],W=3*(z-I)+Dr[1020+f[g-2*j]-f[g+j]],$=Bo[112+(W+4>>3)];f[g-j]=Cs[255+I+Bo[112+(W+3>>3)]],f[g+0]=Cs[255+z-$]}function vs(f,g,j,I){var z=f[g+0],W=f[g+j];return cs[255+f[g-2*j]-f[g-j]]>I||cs[255+W-z]>I}function Rn(f,g,j,I){return 4*cs[255+f[g-j]-f[g+0]]+cs[255+f[g-2*j]-f[g+j]]<=I}function Pi(f,g,j,I,z){var W=f[g-3*j],$=f[g-2*j],Ae=f[g-j],ne=f[g+0],ce=f[g+j],Se=f[g+2*j],Pe=f[g+3*j];return 4*cs[255+Ae-ne]+cs[255+$-ce]>I?0:cs[255+f[g-4*j]-W]<=z&&cs[255+W-$]<=z&&cs[255+$-Ae]<=z&&cs[255+Pe-Se]<=z&&cs[255+Se-ce]<=z&&cs[255+ce-ne]<=z}function Fr(f,g,j,I){var z=2*I+1;for(I=0;16>I;++I)Rn(f,g+I,j,z)&&Ps(f,g+I,j)}function Rt(f,g,j,I){var z=2*I+1;for(I=0;16>I;++I)Rn(f,g+I*j,1,z)&&Ps(f,g+I*j,1)}function oA(f,g,j,I){var z;for(z=3;0<z;--z)Fr(f,g+=4*j,j,I)}function Ks(f,g,j,I){var z;for(z=3;0<z;--z)Rt(f,g+=4,j,I)}function vn(f,g,j,I,z,W,$,Ae){for(W=2*W+1;0<z--;){if(Pi(f,g,j,W,$))if(vs(f,g,j,Ae))Ps(f,g,j);else{var ne=f,ce=g,Se=j,Pe=ne[ce-2*Se],Re=ne[ce-Se],De=ne[ce+0],ut=ne[ce+Se],We=ne[ce+2*Se],Qe=27*(it=Dr[1020+3*(De-Re)+Dr[1020+Pe-ut]])+63>>7,Ie=18*it+63>>7,it=9*it+63>>7;ne[ce-3*Se]=Cs[255+ne[ce-3*Se]+it],ne[ce-2*Se]=Cs[255+Pe+Ie],ne[ce-Se]=Cs[255+Re+Qe],ne[ce+0]=Cs[255+De-Qe],ne[ce+Se]=Cs[255+ut-Ie],ne[ce+2*Se]=Cs[255+We-it]}g+=I}}function nn(f,g,j,I,z,W,$,Ae){for(W=2*W+1;0<z--;){if(Pi(f,g,j,W,$))if(vs(f,g,j,Ae))Ps(f,g,j);else{var ne=f,ce=g,Se=j,Pe=ne[ce-Se],Re=ne[ce+0],De=ne[ce+Se],ut=Bo[112+((We=3*(Re-Pe))+4>>3)],We=Bo[112+(We+3>>3)],Qe=ut+1>>1;ne[ce-2*Se]=Cs[255+ne[ce-2*Se]+Qe],ne[ce-Se]=Cs[255+Pe+We],ne[ce+0]=Cs[255+Re-ut],ne[ce+Se]=Cs[255+De-Qe]}g+=I}}function si(f,g,j,I,z,W){vn(f,g,j,1,16,I,z,W)}function ge(f,g,j,I,z,W){vn(f,g,1,j,16,I,z,W)}function Be(f,g,j,I,z,W){var $;for($=3;0<$;--$)nn(f,g+=4*j,j,1,16,I,z,W)}function oe(f,g,j,I,z,W){var $;for($=3;0<$;--$)nn(f,g+=4,1,j,16,I,z,W)}function ye(f,g,j,I,z,W,$,Ae){vn(f,g,z,1,8,W,$,Ae),vn(j,I,z,1,8,W,$,Ae)}function He(f,g,j,I,z,W,$,Ae){vn(f,g,1,z,8,W,$,Ae),vn(j,I,1,z,8,W,$,Ae)}function ct(f,g,j,I,z,W,$,Ae){nn(f,g+4*z,z,1,8,W,$,Ae),nn(j,I+4*z,z,1,8,W,$,Ae)}function St(f,g,j,I,z,W,$,Ae){nn(f,g+4,1,z,8,W,$,Ae),nn(j,I+4,1,z,8,W,$,Ae)}function dA(){this.ba=new MA,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new uA,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function BA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ha(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vs(){this.ua=0,this.Wa=new K,this.vb=new K,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new R}function Ja(){this.xb=this.a=0,this.l=new Yr,this.ca=new MA,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vs,this.ab=0,this.gc=u(4,Ha),this.Oc=0}function Pn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ir(f,g,j,I,z,W,$){for(f=f==null?0:f[g+0],g=0;g<$;++g)z[W+g]=f+j[I+g]&255,f=z[W+g]}function vo(f,g,j,I,z,W,$){var Ae;if(f==null)ir(null,null,j,I,z,W,$);else for(Ae=0;Ae<$;++Ae)z[W+Ae]=f[g+Ae]+j[I+Ae]&255}function ni(f,g,j,I,z,W,$){if(f==null)ir(null,null,j,I,z,W,$);else{var Ae,ne=f[g+0],ce=ne,Se=ne;for(Ae=0;Ae<$;++Ae)ce=Se+(ne=f[g+Ae])-ce,Se=j[I+Ae]+(-256&ce?0>ce?0:255:ce)&255,ce=ne,z[W+Ae]=Se}}function wl(f,g,j,I){var z=g.width,W=g.o;if(s(f!=null&&g!=null),0>j||0>=I||j+I>W)return null;if(!f.Cc){if(f.ga==null){var $;if(f.ga=new Pn,($=f.ga==null)||($=g.width*g.o,s(f.Gb.length==0),f.Gb=o($),f.Uc=0,f.Gb==null?$=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,$=1),$=!$),!$){$=f.ga;var Ae=f.Fa,ne=f.P,ce=f.qc,Se=f.mb,Pe=f.nb,Re=ne+1,De=ce-1,ut=$.l;if(s(Ae!=null&&Se!=null&&g!=null),Tr[0]=null,Tr[1]=ir,Tr[2]=vo,Tr[3]=ni,$.ca=Se,$.tb=Pe,$.c=g.width,$.i=g.height,s(0<$.c&&0<$.i),1>=ce)g=0;else if($.$a=Ae[ne+0]>>0&3,$.Z=Ae[ne+0]>>2&3,$.Lc=Ae[ne+0]>>4&3,ne=Ae[ne+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||ne)g=0;else if(ut.put=Ea,ut.ac=oa,ut.bc=Ia,ut.ma=$,ut.width=g.width,ut.height=g.height,ut.Da=g.Da,ut.v=g.v,ut.va=g.va,ut.j=g.j,ut.o=g.o,$.$a)e:{s($.$a==1),g=Vt();t:for(;;){if(g==null){g=0;break e}if(s($!=null),$.mc=g,g.c=$.c,g.i=$.i,g.l=$.l,g.l.ma=$,g.l.width=$.c,g.l.height=$.i,g.a=0,Y(g.m,Ae,Re,De),!zt($.c,$.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&Ze(g.s)?($.ic=1,Ae=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(Ae),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):($.ic=0,g=gA(g,$.c)),!g))break t;g=1;break e}$.mc=null,g=0}else g=De>=$.c*$.i;$=!g}if($)return null;f.ga.Lc!=1?f.Ga=0:I=W-j}s(f.ga!=null),s(j+I<=W);e:{if(g=(Ae=f.ga).c,W=Ae.l.o,Ae.$a==0){if(Re=f.rc,De=f.Vc,ut=f.Fa,ne=f.P+1+j*g,ce=f.mb,Se=f.nb+j*g,s(ne<=f.P+f.qc),Ae.Z!=0)for(s(Tr[Ae.Z]!=null),$=0;$<I;++$)Tr[Ae.Z](Re,De,ut,ne,ce,Se,g),Re=ce,De=Se,Se+=g,ne+=g;else for($=0;$<I;++$)r(ce,Se,ut,ne,g),Re=ce,De=Se,Se+=g,ne+=g;f.rc=Re,f.Vc=De}else{if(s(Ae.mc!=null),g=j+I,s(($=Ae.mc)!=null),s(g<=$.i),$.C>=g)g=1;else if(Ae.ic||ke(),Ae.ic){Ae=$.V,Re=$.Ba,De=$.c;var We=$.i,Qe=(ut=1,ne=$.$/De,ce=$.$%De,Se=$.m,Pe=$.s,$.$),Ie=De*We,it=De*g,ht=Pe.wc,nt=Qe<it?SA(Pe,ce,ne):null;s(Qe<=Ie),s(g<=We),s(Ze(Pe));t:for(;;){for(;!Se.h&&Qe<it;){if(ce&ht||(nt=SA(Pe,ce,ne)),s(nt!=null),fe(Se),256>(We=La(nt.G[0],nt.H[0],Se)))Ae[Re+Qe]=We,++Qe,++ce>=De&&(ce=0,++ne<=g&&!(ne%16)&&rt($,ne));else{if(!(280>We)){ut=0;break t}We=gs(We-256,Se);var Nt,bt=La(nt.G[4],nt.H[4],Se);if(fe(Se),!(Qe>=(bt=ns(De,bt=gs(bt,Se)))&&Ie-Qe>=We)){ut=0;break t}for(Nt=0;Nt<We;++Nt)Ae[Re+Qe+Nt]=Ae[Re+Qe+Nt-bt];for(Qe+=We,ce+=We;ce>=De;)ce-=De,++ne<=g&&!(ne%16)&&rt($,ne);Qe<it&&ce&ht&&(nt=SA(Pe,ce,ne))}s(Se.h==ee(Se))}rt($,ne>g?g:ne);break t}!ut||Se.h&&Qe<Ie?(ut=0,$.a=Se.h?5:3):$.$=Qe,g=ut}else g=Xe($,$.V,$.Ba,$.c,$.i,g,RA);if(!g){I=0;break e}}j+I>=W&&(f.Cc=1),I=1}if(!I)return null;if(f.Cc&&((I=f.ga)!=null&&(I.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+j*z}function y(f,g,j,I,z,W){for(;0<z--;){var $,Ae=f,ne=g+(j?1:0),ce=f,Se=g+(j?0:3);for($=0;$<I;++$){var Pe=ce[Se+4*$];Pe!=255&&(Pe*=32897,Ae[ne+4*$+0]=Ae[ne+4*$+0]*Pe>>23,Ae[ne+4*$+1]=Ae[ne+4*$+1]*Pe>>23,Ae[ne+4*$+2]=Ae[ne+4*$+2]*Pe>>23)}g+=W}}function q(f,g,j,I,z){for(;0<I--;){var W;for(W=0;W<j;++W){var $=f[g+2*W+0],Ae=15&(ce=f[g+2*W+1]),ne=4369*Ae,ce=(240&ce|ce>>4)*ne>>16;f[g+2*W+0]=(240&$|$>>4)*ne>>16&240|(15&$|$<<4)*ne>>16>>4&15,f[g+2*W+1]=240&ce|Ae}g+=z}}function pe(f,g,j,I,z,W,$,Ae){var ne,ce,Se=255;for(ce=0;ce<z;++ce){for(ne=0;ne<I;++ne){var Pe=f[g+ne];W[$+4*ne]=Pe,Se&=Pe}g+=j,$+=Ae}return Se!=255}function je(f,g,j,I,z){var W;for(W=0;W<z;++W)j[I+W]=f[g+W]>>8}function ke(){zs=y,mA=q,OA=pe,EA=je}function tt(f,g,j){E[f]=function(I,z,W,$,Ae,ne,ce,Se,Pe,Re,De,ut,We,Qe,Ie,it,ht){var nt,Nt=ht-1>>1,bt=Ae[ne+0]|ce[Se+0]<<16,Mt=Pe[Re+0]|De[ut+0]<<16;s(I!=null);var Bt=3*bt+Mt+131074>>2;for(g(I[z+0],255&Bt,Bt>>16,We,Qe),W!=null&&(Bt=3*Mt+bt+131074>>2,g(W[$+0],255&Bt,Bt>>16,Ie,it)),nt=1;nt<=Nt;++nt){var IA=Ae[ne+nt]|ce[Se+nt]<<16,vA=Pe[Re+nt]|De[ut+nt]<<16,CA=bt+IA+Mt+vA+524296,nA=CA+2*(IA+Mt)>>3;Bt=nA+bt>>1,bt=(CA=CA+2*(bt+vA)>>3)+IA>>1,g(I[z+2*nt-1],255&Bt,Bt>>16,We,Qe+(2*nt-1)*j),g(I[z+2*nt-0],255&bt,bt>>16,We,Qe+(2*nt-0)*j),W!=null&&(Bt=CA+Mt>>1,bt=nA+vA>>1,g(W[$+2*nt-1],255&Bt,Bt>>16,Ie,it+(2*nt-1)*j),g(W[$+2*nt+0],255&bt,bt>>16,Ie,it+(2*nt+0)*j)),bt=IA,Mt=vA}1&ht||(Bt=3*bt+Mt+131074>>2,g(I[z+ht-1],255&Bt,Bt>>16,We,Qe+(ht-1)*j),W!=null&&(Bt=3*Mt+bt+131074>>2,g(W[$+ht-1],255&Bt,Bt>>16,Ie,it+(ht-1)*j)))}}function pt(){ds[Xo]=Gi,ds[Ns]=Dl,ds[Yo]=Zc,ds[Bn]=tc,ds[yo]=pi,ds[El]=cr,ds[hi]=gi,ds[Co]=Dl,ds[Zo]=tc,ds[Il]=pi,ds[Wo]=cr}function Ut(f){return f&-16384?0>f?0:255:f>>Ac}function kt(f,g){return Ut((19077*f>>8)+(26149*g>>8)-14234)}function aA(f,g,j){return Ut((19077*f>>8)-(6419*g>>8)-(13320*j>>8)+8708)}function eA(f,g){return Ut((19077*f>>8)+(33050*g>>8)-17685)}function yA(f,g,j,I,z){I[z+0]=kt(f,j),I[z+1]=aA(f,g,j),I[z+2]=eA(f,g)}function ua(f,g,j,I,z){I[z+0]=eA(f,g),I[z+1]=aA(f,g,j),I[z+2]=kt(f,j)}function pa(f,g,j,I,z){var W=aA(f,g,j);g=W<<3&224|eA(f,g)>>3,I[z+0]=248&kt(f,j)|W>>5,I[z+1]=g}function Sa(f,g,j,I,z){var W=240&eA(f,g)|15;I[z+0]=240&kt(f,j)|aA(f,g,j)>>4,I[z+1]=W}function os(f,g,j,I,z){I[z+0]=255,yA(f,g,j,I,z+1)}function _a(f,g,j,I,z){ua(f,g,j,I,z),I[z+3]=255}function bs(f,g,j,I,z){yA(f,g,j,I,z),I[z+3]=255}function rn(f,g){return 0>f?0:f>g?g:f}function lr(f,g,j){E[f]=function(I,z,W,$,Ae,ne,ce,Se,Pe){for(var Re=Se+(-2&Pe)*j;Se!=Re;)g(I[z+0],W[$+0],Ae[ne+0],ce,Se),g(I[z+1],W[$+0],Ae[ne+0],ce,Se+j),z+=2,++$,++ne,Se+=2*j;1&Pe&&g(I[z+0],W[$+0],Ae[ne+0],ce,Se)}}function zo(f,g,j){return j==0?f==0?g==0?6:5:g==0?4:0:j}function Bl(f,g,j,I,z){switch(f>>>30){case 3:zn(g,j,I,z,0);break;case 2:sa(g,j,I,z);break;case 1:ys(g,j,I,z)}}function yl(f,g){var j,I,z=g.M,W=g.Nb,$=f.oc,Ae=f.pc+40,ne=f.oc,ce=f.pc+584,Se=f.oc,Pe=f.pc+600;for(j=0;16>j;++j)$[Ae+32*j-1]=129;for(j=0;8>j;++j)ne[ce+32*j-1]=129,Se[Pe+32*j-1]=129;for(0<z?$[Ae-1-32]=ne[ce-1-32]=Se[Pe-1-32]=129:(l($,Ae-32-1,127,21),l(ne,ce-32-1,127,9),l(Se,Pe-32-1,127,9)),I=0;I<f.za;++I){var Re=g.ya[g.aa+I];if(0<I){for(j=-1;16>j;++j)r($,Ae+32*j-4,$,Ae+32*j+12,4);for(j=-1;8>j;++j)r(ne,ce+32*j-4,ne,ce+32*j+4,4),r(Se,Pe+32*j-4,Se,Pe+32*j+4,4)}var De=f.Gd,ut=f.Hd+I,We=Re.ad,Qe=Re.Hc;if(0<z&&(r($,Ae-32,De[ut].y,0,16),r(ne,ce-32,De[ut].f,0,8),r(Se,Pe-32,De[ut].ea,0,8)),Re.Za){var Ie=$,it=Ae-32+16;for(0<z&&(I>=f.za-1?l(Ie,it,De[ut].y[15],4):r(Ie,it,De[ut+1].y,0,4)),j=0;4>j;j++)Ie[it+128+j]=Ie[it+256+j]=Ie[it+384+j]=Ie[it+0+j];for(j=0;16>j;++j,Qe<<=2)Ie=$,it=Ae+Qa[j],ba[Re.Ob[j]](Ie,it),Bl(Qe,We,16*+j,Ie,it)}else if(Ie=zo(I,z,Re.Ob[0]),Ds[Ie]($,Ae),Qe!=0)for(j=0;16>j;++j,Qe<<=2)Bl(Qe,We,16*+j,$,Ae+Qa[j]);for(j=Re.Gc,Ie=zo(I,z,Re.Dd),Jn[Ie](ne,ce),Jn[Ie](Se,Pe),Qe=We,Ie=ne,it=ce,255&(Re=j>>0)&&(170&Re?Vi(Qe,256,Ie,it):Ya(Qe,256,Ie,it)),Re=Se,Qe=Pe,255&(j>>=8)&&(170&j?Vi(We,320,Re,Qe):Ya(We,320,Re,Qe)),z<f.Ub-1&&(r(De[ut].y,0,$,Ae+480,16),r(De[ut].f,0,ne,ce+224,8),r(De[ut].ea,0,Se,Pe+224,8)),j=8*W*f.B,De=f.sa,ut=f.ta+16*I+16*W*f.R,We=f.qa,Re=f.ra+8*I+j,Qe=f.Ha,Ie=f.Ia+8*I+j,j=0;16>j;++j)r(De,ut+j*f.R,$,Ae+32*j,16);for(j=0;8>j;++j)r(We,Re+j*f.B,ne,ce+32*j,8),r(Qe,Ie+j*f.B,Se,Pe+32*j,8)}}function or(f,g,j,I,z,W,$,Ae,ne){var ce=[0],Se=[0],Pe=0,Re=ne!=null?ne.kd:0,De=ne??new BA;if(f==null||12>j)return 7;De.data=f,De.w=g,De.ha=j,g=[g],j=[j],De.gb=[De.gb];e:{var ut=g,We=j,Qe=De.gb;if(s(f!=null),s(We!=null),s(Qe!=null),Qe[0]=0,12<=We[0]&&!n(f,ut[0],"RIFF")){if(n(f,ut[0]+8,"WEBP")){Qe=3;break e}var Ie=Ue(f,ut[0]+4);if(12>Ie||4294967286<Ie){Qe=3;break e}if(Re&&Ie>We[0]-8){Qe=7;break e}Qe[0]=Ie,ut[0]+=12,We[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ie=0<De.gb[0],j=j[0];;){e:{var it=f;We=g,Qe=j;var ht=ce,nt=Se,Nt=ut=[0];if((Bt=Pe=[Pe])[0]=0,8>Qe[0])Qe=7;else{if(!n(it,We[0],"VP8X")){if(Ue(it,We[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var bt=Ue(it,We[0]+8),Mt=1+$e(it,We[0]+12);if(2147483648<=Mt*(it=1+$e(it,We[0]+15))){Qe=3;break e}Nt!=null&&(Nt[0]=bt),ht!=null&&(ht[0]=Mt),nt!=null&&(nt[0]=it),We[0]+=18,Qe[0]-=18,Bt[0]=1}Qe=0}}if(Pe=Pe[0],ut=ut[0],Qe!=0)return Qe;if(We=!!(2&ut),!Ie&&Pe)return 3;if(W!=null&&(W[0]=!!(16&ut)),$!=null&&($[0]=We),Ae!=null&&(Ae[0]=0),$=ce[0],ut=Se[0],Pe&&We&&ne==null){Qe=0;break}if(4>j){Qe=7;break}if(Ie&&Pe||!Ie&&!Pe&&!n(f,g[0],"ALPH")){j=[j],De.na=[De.na],De.P=[De.P],De.Sa=[De.Sa];e:{bt=f,Qe=g,Ie=j;var Bt=De.gb;ht=De.na,nt=De.P,Nt=De.Sa,Mt=22,s(bt!=null),s(Ie!=null),it=Qe[0];var IA=Ie[0];for(s(ht!=null),s(Nt!=null),ht[0]=null,nt[0]=null,Nt[0]=0;;){if(Qe[0]=it,Ie[0]=IA,8>IA){Qe=7;break e}var vA=Ue(bt,it+4);if(4294967286<vA){Qe=3;break e}var CA=8+vA+1&-2;if(Mt+=CA,0<Bt&&Mt>Bt){Qe=3;break e}if(!n(bt,it,"VP8 ")||!n(bt,it,"VP8L")){Qe=0;break e}if(IA[0]<CA){Qe=7;break e}n(bt,it,"ALPH")||(ht[0]=bt,nt[0]=it+8,Nt[0]=vA),it+=CA,IA-=CA}}if(j=j[0],De.na=De.na[0],De.P=De.P[0],De.Sa=De.Sa[0],Qe!=0)break}j=[j],De.Ja=[De.Ja],De.xa=[De.xa];e:if(Bt=f,Qe=g,Ie=j,ht=De.gb[0],nt=De.Ja,Nt=De.xa,bt=Qe[0],it=!n(Bt,bt,"VP8 "),Mt=!n(Bt,bt,"VP8L"),s(Bt!=null),s(Ie!=null),s(nt!=null),s(Nt!=null),8>Ie[0])Qe=7;else{if(it||Mt){if(Bt=Ue(Bt,bt+4),12<=ht&&Bt>ht-12){Qe=3;break e}if(Re&&Bt>Ie[0]-8){Qe=7;break e}nt[0]=Bt,Qe[0]+=8,Ie[0]-=8,Nt[0]=Mt}else Nt[0]=5<=Ie[0]&&Bt[bt+0]==47&&!(Bt[bt+4]>>5),nt[0]=Ie[0];Qe=0}if(j=j[0],De.Ja=De.Ja[0],De.xa=De.xa[0],g=g[0],Qe!=0)break;if(4294967286<De.Ja)return 3;if(Ae==null||We||(Ae[0]=De.xa?2:1),$=[$],ut=[ut],De.xa){if(5>j){Qe=7;break}Ae=$,Re=ut,We=W,f==null||5>j?f=0:5<=j&&f[g+0]==47&&!(f[g+4]>>5)?(Ie=[0],Bt=[0],ht=[0],Y(nt=new U,f,g,j),Ot(nt,Ie,Bt,ht)?(Ae!=null&&(Ae[0]=Ie[0]),Re!=null&&(Re[0]=Bt[0]),We!=null&&(We[0]=ht[0]),f=1):f=0):f=0}else{if(10>j){Qe=7;break}Ae=ut,f==null||10>j||!_s(f,g+3,j-3)?f=0:(Re=f[g+0]|f[g+1]<<8|f[g+2]<<16,We=16383&(f[g+7]<<8|f[g+6]),f=16383&(f[g+9]<<8|f[g+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=De.Ja||!We||!f?f=0:($&&($[0]=We),Ae&&(Ae[0]=f),f=1))}if(!f||($=$[0],ut=ut[0],Pe&&(ce[0]!=$||Se[0]!=ut)))return 3;ne!=null&&(ne[0]=De,ne.offset=g-ne.w,s(4294967286>g-ne.w),s(ne.offset==ne.ha-j));break}return Qe==0||Qe==7&&Pe&&ne==null?(W!=null&&(W[0]|=De.na!=null&&0<De.na.length),I!=null&&(I[0]=$),z!=null&&(z[0]=ut),0):Qe}function Sr(f,g,j){var I=g.width,z=g.height,W=0,$=0,Ae=I,ne=z;if(g.Da=f!=null&&0<f.Da,g.Da&&(Ae=f.cd,ne=f.bd,W=f.v,$=f.j,11>j||(W&=-2,$&=-2),0>W||0>$||0>=Ae||0>=ne||W+Ae>I||$+ne>z))return 0;if(g.v=W,g.j=$,g.va=W+Ae,g.o=$+ne,g.U=Ae,g.T=ne,g.da=f!=null&&0<f.da,g.da){if(!Ge(Ae,ne,j=[f.ib],W=[f.hb]))return 0;g.ib=j[0],g.hb=W[0]}return g.ob=f!=null&&f.ob,g.Kb=f==null||!f.Sd,g.da&&(g.ob=g.ib<3*I/4&&g.hb<3*z/4,g.Kb=0),1}function bo(f){if(f==null)return 2;if(11>f.S){var g=f.f.RGBA;g.fb+=(f.height-1)*g.A,g.A=-g.A}else g=f.f.kb,f=f.height,g.O+=(f-1)*g.fa,g.fa=-g.fa,g.N+=(f-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(f-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(f-1)*g.lb,g.lb=-g.lb);return 0}function Qr(f,g,j,I){if(I==null||0>=f||0>=g)return 2;if(j!=null){if(j.Da){var z=j.cd,W=j.bd,$=-2&j.v,Ae=-2&j.j;if(0>$||0>Ae||0>=z||0>=W||$+z>f||Ae+W>g)return 2;f=z,g=W}if(j.da){if(!Ge(f,g,z=[j.ib],W=[j.hb]))return 2;f=z[0],g=W[0]}}I.width=f,I.height=g;e:{var ne=I.width,ce=I.height;if(f=I.S,0>=ne||0>=ce||!(f>=Xo&&13>f))f=2;else{if(0>=I.Rd&&I.sd==null){$=W=z=g=0;var Se=(Ae=ne*sc[f])*ce;if(11>f||(W=(ce+1)/2*(g=(ne+1)/2),f==12&&($=(z=ne)*ce)),(ce=o(Se+2*W+$))==null){f=1;break e}I.sd=ce,11>f?((ne=I.f.RGBA).eb=ce,ne.fb=0,ne.A=Ae,ne.size=Se):((ne=I.f.kb).y=ce,ne.O=0,ne.fa=Ae,ne.Fd=Se,ne.f=ce,ne.N=0+Se,ne.Ab=g,ne.Cd=W,ne.ea=ce,ne.W=0+Se+W,ne.Db=g,ne.Ed=W,f==12&&(ne.F=ce,ne.J=0+Se+2*W),ne.Tc=$,ne.lb=z)}if(g=1,z=I.S,W=I.width,$=I.height,z>=Xo&&13>z)if(11>z)f=I.f.RGBA,g&=(Ae=Math.abs(f.A))*($-1)+W<=f.size,g&=Ae>=W*sc[z],g&=f.eb!=null;else{f=I.f.kb,Ae=(W+1)/2,Se=($+1)/2,ne=Math.abs(f.fa),ce=Math.abs(f.Ab);var Pe=Math.abs(f.Db),Re=Math.abs(f.lb),De=Re*($-1)+W;g&=ne*($-1)+W<=f.Fd,g&=ce*(Se-1)+Ae<=f.Cd,g=(g&=Pe*(Se-1)+Ae<=f.Ed)&ne>=W&ce>=Ae&Pe>=Ae,g&=f.y!=null,g&=f.f!=null,g&=f.ea!=null,z==12&&(g&=Re>=W,g&=De<=f.Tc,g&=f.F!=null)}else g=0;f=g?0:2}}return f!=0||j!=null&&j.fd&&(f=bo(I)),f}var Xa=64,Ki=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ri=24,ii=32,Cl=8,Is=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ne("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(f){return f},E.Predictor2=function(f,g,j){return g[j+0]},E.Predictor3=function(f,g,j){return g[j+1]},E.Predictor4=function(f,g,j){return g[j-1]},E.Predictor5=function(f,g,j){return qe(qe(f,g[j+1]),g[j+0])},E.Predictor6=function(f,g,j){return qe(f,g[j-1])},E.Predictor7=function(f,g,j){return qe(f,g[j+0])},E.Predictor8=function(f,g,j){return qe(g[j-1],g[j+0])},E.Predictor9=function(f,g,j){return qe(g[j+0],g[j+1])},E.Predictor10=function(f,g,j){return qe(qe(f,g[j-1]),qe(g[j+0],g[j+1]))},E.Predictor11=function(f,g,j){var I=g[j+0];return 0>=Ct(I>>24&255,f>>24&255,(g=g[j-1])>>24&255)+Ct(I>>16&255,f>>16&255,g>>16&255)+Ct(I>>8&255,f>>8&255,g>>8&255)+Ct(255&I,255&f,255&g)?I:f},E.Predictor12=function(f,g,j){var I=g[j+0];return(ot((f>>24&255)+(I>>24&255)-((g=g[j-1])>>24&255))<<24|ot((f>>16&255)+(I>>16&255)-(g>>16&255))<<16|ot((f>>8&255)+(I>>8&255)-(g>>8&255))<<8|ot((255&f)+(255&I)-(255&g)))>>>0},E.Predictor13=function(f,g,j){var I=g[j-1];return(xt((f=qe(f,g[j+0]))>>24&255,I>>24&255)<<24|xt(f>>16&255,I>>16&255)<<16|xt(f>>8&255,I>>8&255)<<8|xt(f>>0&255,I>>0&255))>>>0};var qo=E.PredictorAdd0;E.PredictorAdd1=Tt,Ne("Predictor2","PredictorAdd2"),Ne("Predictor3","PredictorAdd3"),Ne("Predictor4","PredictorAdd4"),Ne("Predictor5","PredictorAdd5"),Ne("Predictor6","PredictorAdd6"),Ne("Predictor7","PredictorAdd7"),Ne("Predictor8","PredictorAdd8"),Ne("Predictor9","PredictorAdd9"),Ne("Predictor10","PredictorAdd10"),Ne("Predictor11","PredictorAdd11"),Ne("Predictor12","PredictorAdd12"),Ne("Predictor13","PredictorAdd13");var wo=E.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",(function(f){return f>>8&255}),(function(f){return f})),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(f){return f}),(function(f){return f>>8&255}));var Go,bn=E.ColorIndexInverseTransform,Nl=E.MapARGB,Jo=E.VP8LColorIndexInverseTransformAlpha,ws=E.MapAlpha,wn=E.VP8LPredictorsAdd=[];wn.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var li,Ls,Bs,Ur,Kn,Er,Vn,zn,sa,Vi,ys,Ya,qn,jl,Fl,ln,oi,Ir,ci,Sl,zi,ui,Ql,on,zs,mA,OA,EA,da=o(511),Gn=o(2041),di=o(225),Lr=o(767),Ul=0,Dr=Gn,Bo=di,Cs=Lr,cs=da,Xo=0,Ns=1,Yo=2,Bn=3,yo=4,El=5,hi=6,Co=7,Zo=8,Il=9,Wo=10,yn=[2,3,7],Ll=[3,3,11],qi=[280,256,256,256,40],$o=[0,1,1,1,0],No=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Cn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],fi=8,jn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Fn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],cn=null,sd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Xc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ec=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],nd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],us=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],na=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ds=[],ba=[],Jn=[],mi=1,Yc=2,Tr=[],ds=[];tt("UpsampleRgbLinePair",yA,3),tt("UpsampleBgrLinePair",ua,3),tt("UpsampleRgbaLinePair",bs,4),tt("UpsampleBgraLinePair",_a,4),tt("UpsampleArgbLinePair",os,4),tt("UpsampleRgba4444LinePair",Sa,2),tt("UpsampleRgb565LinePair",pa,2);var Gi=E.UpsampleRgbLinePair,Zc=E.UpsampleBgrLinePair,Dl=E.UpsampleRgbaLinePair,tc=E.UpsampleBgraLinePair,pi=E.UpsampleArgbLinePair,cr=E.UpsampleRgba4444LinePair,gi=E.UpsampleRgb565LinePair,Sn=16,Tl=1<<Sn-1,Ji=-227,xi=482,Ac=6,vi=0,hs=o(256),ac=o(256),rd=o(256),rf=o(256),lf=o(xi-Ji),of=o(xi-Ji);lr("YuvToRgbRow",yA,3),lr("YuvToBgrRow",ua,3),lr("YuvToRgbaRow",bs,4),lr("YuvToBgraRow",_a,4),lr("YuvToArgbRow",os,4),lr("YuvToRgba4444Row",Sa,2),lr("YuvToRgb565Row",pa,2);var Qa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hl=[0,2,8],jo=[8,7,6,4,4,2,2,2,1,1,1,1],Fo=1;this.WebPDecodeRGBA=function(f,g,j,I,z){var W=Ns,$=new dA,Ae=new MA;$.ba=Ae,Ae.S=W,Ae.width=[Ae.width],Ae.height=[Ae.height];var ne=Ae.width,ce=Ae.height,Se=new VA;if(Se==null||f==null)var Pe=2;else s(Se!=null),Pe=or(f,g,j,Se.width,Se.height,Se.Pd,Se.Qd,Se.format,null);if(Pe!=0?ne=0:(ne!=null&&(ne[0]=Se.width[0]),ce!=null&&(ce[0]=Se.height[0]),ne=1),ne){Ae.width=Ae.width[0],Ae.height=Ae.height[0],I!=null&&(I[0]=Ae.width),z!=null&&(z[0]=Ae.height);e:{if(I=new Yr,(z=new BA).data=f,z.w=g,z.ha=j,z.kd=1,g=[0],s(z!=null),((f=or(z.data,z.w,z.ha,null,null,null,g,null,z))==0||f==7)&&g[0]&&(f=4),(g=f)==0){if(s($!=null),I.data=z.data,I.w=z.w+z.offset,I.ha=z.ha-z.offset,I.put=Ea,I.ac=oa,I.bc=Ia,I.ma=$,z.xa){if((f=Vt())==null){$=1;break e}if((function(Re,De){var ut=[0],We=[0],Qe=[0];t:for(;;){if(Re==null)return 0;if(De==null)return Re.a=2,0;if(Re.l=De,Re.a=0,Y(Re.m,De.data,De.w,De.ha),!Ot(Re.m,ut,We,Qe)){Re.a=3;break t}if(Re.xb=Yc,De.width=ut[0],De.height=We[0],!zt(ut[0],We[0],1,Re,null))break t;return 1}return s(Re.a!=0),0})(f,I)){if(I=(g=Qr(I.width,I.height,$.Oa,$.ba))==0){t:{I=f;A:for(;;){if(I==null){I=0;break t}if(s(I.s.yc!=null),s(I.s.Ya!=null),s(0<I.s.Wb),s((j=I.l)!=null),s((z=j.ma)!=null),I.xb!=0){if(I.ca=z.ba,I.tb=z.tb,s(I.ca!=null),!Sr(z.Oa,j,Bn)){I.a=2;break A}if(!gA(I,j.width)||j.da)break A;if((j.da||ft(I.ca.S))&&ke(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&ke()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!At(I.s.vb,I.s.Wa.Xa)){I.a=1;break A}I.xb=0}if(!Xe(I,I.V,I.Ba,I.c,I.i,j.o,me))break A;z.Dc=I.Ma,I=1;break t}s(I.a!=0),I=0}I=!I}I&&(g=f.a)}else g=f.a}else{if((f=new Zr)==null){$=1;break e}if(f.Fa=z.na,f.P=z.P,f.qc=z.Sa,is(f,I)){if((g=Qr(I.width,I.height,$.Oa,$.ba))==0){if(f.Aa=0,j=$.Oa,s((z=f)!=null),j!=null){if(0<(ne=0>(ne=j.Md)?0:100<ne?255:255*ne/100)){for(ce=Se=0;4>ce;++ce)12>(Pe=z.pb[ce]).lc&&(Pe.ia=ne*jo[0>Pe.lc?0:Pe.lc]>>3),Se|=Pe.ia;Se&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=j.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}Mi(f,I)||(g=f.a)}}else g=f.a}g==0&&$.Oa!=null&&$.Oa.fd&&(g=bo($.ba))}$=g}W=$!=0?null:11>W?Ae.f.RGBA.eb:Ae.f.kb.y}else W=null;return W};var sc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(E,D){for(var G="",T=0;T<4;T++)G+=String.fromCharCode(E[D++]);return G}function w(E,D){return(E[D+0]<<0|E[D+1]<<8|E[D+2]<<16)>>>0}function v(E,D){return(E[D+0]<<0|E[D+1]<<8|E[D+2]<<16|E[D+3]<<24)>>>0}new h;var B=[0],x=[0],C=[],N=new h,L=A,F=(function(E,D){var G={},T=0,R=!1,V=0,Z=0;if(G.frames=[],!(function(X,ee,re,fe){for(var ve=0;ve<fe;ve++)if(X[ee+ve]!=re.charCodeAt(ve))return!0;return!1})(E,D,"RIFF",4)){var ue,S;for(v(E,D+=4),D+=8;D<E.length;){var M=m(E,D),Y=v(E,D+=4);D+=4;var le=Y+(1&Y);switch(M){case"VP8 ":case"VP8L":G.frames[T]===void 0&&(G.frames[T]={}),(U=G.frames[T]).src_off=R?Z:D-8,U.src_size=V+Y+8,T++,R&&(R=!1,V=0,Z=0);break;case"VP8X":(U=G.header={}).feature_flags=E[D];var de=D+4;U.canvas_width=1+w(E,de),de+=3,U.canvas_height=1+w(E,de),de+=3;break;case"ALPH":R=!0,V=le+8,Z=D-8;break;case"ANIM":(U=G.header).bgcolor=v(E,D),de=D+4,U.loop_count=(ue=E)[(S=de)+0]<<0|ue[S+1]<<8,de+=2;break;case"ANMF":var J,U;(U=G.frames[T]={}).offset_x=2*w(E,D),D+=3,U.offset_y=2*w(E,D),D+=3,U.width=1+w(E,D),D+=3,U.height=1+w(E,D),D+=3,U.duration=w(E,D),D+=3,J=E[D++],U.dispose=1&J,U.blend=J>>1&1}M!="ANMF"&&(D+=le)}return G}})(L,0);F.response=L,F.rgbaoutput=!0,F.dataurl=!1;var Q=F.header?F.header:null,_=F.frames?F.frames:null;if(Q){Q.loop_counter=Q.loop_count,B=[Q.canvas_height],x=[Q.canvas_width];for(var te=0;te<_.length&&_[te].blend!=0;te++);}var O=_[0],k=N.WebPDecodeRGBA(L,O.src_off,O.src_size,x,B);O.rgba=k,O.imgwidth=x[0],O.imgheight=B[0];for(var P=0;P<x[0]*B[0]*4;P++)C[P]=k[P];return this.width=x,this.height=B,this.data=C,this}(function(A){var s=function(){return typeof T0=="function"},n=function(B,x,C,N){var L=4,F=u;switch(N){case A.image_compression.FAST:L=1,F=o;break;case A.image_compression.MEDIUM:L=6,F=d;break;case A.image_compression.SLOW:L=9,F=h}B=r(B,x,C,F);var Q=T0(B,{level:L});return A.__addimage__.arrayBufferToBinaryString(Q)},r=function(B,x,C,N){for(var L,F,Q,_=B.length/x,te=new Uint8Array(B.length+_),O=w(),k=0;k<_;k+=1){if(Q=k*x,L=B.subarray(Q,Q+x),N)te.set(N(L,C,F),Q+k);else{for(var P,E=O.length,D=[];P<E;P+=1)D[P]=O[P](L,C,F);var G=v(D.concat());te.set(D[G],Q+k)}F=L}return te},l=function(B){var x=Array.apply([],B);return x.unshift(0),x},o=function(B,x){var C,N=[],L=B.length;N[0]=1;for(var F=0;F<L;F+=1)C=B[F-x]||0,N[F+1]=B[F]-C+256&255;return N},u=function(B,x,C){var N,L=[],F=B.length;L[0]=2;for(var Q=0;Q<F;Q+=1)N=C&&C[Q]||0,L[Q+1]=B[Q]-N+256&255;return L},d=function(B,x,C){var N,L,F=[],Q=B.length;F[0]=3;for(var _=0;_<Q;_+=1)N=B[_-x]||0,L=C&&C[_]||0,F[_+1]=B[_]+256-(N+L>>>1)&255;return F},h=function(B,x,C){var N,L,F,Q,_=[],te=B.length;_[0]=4;for(var O=0;O<te;O+=1)N=B[O-x]||0,L=C&&C[O]||0,F=C&&C[O-x]||0,Q=m(N,L,F),_[O+1]=B[O]-Q+256&255;return _},m=function(B,x,C){if(B===x&&x===C)return B;var N=Math.abs(x-C),L=Math.abs(B-C),F=Math.abs(B+x-C-C);return N<=L&&N<=F?B:L<=F?x:C},w=function(){return[l,o,u,d,h]},v=function(B){var x=B.map((function(C){return C.reduce((function(N,L){return N+Math.abs(L)}),0)}));return x.indexOf(Math.min.apply(null,x))};A.processPNG=function(B,x,C,N){var L,F,Q,_,te,O,k,P,E,D,G,T,R,V,Z,ue=this.decode.FLATE_DECODE,S="";if(this.__addimage__.isArrayBuffer(B)&&(B=new Uint8Array(B)),this.__addimage__.isArrayBufferView(B)){if(B=(Q=new Aj(B)).imgData,F=Q.bits,L=Q.colorSpace,te=Q.colors,[4,6].indexOf(Q.colorType)!==-1){if(Q.bits===8){E=(P=Q.pixelBitlength==32?new Uint32Array(Q.decodePixels().buffer):Q.pixelBitlength==16?new Uint16Array(Q.decodePixels().buffer):new Uint8Array(Q.decodePixels().buffer)).length,G=new Uint8Array(E*Q.colors),D=new Uint8Array(E);var M,Y=Q.pixelBitlength-Q.bits;for(V=0,Z=0;V<E;V++){for(R=P[V],M=0;M<Y;)G[Z++]=R>>>M&255,M+=Q.bits;D[V]=R>>>M&255}}if(Q.bits===16){E=(P=new Uint32Array(Q.decodePixels().buffer)).length,G=new Uint8Array(E*(32/Q.pixelBitlength)*Q.colors),D=new Uint8Array(E*(32/Q.pixelBitlength)),T=Q.colors>1,V=0,Z=0;for(var le=0;V<E;)R=P[V++],G[Z++]=R>>>0&255,T&&(G[Z++]=R>>>16&255,R=P[V++],G[Z++]=R>>>0&255),D[le++]=R>>>16&255;F=8}N!==A.image_compression.NONE&&s()?(B=n(G,Q.width*Q.colors,Q.colors,N),k=n(D,Q.width,1,N)):(B=G,k=D,ue=void 0)}if(Q.colorType===3&&(L=this.color_spaces.INDEXED,O=Q.palette,Q.transparency.indexed)){var de=Q.transparency.indexed,J=0;for(V=0,E=de.length;V<E;++V)J+=de[V];if((J/=255)===E-1&&de.indexOf(0)!==-1)_=[de.indexOf(0)];else if(J!==E){for(P=Q.decodePixels(),D=new Uint8Array(P.length),V=0,E=P.length;V<E;V++)D[V]=de[P[V]];k=n(D,Q.width,1)}}var U=(function(X){var ee;switch(X){case A.image_compression.FAST:ee=11;break;case A.image_compression.MEDIUM:ee=13;break;case A.image_compression.SLOW:ee=14;break;default:ee=12}return ee})(N);return ue===this.decode.FLATE_DECODE&&(S="/Predictor "+U+" "),S+="/Colors "+te+" /BitsPerComponent "+F+" /Columns "+Q.width,(this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),(k&&this.__addimage__.isArrayBuffer(k)||this.__addimage__.isArrayBufferView(k))&&(k=this.__addimage__.arrayBufferToBinaryString(k)),{alias:C,data:B,index:x,filter:ue,decodeParameters:S,transparency:_,palette:O,sMask:k,predictor:U,width:Q.width,height:Q.height,bitsPerComponent:F,colorSpace:L}}}})($t.API),(function(A){A.processGIF89A=function(s,n,r,l){var o=new aj(s),u=o.width,d=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var m={data:h,width:u,height:d},w=new s0(100).encode(m,100);return A.processJPEG.call(this,w,n,r,l)},A.processGIF87A=A.processGIF89A})($t.API),Vr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var A=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(A);for(var s=0;s<A;s++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:l,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vr.prototype.parseBGR=function(){this.pos=this.offset;try{var A="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[A]()}catch(n){la.log("bit decode error:"+n)}},Vr.prototype.bit1=function(){var A,s=Math.ceil(this.width/8),n=s%4;for(A=this.height-1;A>=0;A--){for(var r=this.bottom_up?A:this.height-1-A,l=0;l<s;l++)for(var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*l*4,d=0;d<8&&8*l+d<this.width;d++){var h=this.palette[o>>7-d&1];this.data[u+4*d]=h.blue,this.data[u+4*d+1]=h.green,this.data[u+4*d+2]=h.red,this.data[u+4*d+3]=255}n!==0&&(this.pos+=4-n)}},Vr.prototype.bit4=function(){for(var A=Math.ceil(this.width/2),s=A%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,l=0;l<A;l++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*l*4,d=o>>4,h=15&o,m=this.palette[d];if(this.data[u]=m.blue,this.data[u+1]=m.green,this.data[u+2]=m.red,this.data[u+3]=255,2*l+1>=this.width)break;m=this.palette[h],this.data[u+4]=m.blue,this.data[u+4+1]=m.green,this.data[u+4+2]=m.red,this.data[u+4+3]=255}s!==0&&(this.pos+=4-s)}},Vr.prototype.bit8=function(){for(var A=this.width%4,s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var l=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(l<this.palette.length){var u=this.palette[l];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}A!==0&&(this.pos+=4-A)}},Vr.prototype.bit15=function(){for(var A=this.width%3,s=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,l=0;l<this.width;l++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&s)/s*255|0,d=(o>>5&s)/s*255|0,h=(o>>10&s)/s*255|0,m=o>>15?255:0,w=r*this.width*4+4*l;this.data[w]=h,this.data[w+1]=d,this.data[w+2]=u,this.data[w+3]=m}this.pos+=A}},Vr.prototype.bit16=function(){for(var A=this.width%3,s=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var l=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&s)/s*255|0,h=(u>>5&n)/n*255|0,m=(u>>11)/s*255|0,w=l*this.width*4+4*o;this.data[w]=m,this.data[w+1]=h,this.data[w+2]=d,this.data[w+3]=255}this.pos+=A}},Vr.prototype.bit24=function(){for(var A=this.height-1;A>=0;A--){for(var s=this.bottom_up?A:this.height-1-A,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+4*n;this.data[u]=o,this.data[u+1]=l,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},Vr.prototype.bit32=function(){for(var A=this.height-1;A>=0;A--)for(var s=this.bottom_up?A:this.height-1-A,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=s*this.width*4+4*n;this.data[d]=o,this.data[d+1]=l,this.data[d+2]=r,this.data[d+3]=u}},Vr.prototype.getData=function(){return this.data},(function(A){A.processBMP=function(s,n,r,l){var o=new Vr(s,!1),u=o.width,d=o.height,h={data:o.getData(),width:u,height:d},m=new s0(100).encode(h,100);return A.processJPEG.call(this,m,n,r,l)}})($t.API),t2.prototype.getData=function(){return this.data},(function(A){A.processWEBP=function(s,n,r,l){var o=new t2(s),u=o.width,d=o.height,h={data:o.getData(),width:u,height:d},m=new s0(100).encode(h,100);return A.processJPEG.call(this,m,n,r,l)}})($t.API),$t.API.processRGBA=function(A,s,n){for(var r=A.data,l=r.length,o=new Uint8Array(l/4*3),u=new Uint8Array(l/4),d=0,h=0,m=0;m<l;m+=4){var w=r[m],v=r[m+1],B=r[m+2],x=r[m+3];o[d++]=w,o[d++]=v,o[d++]=B,u[h++]=x}var C=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:C,index:s,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:A.width,height:A.height}},$t.API.setLanguage=function(A){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[A]!==void 0&&(this.internal.languageSettings.languageCode=A,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Dc=$t.API,vh=Dc.getCharWidthsArray=function(A,s){var n,r,l=(s=s||{}).font||this.internal.getFont(),o=s.fontSize||this.internal.getFontSize(),u=s.charSpace||this.internal.getCharSpace(),d=s.widths?s.widths:l.metadata.Unicode.widths,h=d.fof?d.fof:1,m=s.kerning?s.kerning:l.metadata.Unicode.kerning,w=m.fof?m.fof:1,v=s.doKerning!==!1,B=0,x=A.length,C=0,N=d[0]||h,L=[];for(n=0;n<x;n++)r=A.charCodeAt(n),typeof l.metadata.widthOfString=="function"?L.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(r))+u*(1e3/o)||0)/1e3):(B=v&&XA(m[r])==="object"&&!isNaN(parseInt(m[r][C],10))?m[r][C]/w:0,L.push((d[r]||N)/h+B)),C=r;return L},Z1=Dc.getStringUnitWidth=function(A,s){var n=(s=s||{}).fontSize||this.internal.getFontSize(),r=s.font||this.internal.getFont(),l=s.charSpace||this.internal.getCharSpace();return Dc.processArabic&&(A=Dc.processArabic(A)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(A,n,l)/n:vh.apply(this,arguments).reduce((function(o,u){return o+u}),0)},W1=function(A,s,n,r){for(var l=[],o=0,u=A.length,d=0;o!==u&&d+s[o]<n;)d+=s[o],o++;l.push(A.slice(0,o));var h=o;for(d=0;o!==u;)d+s[o]>r&&(l.push(A.slice(h,o)),d=0,h=o),d+=s[o],o++;return h!==o&&l.push(A.slice(h,o)),l},$1=function(A,s,n){n||(n={});var r,l,o,u,d,h,m,w=[],v=[w],B=n.textIndent||0,x=0,C=0,N=A.split(" "),L=vh.apply(this,[" ",n])[0];if(h=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var F=Array(h).join(" "),Q=[];N.map((function(te){(te=te.split(/\s*\n/)).length>1?Q=Q.concat(te.map((function(O,k){return(k&&O.length?`
`:"")+O}))):Q.push(te[0])})),N=Q,h=Z1.apply(this,[F,n])}for(o=0,u=N.length;o<u;o++){var _=0;if(r=N[o],h&&r[0]==`
`&&(r=r.substr(1),_=1),B+x+(C=(l=vh.apply(this,[r,n])).reduce((function(te,O){return te+O}),0))>s||_){if(C>s){for(d=W1.apply(this,[r,l,s-(B+x),s]),w.push(d.shift()),w=[d.pop()];d.length;)v.push([d.shift()]);C=l.slice(r.length-(w[0]?w[0].length:0)).reduce((function(te,O){return te+O}),0)}else w=[r];v.push(w),B=C+h,x=L}else w.push(r),B+=x+C,x=L}return m=h?function(te,O){return(O?F:"")+te.join(" ")}:function(te){return te.join(" ")},v.map(m)},Dc.splitTextToSize=function(A,s,n){var r,l=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var v=this.internal.getFont(w.fontName,w.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(A)?A:String(A).split(/\r?\n/);var u=1*this.internal.scaleFactor*s/l;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/l:0,o.lineIndent=n.lineIndent;var d,h,m=[];for(d=0,h=r.length;d<h;d++)m=m.concat($1.apply(this,[r[d],u,o]));return m},(function(A){A.__fontmetrics__=A.__fontmetrics__||{};for(var s="klmnopqrstuvwxyz",n={},r={},l=0;l<s.length;l++)n[s[l]]="0123456789abcdef"[l],r["0123456789abcdef"[l]]=s[l];var o=function(v){return"0x"+parseInt(v,10).toString(16)},u=A.__fontmetrics__.compress=function(v){var B,x,C,N,L=["{"];for(var F in v){if(B=v[F],isNaN(parseInt(F,10))?x="'"+F+"'":(F=parseInt(F,10),x=(x=o(F).slice(2)).slice(0,-1)+r[x.slice(-1)]),typeof B=="number")B<0?(C=o(B).slice(3),N="-"):(C=o(B).slice(2),N=""),C=N+C.slice(0,-1)+r[C.slice(-1)];else{if(XA(B)!=="object")throw new Error("Don't know what to do with value type "+XA(B)+".");C=u(B)}L.push(x+C)}return L.push("}"),L.join("")},d=A.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var B,x,C,N,L={},F=1,Q=L,_=[],te="",O="",k=v.length-1,P=1;P<k;P+=1)(N=v[P])=="'"?B?(C=B.join(""),B=void 0):B=[]:B?B.push(N):N=="{"?(_.push([Q,C]),Q={},C=void 0):N=="}"?((x=_.pop())[0][x[1]]=Q,C=void 0,Q=x[0]):N=="-"?F=-1:C===void 0?n.hasOwnProperty(N)?(te+=n[N],C=parseInt(te,16)*F,F=1,te=""):te+=N:n.hasOwnProperty(N)?(O+=n[N],Q[C]=parseInt(O,16)*F,F=1,C=void 0,O=""):O+=N;return L},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},w={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};A.events.push(["addFont",function(v){var B=v.font,x=w.Unicode[B.postScriptName];x&&(B.metadata.Unicode={},B.metadata.Unicode.widths=x.widths,B.metadata.Unicode.kerning=x.kerning);var C=m.Unicode[B.postScriptName];C&&(B.metadata.Unicode.encoding=C,B.encoding=C.codePages[0])}])})($t.API),(function(A){var s=function(n){for(var r=n.length,l=new Uint8Array(r),o=0;o<r;o++)l[o]=n.charCodeAt(o);return l};A.API.events.push(["addFont",function(n){var r=void 0,l=n.font,o=n.instance;if(!l.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(r=o.existsFileInVFS(l.postScriptName)===!1?o.loadFile(l.postScriptName):o.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?s(d):s(Xu(d)),u.metadata=A.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(l,r)}}])})($t),(function(A){function s(){return(tA.canvg?Promise.resolve(tA.canvg):U0(()=>import("./index.es-DtgXZUG7.js"),[])).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}$t.API.addSvgAsImage=function(n,r,l,o,u,d,h,m){if(isNaN(r)||isNaN(l))throw la.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(u))throw la.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=o,w.height=u;var v=w.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,w.width,w.height);var B={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return s().then((function(C){return C.fromString(v,n,B)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(C){return C.render(B)})).then((function(){x.addImage(w.toDataURL("image/jpeg",1),r,l,o,u,h,m)}))}})(),$t.API.putTotalPages=function(A){var s,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(A,"g"),n=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(A,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var l=0;l<this.internal.pages[r].length;l++)this.internal.pages[r][l]=this.internal.pages[r][l].replace(s,n);return this},$t.API.viewerPreferences=function(A,s){var n;A=A||{},s=s||!1;var r,l,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),h=[],m=0,w=0,v=0;function B(C,N){var L,F=!1;for(L=0;L<C.length;L+=1)C[L]===N&&(F=!0);return F}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,A==="reset"||s===!0){var x=d.length;for(v=0;v<x;v+=1)n[d[v]].value=n[d[v]].defaultValue,n[d[v]].explicitSet=!1}if(XA(A)==="object"){for(l in A)if(o=A[l],B(d,l)&&o!==void 0){if(n[l].type==="boolean"&&typeof o=="boolean")n[l].value=o;else if(n[l].type==="name"&&B(n[l].valueSet,o))n[l].value=o;else if(n[l].type==="integer"&&Number.isInteger(o))n[l].value=o;else if(n[l].type==="array"){for(m=0;m<o.length;m+=1)if(r=!0,o[m].length===1&&typeof o[m][0]=="number")h.push(String(o[m]-1));else if(o[m].length>1){for(w=0;w<o[m].length;w+=1)typeof o[m][w]!="number"&&(r=!1);r===!0&&h.push([o[m][0]-1,o[m][1]-1].join(" "))}n[l].value="["+h.join(" ")+"]"}else n[l].value=n[l].defaultValue;n[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var C,N=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?N.push("/"+C+" /"+n[C].value):N.push("/"+C+" "+n[C].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(A){var s=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),m=o.length+u.length+d.length+l.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(l+o+u+d+h),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};A.addMetadata=function(r,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",s)),this}})($t.API),(function(A){var s=A.API,n=s.pdfEscape16=function(o,u){for(var d,h=u.metadata.Unicode.widths,m=["","0","00","000","0000"],w=[""],v=0,B=o.length;v<B;++v){if(d=u.metadata.characterToGlyph(o.charCodeAt(v)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=o.charCodeAt(v),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return w.join("");d=d.toString(16),w.push(m[4-d.length],d)}return w.join("")},r=function(o){var u,d,h,m,w,v,B;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],v=0,B=(d=Object.keys(o).sort((function(x,C){return x-C}))).length;v<B;v++)u=d[v],h.length>=100&&(w+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(m=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),h.push("<"+u+"><"+m+">"));return h.length&&(w+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(o){(function(u){var d=u.font,h=u.out,m=u.newObject,w=u.putStream;if(d.metadata instanceof A.API.TTFFont&&d.encoding==="Identity-H"){for(var v=d.metadata.Unicode.widths,B=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),x="",C=0;C<B.length;C++)x+=String.fromCharCode(B[C]);var N=m();w({data:x,addLength1:!0,objectId:N}),h("endobj");var L=m();w({data:r(d.metadata.toUnicode),addLength1:!0,objectId:L}),h("endobj");var F=m();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Oc(d.fontName)),h("/FontFile2 "+N+" 0 R"),h("/FontBBox "+A.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var Q=m();h("<<"),h("/Type /Font"),h("/BaseFont /"+Oc(d.fontName)),h("/FontDescriptor "+F+" 0 R"),h("/W "+A.API.PDFObject.convert(v)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=m(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+L+" 0 R"),h("/BaseFont /"+Oc(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+Q+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]),s.events.push(["putFont",function(o){(function(u){var d=u.font,h=u.out,m=u.newObject,w=u.putStream;if(d.metadata instanceof A.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var v=d.metadata.rawData,B="",x=0;x<v.length;x++)B+=String.fromCharCode(v[x]);var C=m();w({data:B,addLength1:!0,objectId:C}),h("endobj");var N=m();w({data:r(d.metadata.toUnicode),addLength1:!0,objectId:N}),h("endobj");var L=m();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+C+" 0 R"),h("/Flags 96"),h("/FontBBox "+A.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+Oc(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=m();for(var F=0;F<d.metadata.hmtx.widths.length;F++)d.metadata.hmtx.widths[F]=parseInt(d.metadata.hmtx.widths[F]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Oc(d.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+A.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]);var l=function(o){var u,d=o.text||"",h=o.x,m=o.y,w=o.options||{},v=o.mutex||{},B=v.pdfEscape,x=v.activeFontKey,C=v.fonts,N=x,L="",F=0,Q="",_=C[N].encoding;if(C[N].encoding!=="Identity-H")return{text:d,x:h,y:m,options:w,mutex:v};for(Q=d,N=x,Array.isArray(d)&&(Q=d[0]),F=0;F<Q.length;F+=1)C[N].metadata.hasOwnProperty("cmap")&&(u=C[N].metadata.cmap.unicode.codeMap[Q[F].charCodeAt(0)]),u||Q[F].charCodeAt(0)<256&&C[N].metadata.hasOwnProperty("Unicode")?L+=Q[F]:L+="";var te="";return parseInt(N.slice(1))<14||_==="WinAnsiEncoding"?te=B(L,N).split("").map((function(O){return O.charCodeAt(0).toString(16)})).join(""):_==="Identity-H"&&(te=n(L,C[N])),v.isHex=!0,{text:te,x:h,y:m,options:w,mutex:v}};s.events.push(["postProcessText",function(o){var u=o.text||"",d=[],h={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var m=0;for(m=0;m<u.length;m+=1)Array.isArray(u[m])&&u[m].length===3?d.push([l(Object.assign({},h,{text:u[m][0]})).text,u[m][1],u[m][2]]):d.push(l(Object.assign({},h,{text:u[m]})).text);o.text=d}else o.text=l(Object.assign({},h,{text:u})).text}])})($t),(function(A){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};A.existsFileInVFS=function(n){return s.call(this),this.internal.vFS[n]!==void 0},A.addFileToVFS=function(n,r){return s.call(this),this.internal.vFS[n]=r,this},A.getFileFromVFS=function(n){return s.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})($t.API),(function(A){A.__bidiEngine__=A.prototype.__bidiEngine__=function(r){var l,o,u,d,h,m,w,v=s,B=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],F=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Q=!1,_=0;this.__bidiEngine__={};var te=function(T){var R=T.charCodeAt(),V=R>>8,Z=N[V];return Z!==void 0?v[256*Z+(255&R)]:V===252||V===253?"AL":F.test(V)?"L":V===8?"R":"N"},O=function(T){for(var R,V=0;V<T.length;V++){if((R=te(T.charAt(V)))==="L")return!1;if(R==="R")return!0}return!1},k=function(T,R,V,Z){var ue,S,M,Y,le=R[Z];switch(le){case"L":case"R":Q=!1;break;case"N":case"AN":break;case"EN":Q&&(le="AN");break;case"AL":Q=!0,le="R";break;case"WS":le="N";break;case"CS":Z<1||Z+1>=R.length||(ue=V[Z-1])!=="EN"&&ue!=="AN"||(S=R[Z+1])!=="EN"&&S!=="AN"?le="N":Q&&(S="AN"),le=S===ue?S:"N";break;case"ES":le=(ue=Z>0?V[Z-1]:"B")==="EN"&&Z+1<R.length&&R[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&V[Z-1]==="EN"){le="EN";break}if(Q){le="N";break}for(M=Z+1,Y=R.length;M<Y&&R[M]==="ET";)M++;le=M<Y&&R[M]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(Y=R.length,M=Z+1;M<Y&&R[M]==="NSM";)M++;if(M<Y){var de=T[Z],J=de>=1425&&de<=2303||de===64286;if(ue=R[M],J&&(ue==="R"||ue==="AL")){le="R";break}}}le=Z<1||(ue=R[Z-1])==="B"?"N":V[Z-1];break;case"B":Q=!1,l=!0,le=_;break;case"S":o=!0,le="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Q=!1;break;case"BN":le="N"}return le},P=function(T,R,V){var Z=T.split("");return V&&E(Z,V,{hiLevel:_}),Z.reverse(),R&&R.reverse(),Z.join("")},E=function(T,R,V){var Z,ue,S,M,Y,le=-1,de=T.length,J=0,U=[],X=_?x:B,ee=[];for(Q=!1,l=!1,o=!1,ue=0;ue<de;ue++)ee[ue]=te(T[ue]);for(S=0;S<de;S++){if(Y=J,U[S]=k(T,ee,U,S),Z=240&(J=X[Y][C[U[S]]]),J&=15,R[S]=M=X[J][5],Z>0)if(Z===16){for(ue=le;ue<S;ue++)R[ue]=1;le=-1}else le=-1;if(X[J][6])le===-1&&(le=S);else if(le>-1){for(ue=le;ue<S;ue++)R[ue]=M;le=-1}ee[S]==="B"&&(R[S]=0),V.hiLevel|=M}o&&(function(re,fe,ve){for(var xe=0;xe<ve;xe++)if(re[xe]==="S"){fe[xe]=_;for(var Ce=xe-1;Ce>=0&&re[Ce]==="WS";Ce--)fe[Ce]=_}})(ee,R,de)},D=function(T,R,V,Z,ue){if(!(ue.hiLevel<T)){if(T===1&&_===1&&!l)return R.reverse(),void(V&&V.reverse());for(var S,M,Y,le,de=R.length,J=0;J<de;){if(Z[J]>=T){for(Y=J+1;Y<de&&Z[Y]>=T;)Y++;for(le=J,M=Y-1;le<M;le++,M--)S=R[le],R[le]=R[M],R[M]=S,V&&(S=V[le],V[le]=V[M],V[M]=S);J=Y}J++}}},G=function(T,R,V){var Z=T.split(""),ue={hiLevel:_};return V||(V=[]),E(Z,V,ue),(function(S,M,Y){if(Y.hiLevel!==0&&w)for(var le,de=0;de<S.length;de++)M[de]===1&&(le=L.indexOf(S[de]))>=0&&(S[de]=L[le+1])})(Z,V,ue),D(2,Z,R,V,ue),D(1,Z,R,V,ue),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(T,R,V){if((function(ue,S){if(S)for(var M=0;M<ue.length;M++)S[M]=M;d===void 0&&(d=O(ue)),m===void 0&&(m=O(ue))})(T,R),u||!h||m)if(u&&h&&d^m)_=d?1:0,T=P(T,R,V);else if(!u&&h&&m)_=d?1:0,T=G(T,R,V),T=P(T,R);else if(!u||d||h||m){if(u&&!h&&d^m)T=P(T,R),d?(_=0,T=G(T,R,V)):(_=1,T=G(T,R,V),T=P(T,R));else if(u&&d&&!h&&m)_=1,T=G(T,R,V),T=P(T,R);else if(!u&&!h&&d^m){var Z=w;d?(_=1,T=G(T,R,V),_=0,w=!1,T=G(T,R,V),w=Z):(_=0,T=G(T,R,V),T=P(T,R),_=1,w=!1,T=G(T,R,V),w=Z,T=P(T,R))}}else _=0,T=G(T,R,V);else _=d?1:0,T=G(T,R,V);return T},this.__bidiEngine__.setOptions=function(T){T&&(u=T.isInputVisual,h=T.isOutputVisual,d=T.isInputRtl,m=T.isOutputRtl,w=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new A.__bidiEngine__({isInputVisual:!0});A.API.events.push(["postProcessText",function(r){var l=r.text,o=(r.x,r.y,r.options||{}),u=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(l)==="[object Array]"){var d=0;for(u=[],d=0;d<l.length;d+=1)Object.prototype.toString.call(l[d])==="[object Array]"?u.push([n.doBidiReorder(l[d][0]),l[d][1],l[d][2]]):u.push([n.doBidiReorder(l[d])]);r.text=u}else r.text=n.doBidiReorder(l);n.setOptions({isInputVisual:!0})}])})($t),$t.API.TTFFont=(function(){function A(s){var n;if(this.rawData=s,n=this.contents=new po(s),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new xj(this),this.registerTTF()}return A.open=function(s){return new A(s)},A.prototype.parse=function(){return this.directory=new sj(this.contents),this.head=new rj(this),this.name=new uj(this),this.cmap=new Yv(this),this.toUnicode={},this.hhea=new ij(this),this.maxp=new dj(this),this.hmtx=new hj(this),this.post=new oj(this),this.os2=new lj(this),this.loca=new gj(this),this.glyf=new fj(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},A.prototype.registerTTF=function(){var s,n,r,l,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,h,m;for(m=[],u=0,d=(h=this.bbox).length;u<d;u++)s=h[u],m.push(Math.round(s*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(r=255&(l=this.post.italic_angle),(32768&(n=l>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},A.prototype.characterToGlyph=function(s){var n;return((n=this.cmap.unicode)!=null?n.codeMap[s]:void 0)||0},A.prototype.widthOfGlyph=function(s){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*n},A.prototype.widthOfString=function(s,n,r){var l,o,u,d;for(u=0,o=0,d=(s=""+s).length;0<=d?o<d:o>d;o=0<=d?++o:--o)l=s.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(l))+r*(1e3/n)||0;return u*(n/1e3)},A.prototype.lineHeight=function(s,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*s},A})();var Xr,po=(function(){function A(s){this.data=s??[],this.pos=0,this.length=this.data.length}return A.prototype.readByte=function(){return this.data[this.pos++]},A.prototype.writeByte=function(s){return this.data[this.pos++]=s},A.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},A.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},A.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},A.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},A.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},A.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},A.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},A.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},A.prototype.readString=function(s){var n,r;for(r=[],n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},A.prototype.writeString=function(s){var n,r,l;for(l=[],n=0,r=s.length;0<=r?n<r:n>r;n=0<=r?++n:--n)l.push(this.writeByte(s.charCodeAt(n)));return l},A.prototype.readShort=function(){return this.readInt16()},A.prototype.writeShort=function(s){return this.writeInt16(s)},A.prototype.readLongLong=function(){var s,n,r,l,o,u,d,h;return s=this.readByte(),n=this.readByte(),r=this.readByte(),l=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),h=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^l)+16777216*(255^o)+65536*(255^u)+256*(255^d)+(255^h)+1):72057594037927940*s+281474976710656*n+1099511627776*r+4294967296*l+16777216*o+65536*u+256*d+h},A.prototype.writeLongLong=function(s){var n,r;return n=Math.floor(s/4294967296),r=4294967295&s,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},A.prototype.readInt=function(){return this.readInt32()},A.prototype.writeInt=function(s){return this.writeInt32(s)},A.prototype.read=function(s){var n,r;for(n=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n.push(this.readByte());return n},A.prototype.write=function(s){var n,r,l,o;for(o=[],r=0,l=s.length;r<l;r++)n=s[r],o.push(this.writeByte(n));return o},A})(),sj=(function(){var A;function s(n){var r,l,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},l=0,o=this.tableCount;0<=o?l<o:l>o;l=0<=o?++l:--l)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return s.prototype.encode=function(n){var r,l,o,u,d,h,m,w,v,B,x,C,N;for(N in x=Object.keys(n).length,h=Math.log(2),v=16*Math.floor(Math.log(x)/h),u=Math.floor(v/h),w=16*x-v,(l=new po).writeInt(this.scalarType),l.writeShort(x),l.writeShort(v),l.writeShort(u),l.writeShort(w),o=16*x,m=l.pos+o,d=null,C=[],n)for(B=n[N],l.writeString(N),l.writeInt(A(B)),l.writeInt(m),l.writeInt(B.length),C=C.concat(B),N==="head"&&(d=m),m+=B.length;m%4;)C.push(0),m++;return l.write(C),r=2981146554-A(l.data),l.pos=d+8,l.writeUInt32(r),l.data},A=function(n){var r,l,o,u;for(n=Zv.call(n);n.length%4;)n.push(0);for(o=new po(n),l=0,r=0,u=n.length;r<u;r=r+=4)l+=o.readUInt32();return 4294967295&l},s})(),nj={}.hasOwnProperty,Li=function(A,s){for(var n in s)nj.call(s,n)&&(A[n]=s[n]);function r(){this.constructor=A}return r.prototype=s.prototype,A.prototype=new r,A.__super__=s.prototype,A};Xr=(function(){function A(s){var n;this.file=s,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return A.prototype.parse=function(){},A.prototype.encode=function(){},A.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},A})();var rj=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="head",s.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},s.prototype.encode=function(n){var r;return(r=new po).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},s})(),A2=(function(){function A(s,n){var r,l,o,u,d,h,m,w,v,B,x,C,N,L,F,Q,_;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=n+s.readInt(),v=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=s.readByte();break;case 4:for(x=s.readUInt16(),B=x/2,s.pos+=6,o=(function(){var te,O;for(O=[],h=te=0;0<=B?te<B:te>B;h=0<=B?++te:--te)O.push(s.readUInt16());return O})(),s.pos+=2,N=(function(){var te,O;for(O=[],h=te=0;0<=B?te<B:te>B;h=0<=B?++te:--te)O.push(s.readUInt16());return O})(),m=(function(){var te,O;for(O=[],h=te=0;0<=B?te<B:te>B;h=0<=B?++te:--te)O.push(s.readUInt16());return O})(),w=(function(){var te,O;for(O=[],h=te=0;0<=B?te<B:te>B;h=0<=B?++te:--te)O.push(s.readUInt16());return O})(),l=(this.length-s.pos+this.offset)/2,d=(function(){var te,O;for(O=[],h=te=0;0<=l?te<l:te>l;h=0<=l?++te:--te)O.push(s.readUInt16());return O})(),h=F=0,_=o.length;F<_;h=++F)for(L=o[h],r=Q=C=N[h];C<=L?Q<=L:Q>=L;r=C<=L?++Q:--Q)w[h]===0?u=r+m[h]:(u=d[w[h]/2+(r-C)-(B-h)]||0)!==0&&(u+=m[h]),this.codeMap[r]=65535&u}s.pos=v}return A.encode=function(s,n){var r,l,o,u,d,h,m,w,v,B,x,C,N,L,F,Q,_,te,O,k,P,E,D,G,T,R,V,Z,ue,S,M,Y,le,de,J,U,X,ee,re,fe,ve,xe,Ce,st,_e,$e;switch(Z=new po,u=Object.keys(s).sort((function(Ue,At){return Ue-At})),n){case"macroman":for(N=0,L=(function(){var Ue=[];for(C=0;C<256;++C)Ue.push(0);return Ue})(),Q={0:0},o={},ue=0,le=u.length;ue<le;ue++)Q[Ce=s[l=u[ue]]]==null&&(Q[Ce]=++N),o[l]={old:s[l],new:Q[s[l]]},L[l]=Q[s[l]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(L),{charMap:o,subtable:Z.data,maxGlyphID:N+1};case"unicode":for(R=[],v=[],_=0,Q={},r={},F=m=null,S=0,de=u.length;S<de;S++)Q[O=s[l=u[S]]]==null&&(Q[O]=++_),r[l]={old:O,new:Q[O]},d=Q[O]-l,F!=null&&d===m||(F&&v.push(F),R.push(l),m=d),F=l;for(F&&v.push(F),v.push(65535),R.push(65535),G=2*(D=R.length),E=2*Math.pow(Math.log(D)/Math.LN2,2),B=Math.log(E/2)/Math.LN2,P=2*D-E,h=[],k=[],x=[],C=M=0,J=R.length;M<J;C=++M){if(T=R[C],w=v[C],T===65535){h.push(0),k.push(0);break}if(T-(V=r[T].new)>=32768)for(h.push(0),k.push(2*(x.length+D-C)),l=Y=T;T<=w?Y<=w:Y>=w;l=T<=w?++Y:--Y)x.push(r[l].new);else h.push(V-T),k.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*D+2*x.length),Z.writeUInt16(0),Z.writeUInt16(G),Z.writeUInt16(E),Z.writeUInt16(B),Z.writeUInt16(P),ve=0,U=v.length;ve<U;ve++)l=v[ve],Z.writeUInt16(l);for(Z.writeUInt16(0),xe=0,X=R.length;xe<X;xe++)l=R[xe],Z.writeUInt16(l);for(st=0,ee=h.length;st<ee;st++)d=h[st],Z.writeUInt16(d);for(_e=0,re=k.length;_e<re;_e++)te=k[_e],Z.writeUInt16(te);for($e=0,fe=x.length;$e<fe;$e++)N=x[$e],Z.writeUInt16(N);return{charMap:r,subtable:Z.data,maxGlyphID:_+1}}},A})(),Yv=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="cmap",s.prototype.parse=function(n){var r,l,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=o?l<o:l>o;l=0<=o?++l:--l)r=new A2(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},s.encode=function(n,r){var l,o;return r==null&&(r="macroman"),l=A2.encode(n,r),(o=new po).writeUInt16(0),o.writeUInt16(1),l.table=o.data.concat(l.subtable),l},s})(),ij=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="hhea",s.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},s})(),lj=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="OS/2",s.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var r,l;for(l=[],r=0;r<10;++r)l.push(n.readByte());return l})(),this.charRange=(function(){var r,l;for(l=[],r=0;r<4;++r)l.push(n.readInt());return l})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var r,l;for(l=[],r=0;r<2;r=++r)l.push(n.readInt());return l})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},s})(),oj=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="post",s.prototype.parse=function(n){var r,l,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var u;for(l=n.readUInt16(),this.glyphNameIndex=[],u=0;0<=l?u<l:u>l;u=0<=l?++u:--u)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return l=n.readUInt16(),this.offsets=n.read(l);case 196608:break;case 262144:return this.map=(function(){var d,h,m;for(m=[],u=d=0,h=this.file.maxp.numGlyphs;0<=h?d<h:d>h;u=0<=h?++d:--d)m.push(n.readUInt32());return m}).call(this)}},s})(),cj=function(A,s){this.raw=A,this.length=A.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},uj=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="name",s.prototype.parse=function(n){var r,l,o,u,d,h,m,w,v,B,x;for(n.pos=this.offset,n.readShort(),r=n.readShort(),h=n.readShort(),l=[],u=0;0<=r?u<r:u>r;u=0<=r?++u:--u)l.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+h+n.readShort()});for(m={},u=v=0,B=l.length;v<B;u=++v)o=l[u],n.pos=o.offset,w=n.readString(o.length),d=new cj(w,o),m[x=o.nameID]==null&&(m[x]=[]),m[o.nameID].push(d);this.strings=m,this.copyright=m[0],this.fontFamily=m[1],this.fontSubfamily=m[2],this.uniqueSubfamily=m[3],this.fontName=m[4],this.version=m[5];try{this.postscriptName=m[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=m[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=m[7],this.manufacturer=m[8],this.designer=m[9],this.description=m[10],this.vendorUrl=m[11],this.designerUrl=m[12],this.license=m[13],this.licenseUrl=m[14],this.preferredFamily=m[15],this.preferredSubfamily=m[17],this.compatibleFull=m[18],this.sampleText=m[19]},s})(),dj=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="maxp",s.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},s})(),hj=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="hmtx",s.prototype.parse=function(n){var r,l,o,u,d,h,m;for(n.pos=this.offset,this.metrics=[],r=0,h=this.file.hhea.numberOfMetrics;0<=h?r<h:r>h;r=0<=h?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var w,v;for(v=[],r=w=0;0<=o?w<o:w>o;r=0<=o?++w:--w)v.push(n.readInt16());return v})(),this.widths=(function(){var w,v,B,x;for(x=[],w=0,v=(B=this.metrics).length;w<v;w++)u=B[w],x.push(u.advance);return x}).call(this),l=this.widths[this.widths.length-1],m=[],r=d=0;0<=o?d<o:d>o;r=0<=o?++d:--d)m.push(this.widths.push(l));return m},s.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},s})(),Zv=[].slice,fj=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="glyf",s.prototype.parse=function(){return this.cache={}},s.prototype.glyphFor=function(n){var r,l,o,u,d,h,m,w,v,B;return n in this.cache?this.cache[n]:(u=this.file.loca,r=this.file.contents,l=u.indexOf(n),(o=u.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+l,d=(h=new po(r.read(o))).readShort(),w=h.readShort(),B=h.readShort(),m=h.readShort(),v=h.readShort(),this.cache[n]=d===-1?new pj(h,w,B,m,v):new mj(h,d,w,B,m,v),this.cache[n]))},s.prototype.encode=function(n,r,l){var o,u,d,h,m;for(d=[],u=[],h=0,m=r.length;h<m;h++)o=n[r[h]],u.push(d.length),o&&(d=d.concat(o.encode(l)));return u.push(d.length),{table:d,offsets:u}},s})(),mj=(function(){function A(s,n,r,l,o,u){this.raw=s,this.numberOfContours=n,this.xMin=r,this.yMin=l,this.xMax=o,this.yMax=u,this.compound=!1}return A.prototype.encode=function(){return this.raw.data},A})(),pj=(function(){function A(s,n,r,l,o){var u,d;for(this.raw=s,this.xMin=n,this.yMin=r,this.xMax=l,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return A.prototype.encode=function(){var s,n,r;for(n=new po(Zv.call(this.raw.data)),s=0,r=this.glyphIDs.length;s<r;++s)n.pos=this.glyphOffsets[s];return n.data},A})(),gj=(function(A){function s(){return s.__super__.constructor.apply(this,arguments)}return Li(s,Xr),s.prototype.tag="loca",s.prototype.parse=function(n){var r,l;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,u;for(u=[],l=0,o=this.length;l<o;l+=2)u.push(2*n.readUInt16());return u}).call(this):(function(){var o,u;for(u=[],l=0,o=this.length;l<o;l+=4)u.push(n.readUInt32());return u}).call(this)},s.prototype.indexOf=function(n){return this.offsets[n]},s.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},s.prototype.encode=function(n,r){for(var l=new Uint32Array(this.offsets.length),o=0,u=0,d=0;d<l.length;++d)if(l[d]=o,u<r.length&&r[u]==d){++u,l[d]=o;var h=this.offsets[d],m=this.offsets[d+1]-h;m>0&&(o+=m)}for(var w=new Array(4*l.length),v=0;v<l.length;++v)w[4*v+3]=255&l[v],w[4*v+2]=(65280&l[v])>>8,w[4*v+1]=(16711680&l[v])>>16,w[4*v]=(4278190080&l[v])>>24;return w},s})(),xj=(function(){function A(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return A.prototype.generateCmap=function(){var s,n,r,l,o;for(n in l=this.font.cmap.tables[0].codeMap,s={},o=this.subset)r=o[n],s[n]=l[r];return s},A.prototype.glyphsFor=function(s){var n,r,l,o,u,d,h;for(l={},u=0,d=s.length;u<d;u++)l[o=s[u]]=this.font.glyf.glyphFor(o);for(o in n=[],l)(r=l[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in h=this.glyphsFor(n))r=h[o],l[o]=r;return l},A.prototype.encode=function(s,n){var r,l,o,u,d,h,m,w,v,B,x,C,N,L,F;for(l in r=Yv.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(s),x={0:0},F=r.charMap)x[(h=F[l]).old]=h.new;for(C in B=r.maxGlyphID,u)C in x||(x[C]=B++);return w=(function(Q){var _,te;for(_ in te={},Q)te[Q[_]]=_;return te})(x),v=Object.keys(w).sort((function(Q,_){return Q-_})),N=(function(){var Q,_,te;for(te=[],Q=0,_=v.length;Q<_;Q++)d=v[Q],te.push(w[d]);return te})(),o=this.font.glyf.encode(u,N,x),m=this.font.loca.encode(o.offsets,N),L={cmap:this.font.cmap.raw(),glyf:o.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},A})();$t.API.PDFObject=(function(){var A;function s(){}return A=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},s.convert=function(n){var r,l,o,u;if(Array.isArray(n))return"["+(function(){var d,h,m;for(m=[],d=0,h=n.length;d<h;d++)r=n[d],m.push(s.convert(r));return m})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+A(n.getUTCFullYear(),4)+A(n.getUTCMonth(),2)+A(n.getUTCDate(),2)+A(n.getUTCHours(),2)+A(n.getUTCMinutes(),2)+A(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(l in o=["<<"],n)u=n[l],o.push("/"+l+" "+s.convert(u));return o.push(">>"),o.join(`
`)}return""+n},s})();const vj=({customer:A,invoices:s,quotes:n,creditNotes:r,settings:l,onBack:o,onViewInvoice:u,onViewQuote:d,onUpdateCustomer:h})=>{const[m,w]=se.useState(""),[v,B]=se.useState(""),[x,C]=se.useState(!1),[N,L]=se.useState("overview"),[F,Q]=se.useState(""),[_,te]=se.useState(""),[O,k]=se.useState(""),P=l.currencySymbol||"",E=se.useMemo(()=>{const S=s.reduce((de,J)=>de+J.total,0),M=r.reduce((de,J)=>de+J.total,0),Y=s.reduce((de,J)=>{const U=J.payments.reduce((X,ee)=>X+ee.amount,0);return de+U},0),le=S-M-Y;return{totalBilled:S-M,outstandingBalance:le}},[s,r]),D=S=>{const M=S.payments.reduce((Y,le)=>Y+le.amount,0);return M>=S.total?"Paid":M>0?"Partially Paid":"Unpaid"},G=async()=>{C(!0),await new Promise(M=>setTimeout(M,50));const S=document.getElementById("printable-statement");if(S){const M=await tp(S,{scale:2}),Y=M.toDataURL("image/png"),le=new $t("p","mm","a4"),de=le.internal.pageSize.getWidth(),J=M.height*de/M.width;le.addImage(Y,"PNG",0,0,de,J),le.save(`statement-${A.name.replace(/\s/g,"_")}-${new Date().toISOString().split("T")[0]}.pdf`)}C(!1)},T=()=>{if(!F.trim())return;const S={id:crypto.randomUUID(),content:F,date:new Date().toISOString()},M={...A,notesHistory:[S,...A.notesHistory||[]]};h(M),Q("")},R=S=>{if(!window.confirm("Delete this note?"))return;const M={...A,notesHistory:(A.notesHistory||[]).filter(Y=>Y.id!==S)};h(M)},V=()=>{if(!_.trim())return;const S={id:crypto.randomUUID(),text:_,dueDate:O||new Date().toISOString().split("T")[0],isCompleted:!1},M={...A,reminders:[...A.reminders||[],S]};h(M),te(""),k("")},Z=S=>{const M=(A.reminders||[]).map(Y=>Y.id===S?{...Y,isCompleted:!Y.isCompleted}:Y);h({...A,reminders:M})},ue=S=>{const M=(A.reminders||[]).filter(Y=>Y.id!==S);h({...A,reminders:M})};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx(he,{variant:"outline",onClick:o,children:" Back to Customers"})}),e.jsxs("div",{className:"border-b pb-4 mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:A.name}),A.contactName&&e.jsxs("p",{className:"text-lg text-slate-600",children:["Attn: ",A.contactName]}),e.jsx("p",{className:"text-slate-500 whitespace-pre-wrap",children:A.address}),A.email&&e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:A.email}),A.mobile&&e.jsx("p",{className:"text-sm text-slate-600",children:A.mobile})]}),e.jsxs("div",{className:"flex border-b mb-6",children:[e.jsx("button",{className:`px-6 py-3 font-medium text-sm transition-colors ${N==="overview"?"border-b-2 border-blue-600 text-blue-600":"text-slate-500 hover:text-slate-700"}`,onClick:()=>L("overview"),children:"Overview & Notes"}),e.jsx("button",{className:`px-6 py-3 font-medium text-sm transition-colors ${N==="transactions"?"border-b-2 border-blue-600 text-blue-600":"text-slate-500 hover:text-slate-700"}`,onClick:()=>L("transactions"),children:"Transactions & History"})]}),N==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs font-medium text-blue-600 uppercase",children:"Net Billed"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[P,E.totalBilled.toFixed(2)]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs font-medium text-red-600 uppercase",children:"Outstanding"}),e.jsxs("p",{className:"text-2xl font-bold text-red-800",children:[P,E.outstandingBalance.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Reminders"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(we,{placeholder:"Reminder text...",value:_,onChange:S=>te(S.target.value),className:"flex-grow"}),e.jsx(we,{type:"date",value:O,onChange:S=>k(S.target.value),className:"w-32"}),e.jsx(he,{onClick:V,disabled:!_.trim(),children:"Add"})]}),e.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(A.reminders||[]).length===0&&e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No reminders set."}),[...A.reminders||[]].sort((S,M)=>S.isCompleted===M.isCompleted?new Date(S.dueDate).getTime()-new Date(M.dueDate).getTime():S.isCompleted?1:-1).map(S=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${S.isCompleted?"bg-slate-100 opacity-75":"bg-white border"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>Z(S.id),className:`text-slate-400 hover:text-green-600 transition-colors ${S.isCompleted?"text-green-600":""}`,children:e.jsx(td,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${S.isCompleted?"line-through text-slate-500":"text-slate-800"}`,children:S.text}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Due: ",new Date(S.dueDate).toLocaleDateString()]})]})]}),e.jsx(he,{size:"icon",variant:"ghost",onClick:()=>ue(S.id),children:e.jsx(pA,{className:"w-4 h-4 text-slate-400 hover:text-red-500"})})]},S.id))]})]})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Notes History"}),e.jsxs("div",{className:"mb-4",children:[e.jsx(HA,{placeholder:"Add a note about this customer...",value:F,onChange:S=>Q(S.target.value),rows:2}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(he,{onClick:T,disabled:!F.trim(),children:"Post Note"})})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto flex-grow max-h-[500px] pr-2",children:[(A.notesHistory||[]).length===0&&e.jsx("p",{className:"text-sm text-slate-500 italic text-center py-4",children:"No notes recorded yet."}),(A.notesHistory||[]).map(S=>e.jsxs("div",{className:"bg-white p-3 rounded border shadow-sm relative group",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:new Date(S.date).toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-800 whitespace-pre-wrap",children:S.content}),e.jsx("button",{onClick:()=>R(S.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-red-50 rounded",title:"Delete Note",children:e.jsx(pA,{className:"w-4 h-4 text-red-400"})})]},S.id))]})]})]}),N==="transactions"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Invoices"}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto space-y-3 pr-2",children:s.length>0?s.map(S=>e.jsx("div",{className:"bg-slate-100 p-3 rounded-md",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:S.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[new Date(S.createdAt).toLocaleDateString()," | ",P,S.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(co,{status:D(S)}),e.jsx(he,{variant:"outline",className:"!py-1 !px-2 text-xs",onClick:()=>u(S.id),children:"View"})]})]})},S.id)):e.jsx("p",{className:"text-slate-500",children:"No invoices found for this customer."})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Credit Notes"}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto space-y-3 pr-2",children:r.length>0?r.map(S=>e.jsx("div",{className:"bg-slate-100 p-3 rounded-md",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:S.state.creditNoteNumber}),e.jsxs("p",{className:"text-sm text-slate-500",children:[new Date(S.createdAt).toLocaleDateString()," | ",P,S.total.toFixed(2)]})]})})},S.id)):e.jsx("p",{className:"text-slate-500",children:"No credit notes found for this customer."})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Quotes"}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto space-y-3 pr-2",children:n.length>0?n.map(S=>e.jsx("div",{className:"bg-slate-100 p-3 rounded-md",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:S.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[new Date(S.createdAt).toLocaleDateString()," | ",P,S.total.toFixed(2)]})]}),e.jsx(he,{variant:"outline",className:"!py-1 !px-2 text-xs",onClick:()=>d(S.id),children:"View"})]})},S.id)):e.jsx("p",{className:"text-slate-500",children:"No quotes found for this customer."})})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Download Statement of Account"}),e.jsxs("div",{className:"flex items-end gap-4 bg-slate-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Start Date"}),e.jsx(we,{id:"startDate",type:"date",value:m,onChange:S=>w(S.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"End Date"}),e.jsx(we,{id:"endDate",type:"date",value:v,onChange:S=>B(S.target.value)})]}),e.jsxs(he,{onClick:G,disabled:x,children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),x?"Generating...":"Download Statement"]})]})]})]}),x&&e.jsx("div",{style:{position:"absolute",left:"-9999px",top:0,width:"210mm"},children:e.jsx(Jb,{id:"printable-statement",customer:A,invoices:s,creditNotes:r,settings:l,startDate:m,endDate:v})})]})},bj=({isOpen:A,onClose:s,title:n,message:r})=>A?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl transform transition-all sm:my-8 w-full max-w-md mx-4 border border-slate-200",children:[e.jsx("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-slate-900",id:"modal-title",children:n}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-slate-500",children:r})})]})]})}),e.jsx("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:e.jsx(he,{variant:"primary",onClick:s,children:"OK"})})]})]}):null,wj=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"})}),Bj=({isOpen:A,onClose:s,onSelect:n})=>A?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:s}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl transform transition-all sm:my-8 w-full max-w-lg mx-4 border border-slate-200",children:e.jsxs("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xl leading-6 font-bold text-slate-900",id:"modal-title",children:"Choose Document Type"}),e.jsxs("button",{type:"button",className:"text-slate-400 hover:text-slate-600",onClick:s,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(er,{className:"h-6 w-6"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-slate-500",children:"Your plan allows for multiple document types. Please select one to continue."})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>n("fixed"),className:"flex flex-col items-center justify-center p-6 text-center bg-slate-50 rounded-lg border-2 border-transparent hover:border-blue-500 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",children:[e.jsx(G0,{className:"w-10 h-10 text-blue-600 mb-2"}),e.jsx("h4",{className:"font-semibold text-slate-800",children:"Fixed Price"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"For items with a standard, set price."})]}),e.jsxs("button",{onClick:()=>n("measured"),className:"flex flex-col items-center justify-center p-6 text-center bg-slate-50 rounded-lg border-2 border-transparent hover:border-blue-500 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",children:[e.jsx(wj,{className:"w-10 h-10 text-blue-600 mb-2"}),e.jsx("h4",{className:"font-semibold text-slate-800",children:"Measured Unit Price"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"For items priced by units like m, m, etc."})]})]})]})})]}):null,yj=["bg-white","bg-slate-500","bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500"],np=({isOpen:A,onClose:s,onSelectColor:n})=>{const r=l=>{n(l),s()};return e.jsx(Mn,{isOpen:A,onClose:s,title:"Select a Color",size:"lg",children:e.jsx("div",{className:"grid grid-cols-8 gap-2 p-4",children:yj.map(l=>e.jsx("button",{type:"button",onClick:()=>r(l),className:`w-12 h-12 rounded-full ${l} border-2 border-slate-300 hover:ring-4 hover:ring-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500 transition-all`,"aria-label":`Select color ${l}`},l))})})},a2={name:"",supplierId:"",supplierName:"",itemCode:"",price:0,type:Aa.FIXED,length:void 0,width:void 0,measurementUnit:void 0,unitPrices:{},includeWastage:!0,categoryId:void 0},Cj=Object.values(ha).filter(A=>Cb(A)),Nj=Object.values(ha).filter(A=>hl(A)),jj=({supplierInventory:A,suppliers:s,settings:n,currentUser:r,categories:l,onAddItem:o,onUpdateItem:u,onRemoveItem:d,onAddCategory:h,onUpdateCategory:m,onRemoveCategory:w,onAddSupplier:v})=>{const[B,x]=se.useState("list"),[C,N]=se.useState(a2),[L,F]=se.useState(null),[Q,_]=se.useState(""),[te,O]=se.useState(null),[k,P]=se.useState(""),[E,D]=se.useState(!1),[G,T]=se.useState(null),[R,V]=se.useState(""),[Z,ue]=se.useState(""),[S,M]=se.useState(null),[Y,le]=se.useState({key:"name",direction:"asc"}),de=n.currencySymbol||"";se.useEffect(()=>{const K=s.find(Ge=>Ge.name.toLowerCase()===C.supplierName.toLowerCase().trim());N(K?Ge=>({...Ge,supplierId:K.id}):Ge=>({...Ge,supplierId:""}))},[C.supplierName,s]);const J=C.supplierName.trim()&&!C.supplierId,U=(K,Ge)=>{K.preventDefault(),K.stopPropagation(),window.confirm("Delete this item?")&&d(Ge)},X=(K,Ge)=>{if(K.preventDefault(),K.stopPropagation(),A.some(ie=>ie.categoryId===Ge)){alert("All items must be deleted before the category can be removed.");return}window.confirm("Delete this category?")&&w(Ge)},ee=se.useMemo(()=>{const K=A.length,Ge=new Set(A.map(ie=>ie.supplierId)).size,Ye=A.filter(ie=>ie.type===Aa.MEASURED).length;return{totalItems:K,uniqueSuppliers:Ge,measuredItems:Ye}},[A]),re=()=>{N(a2),F(null)},fe=(K,Ge)=>{const Ye={...C,[K]:Ge};K==="type"&&(Ge===Aa.FIXED?(Ye.length=void 0,Ye.width=void 0,Ye.measurementUnit=void 0,Ye.unitPrices={},Ye.includeWastage=!0):Ye.measurementUnit=ha.M),K==="categoryId"&&Ge===""&&(Ye.categoryId=void 0);const{type:ie,price:Ne,length:Te,width:qe,measurementUnit:ot}=Ye;ie===Aa.MEASURED&&(Ye.unitPrices=Nb(Ne,Te||0,qe||0,ot||ha.M)),N(Ye)},ve=K=>{F(K.id);const Ge=s.find(Ye=>Ye.id===K.supplierId);N({name:K.name,supplierId:K.supplierId,supplierName:Ge?Ge.name:"",itemCode:K.itemCode||"",price:K.price||0,type:K.type||Aa.FIXED,length:K.length,width:K.width,measurementUnit:K.measurementUnit,unitPrices:K.unitPrices||{},includeWastage:K.includeWastage!==!1,categoryId:K.categoryId}),x("form")},xe=()=>{re(),x("form")},Ce=()=>{if(!J)return;const K=v({name:C.supplierName.trim(),address:"Please update address in Supplier Manager"});N(Ge=>({...Ge,supplierId:K.id}))},st=K=>{K.preventDefault();let Ge=C.supplierId;if(!Ge&&C.supplierName.trim()&&(Ge=v({name:C.supplierName.trim(),address:"Please update address in Supplier Manager"}).id),!C.name.trim()||!Ge){alert("Please provide an item name and select/create a supplier.");return}const Ye={name:C.name,supplierId:Ge,itemCode:C.itemCode||void 0,price:Number(C.price)||0,type:C.type,length:C.length?Number(C.length):void 0,width:C.width?Number(C.width):void 0,measurementUnit:C.measurementUnit||void 0,unitPrices:C.unitPrices||{},includeWastage:C.includeWastage,categoryId:C.categoryId||void 0};L?u({id:L,...Ye}):o(Ye),re(),x("list")},_e=K=>{le(Ge=>({key:K,direction:Ge.key===K&&Ge.direction==="asc"?"desc":"asc"}))},$e=se.useMemo(()=>{let K=[...A];const Ge=S==="uncategorized"?"uncategorized":S;if(Ge==="uncategorized"?K=K.filter(Ye=>!Ye.categoryId):Ge&&(K=K.filter(Ye=>Ye.categoryId===Ge)),Z&&(K=K.filter(Ye=>Ye.supplierId===Z)),R){const Ye=R.toLowerCase();K=K.filter(ie=>ie.name.toLowerCase().includes(Ye)||ie.itemCode&&ie.itemCode.toLowerCase().includes(Ye))}return K.sort((Ye,ie)=>{var qe,ot;let Ne="",Te="";return Y.key==="supplierName"?(Ne=((qe=s.find(xt=>xt.id===Ye.supplierId))==null?void 0:qe.name)||"",Te=((ot=s.find(xt=>xt.id===ie.supplierId))==null?void 0:ot.name)||""):(Ne=Ye[Y.key],Te=ie[Y.key]),Ne==null&&(Ne=""),Te==null&&(Te=""),Ne<Te?Y.direction==="asc"?-1:1:Ne>Te?Y.direction==="asc"?1:-1:0}),K},[A,s,R,S,Z,Y]),Ue=K=>{K.preventDefault(),Q.trim()&&(h(Q.trim()),_(""))},At=()=>{if(te&&k.trim()){const K=l.find(Ge=>Ge.id===te);m(te,k.trim(),K==null?void 0:K.color)}O(null),P("")},Le=K=>{if(G){const Ge=l.find(Ye=>Ye.id===G);Ge&&m(G,Ge.name,K)}D(!1),T(null)};return B==="categories"?e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(he,{variant:"outline",onClick:()=>x("list"),children:" Back to Inventory"}),e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Manage Categories"})]})}),e.jsx("div",{className:"max-h-[80vh] overflow-y-auto pr-2",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("form",{onSubmit:Ue,className:"flex gap-4 mb-8 p-6 bg-slate-50 rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800 mb-1",children:"New Category Name"}),e.jsx(we,{placeholder:"e.g. Timber, Hardware",value:Q,onChange:K=>_(K.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(he,{type:"submit",variant:"primary",children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Category"]})})]}),e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-100 text-sm font-semibold text-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Color"}),e.jsx("th",{className:"p-4",children:"Category Name"}),e.jsx("th",{className:"p-4 text-center w-32",children:"Items"}),e.jsx("th",{className:"p-4 text-right w-32",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[l.map(K=>{const Ge=A.filter(ie=>ie.categoryId===K.id).length,Ye=te===K.id;return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4 w-16",children:e.jsx("button",{type:"button",onClick:()=>{T(K.id),D(!0)},className:`w-8 h-8 rounded-full border border-slate-300 shadow-sm transition-transform hover:scale-110 ${K.color||"bg-white"}`,title:"Assign color"})}),e.jsx("td",{className:"p-4 font-medium text-slate-800",children:Ye?e.jsx(we,{value:k,onChange:ie=>P(ie.target.value),autoFocus:!0,className:"h-8 text-sm",onKeyDown:ie=>{ie.key==="Enter"&&At(),ie.key==="Escape"&&(O(null),P(""))}}):K.name}),e.jsx("td",{className:"p-4 text-center text-slate-600",children:Ge}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("div",{className:"flex justify-end gap-2",children:Ye?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:At,type:"button",className:"p-2 bg-green-100 text-green-600 hover:bg-green-200 rounded transition-colors",title:"Save",children:e.jsx(td,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{O(null),P("")},type:"button",className:"p-2 bg-red-100 text-red-600 hover:bg-red-200 rounded transition-colors",title:"Cancel",children:e.jsx(er,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{O(K.id),P(K.name)},type:"button",className:"p-2 bg-green-100 text-green-600 hover:bg-green-200 rounded transition-colors",title:"Edit",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ie=>X(ie,K.id),type:"button",className:"p-2 bg-red-100 text-red-600 hover:bg-red-200 rounded transition-colors",title:"Delete",children:e.jsx(pA,{className:"w-4 h-4"})})]})})})]},K.id)}),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No categories created yet."})})]})]})})]})}),e.jsx(np,{isOpen:E,onClose:()=>D(!1),onSelectColor:Le})]}):B==="form"?e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(he,{variant:"outline",onClick:()=>x("list"),children:" Back to Inventory"}),e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:L?"Edit Supplier Item":"Add New Item"})]})}),e.jsxs("form",{onSubmit:st,className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Pricing Type"}),e.jsxs(fA,{id:"itemType",value:C.type,onChange:K=>fe("type",K.target.value),children:[e.jsx("option",{value:Aa.FIXED,children:"Fixed Price Item"}),e.jsx("option",{value:Aa.MEASURED,children:"Measured Item (Material)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Item Name *"}),e.jsx(we,{id:"itemName",value:C.name,onChange:K=>fe("name",K.target.value),required:!0,placeholder:"Item Name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supplierName",className:"block text-sm font-medium text-slate-800 mb-1",children:"Supplier *"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(we,{id:"supplierName",list:"suppliers-list",value:C.supplierName,onChange:K=>fe("supplierName",K.target.value),required:!0,placeholder:"Type or select a supplier..."}),e.jsx("datalist",{id:"suppliers-list",children:s.map(K=>e.jsx("option",{value:K.name},K.id))}),J&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"New supplier. Click '+' to save."})]}),J&&e.jsx(he,{type:"button",size:"icon",variant:"primary",onClick:Ce,title:"Save new supplier",children:e.jsx(AA,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Category"}),e.jsxs(fA,{id:"itemCategory",value:C.categoryId||"",onChange:K=>fe("categoryId",K.target.value),children:[e.jsx("option",{value:"",children:"-- No Category --"}),l.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-800",children:[C.type===Aa.FIXED?`Price per Item (${de})`:`Total Price of Item (${de})`," *"]}),e.jsx(we,{id:"itemPrice",type:"number",step:"0.01",min:"0",value:C.price,onChange:K=>fe("price",K.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-800",children:"Item Code (Optional)"}),e.jsx(we,{id:"itemCode",value:C.itemCode,onChange:K=>fe("itemCode",K.target.value),placeholder:"e.g. SUP-001"})]}),C.type===Aa.MEASURED&&e.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Material Dimensions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Length"}),e.jsx(we,{type:"number",value:C.length||"",onChange:K=>fe("length",K.target.value),placeholder:"Length"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Width"}),e.jsx(we,{type:"number",value:C.width||"",onChange:K=>fe("width",K.target.value),placeholder:"Width"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Unit"}),e.jsxs(fA,{value:C.measurementUnit||"",onChange:K=>fe("measurementUnit",K.target.value),children:[e.jsx("option",{value:"",children:"-- Select Unit for Dimensions --"}),Cj.map(K=>e.jsx("option",{value:K,children:K},K))]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border",children:[e.jsx("label",{htmlFor:"includeWastage",className:"text-sm font-medium text-slate-700",children:"Include Wastage Cost"}),e.jsxs("label",{htmlFor:"includeWastage",className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"includeWastage",className:"sr-only peer",checked:C.includeWastage!==!1,onChange:K=>fe("includeWastage",K.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),Object.keys(C.unitPrices||{}).length>0&&e.jsxs("div",{className:"mt-2 p-3 border rounded-lg bg-white space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm text-slate-700 mb-1",children:"Calculated Cost Per Area"}),Nj.map(K=>{var Ge;return e.jsxs("div",{className:"grid grid-cols-2 items-center gap-2",children:[e.jsx("label",{className:"text-xs text-slate-600",children:`Cost / ${K}`}),e.jsx(we,{type:"text",value:`${de}${(((Ge=C.unitPrices)==null?void 0:Ge[K])??0).toFixed(4)}`,disabled:!0,className:"bg-slate-200 text-right !py-1 text-xs"})]},K)})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-6 border-t mt-4",children:[e.jsx(he,{type:"button",variant:"outline",onClick:()=>x("list"),children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:L?"Update Item":"Add Item"})]})]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border-l-4 border-blue-500",children:[e.jsx("p",{className:"text-sm text-slate-500 font-medium uppercase",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:ee.totalItems})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border-l-4 border-orange-500",children:[e.jsx("p",{className:"text-sm text-slate-500 font-medium uppercase",children:"Unique Suppliers"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:ee.uniqueSuppliers})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border-l-4 border-green-500",children:[e.jsx("p",{className:"text-sm text-slate-500 font-medium uppercase",children:"Measured Items"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:ee.measuredItems})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border border-slate-200",children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 bg-slate-50 flex flex-col md:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full md:w-auto flex-grow",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(yr,{className:"w-4 h-4 text-gray-400"})}),e.jsx(we,{placeholder:"Search Name or Item Code...",value:R,onChange:K=>V(K.target.value),className:"pl-10"})]}),e.jsxs(fA,{value:Z,onChange:K=>ue(K.target.value),className:"w-full md:w-48",children:[e.jsx("option",{value:"",children:"All Suppliers"}),s.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[!r.subscriptionStatus.startsWith("trial_")&&e.jsxs(he,{variant:"outline",onClick:()=>ks("supplier-inventory.csv",A),children:[e.jsx(KA,{className:"w-4 h-4 mr-2"})," Export"]}),e.jsxs(he,{variant:"primary",onClick:xe,children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Item"]})]})]}),e.jsxs("div",{className:"px-5 py-3 border-b border-slate-200 flex flex-col sm:flex-row items-center justify-between gap-4 bg-slate-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("label",{htmlFor:"catFilter",className:"text-sm font-medium text-slate-700 whitespace-nowrap",children:"Filter Category:"}),e.jsxs(fA,{id:"catFilter",value:S||"",onChange:K=>M(K.target.value||null),className:"w-full sm:w-64 bg-white",children:[e.jsx("option",{value:"",children:"All Items"}),e.jsx("option",{value:"uncategorized",children:"Uncategorized"}),l.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]})]}),e.jsxs("button",{onClick:()=>x("categories"),className:"text-sm font-medium text-blue-600 hover:text-blue-800 flex items-center whitespace-nowrap bg-white px-3 py-1.5 rounded border border-blue-200 hover:border-blue-300 transition-colors shadow-sm",type:"button",children:[e.jsx(G0,{className:"w-4 h-4 mr-2"})," Manage Categories"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-100 text-xs uppercase text-slate-800 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 cursor-pointer hover:text-blue-600",onClick:()=>_e("name"),children:"Item / Code"}),e.jsx("th",{className:"p-4 cursor-pointer hover:text-blue-600",onClick:()=>_e("supplierName"),children:"Supplier"}),e.jsx("th",{className:"p-4",children:"Category"}),e.jsx("th",{className:"p-4 text-right cursor-pointer hover:text-blue-600",onClick:()=>_e("price"),children:"Cost Price"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"text-sm divide-y divide-slate-100",children:$e.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No items found matching your filters."})}):$e.map(K=>{const Ge=s.find(ie=>ie.id===K.supplierId),Ye=l.find(ie=>ie.id===K.categoryId);return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("p",{className:"font-medium text-slate-800",children:K.name}),K.itemCode&&e.jsxs("p",{className:"text-[10px] text-slate-500",children:["Code: ",K.itemCode]})]}),e.jsx("td",{className:"p-4 text-slate-800",children:(Ge==null?void 0:Ge.name)||e.jsx("span",{className:"text-red-400 italic",children:"Unknown Supplier"})}),e.jsx("td",{className:"p-4 text-slate-800",children:(Ye==null?void 0:Ye.name)||e.jsx("span",{className:"text-slate-400 italic",children:"Uncategorized"})}),e.jsxs("td",{className:"p-4 text-right text-slate-800",children:[de,K.price.toFixed(2),K.type===Aa.MEASURED&&K.measurementUnit&&e.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["per ",K.measurementUnit]})]}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>ve(K),type:"button",className:"p-2 rounded bg-green-100 text-green-600 hover:bg-green-200 transition-colors",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ie=>U(ie,K.id),type:"button",className:"p-2 rounded bg-red-100 text-red-600 hover:bg-red-200 transition-colors",children:e.jsx(pA,{className:"w-4 h-4"})})]})})]},K.id)})})]})})]})]})},Fj=({onLogin:A,onNavigateToRegister:s,users:n})=>{const[r,l]=se.useState(""),[o,u]=se.useState(""),[d,h]=se.useState(""),m=v=>{v.preventDefault();const B=n.find(x=>x.username===r&&x.password===o);if(B){if(B.isActive===!1){h("Your account has been deactivated. Please contact an administrator.");return}h(""),A(B)}else h("Invalid username or password.")},w=()=>{alert("For account recovery, please contact the master administrator.")};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"InQuBu Pro"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Inventory & Quoting, Built for You"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-700",children:"Username"}),e.jsx(we,{id:"username",type:"text",value:r,onChange:v=>l(v.target.value),required:!0,className:"mt-1",autoComplete:"username"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"Password"}),e.jsx(we,{id:"password",type:"password",value:o,onChange:v=>u(v.target.value),required:!0,className:"mt-1",autoComplete:"current-password"})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"text-sm",children:e.jsx("button",{type:"button",onClick:w,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none focus:underline",children:"Forgot Username/Password?"})})}),d&&e.jsx("p",{className:"text-sm text-red-600 text-center",children:d}),e.jsx("div",{children:e.jsx(he,{type:"submit",variant:"primary",className:"w-full",children:"Login"})})]}),e.jsx("div",{className:"text-center text-sm",children:e.jsxs("p",{className:"text-slate-600",children:["Don't have an account?"," ",e.jsx("button",{type:"button",onClick:s,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none focus:underline",children:"Register here"})]})})]})})},Sj=({onRegisterSuccess:A,onNavigateToLogin:s,users:n,setUsers:r})=>{const[l,o]=se.useState(""),[u,d]=se.useState(""),[h,m]=se.useState(""),[w,v]=se.useState(""),[B,x]=se.useState(""),C=N=>{if(N.preventDefault(),h!==w){x("Passwords do not match.");return}if(n.some(Q=>Q.username.toLowerCase()===l.toLowerCase())){x("Username already exists.");return}if(u&&n.some(Q=>{var _;return((_=Q.email)==null?void 0:_.toLowerCase())===u.toLowerCase()})){x("Email address is already in use.");return}if(h.length<6){x("Password must be at least 6 characters long.");return}if(!u.trim()||!/^\S+@\S+\.\S+$/.test(u)){x("Please enter a valid email address.");return}const L=crypto.randomUUID(),F={id:L,username:l,email:u,password:h,role:"master",teamId:L,subscriptionStatus:"needs_selection",isActive:!0};r(Q=>[...Q,F]),alert("Registration successful! Please log in to choose your plan and start your free trial."),A()};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Create an Account"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Join InQuBu Pro to manage your business"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-700",children:"Username"}),e.jsx(we,{id:"username",type:"text",value:l,onChange:N=>o(N.target.value),required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700",children:"Email Address"}),e.jsx(we,{id:"email",type:"email",value:u,onChange:N=>d(N.target.value),required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"Password"}),e.jsx(we,{id:"password",type:"password",value:h,onChange:N=>m(N.target.value),required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700",children:"Confirm Password"}),e.jsx(we,{id:"confirmPassword",type:"password",value:w,onChange:N=>v(N.target.value),required:!0,className:"mt-1"})]}),B&&e.jsx("p",{className:"text-sm text-red-600 text-center",children:B}),e.jsx("div",{children:e.jsx(he,{type:"submit",variant:"primary",className:"w-full",children:"Register"})})]}),e.jsx("div",{className:"text-center text-sm",children:e.jsxs("p",{className:"text-slate-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:s,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none focus:underline",children:"Login here"})]})})]})})},Tu={sales:"view",purchasing:"view",management:"view",reports:"view",settings:"view",subscriptions:"none",jobBoard:"none"},Qj={sales:"none",purchasing:"none",management:"none",reports:"none",settings:"none",subscriptions:"none",jobBoard:"view"},Uj=[{key:"sales",label:"Sales (Invoices, Quotes, etc.)"},{key:"purchasing",label:"Purchasing (POs, Bills)"},{key:"management",label:"Management (Customers, Inventory, etc.)"},{key:"jobBoard",label:"Jobs Board"},{key:"reports",label:"Reports"},{key:"settings",label:"Settings"},{key:"subscriptions",label:"Subscription Management"}],Ej=({currentUser:A,masterUser:s,onSave:n,onCancel:r})=>{const[l,o]=se.useState(""),[u,d]=se.useState(""),[h,m]=se.useState(""),[w,v]=se.useState(""),[B,x]=se.useState(Tu),[C,N]=se.useState(!0),[L,F]=se.useState("full"),Q=!!A;se.useEffect(()=>{if(A){o(A.name||""),d(A.username),m(A.email||""),v("");const O=A.permissions||Tu;x(O),N(A.isActive!==!1);const k=O.jobBoard==="view"&&O.sales==="none"&&O.management==="none";F(k?"job_board_only":"full")}else o(""),d(""),m(""),v(""),x(Tu),N(!0),F("full")},[A]),se.useEffect(()=>{x(L==="job_board_only"?Qj:(A==null?void 0:A.permissions)||Tu)},[L]);const _=(O,k)=>{x(P=>({...P,[O]:k}))},te=O=>{if(O.preventDefault(),!u.trim()){alert("Username is required.");return}if(!Q&&!w){alert("Password is required for new users.");return}if(w&&w.length<6){alert("Password must be at least 6 characters long.");return}const k={id:(A==null?void 0:A.id)||crypto.randomUUID(),name:l.trim()?l.trim():void 0,username:u.trim(),email:h.trim(),password:w||(A==null?void 0:A.password)||"",role:"team-member",teamId:s.id,subscriptionStatus:"inherited",isActive:C,permissions:B};n(k)&&!Q&&(o(""),d(""),m(""),v(""),x(Tu),F("full"))};return e.jsxs("form",{onSubmit:te,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Full Name"}),e.jsx(we,{value:l,onChange:O=>o(O.target.value),placeholder:"e.g. John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Username"}),e.jsx(we,{value:u,onChange:O=>d(O.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Email"}),e.jsx(we,{type:"email",value:h,onChange:O=>m(O.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Password"}),e.jsx(we,{type:"password",value:w,onChange:O=>v(O.target.value),placeholder:Q?"Leave blank to keep unchanged":"",required:!Q})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Role Type"}),e.jsxs("div",{className:"flex gap-4 p-2 bg-slate-100 rounded-lg",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"roleType",value:"full",checked:L==="full",onChange:()=>F("full")})," Full Permissions"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"roleType",value:"job_board_only",checked:L==="job_board_only",onChange:()=>F("job_board_only")})," Jobs Board Only"]})]})]}),L==="full"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Permissions"}),e.jsx("div",{className:"space-y-4 rounded-lg border bg-slate-50 p-4",children:Uj.map(({key:O,label:k})=>e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("label",{className:"text-sm text-slate-800 col-span-2",children:k}),e.jsxs("div",{className:"flex items-center justify-around col-span-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx("input",{type:"radio",name:O,checked:B[O]==="none",onChange:()=>_(O,"none")})," No Access"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx("input",{type:"radio",name:O,checked:B[O]==="view",onChange:()=>_(O,"view")})," View Only"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx("input",{type:"radio",name:O,checked:B[O]==="edit",onChange:()=>_(O,"edit")})," Full Access"]})]})]},O))})]}),Q&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Account Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:C,onChange:O=>N(O.target.checked)}),e.jsx("label",{htmlFor:"isActive",className:"text-sm",children:"Account is Active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-8",children:[e.jsx(he,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:Q?"Save Changes":"Create User"})]})]})},Wv=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 21.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),Ij=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0h18M12 12.75h.008v.008H12v-.008Zm0 3h.008v.008H12v-.008Zm.008-3h.008v.008H12.008v-.008Zm-3 3h.008v.008H9v-.008Zm0-3h.008v.008H9v-.008Zm3 0h.008v.008H12v-.008Zm-3 0h.008v.008H9v-.008Zm6 3h.008v.008H15v-.008Zm0-3h.008v.008H15v-.008Z"})}),s2=({users:A,setUsers:s,currentUser:n,subscriptionPackages:r,onOpenBulkEmail:l,onOpenUserEmail:o})=>{const[u,d]=se.useState(!1),[h,m]=se.useState(null),[w,v]=se.useState(null),[B,x]=se.useState(7),C=(P,E)=>{s(D=>D.map(G=>G.id===P?{...G,...E}:G))},N=P=>{const E=A.find(D=>D.id===P);if(E){if(n.role==="admin"&&E.role==="master"){const D=A.filter(T=>T.teamId===P&&T.id!==P).length;if(!window.confirm(`Are you sure you want to delete the user "${E.username}", their ${D} team member(s), and all their associated business data? This action cannot be undone.`))return;const G=[];for(let T=0;T<localStorage.length;T++){const R=localStorage.key(T);R&&R.startsWith(`${P}_`)&&G.push(R)}G.forEach(T=>localStorage.removeItem(T)),s(T=>T.filter(R=>R.id!==P&&R.teamId!==P)),alert(`User "${E.username}" and all their data have been deleted.`)}else if(n.role==="master"){if(!window.confirm(`Are you sure you want to delete the user "${E.username}"? This action cannot be undone.`))return;s(D=>D.filter(G=>G.id!==P)),alert(`User "${E.username}" has been deleted.`)}}},L=()=>{m(null),d(!0)},F=P=>{m(P),d(!0)},Q=P=>A.some(E=>E.id!==P.id&&E.username.toLowerCase()===P.username.toLowerCase())?(alert("Username already exists."),!1):A.some(E=>E.id!==P.id&&E.email&&P.email&&E.email.toLowerCase()===P.email.toLowerCase())?(alert("Email already exists."),!1):(s(h?E=>E.map(D=>D.id===P.id?P:D):E=>[...E,P]),d(!1),m(null),!0),_=()=>{if(!w||B<=0)return;const P=w.trialEndDate?new Date(w.trialEndDate):new Date,E=new Date>P?new Date:P;E.setDate(E.getDate()+B),C(w.id,{trialEndDate:E.toISOString()}),alert(`Licence for ${w.username} extended by ${B} days.`),v(null),x(7)},te=P=>{const E=A.find(D=>D.id===P);E&&window.confirm(`Are you sure you want to grant lifetime access to "${E.username}"? This will give them permanent access and cannot be undone.`)&&(C(P,{subscriptionStatus:"lifetime_free",trialEndDate:void 0}),alert(`Lifetime access granted to ${E.username}.`))},O=()=>{const P=A.filter(E=>E.role==="master");return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"User Administration"}),e.jsxs(he,{variant:"outline",onClick:l,children:[e.jsx(_o,{className:"w-5 h-5 mr-2"}),"Bulk Email Users"]})]}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto space-y-4 pr-2",children:P.length===0?e.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:[e.jsx(qc,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No users have registered yet."})]}):P.map(E=>{const D=E.subscriptionStatus.startsWith("trial_"),G=E.trialEndDate?new Date(E.trialEndDate):null,T=G&&new Date>G,R=E.isActive!==!1;return e.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800 text-lg",children:E.name?e.jsxs(e.Fragment,{children:[E.name," ",e.jsxs("span",{className:"text-base font-normal text-slate-500",children:["(",E.username,")"]})]}):E.username}),e.jsx("p",{className:"text-sm text-slate-500",children:E.email||"No email provided"}),e.jsxs("p",{className:"text-sm text-slate-500 capitalize mt-1",children:["Status: ",e.jsx("span",{className:"font-medium",children:E.subscriptionStatus})]}),D&&G&&e.jsxs("p",{className:`text-xs ${T?"text-red-500":"text-slate-500"}`,children:["Licence Ends: ",G.toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-start sm:justify-end",children:[e.jsx(he,{size:"icon",variant:"ghost",onClick:()=>o(E),disabled:!E.email,title:"Email User",children:e.jsx(_o,{className:"w-5 h-5"})}),e.jsx(he,{size:"icon",variant:"ghost",onClick:()=>v(E),title:"Extend Licence",children:e.jsx(Ij,{className:"w-5 h-5"})}),e.jsxs(he,{variant:"outline",size:"sm",onClick:()=>te(E.id),children:[e.jsx(Wv,{className:"w-4 h-4 mr-2"})," Grant Lifetime Access"]}),e.jsx(he,{size:"icon",variant:"danger",onClick:()=>N(E.id),title:"Delete User",children:e.jsx(pA,{className:"w-5 h-5"})}),e.jsxs("label",{htmlFor:`active-toggle-${E.id}`,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:`active-toggle-${E.id}`,className:"sr-only peer",checked:R,onChange:()=>C(E.id,{isActive:!R})}),e.jsx("div",{className:"w-11 h-6 bg-red-500 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-slate-700",children:R?"Active":"Inactive"})]})]})]})},E.id)})})]})},k=()=>{const P=A.filter(V=>V.teamId===n.id&&V.id!==n.id),E=n.subscriptionStatus.replace(/^(trial_|package_)/,""),D=r.find(V=>V.id===E),G=n.role==="admin"||n.subscriptionStatus==="lifetime_free",T=(D==null?void 0:D.teamMemberLimit)??0,R=!G&&P.length>=T;return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Manage Your Team"}),!G&&e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["You are using ",P.length," / ",T," team member slots."]})]}),e.jsxs("div",{children:[e.jsxs(he,{variant:"primary",onClick:L,disabled:R,children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Create New Team Member"]}),R&&e.jsx("p",{className:"mt-2 text-sm text-red-600 text-right",children:"Please upgrade your plan to add more team members."})]})]}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto space-y-4 pr-2",children:P.length===0?e.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:[e.jsx(qc,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No team members have been created yet."})]}):P.map(V=>e.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800 text-lg",children:V.name?e.jsxs(e.Fragment,{children:[V.name," ",e.jsxs("span",{className:"text-base font-normal text-slate-500",children:["(",V.username,")"]})]}):V.username}),e.jsx("p",{className:"text-sm text-slate-500",children:V.email||"No email provided"}),e.jsxs("p",{className:"text-sm text-slate-500 capitalize mt-1",children:["Status: ",e.jsx("span",{className:"font-medium",children:V.isActive?"Active":"Deactivated"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>o(V),title:`Email ${V.username}`,disabled:!V.email,children:e.jsx(_o,{className:"w-5 h-5"})}),e.jsxs(he,{variant:"outline",onClick:()=>F(V),children:[e.jsx(ss,{className:"w-4 h-4 mr-2"})," Edit / Permissions"]}),e.jsx(he,{variant:"danger",size:"icon",onClick:()=>N(V.id),title:"Delete user",children:e.jsx(pA,{className:"w-5 h-5"})})]})]})},V.id))})]})};return e.jsxs(e.Fragment,{children:[n.role==="admin"?e.jsx(O,{}):e.jsx(k,{}),e.jsx(Mn,{isOpen:u,onClose:()=>d(!1),title:h?"Edit Team Member":"Create New Team Member",children:e.jsx(Ej,{currentUser:h,onSave:Q,onCancel:()=>d(!1),masterUser:n})}),e.jsx(Mn,{isOpen:!!w,onClose:()=>v(null),title:`Extend Licence for ${w==null?void 0:w.username}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Enter the number of days to extend the licence period. This will be added to the current end date, or from today if the licence has expired."}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"extensionDays",className:"block text-sm font-medium text-slate-700",children:"Days to Add"}),e.jsx(we,{id:"extensionDays",type:"number",min:"1",value:B,onChange:P=>x(parseInt(P.target.value,10)||1)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(he,{variant:"outline",onClick:()=>v(null),children:"Cancel"}),e.jsx(he,{variant:"primary",onClick:_,children:"Extend Licence"})]})]})})]})},Lj=({currentUser:A,setCurrentUser:s,users:n,setUsers:r,packages:l})=>{const o=A.subscriptionStatus.startsWith("trial_"),u=o&&A.trialEndDate&&new Date>new Date(A.trialEndDate),d=A.subscriptionStatus.replace(/^(trial_|package_)/,""),h=l.find(x=>x.id===d),m=()=>{if(!o||!A.trialEndDate||u)return 0;const x=new Date(A.trialEndDate),C=new Date,N=x.getTime()-C.getTime(),L=Math.ceil(N/(1e3*60*60*24));return L>0?L:0},w=x=>{const C=l.find(N=>N.id===x);if(C)if(C.stripeLink)window.location.href=C.stripeLink;else{if(!window.confirm(`Are you sure you want to switch to the ${C.name} package?`))return;const N={...A,subscriptionStatus:`package_${x}`,trialEndDate:void 0};s(N),r(L=>L.map(F=>F.id===A.id?N:F)),alert("Subscription changed successfully! Your new features are now available.")}},v=()=>{if(!h)return null;let x=h.name,C="";const N=m();return o?(x+=" (Trial)",C=u?"Your free trial has expired. Please upgrade to continue.":`You have ${N} day(s) remaining.`):C=`You are currently subscribed to the ${h.name} plan.`,e.jsxs("div",{className:`p-6 rounded-lg mb-8 ${u?"bg-red-50 border-red-200 border":"bg-blue-50 border-blue-200 border"}`,children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:["Your Current Plan: ",x]}),e.jsx("p",{className:"text-slate-600 mt-1",children:C})]})},B=x=>{const C=x.id===d&&!o,N=x.id===d&&o;return e.jsxs("div",{className:`border-2 rounded-lg p-6 flex flex-col ${C||N?"border-blue-500":"border-slate-200"}`,children:[e.jsx("h4",{className:"text-2xl font-bold text-slate-900",children:x.name}),e.jsx("p",{className:"text-slate-500 mb-4",children:x.description}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("span",{className:"text-4xl font-extrabold text-slate-900",children:["",x.price.toFixed(2)]}),e.jsx("span",{className:"text-slate-500",children:"/ week"}),e.jsxs("span",{className:"ml-2 line-through text-slate-400",children:["",x.originalPrice.toFixed(2)]})]}),e.jsx("ul",{className:"space-y-3 mb-8 text-slate-600 flex-grow",children:x.features.map((L,F)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(td,{className:"w-5 h-5 text-green-500 mr-2 shrink-0"})," ",L]},F))}),C?e.jsx(he,{variant:"outline",disabled:!0,className:"w-full",children:"Current Plan"}):e.jsx(he,{variant:"primary",onClick:()=>w(x.id),className:"w-full",children:N?"Activate Full Plan":`Switch to ${x.name}`})]},x.id)};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-slate-800",children:"Subscription Management"}),v(),e.jsx("h3",{className:"text-2xl font-semibold mb-6 text-slate-800 text-center",children:"Choose Your Plan"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:l.map(B)})]})},Dj=({currentUser:A,setCurrentUser:s,users:n,setUsers:r,packages:l})=>{const o=d=>{const h=l.find(m=>m.id===d);if(h)if(h.stripeLink)window.location.href=h.stripeLink;else{const m=new Date;m.setDate(m.getDate()+7);const w={...A,subscriptionStatus:`trial_${d}`,trialEndDate:m.toISOString()},v=n.map(B=>B.id===A.id?w:B);r(v),s(w)}},u=d=>e.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-6 flex flex-col",children:[e.jsx("h4",{className:"text-2xl font-bold text-slate-900",children:d.name}),e.jsx("p",{className:"text-slate-500 mb-4",children:d.description}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("span",{className:"text-4xl font-extrabold text-slate-900",children:["",d.price.toFixed(2)]}),e.jsx("span",{className:"text-slate-500",children:"/ week"}),e.jsxs("span",{className:"ml-2 line-through text-slate-400",children:["",d.originalPrice.toFixed(2)]})]}),e.jsx("ul",{className:"space-y-3 mb-8 text-slate-600 flex-grow",children:d.features.map((h,m)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(td,{className:"w-5 h-5 text-green-500 mr-2 shrink-0"})," ",h]},m))}),e.jsx(he,{variant:"primary",onClick:()=>o(d.id),className:"w-full",children:d.stripeLink?`Subscribe to ${d.name}`:`Start ${d.name} Trial`})]},d.id);return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100",children:e.jsxs("div",{className:"w-full max-w-4xl p-8 space-y-8 bg-white rounded-lg shadow-lg text-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-slate-900",children:["Welcome to InQuBu Pro, ",A.username,"!"]}),e.jsx("p",{className:"mt-2 text-lg text-slate-600",children:"Choose a plan to start your 7-day free trial."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-left",children:l.map(u)})]})})},Tj=({currentUser:A,onUpgradeClick:s})=>{const r=(()=>{if(!A.trialEndDate)return 0;const d=new Date(A.trialEndDate),h=new Date,m=d.getTime()-h.getTime();return m<0?0:Math.ceil(m/(1e3*60*60*24))})(),l=r<=0,o=l?"bg-red-600 text-white":"bg-blue-600 text-white",u=l?"Your 7-day free trial has expired. Please upgrade to continue using InQuBu Pro.":`You are on a 7-day free trial. You have ${r} day${r!==1?"s":""} remaining.`;return e.jsxs("div",{className:`w-full p-3 flex items-center justify-center text-sm font-medium ${o} gap-4`,children:[e.jsx("p",{className:"flex-grow text-center",children:u}),e.jsx(he,{onClick:s,className:l?"!bg-white !text-red-600 hover:!bg-red-100":"!bg-white !text-blue-600 hover:!bg-blue-100",children:"Upgrade Now"})]})},n2={name:"",description:"",price:0,originalPrice:0,features:["New Feature"],stripeLink:"",allowFixedPrice:!0,allowMeasuredPrice:!1,teamMemberLimit:0,permissions:{}},Hj=[{group:"General",key:"dashboard",label:"Dashboard"},{group:"Job Costing",key:"job-builder",label:"Job Builder"},{group:"Job Costing",key:"manage-jobs",label:"Manage Jobs (Costing)"},{group:"Sales",key:"manage-invoices",label:"Invoices"},{group:"Sales",key:"manage-quotes",label:"Quotes"},{group:"Sales",key:"manage-drafts",label:"Drafts"},{group:"Sales",key:"manage-daily-takings",label:"Daily Takings"},{group:"Sales",key:"manage-credit-notes",label:"Credit Notes"},{group:"Purchasing",key:"manage-purchase-orders",label:"Purchase Orders"},{group:"Purchasing",key:"manage-bills",label:"Bills"},{group:"Customers & Suppliers",key:"manage-customers",label:"Customers"},{group:"Customers & Suppliers",key:"manage-suppliers",label:"Suppliers"},{group:"Management",key:"manage-inventory",label:"Inventory"},{group:"Management",key:"manage-supplier-inventory",label:"Supplier Inventory"},{group:"Management",key:"job-board",label:"Jobs Board"},{group:"Management",key:"manage-chart-of-accounts",label:"Chart of Accounts"},{group:"Management",key:"reports",label:"Reports"},{group:"System",key:"settings",label:"Settings"}],Mj=Hj.reduce((A,s)=>((A[s.group]=A[s.group]||[]).push(s),A),{}),Oj=({packages:A,setPackages:s,users:n})=>{const[r,l]=se.useState([]),[o,u]=se.useState(!1),[d,h]=se.useState(n2);se.useEffect(()=>{l(JSON.parse(JSON.stringify(A)).map(O=>({...O,teamMemberLimit:O.teamMemberLimit??0,permissions:O.permissions||{}})))},[A]);const m=(O,k,P)=>{l(E=>E.map(D=>D.id===O?{...D,[k]:P}:D))},w=(O,k,P)=>{l(E=>E.map(D=>D.id===O?{...D,permissions:{...D.permissions||{},[k]:P}}:D))},v=(O,k,P)=>{l(E=>E.map(D=>{if(D.id!==O)return D;const G=[...D.features];return G[k]=P,{...D,features:G}}))},B=O=>{l(k=>k.map(P=>P.id===O?{...P,features:[...P.features,""]}:P))},x=(O,k)=>{l(P=>P.map(E=>{if(E.id!==O)return E;const D=E.features.filter((G,T)=>T!==k);return{...E,features:D}}))},C=()=>{s(r),alert("Package settings have been saved!")},N=(O,k)=>{h(P=>({...P,[O]:k}))},L=(O,k)=>{h(P=>({...P,permissions:{...P.permissions||{},[O]:k}}))},F=()=>{if(!d.name.trim()){alert("Please enter a package name.");return}const O={...d,id:crypto.randomUUID()};s(k=>[...k,O]),h(n2),u(!1)},Q=O=>{const k=A.find(E=>E.id===O);if(!k)return;if(n.some(E=>E.subscriptionStatus===`package_${O}`||E.subscriptionStatus===`trial_${O}`)){alert(`Cannot delete the "${k.name}" package because one or more users are currently subscribed to it.`);return}window.confirm(`Are you sure you want to delete the "${k.name}" package? This action cannot be undone.`)&&s(E=>E.filter(D=>D.id!==O))},_=(O,k)=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Page Access Permissions"}),e.jsx("div",{className:"space-y-4 rounded-lg border bg-white p-4",children:Object.entries(Mj).map(([P,E])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-600 mb-2",children:P}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:E.map(({key:D,label:G})=>e.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-800",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:(O==null?void 0:O[D])??!1,onChange:T=>k(D,T.target.checked)}),G]},D))})]},P))})]}),te=O=>O?e.jsxs("div",{className:"bg-slate-50 p-6 rounded-lg border",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-800 mb-4",children:[O.name," Package"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Package Name"}),e.jsx(we,{value:O.name,onChange:k=>m(O.id,"name",k.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Description"}),e.jsx(HA,{value:O.description,onChange:k=>m(O.id,"description",k.target.value),rows:2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Price ()"}),e.jsx(we,{type:"number",value:O.price,onChange:k=>m(O.id,"price",parseFloat(k.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Original Price ()"}),e.jsx(we,{type:"number",value:O.originalPrice,onChange:k=>m(O.id,"originalPrice",parseFloat(k.target.value)||0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Package Type Permissions"}),e.jsxs("div",{className:"flex items-center gap-4 bg-white p-2 rounded-md border",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-slate-800",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:O.allowFixedPrice??!1,onChange:k=>m(O.id,"allowFixedPrice",k.target.checked)}),"Allow Fixed Price"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-slate-800",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:O.allowMeasuredPrice??!1,onChange:k=>m(O.id,"allowMeasuredPrice",k.target.checked)}),"Allow Measured Unit Price"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Team Member Limit"}),e.jsx(we,{type:"number",min:"0",value:O.teamMemberLimit,onChange:k=>m(O.id,"teamMemberLimit",parseInt(k.target.value,10)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Stripe Payment Link (Optional)"}),e.jsx(we,{type:"url",placeholder:"https://buy.stripe.com/...",value:O.stripeLink||"",onChange:k=>m(O.id,"stripeLink",k.target.value)})]}),_(O.permissions||{},(k,P)=>w(O.id,k,P)),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Features"}),e.jsx("div",{className:"space-y-2",children:O.features.map((k,P)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{value:k,onChange:E=>v(O.id,P,E.target.value)}),e.jsx(he,{size:"icon",variant:"ghost",type:"button",onClick:()=>x(O.id,P),children:e.jsx(pA,{className:"w-5 h-5 text-red-500"})})]},P))}),e.jsxs(he,{variant:"outline",type:"button",onClick:()=>B(O.id),className:"mt-2",children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Feature"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:e.jsxs(he,{variant:"danger",onClick:()=>Q(O.id),type:"button",children:[e.jsx(pA,{className:"w-5 h-5 mr-2"}),"Delete Package"]})})]},O.id):null;return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Package Settings"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{variant:"outline",onClick:()=>u(!0),children:"Create New Package"}),e.jsx(he,{variant:"primary",onClick:C,children:"Save All Changes"})]})]}),o&&e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-4",children:"New Package"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Package Name"}),e.jsx(we,{value:d.name,onChange:O=>N("name",O.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Description"}),e.jsx(HA,{value:d.description,onChange:O=>N("description",O.target.value),rows:2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Price ()"}),e.jsx(we,{type:"number",value:d.price,onChange:O=>N("price",parseFloat(O.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Original Price ()"}),e.jsx(we,{type:"number",value:d.originalPrice,onChange:O=>N("originalPrice",parseFloat(O.target.value)||0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Package Type Permissions"}),e.jsxs("div",{className:"flex items-center gap-4 bg-white p-2 rounded-md border",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-slate-800",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:d.allowFixedPrice??!1,onChange:O=>N("allowFixedPrice",O.target.checked)}),"Allow Fixed Price"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-slate-800",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:d.allowMeasuredPrice??!1,onChange:O=>N("allowMeasuredPrice",O.target.checked)}),"Allow Measured Unit Price"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Team Member Limit"}),e.jsx(we,{type:"number",min:"0",value:d.teamMemberLimit,onChange:O=>N("teamMemberLimit",parseInt(O.target.value,10)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Stripe Payment Link (Optional)"}),e.jsx(we,{type:"url",placeholder:"https://buy.stripe.com/...",value:d.stripeLink,onChange:O=>N("stripeLink",O.target.value)})]}),_(d.permissions||{},L),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(he,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(he,{variant:"primary",onClick:F,children:"Save New Package"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:r.map(O=>te(O))})]})},kj=({invoices:A,bills:s,creditNotes:n,marketplaceStatements:r,settings:l,onDownloadPdf:o})=>{const[u,d]=se.useState(new Date().toISOString().split("T")[0]),h=l.currencySymbol||"",m=x=>{const C=x.toFixed(2);return x<0?`-${h}${Math.abs(x).toFixed(2)}`:`${h}${C}`},w=se.useMemo(()=>{const x=u?new Date(u):new Date;x.setHours(23,59,59,999);const C=L=>new Date(L.state.issueDate)<=x,N=L=>new Date(L.endDate)<=x;return{invoices:A.filter(C),bills:s.filter(C),creditNotes:n.filter(C),marketplaceStatements:r.filter(N)}},[A,s,n,r,u]),v=se.useMemo(()=>{const x=u?new Date(u):new Date;x.setHours(23,59,59,999);const C=O=>O?O.filter(k=>new Date(k.date)<=x):[],N=w.invoices.flatMap(O=>C(O.payments)).reduce((O,k)=>O+k.amount,0),L=w.marketplaceStatements.reduce((O,k)=>O+k.payouts,0),F=N+L;let Q=w.invoices.reduce((O,k)=>{const P=C(k.payments).reduce((E,D)=>E+D.amount,0);return O+(k.total-P)},0);const _=w.creditNotes.reduce((O,k)=>O+k.total,0);Q-=_;const te=w.bills.reduce((O,k)=>{const P=C(k.payments).reduce((E,D)=>E+D.amount,0);return O+(k.total-P)},0);return{allIncomingTransactions:F,accountsReceivable:Q,accountsPayable:te}},[w.invoices,w.bills,w.creditNotes,w.marketplaceStatements,u]),B=()=>{const x=v.allIncomingTransactions+v.accountsReceivable-v.accountsPayable,C=[{Item:"FINANCIAL POSITION",Value:`As of ${u}`},{},{Item:"All Incoming Transactions",Value:v.allIncomingTransactions.toFixed(2)},{Item:"To Receive (Accounts Receivable)",Value:v.accountsReceivable.toFixed(2)},{Item:"To Be Paid Out (Accounts Payable)",Value:`-${v.accountsPayable.toFixed(2)}`},{},{Item:"Total",Value:x.toFixed(2)}];ks(`Financial_Position_as_of_${u}.csv`,C)};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-8 bg-slate-50 p-4 rounded-lg items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"asOfDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"As of Date"}),e.jsx(we,{id:"asOfDate",type:"date",value:u,onChange:x=>d(x.target.value)})]}),e.jsx("div",{}),e.jsxs(he,{variant:"primary",onClick:B,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs(he,{variant:"primary",onClick:()=>o({reportData:v,asOfDate:u,settings:l},"balance-sheet-report"),children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"PDF"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-lg bg-slate-100",children:[e.jsx("h3",{className:"text-xl font-semibold text-center mb-4 text-slate-800",children:"Financial Position Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"All Incoming Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:m(v.allIncomingTransactions)}),e.jsx("p",{className:"text-xs text-slate-500",children:"From invoice & marketplace payments"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"To Receive (Accounts Receivable)"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:m(v.accountsReceivable)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Outstanding on invoices"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:"To Be Paid Out (Accounts Payable)"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:m(v.accountsPayable)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Outstanding on bills"})]})]})]}),e.jsx("div",{className:"p-6 rounded-lg bg-slate-100",children:e.jsxs("div",{className:"text-center bg-indigo-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-700",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900",children:m(v.allIncomingTransactions+v.accountsReceivable-v.accountsPayable)}),e.jsx("p",{className:"text-xs text-slate-500",children:"(Incoming + Receivable - Payable)"})]})})]})]})},_j=({invoices:A,bills:s,purchaseOrders:n,marketplaceStatements:r,settings:l,onDownloadPdf:o})=>{const[u,d]=se.useState(""),[h,m]=se.useState(""),w=l.currencySymbol||"",v=C=>`${w}${C.toFixed(2)}`,B=se.useMemo(()=>{const C=D=>{const G=new Date(D),T=u?new Date(u):null,R=h?new Date(h):null;return T&&T.setHours(0,0,0,0),R&&R.setHours(23,59,59,999),!(T&&G<T||R&&G>R)},N=A.flatMap(D=>D.payments||[]),L=N.filter(D=>C(D.date)).reduce((D,G)=>D+G.amount,0),F=r.filter(D=>C(D.endDate)).reduce((D,G)=>D+G.orders+(G.adjustments>0?G.adjustments:0),0),Q=L+F,_={cash:N.filter(D=>C(D.date)&&D.method==="Cash").reduce((D,G)=>D+G.amount,0),card:N.filter(D=>C(D.date)&&D.method==="Card Payment").reduce((D,G)=>D+G.amount,0),bank:N.filter(D=>C(D.date)&&D.method==="Bank Transfer").reduce((D,G)=>D+G.amount,0),online:N.filter(D=>C(D.date)&&D.method==="Online Payment").reduce((D,G)=>D+G.amount,0)+F},te=s.flatMap(D=>D.payments||[]),O=n.flatMap(D=>D.payments||[]),P=[...te,...O].filter(D=>C(D.date)).reduce((D,G)=>D+G.amount,0),E=Q-P;return{cashInflows:Q,cashOutflows:P,netCashFlow:E,incomeByMethod:_}},[A,s,n,r,u,h]),x=()=>{const C=[{Item:"CASH / CARD SUMMARY",Value:""},{Item:"Period",Value:`${u||"Start"} to ${h||"End"}`},{},{Item:"Cash Inflows",Value:B.cashInflows.toFixed(2)},{Item:"...from Cash",Value:B.incomeByMethod.cash.toFixed(2)},{Item:"...from Card",Value:B.incomeByMethod.card.toFixed(2)},{Item:"...from Bank Transfer",Value:B.incomeByMethod.bank.toFixed(2)},{Item:"...from Online Payment",Value:B.incomeByMethod.online.toFixed(2)},{Item:"Cash Outflows (from Bill/PO Payments)",Value:B.cashOutflows.toFixed(2)},{},{Item:"Net Cash Flow",Value:B.netCashFlow.toFixed(2)}];ks(`Cash_Summary_${u||"start"}_to_${h||"end"}.csv`,C)};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-8 bg-slate-50 p-4 rounded-lg items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Start Date"}),e.jsx(we,{id:"startDate",type:"date",value:u,onChange:C=>d(C.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"End Date"}),e.jsx(we,{id:"endDate",type:"date",value:h,onChange:C=>m(C.target.value)})]}),e.jsxs(he,{variant:"primary",onClick:x,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs(he,{variant:"primary",onClick:()=>o({reportData:B,startDate:u,endDate:h,settings:l},"cash-flow-report"),children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"PDF"]})]}),e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"p-6 rounded-lg bg-slate-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Cash Inflows"}),e.jsx("p",{className:"text-2xl font-bold text-green-900 mb-2",children:v(B.cashInflows)}),e.jsxs("div",{className:"text-xs text-left space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Cash:"})," ",v(B.incomeByMethod.cash)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Card:"})," ",v(B.incomeByMethod.card)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bank:"})," ",v(B.incomeByMethod.bank)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Online:"})," ",v(B.incomeByMethod.online)]})]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:"Cash Outflows"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:v(B.cashOutflows)}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"From Bill & PO Payments"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Net Cash Flow"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:v(B.netCashFlow)}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"For the selected period"})]})]})})})]})},Rj=({invoices:A,purchaseOrders:s,bills:n,inventory:r,creditNotes:l,marketplaceStatements:o,settings:u,onDownloadPdf:d})=>{const[h,m]=se.useState(""),[w,v]=se.useState(""),B=u.currencySymbol||"",x=F=>{const Q=F.toFixed(2);return F<0?`-${B}${Math.abs(F).toFixed(2)}`:`${B}${Q}`},C=se.useMemo(()=>{const F=Q=>{const _="state"in Q?new Date(Q.state.issueDate):new Date(Q.startDate),te=h?new Date(h):null,O=w?new Date(w):null;return te&&te.setHours(0,0,0,0),O&&O.setHours(23,59,59,999),!(te&&_<te||O&&_>O)};return{invoices:A.filter(F),purchaseOrders:s.filter(F),bills:n.filter(F),creditNotes:l.filter(F)}},[A,s,n,l,o,h,w]),N=se.useMemo(()=>{let F=0,Q=0,_=0,te=0;C.invoices.forEach(D=>{D.state.lineItems.forEach(G=>{let T;const R=r.find(ue=>ue.id===G.inventoryItemId);R?T=Hn(R,G):T=(G.price||0)*G.quantity;const V=G.discount.type==="percentage"?T*(G.discount.value/100):G.discount.value,Z=T-V;if(D.state.taxMode==="inclusive"){const ue=Z/(1+G.vatRate/100);F+=ue,Q+=Z-ue}else F+=Z,Q+=Z*(G.vatRate/100)})}),C.creditNotes.forEach(D=>{D.state.lineItems.forEach(G=>{let T;const R=r.find(ue=>ue.id===G.inventoryItemId);R?T=Hn(R,G):T=(G.price||0)*G.quantity;const V=G.discount.type==="percentage"?T*(G.discount.value/100):G.discount.value,Z=T-V;if(D.state.taxMode==="inclusive"){const ue=Z/(1+G.vatRate/100);F-=ue,Q-=Z-ue}else F-=Z,Q-=Z*(G.vatRate/100)})});const O=(D,G)=>{let T=0,R=0;return D.forEach(V=>{const Z=V.quantity*V.unitPrice;if(G==="inclusive"){const ue=Z/(1+V.vatRate/100);T+=ue,R+=Z-ue}else T+=Z,R+=Z*(V.vatRate/100)}),{subtotal:T,vatTotal:R}};C.purchaseOrders.forEach(D=>{const{subtotal:G,vatTotal:T}=O(D.state.lineItems,D.state.taxMode);_+=G,te+=T}),C.bills.forEach(D=>{const{subtotal:G,vatTotal:T}=O(D.state.lineItems,D.state.taxMode);_+=G,te+=T});const k=F-_,P=Q-te,E=k-P;return{totalRevenue:F,cogs:_,grossProfit:k,vatOnSales:Q,vatOnPurchases:te,netVatPosition:P,netProfit:E}},[C,r]),L=()=>{const F=[{Item:"PROFIT & LOSS REPORT",Value:""},{Item:"Period",Value:`${h||"Start"} to ${w||"End"}`},{Item:"",Value:""},{Item:"Total Revenue (ex. VAT)",Value:N.totalRevenue.toFixed(2)},{Item:"Cost of Goods Sold (ex. VAT)",Value:`-${N.cogs.toFixed(2)}`},{Item:"Gross Profit",Value:N.grossProfit.toFixed(2)},{Item:"",Value:""},{Item:"VAT SUMMARY",Value:""},{Item:"VAT on Sales (Payable)",Value:N.vatOnSales.toFixed(2)},{Item:"VAT on Purchases (Reclaimable)",Value:`-${N.vatOnPurchases.toFixed(2)}`},{Item:"Net VAT Position",Value:N.netVatPosition.toFixed(2)},{Item:"",Value:""},{Item:"Net Profit/Loss",Value:N.netProfit.toFixed(2)}];ks(`Profit_Loss_Report_${h||"start"}_to_${w||"end"}.csv`,F)};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-8 bg-slate-50 p-4 rounded-lg items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Start Date"}),e.jsx(we,{id:"startDate",type:"date",value:h,onChange:F=>m(F.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"End Date"}),e.jsx(we,{id:"endDate",type:"date",value:w,onChange:F=>v(F.target.value)})]}),e.jsxs(he,{variant:"primary",onClick:L,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs(he,{variant:"primary",onClick:()=>d({reportData:N,startDate:h,endDate:w,settings:u},"pnl-report"),children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"PDF"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Business Profit & Loss"}),e.jsxs("div",{className:"p-6 rounded-lg bg-slate-100",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:x(N.totalRevenue)})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:"Cost of Goods Sold"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:x(N.cogs)})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Gross Profit"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:x(N.grossProfit)})]})]})]}),e.jsxs("div",{className:"p-6 rounded-lg bg-slate-100",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"VAT Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-orange-700",children:"VAT on Sales (Payable)"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:x(N.vatOnSales)})]}),e.jsxs("div",{className:"bg-teal-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-teal-700",children:"VAT on Purchases (Reclaimable)"}),e.jsx("p",{className:"text-2xl font-bold text-teal-900",children:x(N.vatOnPurchases)})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-700",children:"Net VAT Position"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900",children:x(N.netVatPosition)}),e.jsx("p",{className:"text-xs text-indigo-600",children:N.netVatPosition>=0?"Amount you owe":"Amount you can reclaim"})]})]})]}),e.jsxs("div",{className:"p-6 rounded-lg bg-slate-100",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Net Profit / Loss"}),e.jsxs("div",{className:"text-center bg-purple-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Net Profit/Loss"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:x(N.netProfit)}),e.jsx("p",{className:"text-xs text-slate-500",children:"(Gross Profit - Net VAT Position)"})]})]})]})]})},Pj=({customers:A,invoices:s,creditNotes:n,settings:r,onDownloadPdf:l,onViewHistory:o})=>{const[u,d]=se.useState(""),[h,m]=se.useState(""),[w,v]=se.useState(""),B=r.currencySymbol||"",x=Q=>`${B}${Q.toFixed(2)}`,C=se.useMemo(()=>{const Q=[...s,...n],_=new Set;return(h||w)&&Q.forEach(O=>{const k=new Date(O.state.issueDate),P=h?new Date(h):null,E=w?new Date(w):null;P&&P.setHours(0,0,0,0),E&&E.setHours(23,59,59,999);let D=!0;P&&k<P&&(D=!1),E&&k>E&&(D=!1),D&&_.add(O.state.customerName)}),(h||w?A.filter(O=>_.has(O.name)):A).map(O=>{const k=s.filter(V=>V.state.customerName===O.name),P=n.filter(V=>V.state.customerName===O.name),E=k.reduce((V,Z)=>V+Z.total,0),D=P.reduce((V,Z)=>V+Z.total,0),G=E-D,T=k.reduce((V,Z)=>V+Z.payments.reduce((ue,S)=>ue+S.amount,0),0),R=G-T;return{id:O.id,name:O.name,totalBilled:G,outstandingBalance:R}})},[A,s,n,h,w]),N=se.useMemo(()=>{if(!u)return C;const Q=u.toLowerCase();return C.filter(_=>_.name.toLowerCase().includes(Q))},[C,u]),L=()=>{const Q=N.map(_=>({"Customer Name":_.name,"Net Billed":_.totalBilled.toFixed(2),"Outstanding Balance":_.outstandingBalance.toFixed(2)}));ks(`Income_by_Customer_${new Date().toISOString().split("T")[0]}.csv`,Q)},F=()=>{l({reportData:N,settings:r,startDate:h,endDate:w},"income-by-customer-report")};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-8 bg-slate-50 p-4 rounded-lg items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Start Date"}),e.jsx(we,{id:"startDate",type:"date",value:h,onChange:Q=>m(Q.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"End Date"}),e.jsx(we,{id:"endDate",type:"date",value:w,onChange:Q=>v(Q.target.value)})]}),e.jsxs(he,{variant:"primary",onClick:L,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs(he,{variant:"primary",onClick:F,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"PDF"]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(we,{id:"customerSearch",value:u,onChange:Q=>d(Q.target.value),placeholder:"Search displayed customers by name..."})}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[e.jsxs("table",{className:"w-full text-left table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600 text-sm",children:[e.jsx("th",{className:"p-3 font-semibold",children:"Customer Name"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Net Billed"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Outstanding Balance"})]})}),e.jsx("tbody",{children:N.map(Q=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-3 text-slate-800",children:Q.name}),e.jsx("td",{className:"p-3 text-right text-slate-800 cursor-pointer hover:underline hover:text-blue-600",onClick:()=>o(Q.id),title:`View statement for ${Q.name}`,children:x(Q.totalBilled)}),e.jsx("td",{className:"p-3 text-right font-medium text-red-600",children:x(Q.outstandingBalance)})]},Q.id))})]}),N.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-8",children:"No customers match your search for the selected period."})]})]})},Kj=({suppliers:A,purchaseOrders:s,bills:n,settings:r,onDownloadPdf:l})=>{const[o,u]=se.useState(""),[d,h]=se.useState(""),[m,w]=se.useState(""),v=r.currencySymbol||"",B=F=>`${v}${F.toFixed(2)}`,x=se.useMemo(()=>{const F=new Set;return(d||m)&&[...s,...n].forEach(te=>{if(!te.state.supplierId&&!te.state.supplierName)return;const O=new Date(te.state.issueDate),k=d?new Date(d):null,P=m?new Date(m):null;k&&k.setHours(0,0,0,0),P&&P.setHours(23,59,59,999);let E=!0;if(k&&O<k&&(E=!1),P&&O>P&&(E=!1),E){const D=A.find(G=>G.id===te.state.supplierId||G.name===te.state.supplierName);D&&F.add(D.id)}}),(d||m?A.filter(_=>F.has(_.id)):A).map(_=>{const te=s.filter(D=>D.state.supplierId===_.id||D.state.supplierName===_.name),O=n.filter(D=>D.state.supplierId===_.id||D.state.supplierName===_.name),k=te.reduce((D,G)=>D+G.total,0)+O.reduce((D,G)=>D+G.total,0),P=O.reduce((D,G)=>D+(G.payments||[]).reduce((T,R)=>T+R.amount,0),0)+te.reduce((D,G)=>D+(G.payments||[]).reduce((T,R)=>T+R.amount,0),0),E=k-P;return{id:_.id,name:_.name,totalBilled:k,totalPaid:P,outstanding:E}})},[A,s,n,d,m]),C=se.useMemo(()=>{if(!o)return x;const F=o.toLowerCase();return x.filter(Q=>Q.name.toLowerCase().includes(F))},[x,o]),N=()=>{const F=C.map(Q=>({"Supplier Name":Q.name,"Total Billed":Q.totalBilled.toFixed(2),"Total Paid":Q.totalPaid.toFixed(2),"Outstanding Balance":Q.outstanding.toFixed(2)}));ks(`Paid_to_Suppliers_${new Date().toISOString().split("T")[0]}.csv`,F)},L=()=>{l({reportData:C,settings:r,startDate:d,endDate:m},"paid-to-suppliers-report")};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-8 bg-slate-50 p-4 rounded-lg items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Start Date"}),e.jsx(we,{id:"startDate",type:"date",value:d,onChange:F=>h(F.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"End Date"}),e.jsx(we,{id:"endDate",type:"date",value:m,onChange:F=>w(F.target.value)})]}),e.jsxs(he,{variant:"primary",onClick:N,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs(he,{variant:"primary",onClick:L,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"PDF"]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(we,{id:"supplierSearch",value:o,onChange:F=>u(F.target.value),placeholder:"Search displayed suppliers by name..."})}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[e.jsxs("table",{className:"w-full text-left table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600 text-sm",children:[e.jsx("th",{className:"p-3 font-semibold",children:"Supplier Name"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Total Billed"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Total Paid"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Outstanding Balance"})]})}),e.jsx("tbody",{children:C.map(F=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-3 text-slate-800",children:F.name}),e.jsx("td",{className:"p-3 text-right text-slate-800",children:B(F.totalBilled)}),e.jsx("td",{className:"p-3 text-right font-medium text-green-600",children:B(F.totalPaid)}),e.jsx("td",{className:"p-3 text-right font-medium text-red-600",children:B(F.outstanding)})]},F.id))})]}),C.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-8",children:"No suppliers match your search for the selected period."})]})]})},Vj=({invoices:A,bills:s,purchaseOrders:n,marketplaceStatements:r,marketplaceAccounts:l,settings:o,onDownloadPdf:u,inventory:d})=>{const[h,m]=se.useState(""),[w,v]=se.useState(""),[B,x]=se.useState(0),C=o.currencySymbol||"",N=_=>`${C}${_.toFixed(2)}`,L=se.useMemo(()=>{const _=M=>{const Y=new Date(M),le=h?new Date(h):null,de=w?new Date(w):null;return le&&le.setHours(0,0,0,0),de&&de.setHours(23,59,59,999),!(le&&Y<le||de&&Y>de)},te=A.flatMap(M=>(M.payments||[]).filter(Y=>_(Y.date)).map(Y=>({date:Y.date,description:`Payment from ${M.state.customerName} (Inv #${M.state.invoiceNumber})`,amount:Y.amount,type:"income",method:Y.method}))),O=s.flatMap(M=>(M.payments||[]).filter(Y=>_(Y.date)).map(Y=>({date:Y.date,description:`Payment to ${M.state.supplierName} (Bill Ref #${M.state.reference})`,amount:-Y.amount,type:"expense",method:Y.method}))),k=n.flatMap(M=>(M.payments||[]).filter(Y=>_(Y.date)).map(Y=>({date:Y.date,description:`Payment to ${M.state.supplierName} (PO #${M.state.poNumber})`,amount:-Y.amount,type:"expense",method:Y.method}))),P=r.filter(M=>_(M.endDate)&&M.payouts!==0).map(M=>{const Y=l.find(de=>de.id===M.marketplaceAccountId),le=Y?`${Y.storeName} (${Y.marketplace})`:"Marketplace";return{date:M.endDate,description:`Payout from ${le}`,amount:M.payouts,type:"income",method:"Online Payment"}}),E=[...te,...O,...k,...P].sort((M,Y)=>new Date(M.date).getTime()-new Date(Y.date).getTime()),D=(M,Y)=>{let le=0;return M.forEach(de=>{const J=de.quantity*de.unitPrice;if(Y==="inclusive"){const U=J/(1+de.vatRate/100);le+=J-U}else Y==="exclusive"&&(le+=J*(de.vatRate/100))}),le};let G=0;s.forEach(M=>{const Y=D(M.state.lineItems,M.state.taxMode),le=M.total>0?Y/M.total:0;(M.payments||[]).forEach(de=>{_(de.date)&&(G+=de.amount*(1-le))})}),n.forEach(M=>{const Y=D(M.state.lineItems,M.state.taxMode),le=M.total>0?Y/M.total:0;(M.payments||[]).forEach(de=>{_(de.date)&&(G+=de.amount*(1-le))})});const T=E.filter(M=>M.type==="income").reduce((M,Y)=>M+Y.amount,0),R=E.filter(M=>M.type==="expense").reduce((M,Y)=>M+Math.abs(Y.amount),0),V={cash:te.filter(M=>M.method==="Cash").reduce((M,Y)=>M+Y.amount,0),card:te.filter(M=>M.method==="Card Payment").reduce((M,Y)=>M+Y.amount,0),bankOnline:E.filter(M=>M.type==="income"&&(M.method==="Bank Transfer"||M.method==="Online Payment")).reduce((M,Y)=>M+Y.amount,0)};let Z=B;const ue=E.map(M=>(Z+=M.amount,{...M,balance:Z})),S=B+T-R;return{transactions:ue,totalIncome:T,totalExpenses:G,incomeByMethod:V,endBalance:S}},[A,s,n,r,l,h,w,B,d,o]),F=()=>{const _=[{Item:"ACCOUNT BALANCES REPORT",Value:""},{Item:"Period",Value:`${h||"Start"} to ${w||"End"}`},{},{Item:"Start Balance",Value:B.toFixed(2)},{Item:"Total Income",Value:L.totalIncome.toFixed(2)},{Item:"Total Expenses (ex. VAT)",Value:L.totalExpenses.toFixed(2)},{Item:"End Balance",Value:L.endBalance.toFixed(2)},{},{Item:"TRANSACTION LEDGER",Value:""},{Date:"Date",Description:"Description",Income:"Income",Expense:"Expense",Balance:"Balance"}],te=L.transactions.map(O=>({Date:O.date,Description:O.description,Income:O.type==="income"?O.amount.toFixed(2):"",Expense:O.type==="expense"?Math.abs(O.amount).toFixed(2):"",Balance:O.balance.toFixed(2)}));ks(`Account_Balances_${h||"start"}_to_${w||"end"}.csv`,[..._,...te])},Q=()=>{u({reportData:L,startDate:h,endDate:w,startBalance:B,settings:o},"account-balances-report")};return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4 mb-8 bg-slate-50 p-4 rounded-lg items-end",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Start Date"}),e.jsx(we,{id:"startDate",type:"date",value:h,onChange:_=>m(_.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"End Date"}),e.jsx(we,{id:"endDate",type:"date",value:w,onChange:_=>v(_.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"startBalance",className:"block text-sm font-medium text-slate-600 mb-1",children:["Start Balance (",C,")"]}),e.jsx(we,{id:"startBalance",type:"number",value:B,onChange:_=>x(parseFloat(_.target.value)||0)})]}),e.jsxs(he,{variant:"primary",onClick:F,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"CSV"]}),e.jsxs(he,{variant:"primary",onClick:Q,children:[e.jsx(KA,{className:"w-4 h-4 mr-2"}),"PDF"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-lg bg-slate-100",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-gray-200 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Start Balance"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(B)})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Total Income"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:N(L.totalIncome)})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:"Total Expenses (ex. VAT)"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:N(L.totalExpenses)})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"End Balance"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:N(L.endBalance)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"bg-white p-3 rounded",children:[e.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Cash Income"}),e.jsx("p",{className:"text-lg font-bold text-slate-800",children:N(L.incomeByMethod.cash)})]}),e.jsxs("div",{className:"bg-white p-3 rounded",children:[e.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Card Income"}),e.jsx("p",{className:"text-lg font-bold text-slate-800",children:N(L.incomeByMethod.card)})]}),e.jsxs("div",{className:"bg-white p-3 rounded",children:[e.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Bank/Online Income"}),e.jsx("p",{className:"text-lg font-bold text-slate-800",children:N(L.incomeByMethod.bankOnline)})]})]})]}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[e.jsxs("table",{className:"w-full text-left table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600 text-sm",children:[e.jsx("th",{className:"p-3 font-semibold",children:"Date"}),e.jsx("th",{className:"p-3 font-semibold w-1/2",children:"Description"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Income"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Expense"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Balance"})]})}),e.jsx("tbody",{children:L.transactions.map((_,te)=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-3 text-slate-600",children:new Date(_.date).toLocaleDateString()}),e.jsx("td",{className:"p-3 text-slate-800",children:_.description}),e.jsx("td",{className:"p-3 text-right font-medium text-green-600",children:_.type==="income"?N(_.amount):"-"}),e.jsx("td",{className:"p-3 text-right font-medium text-red-600",children:_.type==="expense"?N(Math.abs(_.amount)):"-"}),e.jsx("td",{className:"p-3 text-right font-semibold text-slate-800",children:N(_.balance)})]},te))})]}),L.transactions.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-8",children:"No transactions found for the selected period."})]})]})]})},zj=A=>{const[s,n]=se.useState("pnl"),r=()=>{switch(s){case"pnl":return e.jsx(Rj,{...A});case"balanceSheet":return e.jsx(kj,{...A});case"cashFlow":return e.jsx(_j,{...A});case"incomeByCustomer":return e.jsx(Pj,{...A});case"paidToSuppliers":return e.jsx(Kj,{...A});case"accountBalances":return e.jsx(Vj,{...A});default:return null}},l=({tab:o,children:u})=>e.jsx("button",{onClick:()=>n(o),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap flex-grow sm:flex-grow-0 ${s===o?"bg-blue-600 text-white":"text-slate-600 hover:bg-slate-200"}`,children:u});return e.jsxs("div",{className:"bg-white p-4 sm:p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center mb-6 border-b pb-4 gap-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800",children:"Financial Reports"}),e.jsxs("div",{className:"flex items-center p-1 bg-slate-100 rounded-lg flex-wrap gap-1 w-full xl:w-auto",children:[e.jsx(l,{tab:"pnl",children:"Profit & Loss"}),e.jsx(l,{tab:"balanceSheet",children:"Balance Sheet"}),e.jsx(l,{tab:"cashFlow",children:"Cash Flow"}),e.jsx(l,{tab:"incomeByCustomer",children:"Income By Customer"}),e.jsx(l,{tab:"paidToSuppliers",children:"Paid to Suppliers"}),e.jsx(l,{tab:"accountBalances",children:"Account Balances"})]})]}),r()]})},qj=({isOpen:A,onClose:s,initialData:n,settings:r})=>{const[l,o]=se.useState(""),[u,d]=se.useState(""),[h,m]=se.useState("");se.useEffect(()=>{A&&n&&(o(n.to),d(n.subject),m(n.body))},[A,n]);const w=()=>{r.emailFromName||r.companyName;const v=r.emailReplyTo||"";let B=`mailto:${encodeURIComponent(l)}?subject=${encodeURIComponent(u)}&body=${encodeURIComponent(h)}`;v&&(B+=`&reply-to=${encodeURIComponent(v)}`),window.location.href=B,s(),setTimeout(()=>{alert("Your email client has been opened. Please attach the PDF document before sending.")},500)};return A?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl transform transition-all sm:my-8 w-full max-w-2xl mx-4 border border-slate-200",children:[e.jsxs("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xl leading-6 font-bold text-slate-900",id:"modal-title",children:"Send Email"}),e.jsxs("button",{type:"button",className:"text-slate-400 hover:text-slate-600",onClick:s,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(er,{className:"h-6 w-6"})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailTo",className:"block text-sm font-medium text-slate-600",children:"To"}),e.jsx(we,{id:"emailTo",type:"email",value:l,onChange:v=>o(v.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailSubject",className:"block text-sm font-medium text-slate-600",children:"Subject"}),e.jsx(we,{id:"emailSubject",value:u,onChange:v=>d(v.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailBody",className:"block text-sm font-medium text-slate-600",children:"Body"}),e.jsx(HA,{id:"emailBody",value:h,onChange:v=>m(v.target.value),rows:10})]})]})]}),e.jsxs("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2",children:[e.jsxs(he,{variant:"primary",onClick:w,children:[e.jsx(_o,{className:"w-5 h-5 mr-2"}),"Send via Email Client"]}),e.jsx(he,{variant:"outline",onClick:s,children:"Cancel"})]})]})]}):null},n0={date:new Date().toISOString().split("T")[0],businessName:"",details:"",type:"Card",amount:0},Gj=({dailyTakings:A,settings:s,customers:n,onAddTaking:r,onUpdateTaking:l,onRemoveTaking:o,onAddCustomer:u})=>{const[d,h]=se.useState(n0),[m,w]=se.useState(null),[v,B]=se.useState(!1),[x,C]=se.useState("record"),[N,L]=se.useState("daily"),[F,Q]=se.useState(new Date().toISOString().split("T")[0]),[_,te]=se.useState(""),[O,k]=se.useState(""),P=s.currencySymbol||"",E=J=>`${P}${J.toFixed(2)}`,D=(J,U)=>{h(X=>({...X,[J]:U}))},G=J=>{if(J.preventDefault(),!d.amount||d.amount<=0||!d.details.trim()||!d.businessName.trim()){alert("Please provide a business name, details, and an amount greater than zero.");return}m?l({id:m,...d}):r(d),h(U=>({...n0,date:U.date})),w(null)},T=se.useMemo(()=>[...A].filter(J=>{const U=!_||J.date===_,X=!O||J.businessName.toLowerCase().includes(O.toLowerCase());return U&&X}).sort((J,U)=>new Date(U.date).getTime()-new Date(J.date).getTime()),[A,_,O]),R=J=>{window.confirm("Are you sure you want to delete this taking?")&&o(J)},V=J=>{w(J.id),h({date:J.date,businessName:J.businessName,details:J.details,type:J.type,amount:J.amount}),window.scrollTo(0,0)},Z=J=>{D("businessName",J.name),B(!1)},ue=()=>{u({name:d.businessName.trim(),address:"Please update address in Customer Manager"})},S=d.businessName.trim()!==""&&!n.some(J=>J.name.toLowerCase()===d.businessName.toLowerCase().trim()),{periodTotals:M,dailyBreakdown:Y}=se.useMemo(()=>{const J=new Date(F);J.setUTCHours(0,0,0,0);let U,X;switch(N){case"weekly":const xe=J.getUTCDay();U=new Date(J),U.setUTCDate(J.getUTCDate()-xe+(xe===0?-6:1)),X=new Date(U),X.setUTCDate(U.getUTCDate()+6);break;case"monthly":U=new Date(J.getUTCFullYear(),J.getUTCMonth(),1),X=new Date(J.getUTCFullYear(),J.getUTCMonth()+1,0);break;case"daily":default:U=J,X=new Date(J);break}X.setUTCHours(23,59,59,999);const ee=A.filter(xe=>{const Ce=new Date(xe.date);return Ce>=U&&Ce<=X}),re=ee.reduce((xe,Ce)=>(Ce.type==="Cash"&&(xe.cash+=Ce.amount),Ce.type==="Card"&&(xe.card+=Ce.amount),xe.total+=Ce.amount,xe),{cash:0,card:0,total:0}),fe=ee.reduce((xe,Ce)=>{const st=Ce.date;return xe[st]||(xe[st]={cash:0,card:0,total:0}),Ce.type==="Cash"&&(xe[st].cash+=Ce.amount),Ce.type==="Card"&&(xe[st].card+=Ce.amount),xe[st].total+=Ce.amount,xe},{}),ve=Object.entries(fe).sort(([xe],[Ce])=>new Date(Ce).getTime()-new Date(xe).getTime());return{periodTotals:re,dailyBreakdown:ve}},[A,N,F]),le=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-slate-900",children:m?"Edit Taking":"Record a Taking"}),e.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end bg-slate-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"takingDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Date"}),e.jsx(we,{id:"takingDate",type:"date",value:d.date,onChange:J=>D("date",J.target.value),required:!0})]}),e.jsxs("div",{className:"md:col-span-3 lg:col-span-4",children:[e.jsx("label",{htmlFor:"businessName",className:"block text-sm font-medium text-slate-600 mb-1",children:"Business Name"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(we,{id:"businessName",value:d.businessName,onChange:J=>D("businessName",J.target.value),required:!0,placeholder:"Search or type new..."}),S&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"New customer. Click '+' to save."})]}),e.jsx(he,{type:"button",size:"icon",variant:"outline",onClick:()=>B(!0),title:"Search for existing customer",children:e.jsx(yr,{className:"w-5 h-5"})}),S&&e.jsx(he,{type:"button",size:"icon",variant:"primary",onClick:ue,title:"Save new customer",children:e.jsx(AA,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"takingDetails",className:"block text-sm font-medium text-slate-600 mb-1",children:"Job Details"}),e.jsx(we,{id:"takingDetails",value:d.details,onChange:J=>D("details",J.target.value),required:!0})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{htmlFor:"takingType",className:"block text-sm font-medium text-slate-600 mb-1",children:"Type"}),e.jsxs(fA,{id:"takingType",value:d.type,onChange:J=>D("type",J.target.value),required:!0,children:[e.jsx("option",{value:"Card",children:"Card"}),e.jsx("option",{value:"Cash",children:"Cash"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"takingAmount",className:"block text-sm font-medium text-slate-600 mb-1",children:["Amount (",P,")"]}),e.jsx(we,{id:"takingAmount",type:"number",step:"0.01",value:d.amount||"",onChange:J=>D("amount",parseFloat(J.target.value)||0),required:!0})]}),e.jsxs("div",{className:"md:col-span-1 lg:col-span-1 flex flex-col gap-2",children:[e.jsxs(he,{type:"submit",variant:"primary",className:"w-full justify-center",children:[m?e.jsx(ss,{className:"w-5 h-5 md:mr-2"}):e.jsx(AA,{className:"w-5 h-5 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:m?"Update":"Add"})]}),m&&e.jsx(he,{type:"button",variant:"outline",onClick:()=>{w(null),h(J=>({...n0,date:J.date}))},children:"Cancel"})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-slate-900",children:"Recorded Takings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end bg-slate-50 p-4 rounded-lg mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"searchDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Filter by Date"}),e.jsx(we,{id:"searchDate",type:"date",value:_,onChange:J=>te(J.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"searchBusinessName",className:"block text-sm font-medium text-slate-600 mb-1",children:"Filter by Business Name"}),e.jsx(we,{id:"searchBusinessName",value:O,onChange:J=>k(J.target.value),placeholder:"Search name..."})]}),e.jsx("div",{children:e.jsx(he,{variant:"outline",onClick:()=>{te(""),k("")},className:"w-full",children:"Clear Filters"})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2",children:A.length===0?e.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:[e.jsx(Ku,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No takings recorded yet."})]}):T.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No takings found for the selected filters."})}):e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left table-auto min-w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b",children:e.jsxs("tr",{className:"text-sm text-slate-600",children:[e.jsx("th",{className:"p-3 font-semibold",children:"Date"}),e.jsx("th",{className:"p-3 font-semibold",children:"Business Name"}),e.jsx("th",{className:"p-3 font-semibold",children:"Job Details"}),e.jsx("th",{className:"p-3 font-semibold",children:"Transaction Type"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Amount"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Actions"})]})}),e.jsx("tbody",{children:T.map(J=>e.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50 text-sm text-slate-800",children:[e.jsx("td",{className:"p-3 whitespace-nowrap",children:new Date(J.date).toLocaleDateString()}),e.jsx("td",{className:"p-3",children:J.businessName}),e.jsx("td",{className:"p-3 whitespace-pre-wrap",children:J.details}),e.jsx("td",{className:"p-3",children:J.type}),e.jsxs("td",{className:"p-3 text-right font-medium whitespace-nowrap",children:[P,J.amount.toFixed(2)]}),e.jsxs("td",{className:"p-3 text-right",children:[e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>V(J),title:"Edit taking",children:e.jsx(ss,{className:"w-5 h-5 text-slate-400 hover:text-blue-600"})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>R(J.id),title:"Delete taking",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})})]})]},J.id))})]})})})]})]}),de=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 bg-slate-50 p-4 rounded-lg items-end",children:[e.jsxs("div",{className:"flex p-1 bg-white rounded-lg",children:[e.jsx(he,{variant:N==="daily"?"primary":"ghost",className:"w-full",onClick:()=>L("daily"),children:"Daily"}),e.jsx(he,{variant:N==="weekly"?"primary":"ghost",className:"w-full",onClick:()=>L("weekly"),children:"Weekly"}),e.jsx(he,{variant:N==="monthly"?"primary":"ghost",className:"w-full",onClick:()=>L("monthly"),children:"Monthly"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"summaryDate",className:"block text-sm font-medium text-slate-600 mb-1",children:N==="daily"?"Select Day":N==="weekly"?"Select Week":"Select Month"}),e.jsx(we,{id:"summaryDate",type:"date",value:F,onChange:J=>Q(J.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Total Card"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:E(M.card)})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:"Total Cash"}),e.jsx("p",{className:"text-3xl font-bold text-green-900",children:E(M.cash)})]}),e.jsxs("div",{className:"bg-slate-200 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Overall Total"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:E(M.total)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-slate-900",children:"Daily Breakdown"}),e.jsx("div",{className:"max-h-[50vh] overflow-y-auto pr-2",children:Y.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No takings found for the selected period."})}):e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left table-auto min-w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b",children:e.jsxs("tr",{className:"text-sm text-slate-600",children:[e.jsx("th",{className:"p-3 font-semibold",children:"Date"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Total Card"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Total Cash"}),e.jsx("th",{className:"p-3 font-semibold text-right",children:"Daily Total"})]})}),e.jsx("tbody",{children:Y.map(([J,U])=>e.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50 text-sm text-slate-800",children:[e.jsx("td",{className:"p-3 font-medium whitespace-nowrap",children:new Date(J).toLocaleDateString()}),e.jsx("td",{className:"p-3 text-right whitespace-nowrap",children:E(U.card)}),e.jsx("td",{className:"p-3 text-right whitespace-nowrap",children:E(U.cash)}),e.jsx("td",{className:"p-3 text-right font-bold whitespace-nowrap",children:E(U.total)})]},J))})]})})})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Daily Takings"}),e.jsxs("div",{className:"flex p-1 bg-slate-100 rounded-lg",children:[e.jsx(he,{variant:x==="record"?"primary":"ghost",onClick:()=>C("record"),children:"Record Takings"}),e.jsx(he,{variant:x==="summary"?"primary":"ghost",onClick:()=>C("summary"),children:"Summary"})]})]}),x==="record"?le():de()]}),e.jsx(Vh,{isOpen:v,onClose:()=>B(!1),customers:n,onSelectCustomer:Z})]})},Jj=[ha.M,ha.FT],r2=(A,s)=>A*(br[s]||1),Xj=({item:A,inventory:s,supplierInventory:n,suppliers:r,taxMode:l,settings:o,onUpdate:u,onRemove:d,onOpenInventorySearch:h,onOpenSupplierInventorySearch:m,onOpenAddOns:w})=>{const v=s.find(D=>D.id===A.inventoryItemId),B=v!=null&&v.parentId?s.find(D=>D.id===v.parentId):null,x=o.currencySymbol||"",[C,N]=se.useState(!0),L=(D,G)=>{u(A.id,{[D]:G})},F=(D,G)=>{D==="value"&&(G=parseFloat(G)||0),u(A.id,{discount:{...A.discount,[D]:G}})},Q=()=>{const D={id:crypto.randomUUID(),type:"manual",description:"New Manual Cost",proportionalCost:0,wastageCost:0,totalMaterialCost:0,manualCost:0,costVatRate:o.defaultVatRate,costVat:0};u(A.id,{costItems:[...A.costItems||[],D]})},_=(D,G)=>{const T=(A.costItems||[]).map(R=>R.id===D?{...R,...G}:R);u(A.id,{costItems:T})},te=D=>{const G=(A.costItems||[]).filter(T=>T.id!==D);u(A.id,{costItems:G})};se.useEffect(()=>{const D=T=>{var Y;let R=0,V=0,Z=0,ue=0,S=T.costVatRate;const M=n.find(le=>le.id===T.linkedSupplierItemId);if(T.type==="linked"&&M){if(M.type===Aa.MEASURED){const le=(Y=M.unitPrices)==null?void 0:Y[ha.SQ_M];if(le&&A.unit&&A.length){const{length:de=0,width:J=0,unit:U,quantity:X}=A,ee=de*br[U],re=J*br[U];if(R=ee*re*le*X,M.includeWastage!==!1&&M.length&&M.width&&M.measurementUnit&&!hl(A.unit)&&A.width){const ve=r2(M.length,M.measurementUnit),xe=r2(M.width,M.measurementUnit);if(ve>0&&xe>0&&ee>0&&re>0){const Ce=Math.ceil(ee/ve)*Math.ceil(re/xe),st=Math.ceil(ee/xe)*Math.ceil(re/ve);Z=Math.min(Ce,st)*X*M.price,V=Z-R}else Z=R}else Z=R}}else R=M.price*A.quantity,Z=R;S=S??o.defaultVatRate,ue=Z*(S/100)}else T.type==="manual"&&(R=T.manualCost||0,Z=R,S=T.costVatRate??0,ue=Z*(S/100));return{...T,proportionalCost:R,wastageCost:V,totalMaterialCost:Z,costVat:ue,costVatRate:S}},G=(A.costItems||[]).map(D);JSON.stringify(A.costItems)!==JSON.stringify(G)&&u(A.id,{costItems:G})},[A.costItems,A.length,A.width,A.unit,A.quantity,n,o.defaultVatRate]);const{totalSale:O,totalCost:k}=se.useMemo(()=>{let D;if(!v)D=(A.price||0)*A.quantity;else{const Z=[...v.addOnOptions||[],...(B==null?void 0:B.addOnOptions)||[]],ue=Array.from(new Map(Z.map(S=>[`${S.name.toLowerCase()}-${S.price}`,S])).values());D=Hn({...v,addOnOptions:ue},A)}const G=A.discount.type==="percentage"?D*(A.discount.value/100):A.discount.value,T=D-G,R=l==="inclusive"?T/(1+A.vatRate/100):T,V=(A.costItems||[]).reduce((Z,ue)=>Z+ue.totalMaterialCost,0);return{totalSale:R,totalCost:V}},[A,v,B,l]),P=se.useMemo(()=>{if(!v)return[];const D=[...v.addOnOptions||[],...(B==null?void 0:B.addOnOptions)||[]];return Array.from(new Map(D.map(G=>[`${G.name.toLowerCase()}-${G.price}`,G])).values())},[v,B]),E=se.useMemo(()=>!A.selectedAddOnIds||A.selectedAddOnIds.length===0?"":A.selectedAddOnIds.map(D=>{const G=P.find(T=>T.id===D);return G?`${G.name} (+${x}${G.price.toFixed(2)})`:null}).filter(Boolean).join(", "),[A.selectedAddOnIds,P,x]);return e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm grid grid-cols-12 gap-x-4 gap-y-2 items-start text-sm relative",children:[e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>d(A.id),title:"Delete line item",children:e.jsx(pA,{className:"w-5 h-5 text-slate-400 hover:text-red-500"})})}),e.jsxs("div",{className:"col-span-12 md:col-span-6 p-4",children:[e.jsx("h3",{className:"font-semibold text-slate-700 mb-2",children:"Sale Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Item / Description"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(he,{variant:"outline",size:"icon",onClick:()=>h(A.id),type:"button",title:"Search Sale Items",children:e.jsx(yr,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-grow flex flex-col gap-1",children:[e.jsx(HA,{value:A.description,onChange:D=>L("description",D.target.value),placeholder:"Sale item description...",rows:1,className:"resize-none !py-1.5 w-full"}),v&&P.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-1",children:[e.jsxs(he,{variant:"outline",size:"sm",className:"!py-0.5 !px-2 text-[10px] h-auto",onClick:()=>w==null?void 0:w(A.id),children:[e.jsx(AA,{className:"w-3 h-3 mr-1"})," Add-ons"]}),E&&e.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded border border-blue-100 italic truncate max-w-[200px]",title:E,children:E})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Unit Price / Dimensions"}),v?v.type===Aa.MEASURED?e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(we,{type:"number",placeholder:"L",value:A.length||"",onChange:D=>L("length",parseFloat(D.target.value)||0)}),e.jsx(we,{type:"number",placeholder:"W",value:A.width||"",onChange:D=>L("width",parseFloat(D.target.value)||0)}),e.jsx(fA,{value:A.unit||"",onChange:D=>L("unit",D.target.value),children:Jj.map(D=>e.jsx("option",{value:D,children:D},D))})]}):e.jsxs("div",{className:"text-slate-500 h-10 flex items-center pl-2 text-sm border rounded bg-slate-100",children:["Fixed Unit Price: ",e.jsxs("span",{className:"font-medium text-slate-700 ml-1",children:[x,v.price.toFixed(2)]})]}):e.jsx(we,{type:"number",placeholder:"Unit Price",value:A.price??"",onChange:D=>L("price",parseFloat(D.target.value)||0)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Quantity"}),e.jsx(we,{type:"number",value:A.quantity,onChange:D=>L("quantity",parseInt(D.target.value,10)||1),min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"Discount"}),e.jsxs("div",{className:"flex",children:[e.jsx(we,{type:"number",step:"0.01",min:"0",value:A.discount.value,onChange:D=>F("value",D.target.value),className:"rounded-r-none"}),e.jsxs(fA,{value:A.discount.type,onChange:D=>F("type",D.target.value),className:"rounded-l-none border-l-0 !py-1.5",children:[e.jsx("option",{value:"fixed",children:x}),e.jsx("option",{value:"percentage",children:"%"})]})]})]})]})]})]}),e.jsxs("div",{className:"col-span-12 md:col-span-6 p-4 bg-slate-50 rounded-r-lg",children:[e.jsx("h3",{className:"font-semibold text-slate-700 mb-2",children:"Cost Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(he,{variant:"outline",size:"sm",onClick:()=>m(A.id),className:"w-full",children:[e.jsx(B2,{className:"w-4 h-4 mr-2"}),"Link Material"]}),e.jsxs(he,{variant:"outline",size:"sm",onClick:Q,className:"w-full",children:[e.jsx(AA,{className:"w-4 h-4 mr-2"}),"Add Manual Cost"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:`space-y-2 pr-1 transition-all duration-300 ease-in-out ${C?"max-h-[500px] overflow-y-auto":"max-h-32 overflow-y-auto"}`,children:(A.costItems||[]).map(D=>{const G=n.find(T=>T.id===D.linkedSupplierItemId);return e.jsxs("div",{className:"bg-white p-2 rounded border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[D.type==="manual"?e.jsx(we,{value:D.description,onChange:T=>_(D.id,{description:T.target.value}),className:"!py-1 text-sm flex-grow"}):e.jsx("p",{className:"font-medium text-blue-800 text-sm",children:D.description}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>te(D.id),children:e.jsx(pA,{className:"w-4 h-4 text-red-500"})})]}),D.type==="manual"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs",children:["Cost (ex. VAT) (",x,")"]}),e.jsx(we,{type:"number",value:D.manualCost||"",onChange:T=>_(D.id,{manualCost:parseFloat(T.target.value)||0}),className:"!py-1"})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t grid grid-cols-3 gap-x-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"VAT Rate (%)"}),e.jsx(we,{type:"number",value:D.costVatRate,onChange:T=>_(D.id,{costVatRate:parseFloat(T.target.value)||0}),className:"!py-1 text-xs"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"VAT Amount"}),e.jsxs("p",{className:"text-sm text-slate-700",children:[x,D.costVat.toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Total (inc. VAT)"}),e.jsxs("p",{className:"text-sm font-bold text-slate-800",children:[x,(D.totalMaterialCost+D.costVat).toFixed(2)]})]})]})]}):e.jsxs(e.Fragment,{children:[G&&G.type==="measured"&&e.jsxs("div",{className:"text-xs mt-1",children:[e.jsxs("span",{className:"text-red-800",children:["Proportional: ",x,D.proportionalCost.toFixed(2)]}),e.jsx("span",{className:"mx-1",children:"|"}),e.jsxs("span",{className:"text-red-800",children:["Wastage: ",x,D.wastageCost.toFixed(2)]})]}),e.jsxs("p",{className:"text-right text-sm font-medium mt-1",children:["Cost (ex. VAT): ",x,D.totalMaterialCost.toFixed(2)]}),e.jsxs("div",{className:"mt-2 pt-2 border-t grid grid-cols-3 gap-x-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500",children:"VAT Rate (%)"}),e.jsx(we,{type:"number",value:D.costVatRate,onChange:T=>_(D.id,{costVatRate:parseFloat(T.target.value)||0}),className:"!py-1 text-xs"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"VAT Amount"}),e.jsxs("p",{className:"text-sm text-slate-700",children:[x,D.costVat.toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Total (inc. VAT)"}),e.jsxs("p",{className:"text-sm font-bold text-slate-800",children:[x,(D.totalMaterialCost+D.costVat).toFixed(2)]})]})]})]})]},D.id)})}),(A.costItems||[]).length>1&&e.jsx("button",{type:"button",onClick:()=>N(D=>!D),className:"text-xs text-blue-600 hover:underline mt-1 w-full text-left p-1","aria-expanded":C,children:C?"Show less":`+ Show ${A.costItems.length-1} more item(s)`})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-1",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded border",children:[e.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Total Sale (ex. VAT)"}),e.jsxs("p",{className:"font-semibold text-green-700 text-lg",children:[x,O.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border",children:[e.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Cost of Materials"}),e.jsxs("p",{className:"font-semibold text-red-700 text-lg",children:[x,k.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border",children:[e.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Profit / Margin"}),e.jsxs("p",{className:"font-semibold text-lg",style:{color:O-k>=0?"green":"red"},children:[x,(O-k).toFixed(2)]})]})]})]})]})]})},Yj=({editingJobId:A,jobState:s,setJobState:n,customers:r,suppliers:l,inventory:o,supplierInventory:u,settings:d,categories:h,onSaveJob:m,onConvertToQuote:w,onConvertToInvoice:v,onAddCustomer:B})=>{var $e;const[x,C]=se.useState(!1),[N,L]=se.useState(!1),[F,Q]=se.useState(!1),[_,te]=se.useState(!1),[O,k]=se.useState(null),[P,E]=se.useState(!1),[D,G]=se.useState(null),{invoiceType:T="measured"}=s,R=(Ue,At)=>{n(Le=>({...Le,[Ue]:At}))},V=()=>{const Ue={id:crypto.randomUUID(),inventoryItemId:null,description:"",quantity:1,vatRate:d.defaultVatRate,discount:{type:"fixed",value:0},price:0,costItems:[],selectedAddOnIds:[]};n(At=>({...At,lineItems:[...At.lineItems,Ue]}))},Z=(Ue,At)=>{n(Le=>({...Le,lineItems:Le.lineItems.map(K=>K.id===Ue?{...K,...At}:K)}))},ue=Ue=>{n(At=>({...At,lineItems:At.lineItems.filter(Le=>Le.id!==Ue)}))},S=Ue=>{k(Ue),Q(!0)},M=Ue=>{k(Ue),te(!0)},Y=Ue=>{if(O){if(!s.lineItems.find(Ne=>Ne.id===O))return;let Le=[];Ue.linkedSupplierItemIds&&(Le=Ue.linkedSupplierItemIds.map(Ne=>{const Te=u.find(ot=>ot.id===Ne);return Te?{id:crypto.randomUUID(),type:"linked",description:Te.name,linkedSupplierItemId:Te.id,proportionalCost:0,wastageCost:0,totalMaterialCost:0,manualCost:0,costVatRate:d.defaultVatRate,costVat:0}:null}).filter(Ne=>Ne!==null));const K={inventoryItemId:Ue.id,description:Ue.name,price:void 0,costItems:Le,vatRate:Ue.vatRate??d.defaultVatRate,selectedAddOnIds:[],length:void 0,width:void 0,unit:void 0};Ue.type===Aa.MEASURED&&(K.unit=Ue.measurementUnit||ha.M),Z(O,K),Q(!1);let Ge=[];if(Ue.parentId){const Ne=o.find(Te=>Te.id===Ue.parentId);Ne&&Ne.addOnOptions&&(Ge=Ne.addOnOptions)}const Ye=[...Ue.addOnOptions||[],...Ge],ie=Array.from(new Map(Ye.map(Ne=>[`${Ne.name.toLowerCase()}-${Ne.price}`,Ne])).values());ie.length>0&&(G({lineItemId:O,inventoryItem:{...Ue,addOnOptions:ie}}),E(!0)),k(null)}},le=Ue=>{D&&Z(D.lineItemId,{selectedAddOnIds:Ue}),E(!1),G(null)},de=Ue=>{if(O){if(!s.lineItems.find(Ge=>Ge.id===O))return;const Le={id:crypto.randomUUID(),type:"linked",description:Ue.name,linkedSupplierItemId:Ue.id,proportionalCost:0,wastageCost:0,totalMaterialCost:0,costVatRate:d.defaultVatRate,costVat:0},K=s.lineItems.map(Ge=>Ge.id===O?{...Ge,costItems:[...Ge.costItems||[],Le]}:Ge);n(Ge=>({...Ge,lineItems:K})),te(!1),k(null)}},J=Ue=>{const At=Ue.target.value;n(Le=>({...Le,taxMode:At}))},U=Ue=>{n(At=>({...At,customerName:Ue.name})),C(!1)},X=Ue=>{const At={name:Ue.trim(),address:"Please update address in Customer Manager"};B(At)},ee=Ue=>{B(Ue),n(At=>({...At,customerName:Ue.name})),L(!1)},re=se.useMemo(()=>{let Ue=0,At=0;return s.lineItems.forEach(Le=>{let K;const Ge=o.find(qe=>qe.id===Le.inventoryItemId);if(Ge){const qe=Ge.parentId?o.find(Ct=>Ct.id===Ge.parentId):null,ot=[...Ge.addOnOptions||[],...(qe==null?void 0:qe.addOnOptions)||[]],xt=Array.from(new Map(ot.map(Ct=>[`${Ct.name.toLowerCase()}-${Ct.price}`,Ct])).values());K=Hn({...Ge,addOnOptions:xt},Le)}else K=(Le.price||0)*Le.quantity;const Ye=Le.discount.type==="percentage"?K*(Le.discount.value/100):Le.discount.value,ie=K-Ye;let Ne=0;s.taxMode==="inclusive"?Ne=ie/(1+Le.vatRate/100):Ne=ie,Ue+=Ne;const Te=(Le.costItems||[]).reduce((qe,ot)=>qe+(ot.totalMaterialCost||0),0);At+=Te}),{totalSale:Ue,totalCost:At}},[s.lineItems,s.taxMode,o]),fe=d.currencySymbol||"",ve=s.customerName.trim()!==""&&!r.some(Ue=>Ue.name.toLowerCase()===s.customerName.toLowerCase().trim()),xe=()=>{if(!s.customerName.trim()||!s.reference.trim()){alert("Customer and Reference must be filled in before saving or converting.");return}m({state:s,totalSale:re.totalSale,totalCost:re.totalCost})},Ce=()=>{if(!s.customerName.trim()||!s.reference.trim()){alert("Customer and Reference must be filled in before saving or converting.");return}w(s)},st=()=>{if(!s.customerName.trim()||!s.reference.trim()){alert("Customer and Reference must be filled in before saving or converting.");return}v(s)},_e=Ue=>{const At=s.lineItems.find(ie=>ie.id===Ue);if(!At||!At.inventoryItemId)return;const Le=o.find(ie=>ie.id===At.inventoryItemId);if(!Le)return;let K=[];if(Le.parentId){const ie=o.find(Ne=>Ne.id===Le.parentId);ie&&ie.addOnOptions&&(K=ie.addOnOptions)}const Ge=[...Le.addOnOptions||[],...K],Ye=Array.from(new Map(Ge.map(ie=>[`${ie.name.toLowerCase()}-${ie.price}`,ie])).values());Ye.length>0?(G({lineItemId:Ue,inventoryItem:{...Le,addOnOptions:Ye}}),E(!0)):alert("No add-on options available for this item.")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:A?"Edit Job":"Job Builder"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Cost materials and labor to build a quote or invoice."})]}),e.jsx("h1",{className:"text-4xl font-bold text-slate-400 uppercase tracking-widest",children:"Job Costing"})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customerName",className:"block text-sm font-medium text-slate-600 mb-1",children:"Customer"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(we,{id:"customerName",value:s.customerName,onChange:Ue=>R("customerName",Ue.target.value),placeholder:"Search or type name..."}),ve&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"New customer. Click '+' to save."})]}),e.jsx(he,{type:"button",size:"icon",variant:"outline",onClick:()=>C(!0),title:"Search for existing customer",children:e.jsx(yr,{className:"w-5 h-5"})}),e.jsx(he,{type:"button",size:"icon",variant:"outline",onClick:()=>L(!0),title:"Add detailed new customer",children:e.jsx(AA,{className:"w-5 h-5"})}),ve&&e.jsx(he,{type:"button",size:"icon",variant:"primary",onClick:()=>X(s.customerName),title:"Quick save name only",children:e.jsx(AA,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reference",className:"block text-sm font-medium text-slate-600 mb-1",children:"Reference"}),e.jsx(we,{id:"reference",value:s.reference,onChange:Ue=>R("reference",Ue.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jobNumber",className:"block text-sm font-medium text-slate-600 mb-1",children:"Job Number"}),e.jsx(we,{id:"jobNumber",value:s.jobNumber,readOnly:!0,disabled:!0,className:"bg-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"issueDate",className:"block text-sm font-medium text-slate-600 mb-1",children:"Date"}),e.jsx(we,{id:"issueDate",type:"date",value:s.issueDate,onChange:Ue=>R("issueDate",Ue.target.value)})]})]}),e.jsx("section",{children:e.jsx("div",{className:"space-y-4",children:s.lineItems.map(Ue=>e.jsx(Xj,{item:Ue,inventory:o,supplierInventory:u,suppliers:l,taxMode:s.taxMode,settings:d,onUpdate:Z,onRemove:ue,onOpenInventorySearch:S,onOpenSupplierInventorySearch:M,onOpenAddOns:()=>_e(Ue.id)},Ue.id))})}),e.jsxs(he,{variant:"outline",onClick:V,className:"mt-4",children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Line Item"]}),e.jsxs("section",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"taxMode",className:"block text-sm font-medium text-slate-600",children:"Tax Calculation (for Sale Price)"}),e.jsxs(fA,{id:"taxMode",value:s.taxMode,onChange:J,children:[e.jsx("option",{value:"exclusive",children:"Tax Exclusive"}),e.jsx("option",{value:"inclusive",children:"Tax Inclusive"}),e.jsx("option",{value:"none",children:"No Tax"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jobNotes",className:"block text-sm font-medium text-slate-600",children:"Notes"}),e.jsx(HA,{id:"jobNotes",value:s.notes,onChange:Ue=>R("notes",Ue.target.value),rows:3})]})]}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2 text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Sale Price (ex. VAT)"}),e.jsxs("span",{className:"font-medium",children:[fe,re.totalSale.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Material Cost"}),e.jsxs("span",{className:"font-medium",children:[fe,re.totalCost.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900",children:[e.jsx("span",{children:"Gross Profit"}),e.jsxs("span",{style:{color:re.totalSale-re.totalCost>=0?"green":"red"},children:[fe,(re.totalSale-re.totalCost).toFixed(2)]})]})]})})]}),e.jsx("footer",{className:"mt-12 pt-6 border-t",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(he,{variant:"outline",onClick:xe,children:A?"Update Job":"Save Job"}),e.jsx(he,{variant:"primary",onClick:Ce,children:"Create Quote from Job"}),e.jsx(he,{variant:"primary",onClick:st,children:"Create Invoice from Job"})]})})]}),e.jsx(Vh,{isOpen:x,onClose:()=>C(!1),customers:r,onSelectCustomer:U}),e.jsx(y2,{isOpen:N,onClose:()=>L(!1),onSave:ee}),e.jsx(w2,{isOpen:F,onClose:()=>Q(!1),inventory:o,categories:h,settings:d,onSelectItem:Y,invoiceType:T}),e.jsx(zh,{isOpen:_,onClose:()=>te(!1),items:u,onSelectItem:de}),e.jsx(C2,{isOpen:P,onClose:()=>E(!1),addOnOptions:(D==null?void 0:D.inventoryItem.addOnOptions)||[],initiallySelectedIds:(($e=s.lineItems.find(Ue=>Ue.id===(D==null?void 0:D.lineItemId)))==null?void 0:$e.selectedAddOnIds)||[],onConfirm:le,settings:d,itemName:(D==null?void 0:D.inventoryItem.name)||""})]})},$v=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-4.243-4.243l3.275-3.275a4.5 4.5 0 00-6.336 4.486c.046.58.143 1.193.308 1.743m-4.881 2.532a3.004 3.004 0 01-4.243-4.243l6.25-6.25a3.004 3.004 0 014.243 4.243l-6.25 6.25a3.004 3.004 0 01-.424.424l-1.214.81c-.244.163-.533.243-.82.243z"})}),Zj=({jobs:A,settings:s,onLoadJob:n,onDeleteJob:r})=>{const[l,o]=se.useState(""),[u,d]=se.useState(!1),[h,m]=se.useState(""),[w,v]=se.useState(""),[B,x]=se.useState(""),C=s.currencySymbol||"",N=se.useMemo(()=>{const Q=new Set(A.map(_=>_.state.customerName));return Array.from(Q)},[A]),L=se.useMemo(()=>{let Q=[...A];if(h&&(Q=Q.filter(_=>_.state.customerName.toLowerCase().includes(h.toLowerCase()))),w){const _=new Date(w);_.setHours(0,0,0,0),Q=Q.filter(te=>new Date(te.state.issueDate)>=_)}if(B){const _=new Date(B);_.setHours(23,59,59,999),Q=Q.filter(te=>new Date(te.state.issueDate)<=_)}if(l){const _=l.toLowerCase();Q=Q.filter(te=>te.state.customerName.toLowerCase().includes(_)||te.state.jobNumber.toLowerCase().includes(_)||te.state.reference&&te.state.reference.toLowerCase().includes(_))}return Q.sort((_,te)=>new Date(te.createdAt).getTime()-new Date(_.createdAt).getTime())},[A,l,h,w,B]),F=()=>{m(""),v(""),x(""),o("")};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Manage Jobs"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(we,{placeholder:"Search by job #, reference, or customer...",value:l,onChange:Q=>o(Q.target.value),className:"flex-grow"}),e.jsxs(he,{variant:"outline",onClick:()=>d(!u),className:"w-full sm:w-auto",children:[e.jsx(qh,{className:"w-5 h-5 mr-2"}),"Filters"]})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-4 p-4 bg-slate-50 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Customer"}),e.jsx(we,{list:"customer-names-job",value:h,onChange:Q=>m(Q.target.value),placeholder:"All customers"}),e.jsx("datalist",{id:"customer-names-job",children:N.map(Q=>e.jsx("option",{value:Q},Q))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"From Date"}),e.jsx(we,{type:"date",value:w,onChange:Q=>v(Q.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"To Date"}),e.jsx(we,{type:"date",value:B,onChange:Q=>x(Q.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(he,{variant:"outline",onClick:F,className:"w-full",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto pr-2",children:L.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:A.length===0?e.jsxs(e.Fragment,{children:[e.jsx($v,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No jobs saved yet."})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"No jobs found for your search."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-[700px] space-y-3",children:L.map(Q=>{const _=Q.totalSale-Q.totalCost,te=Q.totalSale>0?_/Q.totalSale*100:0;return e.jsxs("div",{className:"bg-slate-100 p-4 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:Q.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Created on ",new Date(Q.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(he,{variant:"outline",onClick:()=>n(Q.id),children:[e.jsx(ss,{className:"w-4 h-4 mr-2"}),"Load / Edit"]}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>r(Q.id),title:"Delete Job",children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200 grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sale:"})," ",e.jsxs("span",{className:"font-medium",children:[C,Q.totalSale.toFixed(2)]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cost:"})," ",e.jsxs("span",{className:"font-medium",children:[C,Q.totalCost.toFixed(2)]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Profit:"})," ",e.jsxs("span",{className:"font-medium",style:{color:_>=0?"green":"red"},children:[C,_.toFixed(2)]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Margin:"})," ",e.jsxs("span",{className:"font-medium",children:[te.toFixed(2),"%"]})]})]})]},Q.id)})})})})]})},Wj=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0h18"})}),e5=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),$j=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),t5=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),e3=({style:A})=>e.jsx("div",{className:"confetti-piece",style:A}),t3=()=>{const s=Array.from({length:50}).map((n,r)=>{const l={left:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*2}s`,backgroundColor:`hsl(${Math.random()*360}, 100%, 70%)`,transform:`rotate(${Math.random()*360}deg)`};return e.jsx(e3,{style:l},r)});return e.jsx("div",{className:"confetti-container",children:s})},bh=({job:A,onClick:s,users:n,isJustCompleted:r,onDragStart:l,onDragEnd:o,isDragging:u,isSelected:d,onToggleSelection:h,isSelectable:m,isSelectionDisabled:w,canEdit:v,onEdit:B,onDelete:x,supplierCategories:C})=>{var G;const N=new Date(A.dueDate)<new Date&&A.status!=="complete",L=A.assignedTeamMemberId?n.find(T=>T.id===A.assignedTeamMemberId):null,F=A.notes&&A.notes.trim()!=="";let Q="";if(N)Q="bg-red-500 border-red-700 hover:bg-red-600";else switch(A.status){case"new":Q="bg-blue-500 border-blue-700 hover:bg-blue-600";break;case"in_progress":Q="bg-orange-500 border-orange-700 hover:bg-orange-600";break;case"complete":Q="bg-green-500 border-green-700 hover:bg-green-600";break}const _={high:{text:"High",badge:"bg-red-200 text-red-800"},medium:{text:"Medium",badge:"bg-yellow-200 text-yellow-800"},low:{text:"Low",badge:"bg-sky-200 text-sky-800"}},te=A.priority||"medium",{text:O,badge:k}=_[te],P=(T,R)=>{T.stopPropagation(),R==null||R()},E=T=>{T.stopPropagation(),h==null||h(A.id)},D=T=>!T||T==="bg-white"||T.includes("yellow")||T.includes("amber")||T.includes("lime")||T.includes("slate-200")?"text-slate-900":"text-white";return e.jsxs("div",{onClick:w?void 0:s,draggable:v,onDragStart:l,onDragEnd:o,className:`relative p-4 rounded-lg shadow-sm border-l-4 transition-all text-white ${Q} ${u?"opacity-50":""} ${d?"ring-4 ring-offset-2 ring-black":""} ${v?"cursor-grab":"cursor-pointer"} ${w?"opacity-60 cursor-not-allowed":""}`,children:[m&&e.jsx("input",{type:"checkbox",checked:d,onChange:()=>{},onClick:E,disabled:w,className:"absolute top-2 right-2 h-5 w-5 rounded text-blue-600 focus:ring-blue-500 border-gray-300 disabled:opacity-50 cursor-pointer","aria-label":"Select job"}),r&&e.jsx(t3,{}),e.jsx("p",{className:"font-semibold break-words pr-8",children:A.description}),e.jsx("div",{className:"flex flex-col gap-1 mt-3",children:(G=A.supplierCategoryIds)==null?void 0:G.map(T=>{const R=C.find(V=>V.id===T);return R?e.jsx("span",{className:`text-[11px] w-full text-center px-1.5 py-1 rounded font-bold border border-white/50 uppercase shadow-sm ${R.color||"bg-slate-100 text-slate-800"} ${D(R.color)}`,children:R.name},T):null})}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-white/80",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(qc,{className:"w-4 h-4 mr-1.5 shrink-0"}),e.jsx("span",{className:"truncate",title:A.customerName,children:A.customerName})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(e5,{className:"w-4 h-4 mr-1.5 shrink-0"}),e.jsx("span",{children:A.invoiceNumber})]})]}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-white/20 text-xs space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($j,{className:"w-4 h-4 mr-1.5 shrink-0"}),e.jsx("span",{children:L?L.name||L.username:"Unassigned"})]}),e.jsxs("div",{className:"flex items-center",children:[F&&e.jsx("span",{title:"This job has notes",children:e.jsx(t5,{className:"w-4 h-4"})}),v&&e.jsxs("div",{className:"flex items-center -mr-2",children:[e.jsx(he,{size:"icon",variant:"ghost",className:"!text-white hover:!bg-white/20",onClick:T=>P(T,B),title:"Edit Job",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx(he,{size:"icon",variant:"ghost",className:"!text-white hover:!bg-white/20",onClick:T=>P(T,x),title:"Delete Job",children:e.jsx(pA,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Wj,{className:"w-4 h-4 mr-1.5 shrink-0"}),e.jsxs("span",{children:["Due: ",new Date(A.dueDate).toLocaleDateString()]})]}),e.jsx("div",{children:e.jsxs("span",{className:`px-3 py-1 text-xs font-semibold rounded-full inline-block ${k}`,children:[O," Priority"]})})]})]})},A3=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),a3=({job:A,onClose:s,onSave:n,onDelete:r,teamMembers:l})=>{const[o,u]=se.useState(null),[d,h]=se.useState("");if(se.useEffect(()=>{u(A?{...A}:null)},[A]),se.useEffect(()=>{if(!(o!=null&&o.dueDate)){h("");return}const C=()=>{const L=new Date(o.dueDate+"T23:59:59"),F=new Date,Q=L.getTime()-F.getTime();if(Q<=0){const P=Math.abs(Q),E=Math.floor(P/(1e3*60*60*24)),D=Math.floor(P/(1e3*60*60)%24),G=Math.floor(P/1e3/60%60),T=Math.floor(P/1e3%60);h(`Overdue by ${E}d ${D}h ${G}m ${T}s`);return}const _=Math.floor(Q/(1e3*60*60*24)),te=Math.floor(Q/(1e3*60*60)%24),O=Math.floor(Q/1e3/60%60),k=Math.floor(Q/1e3%60);h(`${_}d ${te}h ${O}m ${k}s remaining`)};C();const N=setInterval(C,1e3);return()=>clearInterval(N)},[o==null?void 0:o.dueDate]),!o)return null;const m=(C,N)=>{u(L=>L?{...L,[C]:N}:null)},w=()=>{o&&n(o)},v=()=>{o&&r(o.id)},B=d.startsWith("Overdue"),x=o.invoiceNumber==="Manual Entry";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl transform transition-all sm:my-8 w-full max-w-lg mx-4 border border-slate-200",children:[e.jsxs("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xl leading-6 font-bold text-slate-900",id:"modal-title",children:"Edit Job"}),e.jsxs("button",{type:"button",className:"text-slate-400 hover:text-slate-600",onClick:s,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[x?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jobDescription",className:"block text-sm font-medium text-slate-600 mb-1",children:"Job Description"}),e.jsx(HA,{id:"jobDescription",value:o.description,onChange:C=>m("description",C.target.value),rows:2})]}):e.jsx("p",{className:"font-medium text-slate-800",children:o.description}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[o.customerName," - ",o.invoiceNumber]})]}),e.jsxs("div",{className:`flex items-center justify-center p-3 rounded-lg ${B?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[e.jsx(A3,{className:"w-6 h-6 mr-3"}),e.jsx("span",{className:"font-mono text-lg font-medium",children:d})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jobStatus",className:"block text-sm font-medium text-slate-600",children:"Status"}),e.jsxs(fA,{id:"jobStatus",value:o.status,onChange:C=>m("status",C.target.value),children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"complete",children:"Complete"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jobDueDate",className:"block text-sm font-medium text-slate-600",children:"Due Date"}),e.jsx(we,{id:"jobDueDate",type:"date",value:o.dueDate,onChange:C=>m("dueDate",C.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jobPriority",className:"block text-sm font-medium text-slate-600",children:"Priority"}),e.jsxs(fA,{id:"jobPriority",value:o.priority||"medium",onChange:C=>m("priority",C.target.value),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jobAssignedTo",className:"block text-sm font-medium text-slate-600",children:"Assign To"}),e.jsxs(fA,{id:"jobAssignedTo",value:o.assignedTeamMemberId||"",onChange:C=>m("assignedTeamMemberId",C.target.value),children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),l.map(C=>e.jsx("option",{value:C.id,children:C.name||C.username},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jobNotes",className:"block text-sm font-medium text-slate-600",children:"Notes"}),e.jsx(HA,{id:"jobNotes",value:o.notes||"",onChange:C=>m("notes",C.target.value),rows:4,placeholder:"Add any relevant notes for this job..."})]})]})]}),e.jsxs("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2",children:[e.jsx(he,{variant:"primary",onClick:w,children:"Save Changes"}),e.jsxs(he,{variant:"danger",onClick:v,children:[e.jsx(pA,{className:"w-4 h-4 mr-2"}),"Delete Job"]}),e.jsx(he,{variant:"outline",onClick:s,children:"Cancel"})]})]})]})},s3=({isOpen:A,onClose:s,onCreateJob:n,users:r,currentUser:l})=>{const o=se.useMemo(()=>r.filter(O=>O.role==="master"),[r]),[u,d]=se.useState(l.id),[h,m]=se.useState(""),[w,v]=se.useState(""),[B,x]=se.useState(new Date().toISOString().split("T")[0]),[C,N]=se.useState(""),[L,F]=se.useState("medium"),Q=se.useMemo(()=>u?r.filter(O=>O.teamId===u&&O.role==="team-member"):[],[r,u]);se.useEffect(()=>{Q.some(O=>O.id===C)||N("")},[Q,C]);const _=()=>{d(l.id),m(""),v(""),x(new Date().toISOString().split("T")[0]),N(""),F("medium")},te=O=>{if(O.preventDefault(),!u||!h.trim()||!w.trim()||!B){alert("Please fill out all required fields.");return}n({customerName:h,description:w,dueDate:B,priority:L,assignedTeamMemberId:C||void 0,masterId:u}),_(),s()};return e.jsx(Mn,{isOpen:A,onClose:s,title:"Create New Job",children:e.jsxs("form",{onSubmit:te,className:"space-y-4",children:[l.role==="admin"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Job For"}),e.jsxs(fA,{value:u,onChange:O=>d(O.target.value),required:!0,children:[e.jsxs("option",{value:l.id,children:["My Team (",l.username,")"]}),o.map(O=>e.jsx("option",{value:O.id,children:O.name||O.username},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Customer Name"}),e.jsx(we,{value:h,onChange:O=>m(O.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Job Description"}),e.jsx(HA,{value:w,onChange:O=>v(O.target.value),required:!0,rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Due Date"}),e.jsx(we,{type:"date",value:B,onChange:O=>x(O.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Priority"}),e.jsxs(fA,{value:L,onChange:O=>F(O.target.value),required:!0,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Assign To"}),e.jsxs(fA,{value:C,onChange:O=>N(O.target.value),disabled:!u||Q.length===0,children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),Q.map(O=>e.jsx("option",{value:O.id,children:O.name||O.username},O.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(he,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:"Create Job"})]})]})})},A5=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"})}),i2=[{value:"customer",label:"Customer Name",isCustom:!1,isSingleInstance:!0,creatable:!1},{value:"description",label:"Description",isCustom:!1,isSingleInstance:!0,creatable:!1},{value:"status",label:"Job Status",isCustom:!1,isSingleInstance:!0,creatable:!1},{value:"dueDate",label:"Due Date",isCustom:!1,isSingleInstance:!0,creatable:!1},{value:"notes",label:"Notes (Large Text)",isCustom:!1,isSingleInstance:!0,creatable:!0},{value:"team",label:"Assign Team Members",isCustom:!1,isSingleInstance:!0,creatable:!0},{value:"priority",label:"Priority",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"task",label:"Task / Job",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"jobStatus",label:"Job Status Dropdown",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"text",label:"Text Field",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"number",label:"Numbers",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"dropdown",label:"Dropdown",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"checkbox",label:"Check Box",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"phone",label:"Phone Number",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"date",label:"Date",isCustom:!0,isSingleInstance:!1,creatable:!0},{value:"deadline",label:"Deadline (Timeline)",isCustom:!0,isSingleInstance:!1,creatable:!0}],l2=[{id:crypto.randomUUID(),label:"New",color:"bg-blue-500"},{id:crypto.randomUUID(),label:"In Progress",color:"bg-orange-500"},{id:crypto.randomUUID(),label:"Complete",color:"bg-green-500"},{id:crypto.randomUUID(),label:"Overdue",color:"bg-red-500"}],o2=[{id:crypto.randomUUID(),label:"High",color:"bg-red-500"},{id:crypto.randomUUID(),label:"Medium",color:"bg-orange-500"},{id:crypto.randomUUID(),label:"Low",color:"bg-blue-500"}],n3=({isOpen:A,onClose:s,onSaveColumn:n,existingColumns:r,editingColumn:l,forceCustom:o=!1})=>{const[u,d]=se.useState(""),[h,m]=se.useState("text"),[w,v]=se.useState(""),[B,x]=se.useState([{id:crypto.randomUUID(),label:"",color:"bg-slate-200"}]),[C,N]=se.useState("bg-white"),[L,F]=se.useState("auto"),[Q,_]=se.useState(!1),[te,O]=se.useState(null),k=!!l,P=k&&!l.isCustom&&!o,E=()=>{d(""),m("text"),v(""),x([{id:crypto.randomUUID(),label:"",color:"bg-slate-200"}]),N("bg-white"),F("auto")};se.useEffect(()=>{A&&(l?(d(l.name),m(l.type),v(l.unit||""),(l.type==="jobStatus"||l.type==="priority")&&(!l.options||l.options.length===0)?x(l.type==="jobStatus"?l2:o2):x(l.options&&l.options.length>0?l.options:[{id:crypto.randomUUID(),label:"",color:"bg-slate-200"}]),N(l.color||"bg-white"),F(l.textColor||"auto")):E())},[A,l]),se.useEffect(()=>{A&&!k&&(h==="jobStatus"?x(l2):h==="priority"?x(o2):h==="dropdown"&&x([{id:crypto.randomUUID(),label:"",color:"bg-slate-200"}]))},[h,k,A]);const D=se.useMemo(()=>i2.filter(S=>k?l&&S.value===l.type?!0:S.creatable?S.isSingleInstance?!r.some(M=>M.type===S.value):!0:!1:S.creatable?S.isSingleInstance?!r.some(M=>M.type===S.value):!0:!1),[k,l,r]),G=()=>{x(S=>[...S,{id:crypto.randomUUID(),label:"",color:"bg-slate-200"}])},T=S=>{x(M=>M.filter(Y=>Y.id!==S))},R=(S,M)=>{x(Y=>Y.map(le=>le.id===S?{...le,label:M}:le))},V=(S,M)=>{x(Y=>Y.map(le=>le.id===S?{...le,color:M}:le))},Z=S=>{te==="column"?N(S):te&&V(te,S),_(!1)},ue=S=>{S.preventDefault();const M=i2.find(le=>le.value===h);if(!u.trim()||!h){alert("Please provide a column name and select a type.");return}const Y={...k&&{id:l.id},name:u.trim(),type:h,isCustom:o?!0:(M==null?void 0:M.isCustom)??!0,color:C,textColor:L};h==="number"&&w.trim()&&(Y.unit=w.trim()),(h==="dropdown"||h==="jobStatus"||h==="priority")&&(Y.options=B.filter(le=>le.label.trim()!=="")),n(Y),E(),s()};return A?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70",onClick:s}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:k?"Edit Column":"Add New Column"}),e.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600",children:e.jsx(er,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Column Name"}),e.jsx(we,{value:u,onChange:S=>d(S.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Column Type"}),e.jsx(fA,{value:h,onChange:S=>m(S.target.value),required:!0,disabled:P,children:D.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))}),P?e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"The type of a default column cannot be changed."}):k?e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Warning: Changing the column type may cause data in this column to be lost or reset."}):null]}),h==="number"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Unit (Optional)"}),e.jsx(we,{value:w,onChange:S=>v(S.target.value),placeholder:"e.g., $, kg, hours",disabled:P})]}),(h==="dropdown"||h==="jobStatus"||h==="priority")&&e.jsxs("fieldset",{disabled:P,children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Dropdown Options"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-md bg-slate-50",children:B.map((S,M)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{O(S.id),_(!0)},className:`w-8 h-8 rounded-md border shrink-0 ${S.color||"bg-white"}`}),e.jsx(we,{value:S.label,onChange:Y=>R(S.id,Y.target.value),placeholder:`Option ${M+1}`,disabled:P}),e.jsx(he,{type:"button",variant:"ghost",size:"icon",onClick:()=>T(S.id),disabled:P,children:e.jsx(er,{className:"w-5 h-5 text-red-500"})})]},S.id))}),e.jsxs(he,{type:"button",variant:"outline",onClick:G,className:"mt-2 text-sm",disabled:P,children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Option"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Column Background Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-md border ${C}`}),e.jsx(he,{type:"button",variant:"outline",onClick:()=>{O("column"),_(!0)},children:"Change Color"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Column Text Color"}),e.jsxs(fA,{value:L,onChange:S=>F(S.target.value),children:[e.jsx("option",{value:"auto",children:"Automatic"}),e.jsx("option",{value:"black",children:"Black"}),e.jsx("option",{value:"white",children:"White"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:'"Automatic" ensures text is readable against the background color.'})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(he,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:k?"Save Changes":"Add Column"})]})]})]})})]}),e.jsx(np,{isOpen:Q,onClose:()=>_(!1),onSelectColor:Z})]}):null},r3=({isOpen:A,onClose:s,onSave:n,title:r,initialValue:l})=>{const[o,u]=se.useState(l);se.useEffect(()=>{A&&u(l)},[A,l]);const d=()=>{n(o)};return A?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70",onClick:s}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:r}),e.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600",children:e.jsx(er,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:h=>{h.preventDefault(),d()},children:[e.jsx(HA,{value:o,onChange:h=>u(h.target.value),rows:10,autoFocus:!0,className:"w-full"}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(he,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:"Save"})]})]})]})})]}):null},i3=({isOpen:A,onClose:s,job:n,currentUser:r,onSaveLog:l})=>{const[o,u]=se.useState("");if(!A||!n)return null;const d=()=>{if(!o.trim())return;const h={userId:r.id,username:r.name||r.username,timestamp:new Date().toISOString(),update:o.trim()},m=[...n.activityLog||[],h];l(m),u("")};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70",onClick:s}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900",children:['Activity Log for "',n.description,'"']}),e.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600",children:e.jsx(er,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-4 pr-2 mb-4 border-b pb-4",children:(n.activityLog||[]).length===0?e.jsx("p",{className:"text-slate-500 text-center py-4",children:"No activity yet."}):[...n.activityLog||[]].reverse().map((h,m)=>e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs text-slate-500 mb-1",children:[e.jsx("span",{className:"font-semibold",children:h.username}),e.jsx("span",{children:new Date(h.timestamp).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-slate-800 whitespace-pre-wrap",children:h.update})]},m))}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Add New Update"}),e.jsx(HA,{value:o,onChange:h=>u(h.target.value),rows:3,placeholder:"Type your update here..."}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(he,{onClick:d,disabled:!o.trim(),children:"Post Update"})})]})]})})]})},l3=({isOpen:A,onClose:s,onSave:n,initialValue:r})=>{const[l,o]=se.useState(""),[u,d]=se.useState("");se.useEffect(()=>{A&&(o((r==null?void 0:r.startDate)||""),d((r==null?void 0:r.endDate)||""))},[A,r]);const h=()=>{if(!l||!u){alert("Please select both a start and end date.");return}if(new Date(l)>new Date(u)){alert("End date cannot be before the start date.");return}n({startDate:l,endDate:u})};return e.jsx(Mn,{isOpen:A,onClose:s,title:"Set Deadline",footer:e.jsxs(e.Fragment,{children:[e.jsx(he,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(he,{variant:"primary",onClick:h,children:"Save"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-700",children:"Start Date"}),e.jsx(we,{id:"startDate",type:"date",value:l,onChange:m=>o(m.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-700",children:"End Date"}),e.jsx(we,{id:"endDate",type:"date",value:u,onChange:m=>d(m.target.value)})]})]})})},c2=({tasks:A,columns:s,onUpdateTask:n,onDeleteTask:r,onUpdateColumns:l,onCreateTask:o,onDuplicateColumn:u,users:d,currentUser:h,centerAlign:m=!1})=>{var Ye;const[w,v]=se.useState(null),[B,x]=se.useState(""),[C,N]=se.useState(null),[L,F]=se.useState({isOpen:!1,editingColumn:null}),Q=se.useRef(null),_=se.useRef({}),[te,O]=se.useState({isOpen:!1,job:null,fieldId:null}),[k,P]=se.useState([]),[E,D]=se.useState({isOpen:!1,jobId:null,fieldId:null,columnName:"",initialValue:""}),[G,T]=se.useState({isOpen:!1,job:null}),[R,V]=se.useState({}),Z=se.useRef({}),[ue,S]=se.useState({isOpen:!1,jobId:null,fieldId:null,initialValue:void 0}),M=se.useMemo(()=>h.role==="admin"?d.filter(ie=>ie.role==="team-member"):d.filter(ie=>ie.teamId===h.id&&ie.role==="team-member"),[d,h]),Y=ie=>{ie(),N(null)},le=ie=>{l(s.map(Ne=>Ne.id===ie?{...Ne,isFrozen:!Ne.isFrozen}:Ne))};se.useLayoutEffect(()=>{const ie={};let Ne=0;s.forEach(Te=>{if(Te.isFrozen){const qe=Z.current[Te.id];qe&&(ie[Te.id]=Ne,Ne+=qe.offsetWidth)}}),V(ie)},[s]);const de=(ie,Ne)=>{var Yt;const{id:Te,type:qe,isCustom:ot,name:xt}=Ne,Ct=["description","text","notes","customer","task"];let Tt=ot?(Yt=ie.customFields)==null?void 0:Yt[Te]:ie[Te];Ct.includes(qe)?D({isOpen:!0,jobId:ie.id,fieldId:Te,columnName:xt,initialValue:Tt||""}):(v({jobId:ie.id,fieldId:Te}),x(Tt||""))},J=()=>{if(!w)return;const{jobId:ie,fieldId:Ne}=w,Te=A.find(xt=>xt.id===ie);if(!Te)return;const qe=s.find(xt=>xt.id===Ne);if(!qe)return;let ot=qe.isCustom?{...Te,customFields:{...Te.customFields||{},[Ne]:B}}:{...Te,[Ne]:B};n(ot),v(null),x("")},U=ie=>{const{jobId:Ne,fieldId:Te}=E;if(!Ne||!Te)return;const qe=A.find(Ct=>Ct.id===Ne);if(!qe)return;const ot=s.find(Ct=>Ct.id===Te);if(!ot)return;let xt=ot.isCustom?{...qe,customFields:{...qe.customFields||{},[Te]:ie}}:{...qe,[Te]:ie};n(xt),D({isOpen:!1,jobId:null,fieldId:null,columnName:"",initialValue:""})},X=ie=>{G.job&&(n({...G.job,activityLog:ie}),T({isOpen:!1,job:null}))},ee=(ie,Ne,Te,qe)=>{const ot=qe?{...ie,customFields:{...ie.customFields||{},[Ne]:Te}}:{...ie,[Ne]:Te};n(ot)};se.useEffect(()=>{const ie=Ne=>{const Te=C?_.current[C]:null;Te&&!Te.contains(Ne.target)&&N(null)};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[C]);const re=ie=>{if("id"in ie&&ie.id)l(s.map(Ne=>Ne.id===ie.id?ie:Ne));else{const Ne={...ie,id:crypto.randomUUID()},Te=[...s];L.insertionIndex!==void 0?Te.splice(L.insertionIndex,0,Ne):Te.push(Ne),l(Te)}F({isOpen:!1,editingColumn:null})},fe=ie=>{F({isOpen:!0,editingColumn:null,insertionIndex:ie})},ve=ie=>{const Ne=s.find(Te=>Te.id===ie);Ne&&F({isOpen:!0,editingColumn:Ne,insertionIndex:void 0})},xe=(ie,Ne)=>{const Te=s.findIndex(qe=>qe.id===ie);if(Te!==-1){const qe=Ne==="left"?Te:Te+1;fe(qe)}},Ce=ie=>{window.confirm("Are you sure you want to delete this column and all its data? This cannot be undone.")&&l(s.filter(Ne=>Ne.id!==ie))},st=(ie,Ne)=>{var qe;const Te=((qe=ie.customFields)==null?void 0:qe[Ne])||[];P(Te),O({isOpen:!0,job:ie,fieldId:Ne})},_e=(ie,Ne)=>{P(Te=>{const qe=new Set(Te);return Ne?qe.add(ie):qe.delete(ie),Array.from(qe)})},$e=()=>{const{job:ie,fieldId:Ne}=te;!ie||!Ne||(ee(ie,Ne,k,!0),O({isOpen:!1,job:null,fieldId:null}))},Ue=ie=>{const{jobId:Ne,fieldId:Te}=ue;if(!Ne||!Te)return;const qe=A.find(ot=>ot.id===Ne);qe&&ee(qe,Te,ie,!0),S({isOpen:!1,jobId:null,fieldId:null})},At={"bg-slate-500":"#64748b","bg-red-500":"#ef4444","bg-orange-500":"#f97316","bg-amber-500":"#f59e0b","bg-yellow-500":"#eab308","bg-lime-500":"#84cc16","bg-green-500":"#22c55e","bg-emerald-500":"#10b981","bg-teal-500":"#14b8a6","bg-cyan-500":"#06b6d4","bg-sky-500":"#0ea5e9","bg-blue-500":"#3b82f6","bg-indigo-500":"#6366f1","bg-violet-500":"#8b5cf6","bg-purple-500":"#a855f7","bg-fuchsia-500":"#d946ef","bg-pink-500":"#ec4899","bg-rose-500":"#f43f5e","bg-slate-200":"#e2e8f0","bg-white":"#ffffff","bg-black":"#000000"},Le=ie=>{if(!ie)return!1;const Ne=ie.startsWith("#")?ie.slice(1):ie;if(Ne.length!==6)return!1;try{const Te=parseInt(Ne.substring(0,2),16),qe=parseInt(Ne.substring(2,4),16),ot=parseInt(Ne.substring(4,6),16);return(.299*Te+.587*qe+.114*ot)/255<.6}catch{return!1}},K=ie=>{if(!ie)return"text-slate-800";const Ne=At[ie];return Le(Ne)?"text-white":"text-slate-800"},Ge=(ie,Ne)=>{var Oe,yt;const{id:Te,type:qe,isCustom:ot,unit:xt,options:Ct}=Ne,Tt=(w==null?void 0:w.jobId)===ie.id&&(w==null?void 0:w.fieldId)===Te,Yt=["description","text","notes","customer","task"];let Pt=At[Ne.color||""]||"#ffffff",jt=K(Ne.color);if(Ne.type==="status")Pt=new Date(ie.dueDate)<new Date&&ie.status!=="complete"?"#ef4444":ie.status==="new"?"#3b82f6":ie.status==="in_progress"?"#f97316":"#22c55e",jt="text-white";else if(["dropdown","jobStatus","priority"].includes(Ne.type)){const mt=ot?(Oe=ie.customFields)==null?void 0:Oe[Te]:ie[Te],wt=(Ct||[]).find(Ft=>Ft.label===mt);wt!=null&&wt.color&&(Pt=At[wt.color]||Pt,jt=K(wt.color))}Ne.textColor==="black"?jt="text-slate-800":Ne.textColor==="white"&&(jt="text-white");let Qt=ot?(yt=ie.customFields)==null?void 0:yt[Te]:ie[Te];if(Tt&&!Yt.includes(qe)){let mt="text";return["date","dueDate"].includes(qe)&&(mt="date"),qe==="number"&&(mt="number"),qe==="phone"&&(mt="tel"),e.jsx(we,{type:mt,value:typeof B=="boolean"?String(B):B,onChange:wt=>x(wt.target.value),onBlur:J,onKeyDown:wt=>{wt.key==="Enter"&&J(),wt.key==="Escape"&&v(null)},autoFocus:!0,className:"w-full h-full !rounded-none !border-2 !border-blue-500"})}switch(qe){case"customer":case"description":case"text":case"notes":return e.jsx("div",{onClick:()=>de(ie,Ne),className:`px-2 cursor-pointer hover:bg-slate-200/50 rounded h-full truncate flex items-center ${m?"justify-center":""} ${jt}`,children:Qt||e.jsx("span",{className:"text-slate-400",children:"..."})});case"task":return e.jsxs("div",{className:"flex items-center justify-between h-full px-2 gap-2",children:[e.jsx("span",{onClick:()=>de(ie,Ne),className:`flex-grow truncate ${m?"text-center":""} cursor-pointer hover:bg-slate-200/50 rounded ${jt}`,children:Qt||e.jsx("span",{className:"text-slate-400",children:"..."})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>T({isOpen:!0,job:ie}),title:"View Activity Log",children:e.jsx(t5,{className:`w-5 h-5 ${jt}`})})]});case"dueDate":case"date":return e.jsx("div",{onClick:()=>de(ie,Ne),className:`px-2 cursor-pointer hover:bg-slate-200/50 rounded h-full truncate flex items-center ${m?"justify-center":""} ${jt}`,children:Qt?new Date(Qt).toLocaleDateString():e.jsx("span",{className:"text-slate-400",children:"..."})});case"deadline":{const mt=Qt||{},{startDate:wt,endDate:Ft}=mt;if(!wt||!Ft)return e.jsx("div",{className:"flex items-center justify-center h-full px-2",children:e.jsx(he,{variant:"ghost",size:"sm",className:`!py-1 !px-2 text-xs w-full ${jt}`,onClick:()=>S({isOpen:!0,jobId:ie.id,fieldId:Te,initialValue:mt}),children:"Set Deadline"})});const Fe=new Date(wt+"T00:00:00"),vt=new Date(Ft+"T23:59:59"),ft=new Date;let gt=0,Jt=vt.getTime()-Fe.getTime();Jt>0&&(gt=(ft.getTime()-Fe.getTime())/Jt*100),ft<Fe&&(gt=0),ft>vt&&(gt=100);const MA=ft>vt;let VA=`${Fe.toLocaleDateString(void 0,{day:"numeric",month:"short"})} - ${vt.toLocaleDateString(void 0,{day:"numeric",month:"short"})}`;return e.jsx("div",{className:"h-full p-1 cursor-pointer",onClick:()=>S({isOpen:!0,jobId:ie.id,fieldId:Te,initialValue:mt}),title:VA,children:e.jsxs("div",{className:"w-full h-full bg-black rounded-full overflow-hidden relative flex items-center justify-center",children:[e.jsx("div",{className:`h-full absolute left-0 top-0 ${MA?"bg-red-500":"bg-green-500"}`,style:{width:`${gt}%`}}),e.jsx("span",{className:"relative z-10 text-xs font-medium px-2 whitespace-nowrap text-white",children:VA})]})})}case"number":case"phone":return e.jsx("div",{onClick:()=>de(ie,Ne),className:`px-2 cursor-pointer hover:bg-slate-200/50 rounded h-full truncate flex items-center ${m?"justify-center":""} ${jt}`,children:Qt||e.jsx("span",{className:"text-slate-400",children:"..."})});case"status":return e.jsxs(fA,{value:ie.status,onChange:mt=>ee(ie,"status",mt.target.value,!1),className:`!bg-transparent !border-0 !ring-0 focus:!ring-0 h-full w-full font-medium text-center !py-0 ${jt}`,children:[e.jsx("option",{value:"new",style:{color:"black"},children:"New"}),e.jsx("option",{value:"in_progress",style:{color:"black"},children:"In Progress"}),e.jsx("option",{value:"complete",style:{color:"black"},children:"Complete"})]});case"team":{const mt=Qt||[],wt=M.filter(Ft=>mt.includes(Ft.id)).map(Ft=>Ft.name||Ft.username).join(", ");return e.jsx("div",{className:"px-2 h-full flex items-center",children:e.jsx("button",{type:"button",className:`w-full ${m?"text-center":"text-left"} truncate py-1 ${jt}`,onClick:()=>st(ie,Te),children:wt||e.jsx("span",{className:"text-slate-400",children:"Unassigned"})})})}case"checkbox":return e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(we,{type:"checkbox",checked:!!Qt,onChange:mt=>ee(ie,Te,mt.target.checked,!0),className:"h-5 w-5"})});case"dropdown":case"jobStatus":case"priority":return e.jsxs(fA,{value:Qt||"",onChange:mt=>ee(ie,Te,mt.target.value,ot),className:`!bg-transparent !border-0 w-full h-full !ring-0 focus:!ring-0 !py-0 ${m?"text-center":""} ${jt}`,children:[e.jsx("option",{value:"",style:{color:"black"},children:"-- Select --"}),(Ct||[]).map(mt=>e.jsx("option",{value:mt.label,style:{color:"black"},children:mt.label},mt.id))]});default:return e.jsx("div",{onClick:()=>de(ie,Ne),className:`px-2 cursor-pointer hover:bg-slate-200/50 rounded h-full truncate flex items-center ${m?"justify-center":""} ${jt}`,children:Qt||e.jsx("span",{className:"text-slate-400",children:"..."})})}};return e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{ref:Q,className:`w-full overflow-x-auto relative ${r?"pb-12":""}`,children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[s.map(ie=>{const Ne=ie.textColor==="black"?"text-slate-800":ie.textColor==="white"?"text-white":K(ie.color);return e.jsx("th",{ref:Te=>{Z.current[ie.id]=Te},className:`p-2 border font-semibold relative whitespace-nowrap min-w-48 ${ie.isFrozen?"sticky z-20":""}`,style:{backgroundColor:At[ie.color||""]||"#f1f5f9",...ie.isFrozen?{left:R[ie.id]??0}:{}},children:e.jsxs("div",{className:`flex items-center ${Ne}`,children:[e.jsxs("span",{className:`flex-grow ${m?"text-center":""}`,children:[ie.name," ",ie.unit&&`(${ie.unit})`]}),e.jsxs("div",{ref:Te=>{_.current[ie.id]=Te},className:"relative z-50",children:[e.jsx(he,{size:"icon",variant:"ghost",onClick:()=>N(C===ie.id?null:ie.id),children:e.jsx(A5,{className:"w-4 h-4"})}),C===ie.id&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white border rounded shadow-lg z-50",children:[e.jsx("button",{onClick:()=>Y(()=>le(ie.id)),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:ie.isFrozen?"Unfreeze Column":"Freeze Column"}),u&&e.jsx("button",{onClick:()=>Y(()=>u(ie.id)),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:"Duplicate Column"}),u&&e.jsx("button",{onClick:()=>Y(()=>xe(ie.id,"left")),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:"Add Column to the left"}),u&&e.jsx("button",{onClick:()=>Y(()=>xe(ie.id,"right")),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:"Add Column to the right"}),e.jsx("button",{onClick:()=>Y(()=>ve(ie.id)),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:"Edit Column"}),e.jsx("button",{onClick:()=>Y(()=>Ce(ie.id)),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-red-600",children:"Delete Column"})]})]})]})},ie.id)}),r&&e.jsx("th",{className:"p-2 border bg-slate-100 w-16 text-black font-semibold sticky right-0 z-20",children:"Actions"}),e.jsx("th",{className:"p-2 border w-[150px] bg-slate-100",children:e.jsxs(he,{onClick:()=>fe(),variant:"outline",size:"sm",className:"w-full",children:[e.jsx(AA,{className:"w-4 h-4 mr-1"})," Add Column"]})})]})}),e.jsx("tbody",{className:"text-slate-800",children:A.map(ie=>e.jsxs("tr",{className:"border-b h-10",children:[s.map(Ne=>{var qe;let Te=At[Ne.color||""]||"#ffffff";if(Ne.type==="status")Te=new Date(ie.dueDate)<new Date&&ie.status!=="complete"?"#ef4444":ie.status==="new"?"#3b82f6":ie.status==="in_progress"?"#f97316":"#22c55e";else if(["dropdown","jobStatus","priority"].includes(Ne.type)){const ot=Ne.isCustom?(qe=ie.customFields)==null?void 0:qe[Ne.id]:ie[Ne.id],xt=(Ne.options||[]).find(Ct=>Ct.label===ot);xt!=null&&xt.color&&(Te=At[xt.color]||Te)}return e.jsx("td",{className:`p-0 border align-middle ${m?"text-center":""} ${Ne.isFrozen?"sticky z-10":""}`,style:{backgroundColor:Te,...Ne.isFrozen?{left:R[Ne.id]??0}:{}},children:Ge(ie,Ne)},Ne.id)}),r&&e.jsx("td",{className:"p-0 border bg-white text-center sticky right-0 z-10",children:e.jsx(he,{variant:"ghost",size:"icon",onClick:Ne=>{Ne.stopPropagation(),r(ie.id)},title:"Delete Task",children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})}),e.jsx("td",{className:"px-2 border bg-white"})]},ie.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-200 font-bold text-slate-800",children:[s.map(ie=>{if(ie.type==="number"){const Ne=A.reduce((Te,qe)=>{var Ct;const ot=(Ct=qe.customFields)==null?void 0:Ct[ie.id],xt=parseFloat(String(ot));return Te+(isNaN(xt)?0:xt)},0);return e.jsxs("td",{className:`p-2 border ${m?"text-center":"text-right"}`,children:["Sum Total: ",Ne.toFixed(2)," ",ie.unit]},ie.id)}return e.jsx("td",{className:"p-2 border"},ie.id)}),r&&e.jsx("td",{className:"p-2 border"}),e.jsx("td",{className:"p-2 border"})]})})]})}),e.jsx(n3,{isOpen:L.isOpen,onClose:()=>F({isOpen:!1,editingColumn:null}),onSaveColumn:re,existingColumns:s,editingColumn:L.editingColumn,forceCustom:!0}),e.jsx(r3,{isOpen:E.isOpen,onClose:()=>D({isOpen:!1,jobId:null,fieldId:null,columnName:"",initialValue:""}),onSave:U,title:`Edit ${E.columnName}`,initialValue:E.initialValue}),e.jsx(i3,{isOpen:G.isOpen,onClose:()=>T({isOpen:!1,job:null}),job:G.job,currentUser:h,onSaveLog:X}),e.jsx(Mn,{isOpen:te.isOpen,onClose:()=>O({isOpen:!1,job:null,fieldId:null}),title:`Assign members to "${(Ye=te.job)==null?void 0:Ye.description}"`,footer:e.jsxs(e.Fragment,{children:[e.jsx(he,{variant:"outline",onClick:()=>O({isOpen:!1,job:null,fieldId:null}),children:"Cancel"}),e.jsx(he,{variant:"primary",onClick:$e,children:"Save"})]}),children:e.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2 p-2",children:[M.map(ie=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-slate-100 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k.includes(ie.id),onChange:Ne=>_e(ie.id,Ne.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-800",children:ie.name||ie.username})]},ie.id)),M.length===0&&e.jsx("p",{className:"text-xs text-slate-500 p-2 text-center",children:"No team members available to assign."})]})}),e.jsx(l3,{isOpen:ue.isOpen,onClose:()=>S({isOpen:!1,jobId:null,fieldId:null}),onSave:Ue,initialValue:ue.initialValue})]})},u2=A=>{if(A.customTaskGroups){const{customTaskGroups:d,onUpdateCustomTask:h,onCreateCustomTask:m,onDeleteCustomTask:w,onAddCustomGroup:v,onDeleteGroup:B,onUpdateGroup:x,onUpdateGroupColumns:C,onDuplicateGroup:N,onDuplicateColumn:L,users:F,currentUser:Q,searchTerm:_}=A,[te,O]=se.useState({anchorEl:null,groupId:null}),[k,P]=se.useState(!1),[E,D]=se.useState(null),[G,T]=se.useState(null),R=se.useRef(null),V=se.useMemo(()=>{if(!_)return d;const M=_.toLowerCase();return d.map(Y=>{const le=Y.tasks.filter(de=>[de.customerName,de.description,de.invoiceNumber,de.notes,...Y.columns.map(U=>{var ee;const X=U.isCustom?(ee=de.customFields)==null?void 0:ee[U.id]:de[U.id];if(U.type==="team"){const re=X||[];return F.filter(ve=>re.includes(ve.id)).map(ve=>ve.name||ve.username).join(", ")}return String(X??"")})].join(" ").toLowerCase().includes(M));return{...Y,tasks:le}}).filter(Y=>Y.tasks.length>0)},[d,_,F]);se.useEffect(()=>{const M=Y=>{R.current&&!R.current.contains(Y.target)&&O({anchorEl:null,groupId:null})};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]);const Z=M=>{const Y=M.tasks.map(le=>{const de={};return M.columns.forEach(J=>{var X;const U=J.isCustom?(X=le.customFields)==null?void 0:X[J.id]:le[J.id];de[J.name]=U??""}),de});ks(`${M.name.replace(/ /g,"_")}.csv`,Y),O({anchorEl:null,groupId:null})},ue={"bg-slate-500":"#64748b","bg-red-500":"#ef4444","bg-orange-500":"#f97316","bg-amber-500":"#f59e0b","bg-yellow-500":"#eab308","bg-lime-500":"#84cc16","bg-green-500":"#22c55e","bg-emerald-500":"#10b981","bg-teal-500":"#14b8a6","bg-cyan-500":"#06b6d4","bg-sky-500":"#0ea5e9","bg-blue-500":"#3b82f6","bg-indigo-500":"#6366f1","bg-violet-500":"#8b5cf6","bg-purple-500":"#a855f7","bg-fuchsia-500":"#d946ef","bg-pink-500":"#ec4899","bg-rose-500":"#f43f5e","bg-white":"#ffffff"},S=M=>{E&&x(E,{color:M}),P(!1),D(null)};return e.jsxs("div",{className:"space-y-6",children:[V.map(M=>{const Y=M.color?ue[M.color]:void 0;return e.jsxs("div",{className:"bg-slate-50 border rounded-lg p-4",style:{borderColor:Y},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[e.jsx(he,{size:"icon",variant:"ghost",onClick:()=>x(M.id,{isCollapsed:!M.isCollapsed}),children:e.jsx(q0,{className:`w-5 h-5 transition-transform ${M.isCollapsed?"-rotate-90":""}`})}),(G==null?void 0:G.id)===M.id?e.jsx(we,{value:G.name,onChange:le=>T({id:M.id,name:le.target.value}),onBlur:()=>{G&&x(G.id,{name:G.name}),T(null)},onKeyDown:le=>{le.key==="Enter"&&(G&&x(G.id,{name:G.name}),T(null),le.preventDefault()),le.key==="Escape"&&T(null)},autoFocus:!0,className:"text-xl font-bold !bg-white !ring-2 !ring-blue-500"}):e.jsx("h2",{className:`text-xl font-bold truncate flex-grow ${Y?"":"text-slate-800"}`,style:{color:Y},children:M.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(he,{onClick:()=>m(M.id,{invoiceId:"CUSTOM",invoiceNumber:"Custom Task",customerName:"",description:"New Task",dueDate:new Date().toISOString().split("T")[0],status:"new",priority:"medium",masterId:Q.role==="admin"?void 0:Q.teamId}),children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Task"]}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{size:"icon",variant:"ghost",onClick:le=>O({anchorEl:le.currentTarget,groupId:M.id}),children:e.jsx(A5,{className:"w-5 h-5"})}),te.groupId===M.id&&e.jsxs("div",{ref:R,className:"absolute right-0 top-full mt-1 w-48 bg-white border rounded shadow-lg z-50",children:[e.jsx("button",{onClick:()=>{T({id:M.id,name:M.name}),O({anchorEl:null,groupId:null})},className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:"Edit Group Name"}),e.jsx("button",{onClick:()=>{D(M.id),P(!0),O({anchorEl:null,groupId:null})},className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:"Change Group Color"}),e.jsx("button",{onClick:()=>{N(M.id),O({anchorEl:null,groupId:null})},className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:"Duplicate Group"}),e.jsx("button",{onClick:()=>{Z(M)},className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-slate-800",children:"Export to CSV"}),e.jsx("button",{onClick:()=>{B(M.id),O({anchorEl:null,groupId:null})},className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm text-red-600",children:"Delete Group"})]})]})]})]}),!M.isCollapsed&&e.jsx(c2,{tasks:M.tasks,columns:M.columns,onUpdateTask:le=>h(M.id,le),onDeleteTask:le=>w(M.id,le),onUpdateColumns:le=>C(M.id,le),onDuplicateColumn:le=>L(M.id,le),users:F,currentUser:Q,centerAlign:!0}),e.jsx("div",{className:"mt-4",children:e.jsxs(he,{onClick:()=>v(M.id),children:[e.jsx(AA,{className:"w-4 h-4 mr-2"})," Add Group Below"]})})]},M.id)}),d.length===0&&e.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:[e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No groups created yet."}),e.jsxs(he,{variant:"primary",onClick:()=>v(),className:"mt-4",children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Create First Group"]})]}),e.jsx(np,{isOpen:k,onClose:()=>P(!1),onSelectColor:S})]})}const{jobs:s,onUpdateJob:n,taskColumns:r,setTaskColumns:l,users:o,currentUser:u}=A;return e.jsx(c2,{tasks:s,columns:r,onUpdateTask:n,onUpdateColumns:l,users:o,currentUser:u})},o3=({jobs:A,onUpdateJob:s,onDeleteTrackedJob:n,onCreateJob:r,onCreateQuoteFromJobs:l,users:o,currentUser:u,taskColumns:d,setTaskColumns:h,customTaskGroups:m,onUpdateCustomTask:w,onCreateCustomTask:v,onDeleteCustomTask:B,onAddCustomGroup:x,onDeleteGroup:C,onUpdateGroup:N,onUpdateGroupColumns:L,onDuplicateGroup:F,onDuplicateColumn:Q,supplierCategories:_})=>{const[te,O]=se.useState(null),[k,P]=se.useState(!1),[E,D]=se.useState([]),[G,T]=se.useState(u.role==="team-member"?"mine":"all"),[R,V]=se.useState("priority"),[Z,ue]=se.useState(!1),[S,M]=se.useState(""),[Y,le]=se.useState(""),[de,J]=se.useState(""),[U,X]=se.useState(""),[ee,re]=se.useState(null),[fe,ve]=se.useState(null),[xe,Ce]=se.useState("board"),[st,_e]=se.useState(""),[$e,Ue]=se.useState([]);se.useMemo(()=>{var Fe;return u.role==="admin"||u.role==="master"||((Fe=u.permissions)==null?void 0:Fe.jobBoard)==="edit"},[u]);const At=se.useMemo(()=>{if(u.role==="master"||u.role==="admin"){const Fe=new Set(A.map(ft=>ft.masterId)),vt=[];return Fe.forEach(ft=>{ft&&vt.push(...o.filter(gt=>gt.teamId===ft&&gt.id!==ft))}),vt.push(...o.filter(ft=>ft.teamId===u.id&&ft.id!==u.id)),Array.from(new Map(vt.map(ft=>[ft.id,ft])).values())}return[]},[o,u,A]),Le=se.useMemo(()=>{const Fe=new Set(A.map(vt=>vt.customerName));return Array.from(Fe)},[A]),K=Fe=>{const vt=new Date;return vt.setHours(0,0,0,0),new Date(Fe.dueDate)<vt&&Fe.status!=="complete"},Ge=Fe=>{$e.length>0&&Fe.invoiceId==="MANUAL"?Ye(Fe.id):O(Fe)},Ye=Fe=>{Ue(vt=>vt.includes(Fe)?vt.filter(gt=>gt!==Fe):[...vt,Fe])},ie=()=>{const Fe=A.filter(Jt=>$e.includes(Jt.id));if(Fe.length===0){alert("Please select at least one job to create a quote.");return}const vt=Fe[0].customerName;if(!Fe.every(Jt=>Jt.customerName===vt)){alert("Please select jobs for the same customer to create a single quote.");return}const gt=Fe.map(Jt=>({id:crypto.randomUUID(),inventoryItemId:null,description:Jt.description,quantity:1,vatRate:20,discount:{type:"fixed",value:0},price:0}));l(vt,gt),Ue([])},Ne=()=>{$e.length!==0&&window.confirm(`Are you sure you want to delete ${$e.length} manual job(s)?`)&&($e.forEach(Fe=>n(Fe)),Ue([]))},Te=se.useMemo(()=>{let Fe=[...A];if(u.role!=="admin"&&G==="mine"&&(Fe=Fe.filter(ft=>ft.assignedTeamMemberId===u.id)),Y&&(Fe=Fe.filter(ft=>ft.customerName.toLowerCase().includes(Y.toLowerCase()))),de){const ft=new Date(de);ft.setHours(0,0,0,0),Fe=Fe.filter(gt=>new Date(gt.dueDate)>=ft)}if(U){const ft=new Date(U);ft.setHours(23,59,59,999),Fe=Fe.filter(gt=>new Date(gt.dueDate)<=ft)}if(S){const ft=S.toLowerCase();Fe=Fe.filter(gt=>gt.description.toLowerCase().includes(ft)||gt.customerName.toLowerCase().includes(ft)||gt.invoiceNumber.toLowerCase().includes(ft))}const vt={high:1,medium:2,low:3};return Fe.sort((ft,gt)=>{if(R==="priority"){const Jt=vt[ft.priority||"medium"],MA=vt[gt.priority||"medium"];return Jt!==MA?Jt-MA:new Date(ft.dueDate).getTime()-new Date(gt.dueDate).getTime()}return R==="dueDate"?new Date(ft.dueDate).getTime()-new Date(gt.dueDate).getTime():new Date(gt.createdAt).getTime()-new Date(ft.createdAt).getTime()}),Fe},[A,G,u.id,S,Y,de,U,u.role,R]),qe=Te.filter(Fe=>K(Fe)),ot=Te.filter(Fe=>Fe.status==="new"&&!K(Fe)),xt=Te.filter(Fe=>Fe.status==="in_progress"&&!K(Fe)),Ct=Te.filter(Fe=>Fe.status==="complete"),Tt=Fe=>{const vt=A.find(ft=>ft.id===Fe.id);s(Fe),O(null),vt&&vt.status!=="complete"&&Fe.status==="complete"&&(D(ft=>[...ft,Fe.id]),setTimeout(()=>{D(ft=>ft.filter(gt=>gt!==Fe.id))},4e3))},Yt=()=>{M(""),le(""),J(""),X("")},Pt=qe.length+ot.length+xt.length+Ct.length,jt=[{status:"Overdue",count:qe.length,color:"bg-red-500",textColor:"text-white"},{status:"New",count:ot.length,color:"bg-blue-500",textColor:"text-white"},{status:"In Progress",count:xt.length,color:"bg-orange-500",textColor:"text-white"},{status:"Complete",count:Ct.length,color:"bg-green-500",textColor:"text-white"}],Qt=(Fe,vt)=>{Fe.dataTransfer.setData("jobId",vt),re(vt)},Oe=(Fe,vt)=>{Fe.preventDefault(),ve(vt)},yt=()=>{ve(null)},mt=(Fe,vt)=>{Fe.preventDefault();const ft=Fe.dataTransfer.getData("jobId"),gt=A.find(Jt=>Jt.id===ft);gt&&gt.status!==vt&&Tt({...gt,status:vt}),re(null),ve(null)},wt=()=>{re(null),ve(null)},Ft=se.useMemo(()=>{if($e.length===0)return null;const Fe=A.find(vt=>vt.id===$e[0]);return(Fe==null?void 0:Fe.customerName)||null},[$e,A]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Jobs Board"}),e.jsxs("div",{className:"flex items-center gap-4",children:[$e.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(he,{variant:"danger",onClick:Ne,children:[e.jsx(pA,{className:"w-5 h-5 mr-2"}),"Delete Selected (",$e.length,")"]}),e.jsxs(he,{variant:"primary",onClick:ie,children:[e.jsx(Ph,{className:"w-5 h-5 mr-2"}),"Create Quote from Selected (",$e.length,")"]})]}),(xe==="board"||xe==="tasks")&&["admin","master"].includes(u.role)&&e.jsxs(he,{variant:"primary",onClick:()=>P(!0),children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Create New Job"]}),u.role!=="admin"&&e.jsxs("div",{className:"flex p-1 bg-slate-100 rounded-lg",children:[e.jsx(he,{variant:G==="all"?"primary":"ghost",onClick:()=>T("all"),className:"!py-1 !px-3 text-sm",children:"All Jobs"}),e.jsx(he,{variant:G==="mine"?"primary":"ghost",onClick:()=>T("mine"),className:"!py-1 !px-3 text-sm",children:"My Jobs"})]})]})]}),e.jsx("div",{className:"border-b border-slate-200 mb-4",children:e.jsxs("div",{className:"flex -mb-px",children:[e.jsx("button",{onClick:()=>Ce("board"),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${xe==="board"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Board View"}),e.jsx("button",{onClick:()=>Ce("tasks"),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${xe==="tasks"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Tasks View"}),e.jsx("button",{onClick:()=>Ce("custom-tasks"),className:`px-4 py-2 text-sm font-medium transition-colors border-b-2 ${xe==="custom-tasks"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Create Custom Tasks"})]})}),(xe==="board"||xe==="tasks")&&e.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm text-slate-600 mb-4 pb-4 border-b",children:[e.jsx("span",{className:"font-semibold",children:"Key:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"New"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-orange-500"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{children:"Complete"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{children:"Overdue"})]})]}),Pt>0&&xe==="board"&&e.jsxs("div",{className:"my-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Jobs Summary"}),e.jsx("div",{className:"flex w-full h-8 rounded-md overflow-hidden bg-slate-200",children:jt.map(Fe=>{if(Fe.count===0)return null;const vt=Fe.count/Pt*100;return e.jsx("div",{className:`flex items-center justify-center ${Fe.color}`,style:{width:`${vt}%`},title:`${Fe.status}: ${Fe.count} job(s)`,children:e.jsx("span",{className:`text-xs font-bold ${Fe.textColor} whitespace-nowrap px-2`,children:`${Fe.status} (${Fe.count})`})},Fe.status)})})]}),(xe==="board"||xe==="tasks")&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(we,{placeholder:"Search description, customer, invoice #...",value:S,onChange:Fe=>M(Fe.target.value),className:"flex-grow"}),e.jsxs(fA,{value:R,onChange:Fe=>V(Fe.target.value),children:[e.jsx("option",{value:"priority",children:"Sort by Priority"}),e.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),e.jsx("option",{value:"createdAt",children:"Sort by Date Created"})]}),e.jsxs(he,{variant:"outline",onClick:()=>ue(!Z),className:"w-full sm:w-auto",children:[e.jsx(qh,{className:"w-5 h-5 mr-2"}),"Filters"]})]}),Z&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-4 p-4 bg-slate-50 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Customer"}),e.jsx(we,{list:"customer-names-jobboard",value:Y,onChange:Fe=>le(Fe.target.value),placeholder:"All customers"}),e.jsx("datalist",{id:"customer-names-jobboard",children:Le.map(Fe=>e.jsx("option",{value:Fe},Fe))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Due Date From"}),e.jsx(we,{type:"date",value:de,onChange:Fe=>J(Fe.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Due Date To"}),e.jsx(we,{type:"date",value:U,onChange:Fe=>X(Fe.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(he,{variant:"outline",onClick:Yt,className:"w-full",children:"Clear Filters"})})]})]}),xe==="custom-tasks"&&e.jsx("div",{className:"mb-4",children:e.jsx(we,{placeholder:"Search tasks by any text content...",value:st,onChange:Fe=>_e(Fe.target.value)})}),xe==="board"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-bold text-lg text-white mb-4 p-2 rounded-md bg-red-500 text-center",children:["Overdue (",qe.length,")"]}),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[qe.map(Fe=>{const vt=Fe.invoiceId==="MANUAL",ft=!!Ft&&Fe.customerName!==Ft;return e.jsx(bh,{job:Fe,onClick:()=>Ge(Fe),users:o,onDragStart:gt=>Qt(gt,Fe.id),onDragEnd:wt,isDragging:ee===Fe.id,isSelected:$e.includes(Fe.id),onToggleSelection:Ye,isSelectable:vt,isSelectionDisabled:ft,supplierCategories:_},Fe.id)}),qe.length===0&&e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No overdue jobs."})]})]}),e.jsxs("div",{className:`bg-slate-100 p-4 rounded-lg transition-colors ${fe==="new"?"border-2 border-dashed border-blue-500 bg-blue-50":""}`,onDragOver:Fe=>Oe(Fe,"new"),onDragLeave:yt,onDrop:Fe=>mt(Fe,"new"),children:[e.jsxs("h3",{className:"font-bold text-lg text-white mb-4 p-2 rounded-md bg-blue-500 text-center",children:["New (",ot.length,")"]}),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[ot.map(Fe=>{const vt=Fe.invoiceId==="MANUAL",ft=!!Ft&&Fe.customerName!==Ft;return e.jsx(bh,{job:Fe,onClick:()=>Ge(Fe),users:o,onDragStart:gt=>Qt(gt,Fe.id),onDragEnd:wt,isDragging:ee===Fe.id,isSelected:$e.includes(Fe.id),onToggleSelection:Ye,isSelectable:vt,isSelectionDisabled:ft,supplierCategories:_},Fe.id)}),ot.length===0&&e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No new jobs."})]})]}),e.jsxs("div",{className:`bg-slate-100 p-4 rounded-lg transition-colors ${fe==="in_progress"?"border-2 border-dashed border-orange-500 bg-orange-50":""}`,onDragOver:Fe=>Oe(Fe,"in_progress"),onDragLeave:yt,onDrop:Fe=>mt(Fe,"in_progress"),children:[e.jsxs("h3",{className:"font-bold text-lg text-white mb-4 p-2 rounded-md bg-orange-500 text-center",children:["In Progress (",xt.length,")"]}),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[xt.map(Fe=>{const vt=Fe.invoiceId==="MANUAL",ft=!!Ft&&Fe.customerName!==Ft;return e.jsx(bh,{job:Fe,onClick:()=>Ge(Fe),users:o,onDragStart:gt=>Qt(gt,Fe.id),onDragEnd:wt,isDragging:ee===Fe.id,isSelected:$e.includes(Fe.id),onToggleSelection:Ye,isSelectable:vt,isSelectionDisabled:ft,supplierCategories:_},Fe.id)}),xt.length===0&&e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No jobs in progress."})]})]}),e.jsxs("div",{className:`bg-slate-100 p-4 rounded-lg transition-colors ${fe==="complete"?"border-2 border-dashed border-green-500 bg-green-50":""}`,onDragOver:Fe=>Oe(Fe,"complete"),onDragLeave:yt,onDrop:Fe=>mt(Fe,"complete"),children:[e.jsxs("h3",{className:"font-bold text-lg text-white mb-4 p-2 rounded-md bg-green-500 text-center",children:["Complete (",Ct.length,")"]}),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[Ct.map(Fe=>{const vt=Fe.invoiceId==="MANUAL",ft=!!Ft&&Fe.customerName!==Ft;return e.jsx(bh,{job:Fe,onClick:()=>Ge(Fe),users:o,isJustCompleted:E.includes(Fe.id),onDragStart:gt=>Qt(gt,Fe.id),onDragEnd:wt,isDragging:ee===Fe.id,isSelected:$e.includes(Fe.id),onToggleSelection:Ye,isSelectable:vt,isSelectionDisabled:ft,supplierCategories:_},Fe.id)}),Ct.length===0&&e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No completed jobs."})]})]})]}):xe==="tasks"?e.jsx(u2,{jobs:Te,onUpdateJob:s,taskColumns:d,setTaskColumns:h,users:o,currentUser:u}):e.jsx(u2,{customTaskGroups:m,onUpdateCustomTask:w,onCreateCustomTask:v,onDeleteCustomTask:B,onAddCustomGroup:x,onDeleteGroup:C,onUpdateGroup:N,onUpdateGroupColumns:L,onDuplicateGroup:F,onDuplicateColumn:Q,users:o,currentUser:u,searchTerm:st})]}),e.jsx(a3,{job:te,onClose:()=>O(null),onSave:Tt,onDelete:Fe=>{n(Fe),O(null)},teamMembers:At}),["admin","master"].includes(u.role)&&e.jsx(s3,{isOpen:k,onClose:()=>P(!1),onCreateJob:r,users:o,currentUser:u})]})},a5=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-7.5-2.962c.57-1.023.994-2.131 1.253-3.284C11.43 8.24 10.56 7.5 9.5 7.5 7.5 7.5 6 9 6 11c0 1.06.376 2.023.994 2.759m12.343-4.509a2.25 2.25 0 1 0-4.5 0 2.25 2.25 0 0 0 4.5 0Zm-7.5 0a2.25 2.25 0 1 0-4.5 0 2.25 2.25 0 0 0 4.5 0Z"})}),c3={sales:"none",purchasing:"none",management:"none",reports:"none",settings:"none",subscriptions:"none",jobBoard:"view"},u3=({users:A,setUsers:s,currentUser:n})=>{const[r,l]=se.useState(!1),[o,u]=se.useState(null),[d,h]=se.useState({name:"",username:"",email:"",password:""}),m=se.useMemo(()=>A.filter(C=>C.teamId===n.id&&C.role==="team-member"),[A,n.id]),w=()=>{u(null),h({name:"",username:"",email:"",password:""}),l(!0)},v=C=>{u(C),h({name:C.name||"",username:C.username,email:C.email,password:""}),l(!0)},B=C=>{if(C.preventDefault(),A.some(N=>N.id!==(o==null?void 0:o.id)&&N.username.toLowerCase()===d.username.toLowerCase())){alert("Username already exists.");return}if(d.email&&A.some(N=>{var L;return N.id!==(o==null?void 0:o.id)&&((L=N.email)==null?void 0:L.toLowerCase())===d.email.toLowerCase()})){alert("Email already exists.");return}if(!o&&!d.password){alert("Password is required for new users.");return}if(d.password&&d.password.length<6){alert("Password must be at least 6 characters long.");return}if(o)s(N=>N.map(L=>L.id===o.id?{...L,name:d.name.trim()||void 0,username:d.username.trim(),email:d.email.trim(),password:d.password?d.password:L.password}:L));else{const N={id:crypto.randomUUID(),name:d.name.trim()||void 0,username:d.username.trim(),email:d.email.trim(),password:d.password,role:"team-member",teamId:n.id,subscriptionStatus:"inherited",isActive:!0,permissions:c3};s(L=>[...L,N])}l(!1)},x=C=>{window.confirm("Are you sure you want to delete this team member?")&&s(N=>N.filter(L=>L.id!==C))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Manage My Team"}),e.jsxs(he,{variant:"primary",onClick:w,children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Team Member"]})]}),e.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:m.length>0?m.map(C=>e.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-lg",children:C.name||C.username}),e.jsx("p",{className:"text-sm text-slate-500",children:C.email}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full inline-block",children:"Jobs Board Only Role"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>v(C),children:e.jsx(ss,{className:"w-5 h-5 text-blue-600"})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>x(C.id),children:e.jsx(pA,{className:"w-5 h-5 text-red-500"})})]})]})},C.id)):e.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:[e.jsx(a5,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"You haven't created any team members yet."})]})})]}),e.jsx(Mn,{isOpen:r,onClose:()=>l(!1),title:o?"Edit Team Member":"Create Team Member",children:e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsx("p",{className:"text-sm p-3 bg-blue-50 text-blue-700 rounded-md",children:'New team members will have a "Jobs Board Only" role, restricting their access to the jobs board.'}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Full Name"}),e.jsx(we,{value:d.name,onChange:C=>h(N=>({...N,name:C.target.value})),placeholder:"e.g. John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Username"}),e.jsx(we,{value:d.username,onChange:C=>h(N=>({...N,username:C.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Email"}),e.jsx(we,{type:"email",value:d.email,onChange:C=>h(N=>({...N,email:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Password"}),e.jsx(we,{type:"password",value:d.password,onChange:C=>h(N=>({...N,password:C.target.value})),placeholder:o?"Leave blank to keep unchanged":"",required:!o})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(he,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:o?"Save Changes":"Create Member"})]})]})})]})},d3=({creditNoteState:A,setCreditNoteState:s,inventory:n,customers:r,settings:l,onSave:o,onAddCustomer:u,readOnly:d=!1,onClose:h})=>{const[m,w]=se.useState(!1),v=A.originalInvoiceNumber===void 0,B=(E,D)=>{s(G=>({...G,[E]:D}))},x=()=>{const E={id:crypto.randomUUID(),inventoryItemId:null,description:"",quantity:1,vatRate:l.defaultVatRate,discount:{type:"fixed",value:0},price:0};s(D=>({...D,lineItems:[...D.lineItems,E]}))},C=(E,D)=>{s(G=>({...G,lineItems:G.lineItems.map(T=>T.id===E?{...T,...D}:T)}))},N=E=>{s(D=>({...D,lineItems:D.lineItems.filter(G=>G.id!==E)}))},L=E=>{s(D=>({...D,notes:E.target.value}))},F=E=>{const D=E.target.value;s(G=>({...G,taxMode:D}))},Q=E=>{s(D=>({...D,customerName:E.name})),w(!1)},_=E=>{u({name:E.trim(),address:"Please update address in Customer Manager"})},te=v&&A.customerName.trim()!==""&&!r.some(E=>E.name.toLowerCase()===A.customerName.toLowerCase().trim()),O=se.useMemo(()=>{let E=0,D=0,G=0;return A.lineItems.forEach(T=>{let R;const V=n.find(S=>S.id===T.inventoryItemId);V?R=Hn(V,T):R=(T.price||0)*T.quantity;const Z=T.discount.type==="percentage"?R*(T.discount.value/100):T.discount.value,ue=R-Z;if(A.taxMode==="inclusive"){const S=1+T.vatRate/100,M=ue/S,Y=ue-M;E+=M,D+=Y,G+=ue}else if(A.taxMode==="exclusive"){const S=ue*(T.vatRate/100);E+=ue,D+=S,G+=ue+S}else E+=ue,G+=ue}),{subtotal:E,vatTotal:D,grandTotal:G}},[A.lineItems,n,A.taxMode]),k=()=>{if(!A.customerName.trim()||!A.reference.trim()){alert("Customer and Reference must be filled in before saving.");return}o(A,O.grandTotal)},P=l.currencySymbol||"";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:l.companyName})}),e.jsx("h1",{className:"text-4xl font-bold text-slate-400 uppercase tracking-widest",children:d?"View Credit Note":"Credit Note"})]}),e.jsxs("fieldset",{disabled:d,className:"disabled:opacity-70",children:[e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Customer"}),v?e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(we,{id:"customerName",value:A.customerName,onChange:E=>B("customerName",E.target.value)}),te&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"New customer. Click '+' to save."})]}),e.jsx(he,{type:"button",size:"icon",variant:"outline",onClick:()=>w(!0),title:"Search for existing customer",children:e.jsx(yr,{className:"w-5 h-5"})}),te&&e.jsx(he,{type:"button",size:"icon",variant:"primary",onClick:()=>_(A.customerName),title:"Save new customer",children:e.jsx(AA,{className:"w-5 h-5"})})]}):e.jsx(we,{value:A.customerName,readOnly:!0,disabled:!0,className:"bg-slate-200"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Credit Note #"}),e.jsx(we,{value:A.creditNoteNumber,readOnly:!0,disabled:!0,className:"bg-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Reference"}),e.jsx(we,{value:A.reference,onChange:E=>B("reference",E.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Issue Date"}),e.jsx(we,{type:"date",value:A.issueDate,onChange:E=>B("issueDate",E.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Original Invoice #"}),e.jsx(we,{value:A.originalInvoiceNumber||"",onChange:E=>B("originalInvoiceNumber",E.target.value),readOnly:!v,disabled:!v,className:v?"":"bg-slate-200",placeholder:v?"(Optional)":""})]})]}),e.jsx("section",{className:"mb-2 hidden sm:block",children:e.jsxs("div",{className:"bg-slate-100 p-4 rounded-t-lg border-b border-slate-200 grid grid-cols-[repeat(24,minmax(0,1fr))] gap-x-1 items-center text-sm font-semibold text-slate-600",children:[e.jsx("div",{className:`pl-2 ${A.taxMode==="none"?"col-span-5":"col-span-4"}`,children:"Item / Description"}),e.jsx("div",{className:"col-span-4 pl-2",children:"Account"}),e.jsx("div",{className:`pl-2 ${A.taxMode==="none"?"col-span-7":"col-span-6"}`,children:"Unit Price / Dim"}),e.jsx("div",{className:"col-span-2 text-center pl-1",children:"Qty"}),e.jsx("div",{className:"col-span-2 text-center pl-1",children:"Discount"}),A.taxMode!=="none"&&e.jsx("div",{className:"col-span-2 text-center pl-1",children:"VAT (%)"}),e.jsx("div",{className:"col-span-3 text-right pl-2",children:"Total"}),e.jsx("div",{className:"col-span-1"})]})}),e.jsx("section",{children:e.jsx("div",{className:"space-y-4",children:A.lineItems.map(E=>e.jsx(b2,{item:E,inventory:n,settings:l,taxMode:A.taxMode,onUpdate:C,onRemove:N,onOpenSearch:()=>{},readOnly:d},E.id))})}),v&&!d&&e.jsxs(he,{variant:"outline",onClick:x,className:"mt-4",children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Line Item"]}),e.jsxs("section",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"taxMode",className:"block text-sm font-medium text-slate-600",children:"Tax Calculation"}),e.jsxs(fA,{id:"taxMode",value:A.taxMode,onChange:F,children:[e.jsx("option",{value:"exclusive",children:"Tax Exclusive"}),e.jsx("option",{value:"inclusive",children:"Tax Inclusive"}),e.jsx("option",{value:"none",children:"No Tax"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"text-sm font-medium text-slate-600",children:"Notes"}),e.jsx(HA,{id:"notes",value:A.notes,onChange:L,placeholder:"Reason for credit...",rows:2})]})]}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2 text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:[P,O.subtotal.toFixed(2)]})]}),A.taxMode!=="none"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT"}),e.jsxs("span",{className:"font-medium",children:[P,O.vatTotal.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-slate-900",children:[e.jsx("span",{children:"Total Credit"}),e.jsxs("span",{children:[P,O.grandTotal.toFixed(2)]})]})]})})]})]}),e.jsx("footer",{className:"mt-12 pt-6 border-t",children:e.jsx("div",{className:"flex justify-end gap-2",children:d?e.jsx(he,{variant:"outline",onClick:h,children:"Close"}):e.jsx(he,{variant:"primary",onClick:k,children:"Save Credit Note"})})})]}),e.jsx(Vh,{isOpen:m,onClose:()=>w(!1),customers:r,onSelectCustomer:Q})]})},s5=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15m-2.625-3.375v-2.625a3.375 3.375 0 013.375-3.375h1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9Z"})}),h3=({creditNotes:A,settings:s,onRemoveCreditNote:n,onDownloadPdf:r})=>{const[l,o]=se.useState(""),u=s.currencySymbol||"",d=se.useMemo(()=>{const h=[...A].sort((w,v)=>new Date(v.createdAt).getTime()-new Date(w.createdAt).getTime());if(!l)return h;const m=l.toLowerCase();return h.filter(w=>w.name.toLowerCase().includes(m)||w.state.creditNoteNumber.toLowerCase().includes(m)||w.state.originalInvoiceNumber.toLowerCase().includes(m)||w.state.customerName.toLowerCase().includes(m))},[A,l]);return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-slate-800",children:"Manage Credit Notes"}),e.jsx("div",{className:"mb-4",children:e.jsx(we,{placeholder:"Search by CN #, original invoice #, or customer...",value:l,onChange:h=>o(h.target.value)})}),e.jsx("div",{className:"max-h-[65vh] overflow-y-auto pr-2",children:d.length===0?e.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:[e.jsx(s5,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No credit notes created yet."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-[600px] space-y-3",children:d.map(h=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-100 p-4 rounded-md",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:h.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Created on ",new Date(h.createdAt).toLocaleDateString(),e.jsx("span",{className:"mx-2",children:"|"}),"Total: ",e.jsxs("span",{className:"font-medium text-slate-600",children:[u,h.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>r(h),title:"Download PDF","aria-label":"Download PDF",children:e.jsx(KA,{className:"w-5 h-5 text-slate-500 hover:text-blue-600"})}),e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>n(h.id),title:"Delete credit note",children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]})]},h.id))})})})]})},d2=[{type:"Assets",label:"Assets"},{type:"Liabilities",label:"Liabilities & Credit Cards"},{type:"Income",label:"Income"},{type:"Expenses",label:"Expenses"},{type:"Equity",label:"Equity"}],f3=({accounts:A,currentUser:s,onAddAccount:n,onUpdateAccount:r,onRemoveAccount:l,settings:o,onUpdateSettings:u})=>{const[d,h]=se.useState("Assets"),[m,w]=se.useState(!1),[v,B]=se.useState(null),[x,C]=se.useState({name:"",type:"Assets",code:"",description:""}),N=se.useMemo(()=>A.filter(k=>k.type===d),[A,d]),L=()=>{B(null),C({name:"",type:d,code:"",description:""}),w(!0)},F=k=>{B(k),C({name:k.name,type:k.type,code:k.code||"",description:k.description||""}),w(!0)},Q=k=>{if(k.preventDefault(),!x.name.trim()){alert("Account name is required.");return}const P={name:x.name.trim(),type:x.type,code:x.code.trim()||void 0,description:x.description.trim()||void 0,isSystem:v==null?void 0:v.isSystem};v?r({...P,id:v.id}):n(P),w(!1)},_=k=>{window.confirm("Are you sure you want to delete this account?")&&l(k)},te=()=>{ks("chart-of-accounts.csv",A)},O=()=>{u(k=>({...k,showAccountOnInvoices:!k.showAccountOnInvoices}))};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Chart of Accounts"}),e.jsxs("div",{className:"flex gap-2",children:[!s.subscriptionStatus.startsWith("trial_")&&e.jsxs(he,{variant:"outline",onClick:te,children:[e.jsx(KA,{className:"w-5 h-5 mr-2"}),"Export to CSV"]}),e.jsxs(he,{variant:"primary",onClick:L,children:[e.jsx(AA,{className:"w-5 h-5 mr-2"}),"Add Account"]})]})]}),e.jsxs("div",{className:"mb-8 p-4 bg-blue-50 border border-blue-100 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-800 uppercase tracking-wider mb-3",children:"Invoice & Quote Settings"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative inline-flex items-center",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.showAccountOnInvoices??!0,onChange:O}),e.jsx("div",{className:"w-11 h-6 bg-slate-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),e.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-slate-900 transition-colors",children:"Show Account column on Invoices and Quotes"})]}),e.jsx("p",{className:"mt-2 text-xs text-blue-600",children:'When disabled, the "Account" selector will be removed from the line item rows on the creation pages to simplify the interface.'})]}),e.jsx("div",{className:"flex border-b border-slate-200 mb-6 overflow-x-auto",children:d2.map(k=>e.jsx("button",{onClick:()=>h(k.type),className:`px-4 py-2 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${d===k.type?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:k.label},k.type))}),e.jsx("div",{className:"space-y-2",children:N.length===0?e.jsx("div",{className:"text-center py-10 border-2 border-dashed border-slate-300 rounded-lg",children:e.jsx("p",{className:"text-sm text-slate-500",children:"No accounts found in this category."})}):N.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200 hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:k.name}),(k.code||k.description)&&e.jsxs("p",{className:"text-sm text-slate-500",children:[k.code&&e.jsx("span",{className:"mr-2 font-mono text-xs bg-slate-200 px-1 rounded",children:k.code}),k.description]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>F(k),title:"Edit Account",children:e.jsx(ss,{className:"w-5 h-5 text-slate-500 hover:text-blue-600"})}),!k.isSystem&&e.jsx(he,{variant:"ghost",size:"icon",onClick:()=>_(k.id),title:"Delete Account",children:e.jsx(pA,{className:"w-5 h-5 text-slate-500 hover:text-red-500"})})]})]},k.id))}),e.jsx(Mn,{isOpen:m,onClose:()=>w(!1),title:v?"Edit Account":"Add Account",children:e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Account Type"}),e.jsx(fA,{value:x.type,onChange:k=>C(P=>({...P,type:k.target.value})),disabled:!!v,children:d2.map(k=>e.jsx("option",{value:k.type,children:k.label},k.type))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Account Name"}),e.jsx(we,{value:x.name,onChange:k=>C(P=>({...P,name:k.target.value})),required:!0,placeholder:"e.g. Office Supplies"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Account Code (Optional)"}),e.jsx(we,{value:x.code,onChange:k=>C(P=>({...P,code:k.target.value})),placeholder:"e.g. 6001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Description (Optional)"}),e.jsx(we,{value:x.description,onChange:k=>C(P=>({...P,description:k.target.value}))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(he,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(he,{type:"submit",variant:"primary",children:"Save"})]})]})})]})},m3=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),p3=A=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75V18h-1.5v.75m-1.5 0h-3.375c-.621 0-1.125-.504-1.125-1.125V15h6.75v2.625c0 .621-.504 1.125-1.125 1.125Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 20.625 4.5H3.375A2.25 2.25 0 0 0 1.125 6.75v10.5A2.25 2.25 0 0 0 3.375 19.5Z"})]}),g3=A=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.007 1.11-.95.542.057 1.007.56 1.11.95l.223 1.353c.427.248.815.56 1.15.925l1.248-.62c.528-.263 1.162-.03 1.348.472.186.503.03 1.162-.472 1.348l-1.248.62c.365.335.677.723.925 1.15l1.353.223c.542.09.95.56.95 1.11-.057.542-.56 1.007-.95 1.11l-1.353.223c-.248.427-.56.815-.925 1.15l.62 1.248c.263.528.03 1.162-.472 1.348-.503.186-1.162.03-1.348-.472l-.62-1.248c-.335.365-.723.677-1.15.925l-.223 1.353c-.09.542-.56.95-1.11.95-.542-.057-1.007-.56-1.11-.95l-.223-1.353c-.427-.248-.815-.56-1.15-.925l-1.248.62c-.528.263-1.162.03-1.348-.472-.186-.503-.03-1.162.472-1.348l1.248-.62c-.365-.335-.677-.723-.925-1.15l-1.353-.223c-.542-.09-.95-.56-.95-1.11.057-.542.56-1.007.95-1.11l1.353-.223c.248-.427.56.815.925-1.15l-.62-1.248c-.263-.528-.03-1.162.472-1.348.503-.186 1.162-.03 1.348.472l.62 1.248c.335-.365.723.677 1.15.925l.223-1.353z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),x3=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),v3=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H21"})}),b3=({id:A,invoiceState:s,settings:n,inventory:r,customers:l,mode:o,appliedCredits:u=[]})=>{const d=l.find(B=>B.name===s.customerName),h=o==="invoice"?n.invoiceTitle||"Invoice":n.quoteTitle||"Quote",m=n.currencySymbol||"",w=Qi.useMemo(()=>{let B=0,x=0,C=0;return s.lineItems.forEach(N=>{let L;const F=r.find(te=>te.id===N.inventoryItemId);if(F){const te=F.parentId?r.find(P=>P.id===F.parentId):null,O=[...F.addOnOptions||[],...(te==null?void 0:te.addOnOptions)||[]],k=Array.from(new Map(O.map(P=>[`${P.name.toLowerCase()}-${P.price}`,P])).values());L=Hn({...F,addOnOptions:k},N)}else L=(N.price||0)*N.quantity;const Q=N.discount.type==="percentage"?L*(N.discount.value/100):N.discount.value,_=L-Q;if(s.taxMode==="inclusive"){const te=1+N.vatRate/100,O=_/te,k=_-O;B+=O,x+=k,C+=_}else if(s.taxMode==="exclusive"){const te=_*(N.vatRate/100);B+=_,x+=te,C+=_+te}else B+=_,C+=_}),{subtotal:B,vatTotal:x,grandTotal:C}},[s.lineItems,r,s.taxMode]),v=u.reduce((B,x)=>B+x.amount,0);return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:n.companyAddress}),n.vatNumber&&e.jsxs("p",{children:["VAT: ",n.vatNumber]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.companyLogo&&e.jsx("img",{src:n.companyLogo,alt:"Company Logo",className:"h-12 w-auto max-w-[150px] object-contain"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:h})]})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-600 mb-1",children:"Bill To:"}),e.jsx("p",{className:"font-semibold",children:s.customerName}),(d==null?void 0:d.contactName)&&e.jsxs("p",{className:"text-slate-600",children:["Attn: ",d.contactName]}),d&&e.jsx("p",{className:"whitespace-pre-wrap text-slate-600",children:d.address})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-bold text-slate-600",children:[h," No:"]})," ",s.invoiceNumber]}),s.reference&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Reference:"})," ",s.reference]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Date Issued:"})," ",s.issueDate]}),o==="invoice"&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Date Due:"})," ",s.dueDate]})]})]}),e.jsx("section",{children:e.jsxs("table",{className:"w-full text-left table-fixed text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:`p-1 ${s.taxMode==="none"?"w-[50%]":"w-[40%]"}`,children:"Description"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Qty"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:s.taxMode==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Discount"}),s.taxMode!=="none"&&e.jsx("th",{className:"p-1 text-right w-[10%]",children:"VAT"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:"Total"})]})}),e.jsx("tbody",{children:s.lineItems.map(B=>{const x=r.find(E=>E.id===B.inventoryItemId),C=x!=null&&x.parentId?r.find(E=>E.id===x.parentId):null,N=[...(x==null?void 0:x.addOnOptions)||[],...(C==null?void 0:C.addOnOptions)||[]],L=Array.from(new Map(N.map(E=>[`${E.name.toLowerCase()}-${E.price}`,E])).values());let F,Q,_,te=B.description;if(x){F=Hn({...x,addOnOptions:L},B),Q=B.quantity!==0?F/B.quantity:0,_=x.name;const E=(B.selectedAddOnIds||[]).map(D=>{const G=L.find(T=>T.id===D);return G?`${G.name} (+${m}${G.price.toFixed(2)})`:null}).filter(Boolean).join(", ");E&&(te=(te?te+`
`:"")+"Options: "+E)}else{F=(B.price||0)*B.quantity,Q=B.price||0;const E=B.description.split(`
`);_=E[0]||"",te=E.slice(1).join(`
`)}const O=B.discount.type==="percentage"?F*(B.discount.value/100):B.discount.value,k=F-O;let P;if(s.taxMode==="exclusive"){const E=k*(B.vatRate/100);P=k+E}else P=k;return e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"p-1 align-top",children:[e.jsx("p",{className:"font-medium",children:_}),e.jsx("p",{className:"text-slate-500 whitespace-pre-wrap",children:te})]}),e.jsx("td",{className:"p-1 text-right align-top",children:B.quantity}),e.jsxs("td",{className:"p-1 text-right align-top",children:[m,Q.toFixed(2)]}),e.jsxs("td",{className:"p-1 text-right align-top",children:[m,O.toFixed(2)]}),s.taxMode!=="none"&&e.jsxs("td",{className:"p-1 text-right align-top",children:[B.vatRate,"%"]}),e.jsxs("td",{className:"p-1 text-right align-top font-medium",children:[m,P.toFixed(2)]})]},B.id)})})]})}),e.jsx("section",{className:"mt-8 flex justify-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:[m,w.subtotal.toFixed(2)]})]}),s.taxMode!=="none"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT"}),e.jsxs("span",{className:"font-medium",children:[m,w.vatTotal.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900",children:[e.jsx("span",{children:o==="invoice"?"Invoice Total":"Total"}),e.jsxs("span",{children:[m,w.grandTotal.toFixed(2)]})]}),o==="invoice"&&u.length>0&&e.jsx(e.Fragment,{children:u.map(B=>e.jsxs("div",{className:"flex justify-between text-sm text-slate-700",children:[e.jsxs("span",{children:["Credit Note #",B.number]}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",m,B.amount.toFixed(2)]})]},B.number))}),o==="invoice"&&e.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900 bg-slate-100 p-2 rounded mt-2",children:[e.jsx("span",{children:"Amount Due"}),e.jsxs("span",{children:[m,(w.grandTotal-v).toFixed(2)]})]})]})}),e.jsxs("section",{className:"mt-8",children:[s.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-bold",children:"Notes:"}),e.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:s.notes})]}),e.jsxs("div",{className:"text-xs text-slate-600 bg-slate-50 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold mb-1",children:"Payment Details:"}),e.jsx("p",{children:n.paymentTerms}),e.jsxs("p",{children:["Bank: ",n.bankName]}),e.jsxs("p",{children:["A/N: ",n.accountNumber," | Sort Code: ",n.sortCode]})]})]})]})},w3=({id:A,poState:s,settings:n,suppliers:r})=>{const l=r.find(d=>d.id===s.supplierId||d.name===s.supplierName),o=n.currencySymbol||"",u=Qi.useMemo(()=>{let d=0,h=0,m=0;return s.lineItems.forEach(w=>{const v=w.quantity*w.unitPrice;if(s.taxMode==="inclusive"){const B=1+w.vatRate/100,x=v/B,C=v-x;d+=x,h+=C,m+=v}else if(s.taxMode==="exclusive"){const B=v*(w.vatRate/100);d+=v,h+=B,m+=v+B}else d+=v,m+=v}),{subtotal:d,vatTotal:h,grandTotal:m}},[s.lineItems,s.taxMode]);return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:n.companyAddress})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Purchase Order"})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-600 mb-1",children:"Supplier:"}),e.jsx("p",{className:"font-semibold",children:s.supplierName}),l&&e.jsx("p",{className:"whitespace-pre-wrap text-slate-600",children:l.address})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"PO No:"})," ",s.poNumber]}),s.reference&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Reference:"})," ",s.reference]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Date Ordered:"})," ",s.issueDate]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Expected Delivery:"})," ",s.deliveryDate]})]})]}),e.jsx("section",{children:e.jsxs("table",{className:"w-full text-left table-fixed text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:`p-1 ${s.taxMode==="none"?"w-[60%]":"w-[50%]"}`,children:"Description"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Qty"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:s.taxMode==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"}),s.taxMode!=="none"&&e.jsx("th",{className:"p-1 text-right w-[10%]",children:"VAT"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:"Total"})]})}),e.jsx("tbody",{children:s.lineItems.map(d=>{const h=d.quantity*d.unitPrice,m=s.taxMode==="exclusive"?h*(1+d.vatRate/100):h;return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1 align-top",children:d.description}),e.jsx("td",{className:"p-1 text-right align-top",children:d.quantity}),e.jsxs("td",{className:"p-1 text-right align-top",children:[o,d.unitPrice.toFixed(2)]}),s.taxMode!=="none"&&e.jsxs("td",{className:"p-1 text-right align-top",children:[d.vatRate,"%"]}),e.jsxs("td",{className:"p-1 text-right align-top font-medium",children:[o,m.toFixed(2)]})]},d.id)})})]})}),e.jsx("section",{className:"mt-8 flex justify-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:[o,u.subtotal.toFixed(2)]})]}),s.taxMode!=="none"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT"}),e.jsxs("span",{className:"font-medium",children:[o,u.vatTotal.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[o,u.grandTotal.toFixed(2)]})]})]})}),e.jsx("section",{className:"mt-8",children:s.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-bold",children:"Notes:"}),e.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:s.notes})]})})]})},B3=({id:A,filteredInvoices:s,filteredCreditNotes:n,filteredPurchaseOrders:r,filteredBills:l,vatSummary:o,settings:u,inventory:d,startDate:h,endDate:m})=>{const w=u.currencySymbol||"",v=C=>`${w}${C.toFixed(2)}`,B=(C,N)=>{let L=0,F=0;return C.forEach(Q=>{let _;const te=d.find(P=>P.id===Q.inventoryItemId);te?_=Hn(te,Q):_=(Q.price||0)*Q.quantity;const O=Q.discount.type==="percentage"?_*(Q.discount.value/100):Q.discount.value,k=_-O;if(N==="inclusive"){const P=k/(1+Q.vatRate/100);L+=P,F+=k-P}else N==="exclusive"?(L+=k,F+=k*(Q.vatRate/100)):L+=k}),{subtotal:L,vatTotal:F}},x=(C,N)=>{let L=0,F=0;return C.forEach(Q=>{const _=Q.quantity*Q.unitPrice;if(N==="inclusive"){const te=_/(1+Q.vatRate/100);L+=te,F+=_-te}else N==="exclusive"?(L+=_,F+=_*(Q.vatRate/100)):L+=_}),{subtotal:L,vatTotal:F}};return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:u.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:u.companyAddress}),u.vatNumber&&e.jsxs("p",{children:["VAT: ",u.vatNumber]})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"VAT Summary Report"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Report Date:"})," ",new Date().toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Period:"})," ",h||"Start"," to ",m||"End"]})]}),e.jsxs("section",{className:"mb-8 p-4 bg-slate-50 rounded-lg grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-slate-600",children:"VAT Payable (Sales)"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:v(o.totalVatPayable)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-slate-600",children:"VAT Reclaimable (Purchases)"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:v(o.totalVatReclaimable)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-slate-600",children:"Net VAT Position"}),e.jsx("p",{className:"text-lg font-bold",children:v(o.netVatPosition)})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-base mb-2",children:"VAT on Sales (Payable)"}),e.jsxs("table",{className:"w-full text-left table-fixed text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:"p-1 w-[15%]",children:"Date"}),e.jsx("th",{className:"p-1 w-[20%]",children:"Document #"}),e.jsx("th",{className:"p-1 w-[35%]",children:"Customer"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Net"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"VAT"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Total"})]})}),e.jsxs("tbody",{children:[s.map(C=>{const{subtotal:N,vatTotal:L}=B(C.state.lineItems,C.state.taxMode);return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1",children:C.state.issueDate}),e.jsx("td",{className:"p-1",children:C.state.invoiceNumber}),e.jsx("td",{className:"p-1",children:C.state.customerName}),e.jsx("td",{className:"p-1 text-right",children:v(N)}),e.jsx("td",{className:"p-1 text-right",children:v(L)}),e.jsx("td",{className:"p-1 text-right",children:v(C.total)})]},C.id)}),n.map(C=>{const{subtotal:N,vatTotal:L}=B(C.state.lineItems,C.state.taxMode);return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1",children:C.state.issueDate}),e.jsxs("td",{className:"p-1",children:[C.state.creditNoteNumber," (CN)"]}),e.jsx("td",{className:"p-1",children:C.state.customerName}),e.jsxs("td",{className:"p-1 text-right text-red-600",children:["(",v(N),")"]}),e.jsxs("td",{className:"p-1 text-right text-red-600",children:["(",v(L),")"]}),e.jsxs("td",{className:"p-1 text-right text-red-600",children:["(",v(C.total),")"]})]},`cn-${C.id}`)})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"font-bold text-slate-800 text-base mb-2",children:"VAT on Purchases (Reclaimable)"}),e.jsxs("table",{className:"w-full text-left table-fixed text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:"p-1 w-[15%]",children:"Date"}),e.jsx("th",{className:"p-1 w-[20%]",children:"Document #"}),e.jsx("th",{className:"p-1 w-[35%]",children:"Supplier"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Net"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"VAT"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Total"})]})}),e.jsxs("tbody",{children:[r.map(C=>{const{subtotal:N,vatTotal:L}=x(C.state.lineItems,C.state.taxMode);return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1",children:C.state.issueDate}),e.jsxs("td",{className:"p-1",children:[C.state.poNumber," (PO)"]}),e.jsx("td",{className:"p-1",children:C.state.supplierName}),e.jsx("td",{className:"p-1 text-right",children:v(N)}),e.jsx("td",{className:"p-1 text-right",children:v(L)}),e.jsx("td",{className:"p-1 text-right",children:v(C.total)})]},`po-${C.id}`)}),l.map(C=>{const{subtotal:N,vatTotal:L}=x(C.state.lineItems,C.state.taxMode);return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1",children:C.state.issueDate}),e.jsxs("td",{className:"p-1",children:[C.state.reference," (Bill)"]}),e.jsx("td",{className:"p-1",children:C.state.supplierName}),e.jsx("td",{className:"p-1 text-right",children:v(N)}),e.jsx("td",{className:"p-1 text-right",children:v(L)}),e.jsx("td",{className:"p-1 text-right",children:v(C.total)})]},`bill-${C.id}`)})]})]})]})]})},y3=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),C3=({id:A,reportData:s,startDate:n,endDate:r,settings:l})=>{const o=l.currencySymbol||"",u=d=>{const h=d.toFixed(2);return d<0?`-${o}${Math.abs(d).toFixed(2)}`:`${o}${h}`};return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:l.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:l.companyAddress}),l.vatNumber&&e.jsxs("p",{children:["VAT: ",l.vatNumber]})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Profit & Loss"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Report Date:"})," ",new Date().toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Period:"})," ",n||"Start"," to ",r||"End"]})]}),e.jsx("section",{children:e.jsx("table",{className:"w-full text-left table-fixed text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-semibold w-2/3",children:"Total Revenue (ex. VAT)"}),e.jsx("td",{className:"p-2 text-right",children:u(s.totalRevenue)})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-semibold",children:"Cost of Goods Sold (ex. VAT)"}),e.jsxs("td",{className:"p-2 text-right text-red-600",children:["(",u(s.cogs),")"]})]}),e.jsxs("tr",{className:"border-b-2 border-slate-800 bg-slate-100",children:[e.jsx("td",{className:"p-2 font-bold text-base",children:"Gross Profit"}),e.jsx("td",{className:"p-2 text-right font-bold text-base",children:u(s.grossProfit)})]})]})})}),e.jsxs("section",{className:"mt-8",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-base mb-2",children:"VAT Summary"}),e.jsx("table",{className:"w-full text-left table-fixed text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-semibold w-2/3",children:"VAT on Sales (Payable)"}),e.jsx("td",{className:"p-2 text-right",children:u(s.vatOnSales)})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-semibold",children:"VAT on Purchases (Reclaimable)"}),e.jsxs("td",{className:"p-2 text-right",children:["(",u(s.vatOnPurchases),")"]})]}),e.jsxs("tr",{className:"border-b-2 border-slate-800 bg-slate-100",children:[e.jsx("td",{className:"p-2 font-bold text-base",children:"Net VAT Position"}),e.jsx("td",{className:"p-2 text-right font-bold text-base",children:u(s.netVatPosition)})]})]})}),e.jsx("p",{className:"text-xs text-right mt-1 text-slate-500",children:s.netVatPosition>=0?"Amount you owe":"Amount you can reclaim"})]})]})},N3=({isOpen:A,onClose:s,users:n})=>{const[r,l]=se.useState(""),[o,u]=se.useState(""),d=()=>{const h=n.filter(w=>w.email).map(w=>w.email).join(",");if(!h){alert("There are no users with email addresses to send to.");return}const m=`mailto:?bcc=${encodeURIComponent(h)}&subject=${encodeURIComponent(r)}&body=${encodeURIComponent(o)}`;window.location.href=m,s(),setTimeout(()=>{alert("Your email client has been opened to send the bulk email.")},500)};return A?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl transform transition-all sm:my-8 w-full max-w-2xl mx-4 border border-slate-200",children:[e.jsxs("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xl leading-6 font-bold text-slate-900",id:"modal-title",children:"Send Bulk Email to All Registered Users"}),e.jsxs("button",{type:"button",className:"text-slate-400 hover:text-slate-600",onClick:s,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(er,{className:"h-6 w-6"})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailSubject",className:"block text-sm font-medium text-slate-600",children:"Subject"}),e.jsx(we,{id:"emailSubject",value:r,onChange:h=>l(h.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailBody",className:"block text-sm font-medium text-slate-600",children:"Body"}),e.jsx(HA,{id:"emailBody",value:o,onChange:h=>u(h.target.value),rows:10})]})]})]}),e.jsxs("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2",children:[e.jsxs(he,{variant:"primary",onClick:d,children:[e.jsx(_o,{className:"w-5 h-5 mr-2"}),"Send via Email Client"]}),e.jsx(he,{variant:"outline",onClick:s,children:"Cancel"})]})]})]}):null},j3=({id:A,reportData:s,asOfDate:n,settings:r})=>{const l=r.currencySymbol||"",o=d=>{const h=d.toFixed(2);return d<0?`-${l}${Math.abs(d).toFixed(2)}`:`${l}${h}`},u=s.allIncomingTransactions+s.accountsReceivable-s.accountsPayable;return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:r.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:r.companyAddress})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Financial Position"})]}),e.jsx("section",{className:"mb-8",children:e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"As of Date:"})," ",new Date(n).toLocaleDateString()]})}),e.jsx("section",{children:e.jsx("table",{className:"w-full text-left table-fixed text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-semibold w-2/3",children:"All Incoming Transactions"}),e.jsx("td",{className:"p-2 text-right",children:o(s.allIncomingTransactions)})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-semibold",children:"To Receive (Accounts Receivable)"}),e.jsx("td",{className:"p-2 text-right",children:o(s.accountsReceivable)})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-semibold",children:"To Be Paid Out (Accounts Payable)"}),e.jsxs("td",{className:"p-2 text-right text-red-600",children:["(",o(s.accountsPayable),")"]})]}),e.jsxs("tr",{className:"border-t-2 border-slate-800 bg-slate-100",children:[e.jsx("td",{className:"p-2 font-bold text-base",children:"Total"}),e.jsx("td",{className:"p-2 text-right font-bold text-base",children:o(u)})]})]})})})]})},F3=({id:A,reportData:s,startDate:n,endDate:r,settings:l})=>{const o=l.currencySymbol||"",u=d=>`${o}${d.toFixed(2)}`;return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:l.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:l.companyAddress})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Cash Flow Statement"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Report Date:"})," ",new Date().toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Period:"})," ",n||"Start"," to ",r||"End"]})]}),e.jsx("section",{children:e.jsxs("table",{className:"w-full text-left table-fixed text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-100",children:e.jsx("th",{className:"p-2 font-bold text-base",colSpan:2,children:"Cash Flow from Operating Activities"})})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 w-2/3",children:"Cash Inflows (from Invoice Payments)"}),e.jsx("td",{className:"p-2 text-right",children:u(s.cashInflows)})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Cash Outflows (from Bill Payments)"}),e.jsxs("td",{className:"p-2 text-right text-red-600",children:["(",u(s.cashOutflows),")"]})]}),e.jsxs("tr",{className:"border-b-2 border-slate-800 bg-slate-100",children:[e.jsx("td",{className:"p-2 font-bold text-base",children:"Net Cash Flow"}),e.jsx("td",{className:"p-2 text-right font-bold text-base",children:u(s.netCashFlow)})]})]})]})})]})},S3=({id:A,reportData:s,settings:n,startDate:r,endDate:l})=>{const o=n.currencySymbol||"",u=d=>`${o}${d.toFixed(2)}`;return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:n.companyAddress})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Income By Customer"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Report Date:"})," ",new Date().toLocaleDateString()]}),(r||l)&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Period:"})," ",r?new Date(r).toLocaleDateString():"Start"," to ",l?new Date(l).toLocaleDateString():"End"]})]}),e.jsx("section",{children:e.jsxs("table",{className:"w-full text-left table-fixed text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:"p-2 font-semibold w-1/2",children:"Customer Name"}),e.jsx("th",{className:"p-2 font-semibold text-right w-1/4",children:"Total Billed"}),e.jsx("th",{className:"p-2 font-semibold text-right w-1/4",children:"Outstanding Balance"})]})}),e.jsx("tbody",{children:s.map(d=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 text-slate-800",children:d.name}),e.jsx("td",{className:"p-2 text-right text-slate-800",children:u(d.totalBilled)}),e.jsx("td",{className:"p-2 text-right font-medium text-red-600",children:u(d.outstandingBalance)})]},d.id))})]})})]})},Q3=({id:A,reportData:s,settings:n,startDate:r,endDate:l})=>{const o=n.currencySymbol||"",u=d=>`${o}${d.toFixed(2)}`;return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:n.companyAddress})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Paid to Suppliers"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Report Date:"})," ",new Date().toLocaleDateString()]}),(r||l)&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Period:"})," ",r?new Date(r).toLocaleDateString():"Start"," to ",l?new Date(l).toLocaleDateString():"End"]})]}),e.jsx("section",{children:e.jsxs("table",{className:"w-full text-left table-fixed text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:"p-2 font-semibold w-[40%]",children:"Supplier Name"}),e.jsx("th",{className:"p-2 font-semibold text-right w-[20%]",children:"Total Billed"}),e.jsx("th",{className:"p-2 font-semibold text-right w-[20%]",children:"Total Paid"}),e.jsx("th",{className:"p-2 font-semibold text-right w-[20%]",children:"Outstanding Balance"})]})}),e.jsx("tbody",{children:s.map(d=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 text-slate-800",children:d.name}),e.jsx("td",{className:"p-2 text-right text-slate-800",children:u(d.totalBilled)}),e.jsx("td",{className:"p-2 text-right font-medium text-green-600",children:u(d.totalPaid)}),e.jsx("td",{className:"p-2 text-right font-medium text-red-600",children:u(d.outstanding)})]},d.id))})]})})]})},U3=({id:A,reportData:s,startDate:n,endDate:r,startBalance:l,settings:o})=>{const u=o.currencySymbol||"",d=h=>`${u}${h.toFixed(2)}`;return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:o.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:o.companyAddress})]}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Account Balances"})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Report Date:"})," ",new Date().toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Period:"})," ",n||"Start"," to ",r||"End"]})]}),e.jsxs("section",{className:"mb-8 p-4 bg-slate-50 rounded-lg grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-600",children:"Start Balance"}),e.jsx("p",{className:"text-lg font-bold",children:d(l)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-600",children:"Total Income"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:d(s.totalIncome)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-600",children:"Total Expenses"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:d(s.totalExpenses)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-600",children:"End Balance"}),e.jsx("p",{className:"text-lg font-bold",children:d(s.endBalance)})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"font-bold text-slate-800 text-base mb-2",children:"Transaction Ledger"}),e.jsxs("table",{className:"w-full text-left table-fixed text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:"p-2 font-semibold w-[15%]",children:"Date"}),e.jsx("th",{className:"p-2 font-semibold w-[40%]",children:"Description"}),e.jsx("th",{className:"p-2 font-semibold text-right w-[15%]",children:"Income"}),e.jsx("th",{className:"p-2 font-semibold text-right w-[15%]",children:"Expense"}),e.jsx("th",{className:"p-2 font-semibold text-right w-[15%]",children:"Balance"})]})}),e.jsx("tbody",{children:s.transactions.map((h,m)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 text-slate-600",children:new Date(h.date).toLocaleDateString()}),e.jsx("td",{className:"p-2 text-slate-800",children:h.description}),e.jsx("td",{className:"p-2 text-right font-medium text-green-600",children:h.type==="income"?d(h.amount):"-"}),e.jsx("td",{className:"p-2 text-right font-medium text-red-600",children:h.type==="expense"?d(Math.abs(h.amount)):"-"}),e.jsx("td",{className:"p-2 text-right font-semibold text-slate-800",children:d(h.balance)})]},m))})]})]})]})},To=({title:A,children:s,defaultOpen:n=!1})=>{const[r,l]=se.useState(n),o=()=>{l(!r)},u=`collapsible-section-${A.replace(/\s+/g,"-").toLowerCase()}`;return e.jsxs("div",{children:[e.jsxs("button",{onClick:o,"aria-expanded":r,"aria-controls":u,className:"w-full flex items-center justify-between px-4 py-2 text-xs font-semibold text-blue-400 uppercase tracking-wider rounded-lg hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("span",{children:A}),e.jsx(q0,{className:`w-5 h-5 text-slate-200 transition-transform duration-200 ${r?"rotate-180":""}`})]}),e.jsx("div",{id:u,className:`transition-all duration-300 ease-in-out overflow-hidden ${r?"max-h-[500px] visible":"max-h-0 invisible"}`,children:e.jsx("div",{className:"pt-2 pb-1 space-y-1",children:s})})]})},E3=({id:A,creditNote:s,settings:n,inventory:r,customers:l})=>{const{state:o}=s,u=l.find(m=>m.name===o.customerName),d=n.currencySymbol||"",h=Qi.useMemo(()=>{let m=0,w=0,v=0;return o.lineItems.forEach(B=>{let x;const C=r.find(F=>F.id===B.inventoryItemId);C?x=Hn(C,B):x=(B.price||0)*B.quantity;const N=B.discount.type==="percentage"?x*(B.discount.value/100):B.discount.value,L=x-N;if(o.taxMode==="inclusive"){const F=1+B.vatRate/100,Q=L/F,_=L-Q;m+=Q,w+=_,v+=L}else if(o.taxMode==="exclusive"){const F=L*(B.vatRate/100);m+=L,w+=F,v+=L+F}else m+=L,v+=L}),{subtotal:m,vatTotal:w,grandTotal:v}},[o.lineItems,r,o.taxMode]);return e.jsxs("div",{id:A,className:"bg-white p-8 w-[210mm] min-h-[297mm] text-xs",children:[e.jsxs("header",{className:"flex justify-between items-start mb-8 border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n.companyName}),e.jsx("p",{className:"whitespace-pre-wrap",children:n.companyAddress}),n.vatNumber&&e.jsxs("p",{children:["VAT: ",n.vatNumber]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.companyLogo&&e.jsx("img",{src:n.companyLogo,alt:"Company Logo",className:"h-12 w-auto max-w-[150px] object-contain"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-400 uppercase tracking-widest",children:"Credit Note"})]})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-600 mb-1",children:"Credit To:"}),e.jsx("p",{className:"font-semibold",children:o.customerName}),u&&e.jsx("p",{className:"whitespace-pre-wrap text-slate-600",children:u.address})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Credit Note No:"})," ",o.creditNoteNumber]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Original Invoice:"})," ",o.originalInvoiceNumber]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-600",children:"Date Issued:"})," ",o.issueDate]})]})]}),e.jsx("section",{children:e.jsxs("table",{className:"w-full text-left table-fixed text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 text-slate-600",children:[e.jsx("th",{className:`p-1 ${o.taxMode==="none"?"w-[50%]":"w-[40%]"}`,children:"Description"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Qty"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:o.taxMode==="inclusive"?"Unit Price (inc. Tax)":"Unit Price"}),e.jsx("th",{className:"p-1 text-right w-[10%]",children:"Discount"}),o.taxMode!=="none"&&e.jsx("th",{className:"p-1 text-right w-[10%]",children:"VAT"}),e.jsx("th",{className:"p-1 text-right w-[15%]",children:"Total"})]})}),e.jsx("tbody",{children:o.lineItems.map(m=>{const w=r.find(F=>F.id===m.inventoryItemId);let v,B,x;w?(v=Hn(w,m),B=m.quantity!==0?v/m.quantity:0,x=w.name):(v=(m.price||0)*m.quantity,B=m.price||0,x=m.description);const C=m.discount.type==="percentage"?v*(m.discount.value/100):m.discount.value,N=v-C;let L=o.taxMode==="exclusive"?N*(1+m.vatRate/100):N;return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1 align-top",children:e.jsx("p",{className:"font-medium",children:x})}),e.jsx("td",{className:"p-1 text-right align-top",children:m.quantity}),e.jsxs("td",{className:"p-1 text-right align-top",children:[d,B.toFixed(2)]}),e.jsxs("td",{className:"p-1 text-right align-top",children:[d,C.toFixed(2)]}),o.taxMode!=="none"&&e.jsxs("td",{className:"p-1 text-right align-top",children:[m.vatRate,"%"]}),e.jsxs("td",{className:"p-1 text-right align-top font-medium",children:[d,L.toFixed(2)]})]},m.id)})})]})}),e.jsx("section",{className:"mt-8 flex justify-end",children:e.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:[d,h.subtotal.toFixed(2)]})]}),o.taxMode!=="none"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VAT"}),e.jsxs("span",{className:"font-medium",children:[d,h.vatTotal.toFixed(2)]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900",children:[e.jsx("span",{children:"Total Credit"}),e.jsxs("span",{children:[d,h.grandTotal.toFixed(2)]})]})]})}),e.jsx("section",{className:"mt-8",children:o.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-bold",children:"Notes:"}),e.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:o.notes})]})})]})},I3=A=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...A,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),h2={load:(A,s)=>{try{const n=window.localStorage.getItem(A);return n?JSON.parse(n):s}catch(n){return console.error(`Error loading from DB [${A}]:`,n),s}},save:(A,s)=>{try{window.localStorage.setItem(A,JSON.stringify(s))}catch(n){console.error(`Error saving to DB [${A}]:`,n)}},remove:A=>{try{window.localStorage.removeItem(A)}catch(s){console.error(`Error removing from DB [${A}]:`,s)}}};function UA(A,s){const[n,r]=se.useState(()=>h2.load(A,s));return se.useEffect(()=>{h2.save(A,n)},[A,n]),se.useEffect(()=>{const l=o=>{if(o.key===A&&o.newValue)try{r(JSON.parse(o.newValue))}catch(u){console.log(u)}};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}},[A]),[n,r]}const L3={companyName:"Your Company Name",companyAddress:"123 Business Rd, Business City, 12345",vatNumber:"GB123456789",companyRegistrationNumber:"12345678",defaultVatRate:20,paymentTerms:"Payment due within 30 days.",bankName:"Business Bank",accountNumber:"12345678",sortCode:"12-34-56",invoiceTitle:"Invoice",quoteTitle:"Quote",nextInvoiceNumber:1,nextQuoteNumber:1,nextJobNumber:1,nextCreditNoteNumber:1,poPrefix:"PO",nextPoNumber:1,currencySymbol:"",emailFromName:"Your Company Name",emailReplyTo:"reply@yourcompany.com",invoiceEmailSubject:"Invoice [InvoiceNumber] from [CompanyName]",invoiceEmailBody:`Dear [CustomerName],

Please find attached your invoice [InvoiceNumber] for the total amount of [TotalAmount].

Payment is due by [DueDate].

Thank you for your business.

Sincerely,
[CompanyName]`,quoteEmailSubject:"Quote [InvoiceNumber] from [CompanyName]",quoteEmailBody:`Dear [CustomerName],

Please find attached your quote [InvoiceNumber] for the total amount of [TotalAmount].

We look forward to hearing from you.

Sincerely,
[CompanyName]`,showAccountOnInvoices:!0},D3={dashboard:!0,"manage-invoices":!0,"manage-quotes":!0,"manage-drafts":!0,"manage-daily-takings":!0,"manage-purchase-orders":!0,"manage-bills":!0,"manage-customers":!0,"manage-suppliers":!0,"manage-inventory":!0,"manage-supplier-inventory":!0,"manage-chart-of-accounts":!0,reports:!0,settings:!0,"job-builder":!1,"manage-jobs":!1,"job-board":!1,"manage-credit-notes":!1},T3={dashboard:!0,"job-builder":!0,"manage-jobs":!0,"manage-invoices":!0,"manage-quotes":!0,"manage-drafts":!0,"manage-daily-takings":!0,"manage-purchase-orders":!0,"manage-bills":!0,"manage-customers":!0,"manage-suppliers":!0,"manage-inventory":!0,"manage-supplier-inventory":!0,"job-board":!0,"manage-credit-notes":!0,"manage-chart-of-accounts":!0,reports:!0,settings:!0},H3=[{id:"package1",name:"Starter",description:"For straightforward fixed-price jobs.",price:2.5,originalPrice:5,features:["Fixed Price Invoices","Fixed Price Quotes","Enable CSV Data Export"],stripeLink:"",allowFixedPrice:!0,allowMeasuredPrice:!1,teamMemberLimit:1,permissions:D3},{id:"package2",name:"Pro",description:"For professionals with measured work.",price:5,originalPrice:10,features:["Unit Measurement Invoices","Unit Measurement Quotes","Enable CSV Data Export"],stripeLink:"",allowFixedPrice:!0,allowMeasuredPrice:!0,teamMemberLimit:5,permissions:T3}],f2=[{id:"acc-inc-1",name:"Income",type:"Income",code:"4000",isSystem:!0},{id:"acc-inc-2",name:"Discount",type:"Income",code:"4001",isSystem:!0},{id:"acc-inc-3",name:"Other Income",type:"Income",code:"4002",isSystem:!0},{id:"acc-inc-4",name:"Uncategorised Income",type:"Income",code:"4090",isSystem:!0},{id:"acc-inc-5",name:"Gain On Foreign Exchange",type:"Income",code:"4900",isSystem:!0},{id:"acc-exp-1",name:"Operating Expense",type:"Expenses",code:"5000",isSystem:!0},{id:"acc-exp-2",name:"Cost of Goods Sold",type:"Expenses",code:"5100",isSystem:!0},{id:"acc-exp-3",name:"Payment Processing Fee",type:"Expenses",code:"5200",isSystem:!0},{id:"acc-exp-4",name:"Payroll Expense",type:"Expenses",code:"5300",isSystem:!0},{id:"acc-exp-5",name:"Uncategorised Expense",type:"Expenses",code:"5900",isSystem:!0},{id:"acc-exp-6",name:"Loss On Foreign Exchange",type:"Expenses",code:"5990",isSystem:!0},{id:"acc-asset-1",name:"Cash and Bank",type:"Assets",code:"1000",isSystem:!0},{id:"acc-asset-2",name:"Money in Transit",type:"Assets",code:"1010",isSystem:!0},{id:"acc-asset-3",name:"Expected Payments from Customers",type:"Assets",code:"1100",isSystem:!0},{id:"acc-asset-4",name:"Inventory",type:"Assets",code:"1200",isSystem:!0},{id:"acc-asset-5",name:"Property, Plant, Equipment",type:"Assets",code:"1300",isSystem:!0},{id:"acc-asset-6",name:"Depreciation and Amortisation",type:"Assets",code:"1350",isSystem:!0},{id:"acc-asset-7",name:"Supplier Prepayments and Supplier Credits",type:"Assets",code:"1400",isSystem:!0},{id:"acc-asset-8",name:"Other Short-Term Asset",type:"Assets",code:"1500",isSystem:!0},{id:"acc-asset-9",name:"Other Long-Term Asset",type:"Assets",code:"1600",isSystem:!0},{id:"acc-liab-1",name:"Credit Card",type:"Liabilities",code:"2000",isSystem:!0},{id:"acc-liab-2",name:"Loan and Line of Credit",type:"Liabilities",code:"2100",isSystem:!0},{id:"acc-liab-3",name:"Expected Payments to Suppliers",type:"Liabilities",code:"2200",isSystem:!0},{id:"acc-liab-4",name:"Sales Taxes",type:"Liabilities",code:"2300",isSystem:!0},{id:"acc-liab-5",name:"Due For Payroll",type:"Liabilities",code:"2400",isSystem:!0},{id:"acc-liab-6",name:"Due to You and Other Business Owners",type:"Liabilities",code:"2500",isSystem:!0},{id:"acc-liab-7",name:"Customer Prepayments and Customer Credits",type:"Liabilities",code:"2600",isSystem:!0},{id:"acc-liab-8",name:"Other Short-Term Liability",type:"Liabilities",code:"2700",isSystem:!0},{id:"acc-liab-9",name:"Other Long-Term Liability",type:"Liabilities",code:"2800",isSystem:!0},{id:"acc-eq-1",name:"Business Owner Contribution and Drawing",type:"Equity",code:"3000",isSystem:!0},{id:"acc-eq-2",name:"Retained Earnings: Profit",type:"Equity",code:"3100",isSystem:!0}],wh=(A,s)=>({customerName:"",reference:"",invoiceNumber:"",issueDate:new Date().toISOString().split("T")[0],completionDate:new Date().toISOString().split("T")[0],dueDate:new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0],lineItems:[],notes:"",taxMode:"exclusive",linkedBillIds:[],invoiceType:s}),m2=()=>({supplierId:null,supplierName:"",reference:"",poNumber:"",issueDate:new Date().toISOString().split("T")[0],deliveryDate:new Date(new Date().setDate(new Date().getDate()+7)).toISOString().split("T")[0],lineItems:[],notes:"",taxMode:"exclusive"}),p2=()=>({supplierId:null,supplierName:"",reference:"",issueDate:new Date().toISOString().split("T")[0],dueDate:new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0],lineItems:[],notes:"",taxMode:"exclusive"}),g2=(A,s)=>({customerName:"",reference:"",jobNumber:"",issueDate:new Date().toISOString().split("T")[0],lineItems:[],notes:"",taxMode:"exclusive",invoiceType:s}),M3=[{id:"customer",name:"Customer Name",type:"customer",isCustom:!1},{id:"description",name:"Description",type:"description",isCustom:!1},{id:"status",name:"Job Status",type:"status",isCustom:!1},{id:"dueDate",name:"Due Date",type:"dueDate",isCustom:!1}],x2=[{id:"default-custom-task",name:"Task / Job",type:"task",isCustom:!0},{id:"default-custom-team",name:"Assigned To",type:"team",isCustom:!0},{id:"default-custom-text",name:"Text Field",type:"text",isCustom:!0},{id:"default-custom-date",name:"Date",type:"date",isCustom:!0},{id:"default-custom-deadline",name:"Deadline",type:"deadline",isCustom:!0},{id:"default-custom-jobStatus",name:"Job Status",type:"jobStatus",isCustom:!0,options:[{id:"default-status-1",label:"New",color:"bg-blue-500"},{id:"default-status-2",label:"In Progress",color:"bg-orange-500"},{id:"default-status-3",label:"Complete",color:"bg-green-500"},{id:"default-status-4",label:"Overdue",color:"bg-red-500"}]},{id:"default-custom-priority",name:"Priority",type:"priority",isCustom:!0,options:[{id:"prio-1",label:"High",color:"bg-red-500"},{id:"prio-2",label:"Medium",color:"bg-orange-500"},{id:"prio-3",label:"Low",color:"bg-blue-500"}]},{id:"default-custom-notes",name:"Notes",type:"notes",isCustom:!0},{id:"default-custom-number",name:"Number",type:"number",isCustom:!0,unit:""},{id:"default-custom-dropdown",name:"Dropdown",type:"dropdown",isCustom:!0,options:[{id:"default-opt-1",label:"Option A",color:"bg-slate-200"},{id:"default-opt-2",label:"Option B",color:"bg-slate-200"}]},{id:"default-custom-checkbox",name:"Checkbox",type:"checkbox",isCustom:!0},{id:"default-custom-phone",name:"Phone",type:"phone",isCustom:!0}],O3=({currentUser:A,setCurrentUser:s,users:n,setUsers:r,subscriptionPackages:l,setSubscriptionPackages:o})=>{var si;const u=A.role==="team-member"&&((si=A.permissions)==null?void 0:si.jobBoard)==="view"&&A.permissions.sales==="none"&&A.permissions.purchasing==="none"&&A.permissions.management==="none"&&A.permissions.reports==="none"&&A.permissions.settings==="none",d=(A.role==="team-member"?A.teamId:A.id)+"_",[h,m]=UA(`${d}active-view`,u?"job-board":"dashboard"),[w,v]=UA(`${d}active-mode`,"invoice"),[B,x]=se.useState(!1),[C,N]=UA(`${d}app-settings`,L3),[L,F]=UA(`${d}customers`,[]),[Q,_]=UA(`${d}suppliers`,[]),[te,O]=UA(`${d}inventory`,[]),[k,P]=UA(`${d}supplier-inventory`,[]),[E,D]=UA(`${d}categories`,[]),[G,T]=UA(`${d}supplier-categories`,[]),[R,V]=UA(`${d}invoices`,[]),[Z,ue]=UA(`${d}purchase-orders`,[]),[S,M]=UA(`${d}bills`,[]),[Y,le]=UA(`${d}jobs`,[]),[de,J]=UA(`${d}credit-notes`,[]),[U,X]=UA(`${d}task-columns`,M3),[ee,re]=UA(`${d}custom-task-groups`,[{id:crypto.randomUUID(),name:"New Group",isCollapsed:!1,columns:x2,tasks:[]}]),[fe,ve]=UA(`${d}chart-of-accounts`,f2),[xe,Ce]=UA(`${d}current-invoice-state`,wh(C,"measured")),[st,_e]=UA(`${d}current-credit-note-state`,null),[$e,Ue]=UA(`${d}current-po-state`,m2()),[At,Le]=UA(`${d}current-bill-state`,p2()),[K,Ge]=UA(`${d}current-job-state`,g2(C,"measured")),[Ye,ie]=UA(`${d}editing-invoice-id`,null),[Ne,Te]=UA(`${d}editing-quote-id`,null),[qe,ot]=UA(`${d}editing-po-id`,null),[xt,Ct]=UA(`${d}editing-bill-id`,null),[Tt,Yt]=UA(`${d}editing-job-id`,null),[Pt,jt]=UA(`${d}viewing-credit-note-id`,null);se.useEffect(()=>{ve(ge=>{let Be=!1;const oe=ge.map(ye=>{if(ye.isSystem&&!ye.code){const He=f2.find(ct=>ct.name===ye.name&&ct.type===ye.type);if(He&&He.code)return Be=!0,{...ye,code:He.code}}return ye});return Be?oe:ge})},[]);const Qt=()=>{if(A.role!=="admin")return[];const ge=[];for(let Be=0;Be<localStorage.length;Be++){const oe=localStorage.key(Be);if(oe&&oe.endsWith("_tracked-jobs")){const ye=oe.split("_")[0],He=JSON.parse(localStorage.getItem(oe)||"[]");ge.push(...He.map(ct=>({...ct,masterId:ye})))}}return ge},[Oe,yt]=UA(A.role==="admin"?"admin_aggregated_jobs":`${d}tracked-jobs`,A.role==="admin"?Qt():[]),[mt,wt]=UA(`${d}invoice-drafts`,[]),[Ft,Fe]=UA(`${d}quote-drafts`,[]),[vt,ft]=UA(`${d}daily-takings`,[]),[gt,Jt]=se.useState(null),[MA,VA]=se.useState(null),[uA,Kt]=se.useState(!1),[lA,An]=se.useState({isOpen:!1,action:null}),[oa,Ea]=se.useState(null),[Ia,Ot]=se.useState(null),[gs,ns]=se.useState(null),[La,YA]=se.useState(null),[SA,Xt]=se.useState(null),[me,Ze]=se.useState(!1);se.useEffect(()=>{Oe.some(Be=>Be.invoiceNumber==="Manual Entry"&&Be.invoiceId!=="MANUAL")&&yt(Be=>Be.map(oe=>oe.invoiceNumber==="Manual Entry"&&oe.invoiceId!=="MANUAL"?{...oe,invoiceId:"MANUAL"}:oe))},[]);const et=A.subscriptionStatus.startsWith("trial_"),rt=et&&A.trialEndDate&&new Date>new Date(A.trialEndDate),Xe=ge=>{h==="create-credit-note"&&Pt&&jt(null),rt&&A.role!=="admin"?m("manage-subscription"):m(ge)};se.useEffect(()=>{rt&&A.role!=="admin"&&m("manage-subscription")},[rt,A.role]),se.useEffect(()=>{h!=="manage-invoices"&&Ze(!1)},[h]);const _t=()=>{s(null)},Vt=se.useMemo(()=>{let ge=A;if(A.role==="team-member"&&(ge=n.find(He=>He.id===A.teamId)||A),ge.role==="admin"||ge.subscriptionStatus==="lifetime_free")return{allowFixedPrice:!0,allowMeasuredPrice:!0};const Be=ge.subscriptionStatus.replace(/^(trial_|package_)/,""),oe=l.find(ye=>ye.id===Be);return oe?{allowFixedPrice:oe.allowFixedPrice??!1,allowMeasuredPrice:oe.allowMeasuredPrice??!1}:{allowFixedPrice:!1,allowMeasuredPrice:!1}},[A,n,l]),zt=(ge,Be)=>{const oe=ge==="invoice"?C.nextInvoiceNumber||1:C.nextQuoteNumber||1,ye=ge==="invoice"?(C.invoiceTitle||"Invoice").replace(/\s+/g,""):(C.quoteTitle||"Quote").replace(/\s+/g,"");v(ge),ie(null),Te(null),Ce({...wh(C,Be),invoiceNumber:`${ye}-${String(oe).padStart(4,"0")}`,reference:""}),Xe(ge==="invoice"?"create-invoice":"create-quote")},gA=(ge,Be)=>{const oe=C.nextQuoteNumber||1,ye=(C.quoteTitle||"Quote").replace(/\s+/g,"");v("quote"),ie(null),Te(null);const He=Vt.allowMeasuredPrice?"measured":"fixed",ct=wh(C,He);Ce({...ct,customerName:ge,invoiceNumber:`${ye}-${String(oe).padStart(4,"0")}`,lineItems:Be,invoiceType:He}),Xe("create-quote")},RA=()=>{v("po"),ot(null);const ge=C.nextPoNumber||1,Be=C.poPrefix||"PO";Ue({...m2(),poNumber:`${Be}-${String(ge).padStart(4,"0")}`}),Xe("create-purchase-order")},Da=()=>{v("bill"),Ct(null),Le(p2()),Xe("create-bill")},zA=ge=>{v("job"),Yt(null);const Be=C.nextJobNumber||1;Ge({...g2(C,ge),jobNumber:`JOB-${String(Be).padStart(4,"0")}`}),Xe("job-builder")},Fa=()=>{jt(null);const ge=C.nextCreditNoteNumber||1;_e({customerName:"",reference:"",originalInvoiceNumber:void 0,creditNoteNumber:`CN-${String(ge).padStart(4,"0")}`,issueDate:new Date().toISOString().split("T")[0],lineItems:[],notes:"",taxMode:C.defaultVatRate>0?"exclusive":"none",invoiceType:"fixed"}),Xe("create-credit-note")},ma=ge=>{const{allowFixedPrice:Be,allowMeasuredPrice:oe}=Vt;Be&&oe?An({isOpen:!0,action:ge}):Be?ge==="job"?zA("fixed"):zt(ge,"fixed"):oe?ge==="job"?zA("measured"):zt(ge,"measured"):alert("Your subscription does not permit creating this type of document. Please check your package settings.")},rs=ge=>{const{action:Be}=lA;Be&&(Be==="job"?zA(ge):zt(Be,ge)),An({isOpen:!1,action:null})},ca=ge=>{N(ge),Xe("dashboard"),Xt({title:"Success",message:"Settings have been saved successfully."})},Us=ge=>{const Be={...ge,id:crypto.randomUUID()};F(oe=>[...oe,Be]),Xt({title:"Success",message:`Customer "${Be.name}" has been saved.`})},tr=ge=>{const Be={...ge,id:crypto.randomUUID()};return _(oe=>[...oe,Be]),Xt({title:"Success",message:`Supplier "${Be.name}" has been saved.`}),Be},kn=ge=>{const Be={...ge,id:crypto.randomUUID()};ft(oe=>[...oe,Be]),Xt({title:"Success",message:"Daily taking has been recorded."})},mn=ge=>{ft(Be=>Be.map(oe=>oe.id===ge.id?ge:oe)),Xt({title:"Success",message:"Daily taking has been updated."})},go=ge=>{ft(Be=>Be.filter(oe=>oe.id!==ge)),Xt({title:"Success",message:"Taking has been removed."})},Di=ge=>{const Be={...ge,id:crypto.randomUUID()};ve(oe=>[...oe,Be]),Xt({title:"Success",message:"Account has been added."})},ml=ge=>{ve(Be=>Be.map(oe=>oe.id===ge.id?ge:oe)),Xt({title:"Success",message:"Account has been updated."})},Yr=ge=>{ve(Be=>Be.filter(oe=>oe.id!==ge)),Xt({title:"Success",message:"Account has been removed."})},Zr=ge=>{const Be=`Draft for ${xe.customerName||"N/A"} - #${xe.invoiceNumber}`,oe={id:crypto.randomUUID(),name:Be,createdAt:new Date().toISOString(),state:xe,total:ge};wt(ye=>[...ye,oe]),Xe("manage-invoices"),Xt({title:"Success",message:"Invoice draft has been saved."})},ZA=ge=>{const Be=`Quote for ${xe.customerName||"N/A"} - #${xe.invoiceNumber}`,oe={id:crypto.randomUUID(),name:Be,createdAt:new Date().toISOString(),state:xe,total:ge};Fe(St=>[...St,oe]);const ye=C.nextQuoteNumber||1,ct=`${(C.quoteTitle||"Quote").replace(/\s+/g,"")}-${String(ye).padStart(4,"0")}`;xe.invoiceNumber===ct&&N(St=>({...St,nextQuoteNumber:(St.nextQuoteNumber||1)+1})),Xe("manage-quotes"),Xt({title:"Success",message:"Quote has been saved."})},_s=ge=>{if(!Ne)return;const Be=`Quote for ${xe.customerName||"N/A"} - #${xe.invoiceNumber}`;Fe(oe=>oe.map(ye=>ye.id===Ne?{...ye,name:Be,state:xe,total:ge}:ye)),Te(null),Xe("manage-quotes"),Xt({title:"Success",message:"Quote updated successfully."})},is=(ge,Be)=>{const oe=`PO Draft for ${ge.supplierName||"N/A"} - #${ge.poNumber}`,ye={id:crypto.randomUUID(),name:oe,createdAt:new Date().toISOString(),state:ge,total:Be,status:"draft",payments:[]};ue(He=>[...He,ye]),Xe("manage-purchase-orders"),Xt({title:"Success",message:"Purchase Order draft has been saved."})},Ti=ge=>{const Be=`PO Draft for ${ge.state.supplierName||"N/A"} - #${ge.state.poNumber}`,oe=Z.find(He=>He.id===ge.id),ye={id:ge.id,name:Be,createdAt:oe?oe.createdAt:new Date().toISOString(),state:ge.state,total:ge.total,status:"draft",payments:oe?oe.payments:[]};ue(He=>He.map(ct=>ct.id===ye.id?ye:ct)),Xe("manage-purchase-orders"),ot(null),Xt({title:"Success",message:"Purchase Order draft has been updated."})},Hi=ge=>{const Be=`PO for ${ge.state.supplierName||"N/A"} - #${ge.state.poNumber}`;if(ge.id){const ct=Z.find(dA=>dA.id===ge.id),St={id:ge.id,name:Be,createdAt:ct?ct.createdAt:new Date().toISOString(),state:ge.state,total:ge.total,status:"approved",payments:ct?ct.payments:[]};ue(dA=>dA.map(BA=>BA.id===St.id?St:BA))}else{const ct={id:crypto.randomUUID(),name:Be,createdAt:new Date().toISOString(),state:ge.state,total:ge.total,status:"approved",payments:[]};ue(St=>[...St,ct])}const oe=C.nextPoNumber||1,He=`${C.poPrefix||"PO"}-${String(oe).padStart(4,"0")}`;ge.state.poNumber===He&&N(ct=>({...ct,nextPoNumber:(ct.nextPoNumber||1)+1})),Xe("manage-purchase-orders"),ot(null),Xt({title:"Success",message:"Purchase Order has been approved."})},Mi=(ge,Be)=>{const oe={id:crypto.randomUUID(),createdAt:new Date().toISOString(),state:ge,total:Be,payments:[]};M(ye=>[...ye,oe]),Xe("manage-bills"),Xt({title:"Success",message:"Bill has been saved."})},Rs=ge=>{const Be=S.find(ye=>ye.id===ge.id),oe={id:ge.id,createdAt:Be?Be.createdAt:new Date().toISOString(),state:ge.state,total:ge.total,payments:Be?Be.payments:[]};M(ye=>ye.map(He=>He.id===oe.id?oe:He)),Xe("manage-bills"),Ct(null),Xt({title:"Success",message:"Bill has been updated."})},pn=ge=>{if(!ge)return[];const Be=te.find(ye=>ye.id===ge);if(!Be||!Be.linkedSupplierItemIds)return[];const oe=Be.linkedSupplierItemIds.map(ye=>{var He;return(He=k.find(ct=>ct.id===ye))==null?void 0:He.categoryId}).filter(ye=>!!ye);return Array.from(new Set(oe))},ls=(ge,Be)=>{const oe=`Invoice for ${ge.customerName||"N/A"} - #${ge.invoiceNumber}`,ye={id:crypto.randomUUID(),name:oe,createdAt:new Date().toISOString(),state:ge,total:Be,payments:[],linkedBillIds:ge.linkedBillIds||[]};V(BA=>[...BA,ye]);const He=ge.lineItems.map(BA=>({id:crypto.randomUUID(),invoiceId:ye.id,invoiceNumber:ge.invoiceNumber,customerName:ge.customerName,description:BA.description||"No Description",dueDate:ge.completionDate||ge.dueDate,status:"new",createdAt:new Date().toISOString(),priority:"medium",supplierCategoryIds:pn(BA.inventoryItemId)}));yt(BA=>[...BA,...He]);const ct=C.nextInvoiceNumber||1,dA=`${(C.invoiceTitle||"Invoice").replace(/\s+/g,"")}-${String(ct).padStart(4,"0")}`;ge.invoiceNumber===dA&&N(BA=>({...BA,nextInvoiceNumber:(BA.nextInvoiceNumber||1)+1})),Xe("manage-invoices"),Xt({title:"Success",message:"Invoice has been finalized and saved."})},Ga=(ge,Be)=>{if(!Ye)return;const oe=R.map(ct=>ct.id===Ye?{...ct,name:`Invoice for ${ge.customerName||"N/A"} - #${ge.invoiceNumber}`,state:ge,total:Be}:ct);V(oe);const ye=Oe.filter(ct=>ct.invoiceId!==Ye),He=ge.lineItems.map(ct=>({id:crypto.randomUUID(),invoiceId:Ye,invoiceNumber:ge.invoiceNumber,customerName:ge.customerName,description:ct.description||"No Description",dueDate:ge.completionDate||ge.dueDate,status:"new",createdAt:new Date().toISOString(),priority:"medium",supplierCategoryIds:pn(ct.inventoryItemId)}));yt([...ye,...He]),ie(null),Xe("manage-invoices"),Xt({title:"Success",message:"Invoice has been updated successfully."})},Wr=ge=>{window.confirm("Are you sure you want to delete this finalized invoice? This will also remove associated tracked jobs.")&&(V(Be=>Be.filter(oe=>oe.id!==ge)),yt(Be=>Be.filter(oe=>oe.invoiceId!==ge)),Xt({title:"Success",message:"Invoice and associated jobs have been deleted."}))},pl=ge=>{if(A.role==="admin"&&ge.masterId){const oe=`${ge.masterId}_tracked-jobs`,He=JSON.parse(localStorage.getItem(oe)||"[]").map(ct=>ct.id===ge.id?ge:ct);localStorage.setItem(oe,JSON.stringify(He)),yt(ct=>ct.map(St=>St.id===ge.id?ge:St))}else yt(Be=>Be.map(oe=>oe.id===ge.id?ge:oe))},$r=ge=>{if(!window.confirm("Are you sure you want to delete this job? This action cannot be undone."))return;const Be=Oe.find(oe=>oe.id===ge);if(Be){if(A.role==="admin"&&Be.masterId){const ye=`${Be.masterId}_tracked-jobs`,ct=JSON.parse(localStorage.getItem(ye)||"[]").filter(St=>St.id!==ge);localStorage.setItem(ye,JSON.stringify(ct)),yt(St=>St.filter(dA=>dA.id!==ge))}else yt(oe=>oe.filter(ye=>ye.id!==ge));Xt({title:"Success",message:"Job has been deleted."})}},Ar=ge=>{const Be={id:crypto.randomUUID(),createdAt:new Date().toISOString(),invoiceId:"MANUAL",invoiceNumber:"Manual Entry",status:"new",customerName:ge.customerName,description:ge.description,dueDate:ge.dueDate,priority:ge.priority,assignedTeamMemberId:ge.assignedTeamMemberId,masterId:ge.masterId};if(A.role==="admin"&&Be.masterId&&Be.masterId!==A.id){const ye=`${Be.masterId}_tracked-jobs`,ct=[...JSON.parse(localStorage.getItem(ye)||"[]"),Be];localStorage.setItem(ye,JSON.stringify(ct))}yt(oe=>[...oe,Be]),Xt({title:"Success",message:"New job has been created."})},Oi=(ge,Be)=>{re(oe=>oe.map(ye=>ye.id===ge?{...ye,tasks:ye.tasks.map(He=>He.id===Be.id?Be:He)}:ye))},gl=(ge,Be)=>{const oe={...Be,id:crypto.randomUUID(),createdAt:new Date().toISOString()};re(ye=>{if(!ge){if(ye.length>0){const ct=[...ye];return ct[0]={...ct[0],tasks:[...ct[0].tasks,oe]},ct}return ye}const He=ye.findIndex(ct=>ct.id===ge);return He===-1?ye:ye.map((ct,St)=>St===He?{...ct,tasks:[...ct.tasks,oe]}:ct)})},gn=(ge,Be)=>{window.confirm("Are you sure you want to delete this task? This action cannot be undone.")&&re(oe=>oe.map(ye=>ye.id===ge?{...ye,tasks:ye.tasks.filter(He=>He.id!==Be)}:ye))},xo=ge=>{const Be={id:crypto.randomUUID(),name:"New Group",isCollapsed:!1,columns:x2,tasks:[]};re(oe=>{if(ge){const ye=oe.findIndex(He=>He.id===ge);if(ye!==-1){const He=[...oe];return He.splice(ye+1,0,Be),He}}return[...oe,Be]})},xl=ge=>{window.confirm("Are you sure you want to delete this entire group and all its tasks? This action cannot be undone.")&&re(Be=>Be.filter(oe=>oe.id!==ge))},vl=(ge,Be)=>{re(oe=>oe.map(ye=>ye.id===ge?{...ye,...Be}:ye))},an=(ge,Be)=>{re(oe=>oe.map(ye=>ye.id===ge?{...ye,columns:Be}:ye))},ei=ge=>{re(Be=>{const oe=Be.findIndex(St=>St.id===ge);if(oe===-1)return Be;const ye=Be[oe],He=JSON.parse(JSON.stringify(ye));He.id=crypto.randomUUID(),He.name=`Copy of ${ye.name}`,He.tasks=He.tasks.map(St=>({...St,id:crypto.randomUUID()}));const ct=[...Be];return ct.splice(oe+1,0,He),ct})},ti=(ge,Be)=>{re(oe=>{const ye=oe.findIndex(Ja=>Ja.id===ge);if(ye===-1)return oe;const He=oe[ye],ct=He.columns.findIndex(Ja=>Ja.id===Be);if(ct===-1)return oe;const St=He.columns[ct],dA={...JSON.parse(JSON.stringify(St)),id:crypto.randomUUID(),name:`Copy of ${St.name}`,isFrozen:!1},BA=He.tasks.map(Ja=>{var ir;const Pn=(ir=Ja.customFields)==null?void 0:ir[St.id];return Pn!==void 0?{...Ja,customFields:{...Ja.customFields||{},[dA.id]:Pn}}:Ja}),Ha=[...He.columns];Ha.splice(ct+1,0,dA);const Vs=[...oe];return Vs[ye]={...He,columns:Ha,tasks:BA},Vs})},Cr=ge=>{const Be=`Job for ${ge.state.customerName||"N/A"} - #${ge.state.jobNumber}`;if(Tt){const oe=Y.find(He=>He.id===Tt),ye={...ge,id:Tt,name:Be,createdAt:oe?oe.createdAt:new Date().toISOString()};le(He=>He.map(ct=>ct.id===Tt?ye:ct)),Xt({title:"Success",message:`Job ${ye.state.jobNumber} has been updated.`})}else{const oe={...ge,id:crypto.randomUUID(),name:Be,createdAt:new Date().toISOString()};le(ct=>[...ct,oe]),Xt({title:"Success",message:`Job ${oe.state.jobNumber} has been saved.`});const ye=C.nextJobNumber??1,He=`JOB-${String(ye).padStart(4,"0")}`;oe.state.jobNumber===He&&N(ct=>({...ct,nextJobNumber:(ct.nextJobNumber??1)+1}))}Xe("manage-jobs")},WA=ge=>{const Be=Y.find(oe=>oe.id===ge);Be&&(Yt(Be.id),Ge(Be.state),v("job"),Xe("job-builder"))},ki=ge=>{le(Be=>Be.filter(oe=>oe.id!==ge)),Xt({title:"Success",message:"Job has been deleted."})},Ai=ge=>{const Be=C.nextQuoteNumber||1,oe=(C.quoteTitle||"Quote").replace(/\s+/g,""),ye={...ge,invoiceNumber:`${oe}-${String(Be).padStart(4,"0")}`,dueDate:new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0],linkedBillIds:[]};Ce(ye),Te(null),v("quote"),Xe("create-quote")},Gt=ge=>{const Be=C.nextInvoiceNumber||1,oe=(C.invoiceTitle||"Invoice").replace(/\s+/g,""),ye={...ge,invoiceNumber:`${oe}-${String(Be).padStart(4,"0")}`,completionDate:new Date().toISOString().split("T")[0],dueDate:new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0],linkedBillIds:[]};Ce(ye),ie(null),v("invoice"),Xe("create-invoice")},_n=ge=>{const Be=mt.find(oe=>oe.id===ge);Be&&(ie(null),Ce({...Be.state,_isLoaded:!0}),v("invoice"),Xe("create-invoice"),wt(oe=>oe.filter(ye=>ye.id!==ge)))},bl=ge=>{wt(Be=>Be.filter(oe=>oe.id!==ge)),Xt({title:"Success",message:"Draft has been deleted."})},Es=ge=>{const Be=Ft.find(oe=>oe.id===ge);Be&&(Te(Be.id),Ce({...Be.state,_isLoaded:!0}),v("quote"),Xe("create-quote"))},_i=ge=>{const Be=R.find(oe=>oe.id===ge);Be&&(ie(Be.id),Ce(Be.state),v("invoice"),Xe("create-invoice"))},ar=ge=>{jt(null);const Be=R.find(He=>He.id===ge);if(!Be)return;const oe=C.nextCreditNoteNumber||1,ye={customerName:Be.state.customerName,reference:Be.state.reference,originalInvoiceNumber:Be.state.invoiceNumber,creditNoteNumber:`CN-${String(oe).padStart(4,"0")}`,issueDate:new Date().toISOString().split("T")[0],lineItems:JSON.parse(JSON.stringify(Be.state.lineItems)),notes:"",taxMode:Be.state.taxMode,invoiceType:Be.state.invoiceType};_e(ye),Xe("create-credit-note")},xs=(ge,Be)=>{const oe={id:crypto.randomUUID(),name:`Credit Note for ${ge.customerName} - #${ge.creditNoteNumber}`,createdAt:new Date().toISOString(),state:ge,total:Be,applications:[]};if(ge.originalInvoiceNumber){const He=R.find(ct=>ct.state.invoiceNumber===ge.originalInvoiceNumber);He&&oe.applications.push({invoiceId:He.id,amount:Be})}J(He=>[...He,oe]);const ye=`CN-${String(C.nextCreditNoteNumber||1).padStart(4,"0")}`;ge.creditNoteNumber===ye&&N(He=>({...He,nextCreditNoteNumber:(He.nextCreditNoteNumber||1)+1})),Xe("manage-credit-notes"),Xt({title:"Success",message:"Credit Note has been saved."})},Nr=(ge,Be,oe)=>{J(ye=>ye.map(He=>{if(He.id===Be){const ct=He.applications.findIndex(dA=>dA.invoiceId===ge),St=[...He.applications];return ct>-1?St[ct].amount+=oe:St.push({invoiceId:ge,amount:oe}),{...He,applications:St}}return He})),Xt({title:"Success",message:`Credit of ${C.currencySymbol||""}${oe.toFixed(2)} applied successfully.`})},jr=ge=>{const Be=de.find(oe=>oe.id===ge);Be&&(jt(Be.id),_e(Be.state),Xe("create-credit-note"))},xn=ge=>{const Be=Z.find(oe=>oe.id===ge);Be&&(ot(ge),Ue(Be.state),v("po"),Xe("create-purchase-order"))},Ri=ge=>{const Be=S.find(oe=>oe.id===ge);Be&&(Ct(ge),Le(Be.state),v("bill"),Xe("create-bill"))},sr=ge=>{const Be=Ft.find(oe=>oe.id===ge);if(Be){const oe=C.nextInvoiceNumber||1,ye=(C.invoiceTitle||"Invoice").replace(/\s+/g,""),He={...Be.state,invoiceNumber:`${ye}-${String(oe).padStart(4,"0")}`,reference:Be.state.reference,issueDate:new Date().toISOString().split("T")[0],completionDate:new Date().toISOString().split("T")[0],dueDate:new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0],taxMode:Be.state.taxMode||"exclusive",linkedBillIds:Be.state.linkedBillIds||[]};ls(He,Be.total),Fe(ct=>ct.filter(St=>St.id!==ge)),Xt({title:"Success",message:`Quote ${Be.name} converted to a new invoice.`})}},nr=(ge,Be)=>{V(oe=>oe.map(ye=>ye.id===ge?{...ye,payments:[...ye.payments,{...Be,id:crypto.randomUUID()}]}:ye))},sn=(ge,Be)=>{V(oe=>oe.map(ye=>ye.id===ge?{...ye,payments:ye.payments.filter(He=>He.id!==Be)}:ye))},ai=(ge,Be)=>{M(oe=>oe.map(ye=>ye.id===ge?{...ye,payments:[...ye.payments,{...Be,id:crypto.randomUUID()}]}:ye))},rr=(ge,Be)=>{M(oe=>oe.map(ye=>ye.id===ge?{...ye,payments:ye.payments.filter(He=>He.id!==Be)}:ye))},Ta=(ge,Be)=>{ue(oe=>oe.map(ye=>ye.id===ge?{...ye,payments:[...ye.payments,{...Be,id:crypto.randomUUID()}]}:ye))},Ps=(ge,Be)=>{ue(oe=>oe.map(ye=>ye.id===ge?{...ye,payments:ye.payments.filter(He=>He.id!==Be)}:ye))},vs=async(ge,Be)=>{let oe={type:Be,data:ge};if(Be==="invoice"){const He=R.find(ct=>ct.state.invoiceNumber===ge.invoiceNumber);if(He){const ct=[];de.forEach(St=>{St.applications.forEach(dA=>{dA.invoiceId===He.id&&ct.push({number:St.state.creditNoteNumber,amount:dA.amount})})}),oe.appliedCredits=ct}}Jt(oe),await new Promise(He=>setTimeout(He,50));const ye=document.getElementById("printable-document");if(ye){const He=await tp(ye,{scale:2}),ct=He.toDataURL("image/png"),St=new $t("p","mm","a4"),dA=St.internal.pageSize.getWidth(),BA=He.height*dA/He.width;St.addImage(ct,"PNG",0,0,dA,BA);let Ha="document.pdf";if(Be==="invoice"||Be==="quote")Ha=`${ge.invoiceNumber}.pdf`;else if(Be==="credit-note")Ha=`${ge.state.creditNoteNumber}.pdf`;else if(Be==="po")Ha=`${ge.poNumber}.pdf`;else if(Be==="vat-report"){const Vs=(ge.startDate||"start").replace(/\//g,"-"),Ja=(ge.endDate||"end").replace(/\//g,"-");Ha=`VAT_Report_${Vs}_to_${Ja}.pdf`}else if(Be==="pnl-report"){const Vs=(ge.startDate||"start").replace(/\//g,"-"),Ja=(ge.endDate||"end").replace(/\//g,"-");Ha=`P&L_Report_${Vs}_to_${Ja}.pdf`}else if(Be==="balance-sheet-report")Ha=`Balance_Sheet_${(ge.asOfDate||"today").replace(/\//g,"-")}.pdf`;else if(Be==="cash-flow-report"){const Vs=(ge.startDate||"start").replace(/\//g,"-"),Ja=(ge.endDate||"end").replace(/\//g,"-");Ha=`Cash_Flow_Statement_${Vs}_to_${Ja}.pdf`}else Be==="income-by-customer-report"?Ha=`Income_by_Customer_Report_${new Date().toISOString().split("T")[0]}.pdf`:Be==="paid-to-suppliers-report"?Ha=`Paid_to_Suppliers_Report_${new Date().toISOString().split("T")[0]}.pdf`:Be==="account-balances-report"&&(Ha=`Account_Balances_Report_${new Date().toISOString().split("T")[0]}.pdf`);St.save(Ha)}Jt(null)},Rn=ge=>{const Be=L.find(BA=>BA.name===ge.state.customerName);if(!Be||!Be.email){alert("This customer does not have an email address saved. Please add one in the Customer Manager.");return}const oe="payments"in ge,ye=oe?C.invoiceEmailSubject||"":C.quoteEmailSubject||"",He=oe?C.invoiceEmailBody||"":C.quoteEmailBody||"",ct={"[CustomerName]":Be.name,"[InvoiceNumber]":ge.state.invoiceNumber,"[TotalAmount]":`${C.currencySymbol||""}${ge.total.toFixed(2)}`,"[DueDate]":new Date(ge.state.dueDate).toLocaleDateString(),"[CompanyName]":C.companyName};let St=ye,dA=He;for(const BA in ct)St=St.replace(new RegExp(BA.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),ct[BA]),dA=dA.replace(new RegExp(BA.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),ct[BA]);VA({to:Be.email,subject:St,body:dA})},Pi=ge=>{if(!ge.email){alert(`User "${ge.username}" does not have an email address saved.`);return}VA({to:ge.email,subject:"",body:`Dear ${ge.username},

`})},Fr=ge=>{Ea(ge),Xe("customer-history")},Rt=ge=>{let Be=A;if(A.role==="team-member"&&(Be=n.find(ct=>ct.id===A.teamId)||A),Be.role==="admin"||Be.subscriptionStatus==="lifetime_free")return!0;const oe=Be.subscriptionStatus.replace(/^(trial_|package_)/,""),ye=l.find(He=>He.id===oe);return!ye||!ye.permissions?!1:ye.permissions[ge]??!1},oA=({icon:ge,label:Be,targetView:oe})=>e.jsxs("button",{onClick:()=>{Xe(oe),x(!1)},className:`w-full flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors duration-200 ${h===oe?"bg-blue-600 text-white":"text-slate-200 hover:bg-blue-800 hover:text-white"}`,children:[e.jsx("span",{className:"w-6 h-6 mr-3",children:ge}),e.jsx("span",{children:Be})]}),Ks=({icon:ge,label:Be,action:oe})=>e.jsxs("button",{onClick:()=>{oe(),x(!1)},className:"w-full flex items-center px-4 py-2.5 text-sm font-medium rounded-lg text-slate-200 hover:bg-blue-800 hover:text-white",children:[e.jsx("span",{className:"w-6 h-6 mr-3",children:ge}),e.jsx("span",{children:Be})]}),vn=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center h-16 bg-blue-900 text-white",children:e.jsx("span",{className:"font-bold text-xl tracking-wide",children:"InQuBu Pro"})}),e.jsxs("nav",{className:"flex-1 px-2 py-4 flex flex-col overflow-y-auto",children:[u?e.jsx("div",{className:"flex-grow space-y-2",children:e.jsx(oA,{icon:e.jsx(r0,{}),label:"Jobs Board",targetView:"job-board"})}):e.jsxs("div",{className:"flex-grow space-y-2",children:[Rt("dashboard")&&e.jsx(oA,{icon:e.jsx(m3,{}),label:"Dashboard",targetView:"dashboard"}),(Rt("job-builder")||Rt("manage-jobs"))&&e.jsxs(To,{title:"Job Costing",children:[Rt("job-builder")&&e.jsx(Ks,{icon:e.jsx(AA,{}),label:"New Job",action:()=>ma("job")}),Rt("manage-jobs")&&e.jsx(oA,{icon:e.jsx($v,{}),label:"Manage Jobs",targetView:"manage-jobs"})]}),(Rt("manage-invoices")||Rt("manage-quotes")||Rt("manage-drafts")||Rt("manage-daily-takings"))&&e.jsxs(To,{title:"Sales",defaultOpen:!0,children:[Rt("manage-quotes")&&e.jsx(Ks,{icon:e.jsx(AA,{}),label:"New Quote",action:()=>ma("quote")}),Rt("manage-invoices")&&e.jsx(Ks,{icon:e.jsx(AA,{}),label:"New Invoice",action:()=>ma("invoice")}),Rt("manage-credit-notes")&&e.jsx(Ks,{icon:e.jsx(AA,{}),label:"New Credit Note",action:Fa}),Rt("manage-invoices")&&e.jsx(oA,{icon:e.jsx(K0,{}),label:"Invoices",targetView:"manage-invoices"}),Rt("manage-quotes")&&e.jsx(oA,{icon:e.jsx(Ph,{}),label:"Quotes",targetView:"manage-quotes"}),Rt("manage-drafts")&&e.jsx(oA,{icon:e.jsx(oo,{}),label:"Drafts",targetView:"manage-drafts"}),Rt("manage-credit-notes")&&e.jsx(oA,{icon:e.jsx(s5,{}),label:"Credit Notes",targetView:"manage-credit-notes"}),Rt("manage-daily-takings")&&e.jsx(oA,{icon:e.jsx(Ku,{}),label:"Daily Takings",targetView:"manage-daily-takings"})]}),(Rt("manage-purchase-orders")||Rt("manage-bills"))&&e.jsxs(To,{title:"Purchasing",children:[Rt("manage-purchase-orders")&&e.jsx(Ks,{icon:e.jsx(AA,{}),label:"New PO",action:RA}),Rt("manage-bills")&&e.jsx(Ks,{icon:e.jsx(AA,{}),label:"New Bill",action:Da}),Rt("manage-purchase-orders")&&e.jsx(oA,{icon:e.jsx(V0,{}),label:"Purchase Orders",targetView:"manage-purchase-orders"}),Rt("manage-bills")&&e.jsx(oA,{icon:e.jsx(z0,{}),label:"Bills",targetView:"manage-bills"})]}),(Rt("manage-customers")||Rt("manage-suppliers"))&&e.jsxs(To,{title:"Customers & Suppliers",children:[Rt("manage-customers")&&e.jsx(oA,{icon:e.jsx(AA,{}),label:"Add Customer",targetView:"add-customer"}),Rt("manage-customers")&&e.jsx(oA,{icon:e.jsx(qc,{}),label:"All Customers",targetView:"manage-customers"}),Rt("manage-suppliers")&&e.jsx(oA,{icon:e.jsx(AA,{}),label:"Add Supplier",targetView:"add-supplier"}),Rt("manage-suppliers")&&e.jsx(oA,{icon:e.jsx(F2,{}),label:"All Suppliers",targetView:"manage-suppliers"})]}),(Rt("manage-chart-of-accounts")||Rt("reports"))&&e.jsxs(To,{title:"Accounting",children:[Rt("manage-chart-of-accounts")&&e.jsx(oA,{icon:e.jsx(I3,{}),label:"Chart of Accounts",targetView:"manage-chart-of-accounts"}),Rt("reports")&&e.jsx(oA,{icon:e.jsx(y3,{}),label:"Reports",targetView:"reports"}),Rt("reports")&&e.jsx(oA,{icon:e.jsx(Ku,{}),label:"VAT Overview",targetView:"dashboard"})]}),(Rt("manage-inventory")||Rt("manage-supplier-inventory")||Rt("job-board"))&&e.jsxs(To,{title:"Inventory",children:[Rt("manage-inventory")&&e.jsx(oA,{icon:e.jsx(e5,{}),label:"Customer Inventory",targetView:"manage-inventory"}),Rt("manage-supplier-inventory")&&e.jsx(oA,{icon:e.jsx(p3,{}),label:"Supplier Inventory",targetView:"manage-supplier-inventory"}),Rt("job-board")&&e.jsx(oA,{icon:e.jsx(r0,{}),label:"Jobs Board",targetView:"job-board"})]}),e.jsxs(To,{title:"System",children:[Rt("settings")&&e.jsx(oA,{icon:e.jsx(g3,{}),label:"Settings",targetView:"settings"}),A.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(oA,{icon:e.jsx(Ku,{}),label:"Package Settings",targetView:"manage-package-settings"}),e.jsx(oA,{icon:e.jsx(a5,{}),label:"Team Members",targetView:"manage-team-members"})]}),(A.role==="admin"||A.role==="master")&&e.jsx(oA,{icon:e.jsx(qc,{}),label:"Manage Users",targetView:"user-management"}),A.subscriptionStatus!=="lifetime_free"&&e.jsx(oA,{icon:e.jsx(Wv,{}),label:"Subscription",targetView:"manage-subscription"})]})]}),e.jsx("div",{className:"mt-auto pt-2 space-y-2",children:e.jsx(Ks,{icon:e.jsx(v3,{}),label:"Logout",action:_t})})]})]}),nn=()=>{switch(h){case"dashboard":return e.jsx(Sb,{invoices:R,quotes:Ft,drafts:mt,purchaseOrders:Z,bills:S,creditNotes:de,settings:C,inventory:te,trackedJobs:Oe,onViewJob:()=>Xe("job-board"),onDownloadVatReportPdf:oe=>vs(oe,"vat-report")});case"create-invoice":case"create-quote":{const oe=S.filter(He=>!R.some(ct=>(ct.linkedBillIds||[]).includes(He.id))),ye=Ye?R.find(He=>He.id===Ye):null;return e.jsx(Ib,{mode:w,editingInvoice:ye,editingQuoteId:Ne,invoiceState:xe,setInvoiceState:Ce,inventory:te,customers:L,settings:C,categories:E,bills:S,unlinkedBills:oe,creditNotes:de,accounts:fe,onSaveDraft:Zr,onSaveQuote:ZA,onUpdateQuote:_s,onFinalizeInvoice:ls,onUpdateInvoice:Ga,onDownloadPdf:()=>vs(xe,w),onAddCustomer:Us,onViewCreditNote:jr,onCancel:()=>{ie(null),Te(null),Ce(wh(C,"measured")),Xe(w==="invoice"?"manage-invoices":"manage-quotes")}})}case"create-purchase-order":return e.jsx(Lb,{editingPOId:qe,poState:$e,setPOState:Ue,suppliers:Q,settings:C,supplierInventory:k,onSave:is,onUpdate:Ti,onApprove:Hi,onDownloadPdf:()=>vs($e,"po"),onAddSupplier:tr});case"create-bill":return e.jsx(Db,{editingBillId:xt,billState:At,setBillState:Le,suppliers:Q,settings:C,supplierInventory:k,onSave:Mi,onUpdate:Rs,onAddSupplier:tr});case"manage-inventory":return e.jsx(Hb,{inventory:te,supplierInventory:k,categories:E,settings:C,currentUser:A,canUseMeasured:Vt.allowMeasuredPrice,onAddItem:oe=>O(ye=>[...ye,{...oe,id:crypto.randomUUID()}]),onAddItems:oe=>{const ye=oe.map(He=>({...He,id:crypto.randomUUID()}));O(He=>[...He,...ye])},onUpdateItem:oe=>O(ye=>ye.map(He=>He.id===oe.id?oe:He)),onRemoveItem:oe=>O(ye=>ye.filter(He=>He.id!==oe)),onUpdateItems:oe=>{O(ye=>{const He=new Map(oe.map(ct=>[ct.id,ct]));return ye.map(ct=>He.has(ct.id)?He.get(ct.id):ct)})},onRemoveItems:oe=>O(ye=>ye.filter(He=>!oe.includes(He.id))),onAddCategory:oe=>D(ye=>[...ye,{id:crypto.randomUUID(),name:oe}]),onRemoveCategory:oe=>D(ye=>ye.filter(He=>He.id!==oe)),onUpdateCategory:(oe,ye)=>D(He=>He.map(ct=>ct.id===oe?{...ct,name:ye}:ct))});case"manage-customers":return e.jsx(Ob,{customers:L,currentUser:A,onRemoveCustomer:oe=>F(ye=>ye.filter(He=>He.id!==oe)),onViewHistory:Fr,onImportCustomers:oe=>F(oe),onNavigateToAdd:()=>{Ot(null),Xe("add-customer")},onNavigateToEdit:oe=>{Ot(oe.id),Xe("add-customer")}});case"add-customer":const ge=Ia?L.find(oe=>oe.id===Ia):void 0;return e.jsx(kb,{initialCustomer:ge,onSave:oe=>{Us(oe),Xe("manage-customers")},onUpdate:oe=>{F(ye=>ye.map(He=>He.id===oe.id?oe:He)),Xt({title:"Success",message:`Customer "${oe.name}" has been updated.`}),Xe("manage-customers")},onCancel:()=>Xe("manage-customers")});case"manage-suppliers":return e.jsx(_b,{suppliers:Q,currentUser:A,onRemoveSupplier:oe=>_(ye=>ye.filter(He=>He.id!==oe)),onImportSuppliers:oe=>_(oe),onNavigateToAdd:()=>{YA(null),Xe("add-supplier")},onNavigateToEdit:oe=>{YA(oe.id),Xe("add-supplier")}});case"add-supplier":const Be=La?Q.find(oe=>oe.id===La):void 0;return e.jsx(Rb,{initialSupplier:Be,onSave:oe=>{tr(oe),Xe("manage-suppliers")},onUpdate:oe=>{_(ye=>ye.map(He=>He.id===oe.id?oe:He)),Xt({title:"Success",message:`Supplier "${oe.name}" has been updated.`}),Xe("manage-suppliers")},onCancel:()=>Xe("manage-suppliers")});case"manage-invoices":return e.jsx(Pb,{invoices:R,drafts:mt,onLoadDraft:_n,onRemoveDraft:bl,onRemoveInvoice:Wr,creditNotes:de,settings:C,currentUser:A,onAddPayment:nr,onRemovePayment:sn,onApplyCreditNote:Nr,onLoadInvoiceForEdit:_i,onLoadInvoiceForCredit:ar,selectedInvoiceId:gs,setSelectedInvoiceId:ns,fromCustomerHistory:me,onBackToCustomerHistory:()=>{Xe("customer-history"),ns(null)},onDownloadInvoice:oe=>{const ye=R.find(He=>He.id===oe);ye&&vs(ye.state,"invoice")},onOpenEmailModal:Rn});case"manage-purchase-orders":return e.jsx(Kb,{purchaseOrders:Z,settings:C,currentUser:A,onLoadPO:xn,onRemovePO:oe=>ue(ye=>ye.filter(He=>He.id!==oe)),onImportPOs:oe=>ue(oe),onDownloadPO:oe=>{const ye=Z.find(He=>He.id===oe);ye&&vs(ye.state,"po")},onAddPayment:Ta,onRemovePayment:Ps});case"manage-bills":return e.jsx(Vb,{bills:S,settings:C,currentUser:A,onLoadBill:Ri,onRemoveBill:oe=>M(ye=>ye.filter(He=>He.id!==oe)),onImportBills:oe=>M(oe),onAddPayment:ai,onRemovePayment:rr});case"manage-quotes":return e.jsx(zb,{quotes:Ft,settings:C,currentUser:A,onLoadQuote:Es,onRemoveQuote:oe=>Fe(ye=>ye.filter(He=>He.id!==oe)),onConvertToInvoice:sr,onDownloadQuote:oe=>{const ye=Ft.find(He=>He.id===oe);ye&&vs(ye.state,"quote")},onOpenEmailModal:Rn});case"manage-drafts":return e.jsx(qb,{drafts:mt,onLoadDraft:_n,onRemoveDraft:oe=>wt(ye=>ye.filter(He=>He.id!==oe))});case"settings":return e.jsx(Gb,{settings:C,onSave:ca,onCancel:()=>Xe("dashboard"),currentUser:A});case"customer-history":{const oe=L.find(ye=>ye.id===oa);if(oe){const ye=R.filter(St=>St.state.customerName===oe.name),He=Ft.filter(St=>St.state.customerName===oe.name),ct=de.filter(St=>St.state.customerName===oe.name);return e.jsx(vj,{customer:oe,invoices:ye,quotes:He,creditNotes:ct,settings:C,onBack:()=>Xe("manage-customers"),onViewInvoice:St=>{ns(St),Ze(!0),Xe("manage-invoices")},onViewQuote:St=>Es(St),onUpdateCustomer:St=>{F(dA=>dA.map(BA=>BA.id===St.id?St:BA))}})}return e.jsx("p",{children:"Customer not found."})}case"manage-supplier-inventory":return e.jsx(jj,{supplierInventory:k,suppliers:Q,settings:C,currentUser:A,categories:G,onAddItem:oe=>{const ye=crypto.randomUUID();P(St=>[...St,{...oe,id:ye}]);let He;if(oe.categoryId){const St=G.find(dA=>dA.id===oe.categoryId);if(St){const dA=E.find(BA=>BA.name.toLowerCase()===St.name.toLowerCase());He=dA==null?void 0:dA.id}}const ct={name:oe.name,sku:oe.itemCode,price:0,vatRate:C.defaultVatRate,type:oe.type,measurementUnit:oe.type===Aa.MEASURED?ha.SQ_M:void 0,categoryId:He,linkedSupplierItemIds:[ye],status:"active",quantity:0,isParent:!1,definedAttributeKeys:[],definedAttributeValues:{}};O(St=>[...St,{...ct,id:crypto.randomUUID()}])},onUpdateItem:oe=>P(ye=>ye.map(He=>He.id===oe.id?oe:He)),onRemoveItem:oe=>P(ye=>ye.filter(He=>He.id!==oe)),onAddCategory:oe=>{const ye=crypto.randomUUID();T(He=>[...He,{id:ye,name:oe}]),E.some(He=>He.name.toLowerCase()===oe.toLowerCase())||D(He=>[...He,{id:crypto.randomUUID(),name:oe}])},onUpdateCategory:(oe,ye,He)=>T(ct=>ct.map(St=>St.id===oe?{...St,name:ye,color:He}:St)),onRemoveCategory:oe=>T(ye=>ye.filter(He=>He.id!==oe)),onAddSupplier:tr});case"user-management":return e.jsx(s2,{users:n,setUsers:r,currentUser:A,subscriptionPackages:l,onOpenBulkEmail:()=>Kt(!0),onOpenUserEmail:Pi});case"manage-subscription":return e.jsx(Lj,{currentUser:A,setCurrentUser:s,users:n,setUsers:r,packages:l});case"manage-package-settings":return e.jsx(Oj,{packages:l,setPackages:o,users:n});case"user-management":return e.jsx(s2,{users:n,setUsers:r,currentUser:A,subscriptionPackages:l,onOpenBulkEmail:()=>Kt(!0),onOpenUserEmail:Pi});case"reports":return e.jsx(zj,{customers:L,suppliers:Q,invoices:R,purchaseOrders:Z,bills:S,inventory:te,creditNotes:de,marketplaceAccounts:[],marketplaceStatements:[],settings:C,onDownloadPdf:vs,onViewHistory:Fr});case"manage-daily-takings":return e.jsx(Gj,{dailyTakings:vt,settings:C,customers:L,onAddTaking:kn,onUpdateTaking:mn,onRemoveTaking:go,onAddCustomer:Us});case"job-builder":return e.jsx(Yj,{editingJobId:Tt,jobState:K,setJobState:Ge,customers:L,suppliers:Q,inventory:te,supplierInventory:k,settings:C,categories:E,onSaveJob:Cr,onConvertToQuote:Ai,onConvertToInvoice:Gt,onAddCustomer:Us});case"manage-jobs":return e.jsx(Zj,{jobs:Y,settings:C,onLoadJob:WA,onDeleteJob:ki});case"job-board":return e.jsx(o3,{jobs:Oe,onUpdateJob:pl,onDeleteTrackedJob:$r,onCreateJob:Ar,onCreateQuoteFromJobs:gA,customTaskGroups:ee,onUpdateCustomTask:Oi,onCreateCustomTask:gl,onDeleteCustomTask:gn,onAddCustomGroup:xo,onDeleteGroup:xl,onUpdateGroup:vl,onUpdateGroupColumns:an,onDuplicateGroup:ei,onDuplicateColumn:ti,users:n,currentUser:A,taskColumns:U,setTaskColumns:X,supplierCategories:G});case"manage-team-members":return e.jsx(u3,{users:n,setUsers:r,currentUser:A});case"create-credit-note":if(st){const oe=!!Pt;return e.jsx(d3,{creditNoteState:st,setCreditNoteState:_e,inventory:te,customers:L,settings:C,onSave:xs,onAddCustomer:Us,readOnly:oe,onClose:oe?()=>Xe("manage-invoices"):void 0})}return e.jsx("p",{children:"Error: No credit note data to create."});case"manage-credit-notes":return e.jsx(h3,{creditNotes:de,settings:C,onRemoveCreditNote:oe=>J(ye=>ye.filter(He=>He.id!==oe)),onDownloadPdf:oe=>vs(oe,"credit-note")});case"manage-chart-of-accounts":return e.jsx(f3,{accounts:fe,currentUser:A,onAddAccount:Di,onUpdateAccount:ml,onRemoveAccount:Yr,settings:C,onUpdateSettings:N});default:return e.jsx("div",{children:"Not found"})}};return e.jsxs("div",{className:"flex h-screen bg-slate-100",children:[e.jsx("aside",{className:"hidden md:flex md:flex-shrink-0",children:e.jsx("div",{className:"flex flex-col w-64 bg-blue-900",children:vn})}),e.jsxs("div",{className:`fixed inset-0 z-40 flex md:hidden ${B?"":"pointer-events-none"}`,children:[e.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-60 transition-opacity ${B?"opacity-100":"opacity-0"}`,onClick:()=>x(!1)}),e.jsxs("div",{className:`relative flex-1 flex flex-col max-w-xs w-full bg-blue-900 transform transition-transform ${B?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:e.jsxs("button",{onClick:()=>x(!1),className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[e.jsx("span",{className:"sr-only",children:"Close sidebar"}),e.jsx(er,{className:"h-6 w-6 text-white"})]})}),vn]})]}),e.jsxs("div",{className:"flex flex-col flex-1 w-0 overflow-hidden",children:[et&&A.role!=="admin"&&!u&&e.jsx(Tj,{currentUser:A,onUpgradeClick:()=>Xe("manage-subscription")}),e.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow md:hidden",children:[e.jsxs("button",{onClick:()=>x(!0),className:"px-4 border-r border-slate-200 text-slate-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"Open sidebar"}),e.jsx(x3,{className:"h-6 w-6"})]}),e.jsx("div",{className:"flex-1 px-4 flex justify-between items-center",children:e.jsx("div",{className:"flex-1 flex",children:e.jsx("span",{className:"font-semibold text-lg",children:"InQuBu Pro"})})})]}),e.jsx("main",{className:"flex-1 relative z-0 overflow-y-auto focus:outline-none p-4 sm:p-6 lg:p-8",children:nn()})]}),e.jsx(bj,{isOpen:!!SA,onClose:()=>Xt(null),title:(SA==null?void 0:SA.title)||"",message:(SA==null?void 0:SA.message)||""}),e.jsx(Bj,{isOpen:lA.isOpen,onClose:()=>An({isOpen:!1,action:null}),onSelect:rs}),e.jsx(qj,{isOpen:!!MA,onClose:()=>VA(null),initialData:MA,settings:C}),e.jsx(N3,{isOpen:uA,onClose:()=>Kt(!1),users:n.filter(ge=>ge.role==="master")}),e.jsx("div",{style:{position:"absolute",left:"-9999px",top:0,width:"210mm"},children:(gt==null?void 0:gt.type)==="credit-note"?e.jsx(E3,{id:"printable-document",creditNote:gt.data,settings:C,inventory:te,customers:L}):(gt==null?void 0:gt.type)==="po"?e.jsx(w3,{id:"printable-document",poState:gt.data,settings:C,suppliers:Q}):(gt==null?void 0:gt.type)==="vat-report"?e.jsx(B3,{id:"printable-document",...gt.data}):(gt==null?void 0:gt.type)==="pnl-report"?e.jsx(C3,{id:"printable-document",...gt.data}):(gt==null?void 0:gt.type)==="balance-sheet-report"?e.jsx(j3,{id:"printable-document",...gt.data}):(gt==null?void 0:gt.type)==="cash-flow-report"?e.jsx(F3,{id:"printable-document",...gt.data}):(gt==null?void 0:gt.type)==="income-by-customer-report"?e.jsx(S3,{id:"printable-document",...gt.data}):(gt==null?void 0:gt.type)==="paid-to-suppliers-report"?e.jsx(Q3,{id:"printable-document",...gt.data}):(gt==null?void 0:gt.type)==="account-balances-report"?e.jsx(U3,{id:"printable-document",...gt.data}):gt?e.jsx(b3,{id:"printable-document",invoiceState:gt.data,settings:C,inventory:te,customers:L,mode:gt.type,appliedCredits:gt.appliedCredits||[]}):null})]})},k3=()=>{const[A,s]=UA("users",[]),[n,r]=UA("currentUser",null),[l,o]=UA("subscription-packages",H3);se.useEffect(()=>{l.some(m=>"invoiceType"in m)&&o(m=>m.map(w=>{const v=w;if("invoiceType"in v){const{invoiceType:B,...x}=v,C=v.name==="Pro";return{...x,allowFixedPrice:C||B==="fixed",allowMeasuredPrice:C||B==="measured"}}return w}))},[]),se.useEffect(()=>{if(A.length===0||!A.some(h=>h.role==="admin")){const h={id:crypto.randomUUID(),username:"masteradmin",password:"masterpassword",role:"admin",teamId:"admin_team",subscriptionStatus:"admin_free",email:"admin@example.com",isActive:!0},m=A.filter(w=>w.role!=="admin");s([h,...m])}},[]);const[u,d]=se.useState("login");return n?n.subscriptionStatus==="needs_selection"?e.jsx(Dj,{currentUser:n,setCurrentUser:r,users:A,setUsers:s,packages:l}):e.jsx(O3,{currentUser:n,setCurrentUser:r,users:A,setUsers:s,subscriptionPackages:l,setSubscriptionPackages:o}):u==="login"?e.jsx(Fj,{onLogin:h=>r(h),onNavigateToRegister:()=>d("register"),users:A}):e.jsx(Sj,{onRegisterSuccess:()=>d("login"),onNavigateToLogin:()=>d("login"),users:A,setUsers:s})},n5=document.getElementById("root");if(!n5)throw new Error("Could not find root element to mount to");const _3=yb.createRoot(n5);_3.render(e.jsx(Qi.StrictMode,{children:e.jsx(k3,{})}));export{XA as _,R3 as c,v2 as g};
